{"version":3,"file":"index.cjs","sources":["../../../node_modules/diagram-js/lib/core/EventBus.js","../src/core/Debounce.js","../src/core/FormFieldRegistry.js","../src/core/FormLayoutValidator.js","../src/render/components/Util.js","../src/render/components/editor-form-fields/EditorIFrame.js","../src/render/context/DragAndDropContext.js","../src/render/context/FormEditorContext.js","../src/render/hooks/useService.js","../src/render/hooks/usePrevious.js","../src/render/hooks/useDebounce.js","../src/render/components/icons/Close.svg","../src/render/components/icons/Delete.svg","../src/render/components/icons/Draggable.svg","../src/render/components/icons/Search.svg","../src/render/components/icons/EmptyForm.svg","../src/render/components/editor-form-fields/EditorText.js","../src/render/components/editor-form-fields/EditorHtml.js","../src/render/components/editor-form-fields/EditorTable.js","../src/render/components/editor-form-fields/EditorExpressionField.js","../src/render/components/editor-form-fields/index.js","../src/render/EditorFormFields.js","../src/render/components/ModularSection.js","../src/features/render-injection/slot-fill/FillContext.js","../src/features/render-injection/slot-fill/Fill.js","../src/features/render-injection/slot-fill/SlotContext.js","../src/features/render-injection/slot-fill/Slot.js","../src/features/render-injection/slot-fill/SlotFillRoot.js","../src/features/palette/components/PaletteEntry.js","../src/features/palette/components/Palette.js","../src/features/render-injection/components/InjectedRendersRoot.js","../src/render/util/Cursor.js","../src/features/dragging/Dragging.js","../src/render/components/FieldDragPreview.js","../src/render/components/FieldResizer.js","../src/render/components/FormEditor.js","../src/render/Renderer.js","../src/render/index.js","../src/core/index.js","../../../node_modules/diagram-js/lib/features/editor-actions/EditorActions.js","../../../node_modules/diagram-js/lib/features/editor-actions/index.js","../src/features/editor-actions/FormEditorActions.js","../src/features/editor-actions/index.js","../src/features/expression-language/EditorTemplating.js","../src/features/expression-language/index.js","../../../node_modules/diagram-js/lib/features/keyboard/KeyboardUtil.js","../../../node_modules/diagram-js/lib/features/keyboard/Keyboard.js","../../../node_modules/diagram-js/lib/features/keyboard/KeyboardBindings.js","../../../node_modules/diagram-js/lib/features/keyboard/index.js","../src/features/keyboard/FormEditorKeyboardBindings.js","../src/features/keyboard/index.js","../src/features/dragging/index.js","../../../node_modules/diagram-js/lib/command/CommandStack.js","../../../node_modules/diagram-js/lib/command/index.js","../../../node_modules/diagram-js/lib/command/CommandInterceptor.js","../src/features/modeling/behavior/IdBehavior.js","../src/features/modeling/behavior/KeyBehavior.js","../src/features/modeling/behavior/PathBehavior.js","../src/features/modeling/behavior/ValidateBehavior.js","../src/features/modeling/behavior/OptionsSourceBehavior.js","../src/features/modeling/behavior/ColumnsSourceBehavior.js","../src/features/modeling/behavior/TableDataSourceBehavior.js","../src/features/modeling/behavior/index.js","../src/features/modeling/cmd/Util.js","../src/features/modeling/FormLayoutUpdater.js","../src/features/modeling/cmd/AddFormFieldHandler.js","../src/features/modeling/cmd/EditFormFieldHandler.js","../src/features/modeling/cmd/MoveFormFieldHandler.js","../src/features/modeling/cmd/RemoveFormFieldHandler.js","../src/features/modeling/cmd/UpdateIdClaimHandler.js","../src/features/modeling/cmd/UpdateKeyClaimHandler.js","../src/features/modeling/cmd/UpdatePathClaimHandler.js","../src/features/modeling/Modeling.js","../src/features/modeling/index.js","../src/features/selection/Selection.js","../src/features/selection/SelectionBehavior.js","../src/features/selection/index.js","../src/features/SectionModuleBase.js","../src/features/palette/PaletteRenderer.js","../src/features/palette/index.js","../../../node_modules/@bpmn-io/properties-panel/dist/index.esm.js","../src/features/properties-panel/context/FormPropertiesPanelContext.js","../src/features/properties-panel/Util.js","../src/features/properties-panel/hooks/usePropertiesPanelService.js","../src/features/properties-panel/hooks/useVariables.js","../src/features/properties-panel/PropertiesPanelHeaderProvider.js","../src/features/properties-panel/PropertiesPanelPlaceholderProvider.js","../src/features/properties-panel/PropertiesPanel.js","../src/features/properties-panel/PropertiesPanelRenderer.js","../src/features/properties-panel/entries/ActionEntry.js","../src/features/properties-panel/entries/AltTextEntry.js","../src/features/properties-panel/entries/ColumnsEntry.js","../src/features/properties-panel/entries/DescriptionEntry.js","../src/features/properties-panel/entries/DefaultValueEntry.js","../src/features/properties-panel/entries/DisabledEntry.js","../src/features/properties-panel/entries/IdEntry.js","../src/features/properties-panel/entries/KeyEntry.js","../src/features/properties-panel/entries/PathEntry.js","../src/features/properties-panel/entries/factories/simpleBoolEntryFactory.js","../src/features/properties-panel/entries/factories/simpleSelectEntryFactory.js","../src/features/properties-panel/entries/factories/simpleRangeIntegerEntryFactory.js","../src/features/properties-panel/entries/GroupAppearanceEntry.js","../src/features/properties-panel/entries/LabelEntry.js","../src/features/properties-panel/entries/HeightEntry.js","../src/features/properties-panel/entries/IFrameHeightEntry.js","../src/features/properties-panel/entries/IFrameUrlEntry.js","../src/features/properties-panel/entries/ImageSourceEntry.js","../src/features/properties-panel/entries/TextEntry.js","../src/features/properties-panel/entries/HtmlEntry.js","../src/features/properties-panel/entries/NumberEntries.js","../src/features/properties-panel/entries/ExpressionFieldEntries.js","../src/features/properties-panel/entries/NumberSerializationEntry.js","../src/features/properties-panel/entries/DateTimeEntry.js","../src/features/properties-panel/entries/DateTimeConstraintsEntry.js","../src/features/properties-panel/entries/DateTimeFormatEntry.js","../src/features/properties-panel/entries/SelectEntries.js","../src/features/properties-panel/entries/ValueEntry.js","../src/features/properties-panel/entries/CustomValueEntry.js","../src/features/properties-panel/components/AutoFocusSelect.js","../src/features/properties-panel/entries/OptionsSourceSelectEntry.js","../src/features/properties-panel/entries/InputKeyOptionsSourceEntry.js","../src/features/properties-panel/entries/StaticOptionsSourceEntry.js","../src/features/properties-panel/entries/AdornerEntry.js","../src/features/properties-panel/entries/ReadonlyEntry.js","../src/features/properties-panel/entries/LayouterAppearanceEntry.js","../src/features/properties-panel/entries/RepeatableEntry.js","../src/features/properties-panel/entries/ConditionEntry.js","../src/features/properties-panel/entries/OptionsExpressionEntry.js","../src/features/properties-panel/entries/TableDataSourceEntry.js","../src/features/properties-panel/entries/PaginationEntry.js","../src/features/properties-panel/entries/RowCountEntry.js","../src/features/properties-panel/entries/HeadersSourceSelectEntry.js","../src/features/properties-panel/entries/ColumnsExpressionEntry.js","../src/features/properties-panel/entries/ColumnEntry.js","../src/features/properties-panel/entries/StaticColumnsSourceEntry.js","../src/features/properties-panel/groups/GeneralGroup.js","../src/features/properties-panel/groups/SerializationGroup.js","../src/features/properties-panel/groups/ConstraintsGroup.js","../src/features/properties-panel/groups/ValidationGroup.js","../src/features/properties-panel/groups/OptionsGroups.js","../src/features/properties-panel/groups/CustomPropertiesGroup.js","../src/features/properties-panel/groups/AppearanceGroup.js","../src/features/properties-panel/groups/LayoutGroup.js","../src/features/properties-panel/groups/SecurityAttributesGroup.js","../src/features/properties-panel/groups/ConditionGroup.js","../src/features/properties-panel/groups/TableHeaderGroups.js","../src/features/properties-panel/PropertiesProvider.js","../src/features/properties-panel/index.js","../src/features/render-injection/RenderInjector.js","../src/features/render-injection/index.js","../src/render/components/icons/Repeat.svg","../src/features/repeat-render/EditorRepeatRenderManager.js","../src/features/repeat-render/index.js","../src/FormEditor.js","../src/index.js"],"sourcesContent":["import {\n  isFunction,\n  isArray,\n  isNumber,\n  bind,\n  assign\n} from 'min-dash';\n\nvar FN_REF = '__fn';\n\nvar DEFAULT_PRIORITY = 1000;\n\nvar slice = Array.prototype.slice;\n\n/**\n * @typedef { {\n *   stopPropagation(): void;\n *   preventDefault(): void;\n *   cancelBubble: boolean;\n *   defaultPrevented: boolean;\n *   returnValue: any;\n * } } Event\n */\n\n/**\n * @template E\n *\n * @typedef { (event: E & Event, ...any) => any } EventBusEventCallback\n */\n\n/**\n * @typedef { {\n *  priority: number;\n *  next: EventBusListener | null;\n *  callback: EventBusEventCallback<any>;\n * } } EventBusListener\n */\n\n/**\n * A general purpose event bus.\n *\n * This component is used to communicate across a diagram instance.\n * Other parts of a diagram can use it to listen to and broadcast events.\n *\n *\n * ## Registering for Events\n *\n * The event bus provides the {@link EventBus#on} and {@link EventBus#once}\n * methods to register for events. {@link EventBus#off} can be used to\n * remove event registrations. Listeners receive an instance of {@link Event}\n * as the first argument. It allows them to hook into the event execution.\n *\n * ```javascript\n *\n * // listen for event\n * eventBus.on('foo', function(event) {\n *\n *   // access event type\n *   event.type; // 'foo'\n *\n *   // stop propagation to other listeners\n *   event.stopPropagation();\n *\n *   // prevent event default\n *   event.preventDefault();\n * });\n *\n * // listen for event with custom payload\n * eventBus.on('bar', function(event, payload) {\n *   console.log(payload);\n * });\n *\n * // listen for event returning value\n * eventBus.on('foobar', function(event) {\n *\n *   // stop event propagation + prevent default\n *   return false;\n *\n *   // stop event propagation + return custom result\n *   return {\n *     complex: 'listening result'\n *   };\n * });\n *\n *\n * // listen with custom priority (default=1000, higher is better)\n * eventBus.on('priorityfoo', 1500, function(event) {\n *   console.log('invoked first!');\n * });\n *\n *\n * // listen for event and pass the context (`this`)\n * eventBus.on('foobar', function(event) {\n *   this.foo();\n * }, this);\n * ```\n *\n *\n * ## Emitting Events\n *\n * Events can be emitted via the event bus using {@link EventBus#fire}.\n *\n * ```javascript\n *\n * // false indicates that the default action\n * // was prevented by listeners\n * if (eventBus.fire('foo') === false) {\n *   console.log('default has been prevented!');\n * };\n *\n *\n * // custom args + return value listener\n * eventBus.on('sum', function(event, a, b) {\n *   return a + b;\n * });\n *\n * // you can pass custom arguments + retrieve result values.\n * var sum = eventBus.fire('sum', 1, 2);\n * console.log(sum); // 3\n * ```\n *\n * @template [EventMap=null]\n */\nexport default function EventBus() {\n\n  /**\n   * @type { Record<string, EventBusListener> }\n   */\n  this._listeners = {};\n\n  // cleanup on destroy on lowest priority to allow\n  // message passing until the bitter end\n  this.on('diagram.destroy', 1, this._destroy, this);\n}\n\n/**\n * @overlord\n *\n * Register an event listener for events with the given name.\n *\n * The callback will be invoked with `event, ...additionalArguments`\n * that have been passed to {@link EventBus#fire}.\n *\n * Returning false from a listener will prevent the events default action\n * (if any is specified). To stop an event from being processed further in\n * other listeners execute {@link Event#stopPropagation}.\n *\n * Returning anything but `undefined` from a listener will stop the listener propagation.\n *\n * @template T\n *\n * @param {string|string[]} events to subscribe to\n * @param {number} [priority=1000] listen priority\n * @param {EventBusEventCallback<T>} callback\n * @param {any} [that] callback context\n */\n/**\n * Register an event listener for events with the given name.\n *\n * The callback will be invoked with `event, ...additionalArguments`\n * that have been passed to {@link EventBus#fire}.\n *\n * Returning false from a listener will prevent the events default action\n * (if any is specified). To stop an event from being processed further in\n * other listeners execute {@link Event#stopPropagation}.\n *\n * Returning anything but `undefined` from a listener will stop the listener propagation.\n *\n * @template {keyof EventMap} EventName\n *\n * @param {EventName} events to subscribe to\n * @param {number} [priority=1000] listen priority\n * @param {EventBusEventCallback<EventMap[EventName]>} callback\n * @param {any} [that] callback context\n */\nEventBus.prototype.on = function(events, priority, callback, that) {\n\n  events = isArray(events) ? events : [ events ];\n\n  if (isFunction(priority)) {\n    that = callback;\n    callback = priority;\n    priority = DEFAULT_PRIORITY;\n  }\n\n  if (!isNumber(priority)) {\n    throw new Error('priority must be a number');\n  }\n\n  var actualCallback = callback;\n\n  if (that) {\n    actualCallback = bind(callback, that);\n\n    // make sure we remember and are able to remove\n    // bound callbacks via {@link #off} using the original\n    // callback\n    actualCallback[FN_REF] = callback[FN_REF] || callback;\n  }\n\n  var self = this;\n\n  events.forEach(function(e) {\n    self._addListener(e, {\n      priority: priority,\n      callback: actualCallback,\n      next: null\n    });\n  });\n};\n\n/**\n * @overlord\n *\n * Register an event listener that is called only once.\n *\n * @template T\n *\n * @param {string|string[]} events to subscribe to\n * @param {number} [priority=1000] the listen priority\n * @param {EventBusEventCallback<T>} callback\n * @param {any} [that] callback context\n */\n/**\n * Register an event listener that is called only once.\n *\n * @template {keyof EventMap} EventName\n *\n * @param {EventName} events to subscribe to\n * @param {number} [priority=1000] listen priority\n * @param {EventBusEventCallback<EventMap[EventName]>} callback\n * @param {any} [that] callback context\n */\nEventBus.prototype.once = function(events, priority, callback, that) {\n  var self = this;\n\n  if (isFunction(priority)) {\n    that = callback;\n    callback = priority;\n    priority = DEFAULT_PRIORITY;\n  }\n\n  if (!isNumber(priority)) {\n    throw new Error('priority must be a number');\n  }\n\n  function wrappedCallback() {\n    wrappedCallback.__isTomb = true;\n\n    var result = callback.apply(that, arguments);\n\n    self.off(events, wrappedCallback);\n\n    return result;\n  }\n\n  // make sure we remember and are able to remove\n  // bound callbacks via {@link #off} using the original\n  // callback\n  wrappedCallback[FN_REF] = callback;\n\n  this.on(events, priority, wrappedCallback);\n};\n\n\n/**\n * Removes event listeners by event and callback.\n *\n * If no callback is given, all listeners for a given event name are being removed.\n *\n * @param {string|string[]} events\n * @param {EventBusEventCallback} [callback]\n */\nEventBus.prototype.off = function(events, callback) {\n\n  events = isArray(events) ? events : [ events ];\n\n  var self = this;\n\n  events.forEach(function(event) {\n    self._removeListener(event, callback);\n  });\n\n};\n\n\n/**\n * Create an event recognized be the event bus.\n *\n * @param {Object} data Event data.\n *\n * @return {Event} An event that will be recognized by the event bus.\n */\nEventBus.prototype.createEvent = function(data) {\n  var event = new InternalEvent();\n\n  event.init(data);\n\n  return event;\n};\n\n\n/**\n * Fires an event.\n *\n * @example\n *\n * ```javascript\n * // fire event by name\n * events.fire('foo');\n *\n * // fire event object with nested type\n * var event = { type: 'foo' };\n * events.fire(event);\n *\n * // fire event with explicit type\n * var event = { x: 10, y: 20 };\n * events.fire('element.moved', event);\n *\n * // pass additional arguments to the event\n * events.on('foo', function(event, bar) {\n *   alert(bar);\n * });\n *\n * events.fire({ type: 'foo' }, 'I am bar!');\n * ```\n *\n * @param {string} [type] event type\n * @param {Object} [data] event or event data\n * @param {...any} [args] additional arguments the callback will be called with.\n *\n * @return {any} The return value. Will be set to `false` if the default was prevented.\n */\nEventBus.prototype.fire = function(type, data) {\n  var event,\n      firstListener,\n      returnValue,\n      args;\n\n  args = slice.call(arguments);\n\n  if (typeof type === 'object') {\n    data = type;\n    type = data.type;\n  }\n\n  if (!type) {\n    throw new Error('no event type specified');\n  }\n\n  firstListener = this._listeners[type];\n\n  if (!firstListener) {\n    return;\n  }\n\n  // we make sure we fire instances of our home made\n  // events here. We wrap them only once, though\n  if (data instanceof InternalEvent) {\n\n    // we are fine, we alread have an event\n    event = data;\n  } else {\n    event = this.createEvent(data);\n  }\n\n  // ensure we pass the event as the first parameter\n  args[0] = event;\n\n  // original event type (in case we delegate)\n  var originalType = event.type;\n\n  // update event type before delegation\n  if (type !== originalType) {\n    event.type = type;\n  }\n\n  try {\n    returnValue = this._invokeListeners(event, args, firstListener);\n  } finally {\n\n    // reset event type after delegation\n    if (type !== originalType) {\n      event.type = originalType;\n    }\n  }\n\n  // set the return value to false if the event default\n  // got prevented and no other return value exists\n  if (returnValue === undefined && event.defaultPrevented) {\n    returnValue = false;\n  }\n\n  return returnValue;\n};\n\n/**\n * Handle an error by firing an event.\n *\n * @param {Error} error The error to be handled.\n *\n * @return {boolean} Whether the error was handled.\n */\nEventBus.prototype.handleError = function(error) {\n  return this.fire('error', { error: error }) === false;\n};\n\n\nEventBus.prototype._destroy = function() {\n  this._listeners = {};\n};\n\n/**\n * @param {Event} event\n * @param {any[]} args\n * @param {EventBusListener} listener\n *\n * @return {any}\n */\nEventBus.prototype._invokeListeners = function(event, args, listener) {\n\n  var returnValue;\n\n  while (listener) {\n\n    // handle stopped propagation\n    if (event.cancelBubble) {\n      break;\n    }\n\n    returnValue = this._invokeListener(event, args, listener);\n\n    listener = listener.next;\n  }\n\n  return returnValue;\n};\n\n/**\n * @param {Event} event\n * @param {any[]} args\n * @param {EventBusListener} listener\n *\n * @return {any}\n */\nEventBus.prototype._invokeListener = function(event, args, listener) {\n\n  var returnValue;\n\n  if (listener.callback.__isTomb) {\n    return returnValue;\n  }\n\n  try {\n\n    // returning false prevents the default action\n    returnValue = invokeFunction(listener.callback, args);\n\n    // stop propagation on return value\n    if (returnValue !== undefined) {\n      event.returnValue = returnValue;\n      event.stopPropagation();\n    }\n\n    // prevent default on return false\n    if (returnValue === false) {\n      event.preventDefault();\n    }\n  } catch (error) {\n    if (!this.handleError(error)) {\n      console.error('unhandled error in event listener', error);\n\n      throw error;\n    }\n  }\n\n  return returnValue;\n};\n\n/**\n * Add new listener with a certain priority to the list\n * of listeners (for the given event).\n *\n * The semantics of listener registration / listener execution are\n * first register, first serve: New listeners will always be inserted\n * after existing listeners with the same priority.\n *\n * Example: Inserting two listeners with priority 1000 and 1300\n *\n *    * before: [ 1500, 1500, 1000, 1000 ]\n *    * after: [ 1500, 1500, (new=1300), 1000, 1000, (new=1000) ]\n *\n * @param {string} event\n * @param {EventBusListener} newListener\n */\nEventBus.prototype._addListener = function(event, newListener) {\n\n  var listener = this._getListeners(event),\n      previousListener;\n\n  // no prior listeners\n  if (!listener) {\n    this._setListeners(event, newListener);\n\n    return;\n  }\n\n  // ensure we order listeners by priority from\n  // 0 (high) to n > 0 (low)\n  while (listener) {\n\n    if (listener.priority < newListener.priority) {\n\n      newListener.next = listener;\n\n      if (previousListener) {\n        previousListener.next = newListener;\n      } else {\n        this._setListeners(event, newListener);\n      }\n\n      return;\n    }\n\n    previousListener = listener;\n    listener = listener.next;\n  }\n\n  // add new listener to back\n  previousListener.next = newListener;\n};\n\n\n/**\n * @param {string} name\n *\n * @return {EventBusListener}\n */\nEventBus.prototype._getListeners = function(name) {\n  return this._listeners[name];\n};\n\n/**\n * @param {string} name\n * @param {EventBusListener} listener\n */\nEventBus.prototype._setListeners = function(name, listener) {\n  this._listeners[name] = listener;\n};\n\nEventBus.prototype._removeListener = function(event, callback) {\n\n  var listener = this._getListeners(event),\n      nextListener,\n      previousListener,\n      listenerCallback;\n\n  if (!callback) {\n\n    // clear listeners\n    this._setListeners(event, null);\n\n    return;\n  }\n\n  while (listener) {\n\n    nextListener = listener.next;\n\n    listenerCallback = listener.callback;\n\n    if (listenerCallback === callback || listenerCallback[FN_REF] === callback) {\n      if (previousListener) {\n        previousListener.next = nextListener;\n      } else {\n\n        // new first listener\n        this._setListeners(event, nextListener);\n      }\n    }\n\n    previousListener = listener;\n    listener = nextListener;\n  }\n};\n\n/**\n * A event that is emitted via the event bus.\n */\nfunction InternalEvent() { }\n\nInternalEvent.prototype.stopPropagation = function() {\n  this.cancelBubble = true;\n};\n\nInternalEvent.prototype.preventDefault = function() {\n  this.defaultPrevented = true;\n};\n\nInternalEvent.prototype.init = function(data) {\n  assign(this, data || {});\n};\n\n\n/**\n * Invoke function. Be fast...\n *\n * @param {Function} fn\n * @param {any[]} args\n *\n * @return {any}\n */\nfunction invokeFunction(fn, args) {\n  return fn.apply(null, args);\n}\n","import { debounce } from 'min-dash';\r\n\r\n/**\r\n * A factory to create a configurable debouncer.\r\n *\r\n * @param {number|boolean} [config=true]\r\n */\r\nexport function DebounceFactory(config = true) {\r\n\r\n  const timeout = typeof config === 'number' ? config : config ? 300 : 0;\r\n\r\n  if (timeout) {\r\n    return fn => debounce(fn, timeout);\r\n  } else {\r\n    return fn => fn;\r\n  }\r\n}\r\n\r\nDebounceFactory.$inject = [ 'config.debounce' ];","import {\r\n  FormFieldRegistry as BaseFieldRegistry\r\n} from '@bpmn-io/form-js-viewer';\r\n\r\n\r\nexport class FormFieldRegistry extends BaseFieldRegistry {\r\n\r\n  /**\r\n   * Updates a form fields id.\r\n   *\r\n   * @param {Object} formField\r\n   * @param {string} newId\r\n   */\r\n  updateId(formField, newId) {\r\n\r\n    this._validateId(newId);\r\n\r\n    this._eventBus.fire('formField.updateId', {\r\n      formField,\r\n      newId: newId\r\n    });\r\n\r\n    this.remove(formField);\r\n\r\n    formField.id = newId;\r\n\r\n    this.add(formField);\r\n\r\n    // TODO(nikku): make this a proper object graph so we\r\n    // do not have to deal with IDs this way...\r\n    if ('components' in formField) {\r\n      for (const component of formField.components) {\r\n        component._parent = newId;\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n\r\n  /**\r\n   * Validate the suitability of the given id and signals a problem\r\n   * with an exception.\r\n   *\r\n   * @param {string} id\r\n   *\r\n   * @throws {Error} if id is empty or already assigned\r\n   */\r\n  _validateId(id) {\r\n    if (!id) {\r\n      throw new Error('formField must have an id');\r\n    }\r\n\r\n    if (this.get(id)) {\r\n      throw new Error('formField with id ' + id + ' already added');\r\n    }\r\n  }\r\n\r\n}","export const MAX_COLUMNS_PER_ROW = 16;\r\nexport const MAX_COLUMNS = 16;\r\nexport const MIN_COLUMNS = 2;\r\nexport const MAX_FIELDS_PER_ROW = 4;\r\n\r\nexport class FormLayoutValidator {\r\n\r\n  /**\r\n   * @constructor\r\n   *\r\n   * @param { import('./FormLayouter').FormLayouter } formLayouter\r\n   * @param { import('./FormFieldRegistry').FormFieldRegistry } formFieldRegistry\r\n   */\r\n  constructor(formLayouter, formFieldRegistry) {\r\n    this._formLayouter = formLayouter;\r\n    this._formFieldRegistry = formFieldRegistry;\r\n  }\r\n\r\n  validateField(field = {}, columns, row) {\r\n\r\n    // allow empty (auto columns)\r\n    if (Number.isInteger(columns)) {\r\n\r\n      // allow minimum cols\r\n      if (columns < MIN_COLUMNS) {\r\n        return `Minimální šířka je ${MIN_COLUMNS} sloupců`;\r\n      }\r\n\r\n      // allow maximum cols\r\n      if (columns > MAX_COLUMNS) {\r\n        return `Maximální šířka je ${MAX_COLUMNS} sloupců`;\r\n      }\r\n    }\r\n\r\n    if (!row) {\r\n      row = this._formLayouter.getRowForField(field);\r\n    }\r\n\r\n    // calculate columns with and without updated field\r\n    let sumColumns = (parseInt(columns) || 0);\r\n    let sumFields = 1;\r\n    let sumAutoCols = columns ? 0 : 1;\r\n\r\n    row.components.forEach(id => {\r\n      if (field.id === id) {\r\n        return;\r\n      }\r\n\r\n      const component = this._formFieldRegistry.get(id);\r\n\r\n      const cols = (component.layout || {}).columns;\r\n\r\n      if (!cols) {\r\n        sumAutoCols++;\r\n      }\r\n\r\n      sumColumns += parseInt(cols) || 0;\r\n      sumFields++;\r\n    });\r\n\r\n    // do not allow overflows\r\n    if (\r\n      sumColumns > MAX_COLUMNS_PER_ROW ||\r\n      (sumAutoCols > 0 && sumColumns > calculateMaxColumnsWithAuto(sumAutoCols)) ||\r\n      (columns === MAX_COLUMNS_PER_ROW && sumFields > 1)) {\r\n      return `Nová hodnota předahuje maximum ${MAX_COLUMNS_PER_ROW} sloupců na řádek`;\r\n    }\r\n\r\n    if (sumFields > MAX_FIELDS_PER_ROW) {\r\n      return `Byl přesažen maximální počet polí na řádek ${MAX_FIELDS_PER_ROW}`;\r\n    }\r\n\r\n    return null;\r\n  }\r\n}\r\n\r\nFormLayoutValidator.$inject = [ 'formLayouter', 'formFieldRegistry' ];\r\n\r\n\r\n// helper //////////////////////\r\n\r\n// on normal screen sizes, auto columns take minimum 2 columns\r\nfunction calculateMaxColumnsWithAuto(autoCols) {\r\n  return MAX_COLUMNS_PER_ROW - (autoCols * 2);\r\n}","import classNames from 'classnames';\r\n\r\nconst emptyImage = createEmptyImage();\r\n\r\nexport function editorFormFieldClasses(type, { disabled = false } = {}) {\r\n  if (!type) {\r\n    throw new Error('type required');\r\n  }\r\n\r\n  return classNames('fjs-form-field', `fjs-form-field-${type}`, {\r\n    'fjs-disabled': disabled\r\n  });\r\n}\r\n\r\n/**\r\n * Add a dragger that calls back the passed function with\r\n * { event, delta } on drag.\r\n *\r\n * @example\r\n *\r\n * function dragMove(event, delta) {\r\n *   // we are dragging (!!)\r\n * }\r\n *\r\n * domElement.addEventListener('dragstart', dragger(dragMove));\r\n *\r\n * @param {Function} fn\r\n *\r\n * @return {Function} drag start callback function\r\n */\r\nexport function createDragger(fn) {\r\n\r\n  let self;\r\n\r\n  let startX, startY;\r\n\r\n  /** drag start */\r\n  function onDragStart(event) {\r\n\r\n    self = this;\r\n\r\n    startX = event.clientX;\r\n    startY = event.clientY;\r\n\r\n    // (1) hide drag preview image\r\n    if (event.dataTransfer) {\r\n      event.dataTransfer.setDragImage(emptyImage, 0, 0);\r\n    }\r\n\r\n    // (2) setup drag listeners\r\n\r\n    // attach drag + cleanup event\r\n    document.addEventListener('dragover', onDrag);\r\n    document.addEventListener('dragend', onEnd);\r\n    document.addEventListener('drop', preventDefault);\r\n  }\r\n\r\n  function onDrag(event) {\r\n    const delta = {\r\n      x: event.clientX - startX,\r\n      y: event.clientY - startY\r\n    };\r\n\r\n    // call provided fn with event, delta\r\n    return fn.call(self, event, delta);\r\n  }\r\n\r\n  function onEnd() {\r\n    document.removeEventListener('dragover', onDrag);\r\n    document.removeEventListener('dragend', onEnd);\r\n    document.removeEventListener('drop', preventDefault);\r\n  }\r\n\r\n  return onDragStart;\r\n}\r\n\r\n/**\r\n * Throttle function call according UI update cycle.\r\n *\r\n * @param  {Function} fn\r\n *\r\n * @return {Function} throttled fn\r\n */\r\nexport function throttle(fn) {\r\n  let active = false;\r\n\r\n  let lastArgs = [];\r\n  let lastThis = undefined;\r\n\r\n  return function(...args) {\r\n\r\n    lastArgs = args;\r\n    lastThis = this;\r\n\r\n    if (active) {\r\n      return;\r\n    }\r\n\r\n    active = true;\r\n\r\n    fn.apply(lastThis, lastArgs);\r\n\r\n    window.requestAnimationFrame(function() {\r\n      lastArgs = lastThis = active = undefined;\r\n    });\r\n  };\r\n\r\n}\r\n\r\nfunction preventDefault(event) {\r\n  event.preventDefault();\r\n  event.stopPropagation();\r\n}\r\n\r\nfunction createEmptyImage() {\r\n  const img = new Image();\r\n  img.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\r\n  return img;\r\n}","import {\r\n  iconsByType,\r\n  IFrame,\r\n  Label\r\n} from '@bpmn-io/form-js-viewer';\r\n\r\nimport { editorFormFieldClasses } from '../Util';\r\n\r\nexport function EditorIFrame(props) {\r\n  const { field, domId } = props;\r\n\r\n  const { label } = field;\r\n\r\n  const Icon = iconsByType(field.type);\r\n\r\n  return <div class={ editorFormFieldClasses(field.type) }>\r\n    <Label id={ domId } label={ label } />\r\n    <div class=\"fjs-iframe-placeholder\" id={ domId }>\r\n      <p class=\"fjs-iframe-placeholder-text\"><Icon width=\"32\" height=\"24\" viewBox=\"0 0 56 56\" />iFrame</p>\r\n    </div>\r\n  </div>;\r\n}\r\n\r\nEditorIFrame.config = IFrame.config;\r\n","import { createContext } from 'preact';\r\n\r\nexport const DragAndDropContext = createContext({\r\n  drake: null\r\n});","import { createContext } from 'preact';\r\n\r\n/**\r\n * @param {string} type\r\n * @param {boolean} [strict]\r\n *\r\n * @returns {any}\r\n */\r\nfunction getService(type, strict) {}\r\n\r\nexport const FormEditorContext = createContext({\r\n  getService\r\n});","import {\r\n  useContext\r\n} from 'preact/hooks';\r\n\r\nimport { FormEditorContext } from '../context';\r\n\r\n\r\nexport function useService(type, strict) {\r\n  const {\r\n    getService\r\n  } = useContext(FormEditorContext);\r\n\r\n  return getService(type, strict);\r\n}","import {\r\n  useEffect,\r\n  useRef\r\n} from 'preact/hooks';\r\n\r\n\r\nexport function usePrevious(value, defaultValue = null) {\r\n  const ref = useRef(defaultValue);\r\n\r\n  useEffect(() => ref.current = value, [ value ]);\r\n\r\n  return ref.current;\r\n}","import {\r\n  useMemo,\r\n  useEffect\r\n} from 'preact/hooks';\r\n\r\nimport { useService } from './useService';\r\n\r\n/**\r\n * @param {Function} fn - function to debounce\r\n */\r\nexport function useDebounce(fn) {\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  const callback = useMemo(() => {\r\n    return debounce(fn);\r\n  }, [ debounce, fn ]);\r\n\r\n  // cleanup async side-effect if callback #flush is provided.\r\n  useEffect(() => {\r\n    return () => {\r\n      (typeof callback.flush === 'function') && callback.flush();\r\n    };\r\n  }, [ callback ]);\r\n\r\n  return callback;\r\n}","<svg width=\"16\" height=\"16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"m12 4.7-.7-.7L8 7.3 4.7 4l-.7.7L7.3 8 4 11.3l.7.7L8 8.7l3.3 3.3.7-.7L8.7 8 12 4.7Z\" fill=\"currentColor\"/></svg>","<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"none\"><rect width=\"16\" height=\"16\" x=\".536\" fill=\"#fff\" rx=\"3\" style=\"mix-blend-mode:multiply\"/><path fill=\"#fff\" d=\"M0 0h16v16H0z\" style=\"mix-blend-mode:multiply\" transform=\"translate(.536)\"/><path fill=\"currentcolor\" d=\"M7.536 6h-1v6h1V6ZM10.536 6h-1v6h1V6Z\"/><path fill=\"currentcolor\" d=\"M2.536 3v1h1v10a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4h1V3h-12Zm2 11V4h8v10h-8ZM10.536 1h-4v1h4V1Z\"/></svg>","<svg xmlns=\"http://www.w3.org/2000/svg\" xml:space=\"preserve\" width=\"16\" height=\"16\" fill=\"currentcolor\" viewBox=\"0 0 32 32\"><path d=\"M10 6h4v4h-4zm8 0h4v4h-4zm-8 8h4v4h-4zm8 0h4v4h-4zm-8 8h4v4h-4zm8 0h4v4h-4z\"/><path d=\"M0 0h32v32H0z\" style=\"fill:none\"/></svg>\r\n","<svg width=\"15\" height=\"15\" viewBox=\"0 0 15 15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n  <path d=\"M14.5 13.793L10.7239 10.0169C11.6313 8.92758 12.0838 7.53039 11.9872 6.11596C11.8907 4.70154 11.2525 3.37879 10.2055 2.42289C9.15855 1.46699 7.78335 0.951523 6.366 0.983731C4.94865 1.01594 3.59828 1.59334 2.59581 2.59581C1.59333 3.59829 1.01593 4.94866 0.983723 6.36601C0.951515 7.78336 1.46698 9.15856 2.42288 10.2055C3.37879 11.2525 4.70153 11.8907 6.11596 11.9872C7.53038 12.0838 8.92758 11.6313 10.0169 10.724L13.7929 14.5L14.5 13.793ZM2 6.5C2 5.60999 2.26392 4.73996 2.75838 3.99994C3.25285 3.25992 3.95565 2.68314 4.77792 2.34255C5.60019 2.00195 6.50499 1.91284 7.3779 2.08647C8.25082 2.2601 9.05264 2.68869 9.68198 3.31802C10.3113 3.94736 10.7399 4.74918 10.9135 5.6221C11.0872 6.49501 10.998 7.39981 10.6575 8.22208C10.3169 9.04435 9.74008 9.74715 9.00006 10.2416C8.26004 10.7361 7.39001 11 6.5 11C5.30693 10.9987 4.1631 10.5241 3.31948 9.68052C2.47585 8.8369 2.00132 7.69307 2 6.5Z\" fill=\"currentColor\"/>\r\n</svg>\r\n","<svg width=\"126\" height=\"96\" viewBox=\"0 0 126 96\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M70 78V86C70 87.6569 68.6569 89 67 89H59V84H65V78H70ZM70 62H65V46H70V62ZM70 30H65V24H59V19H67C68.6569 19 70 20.3431 70 22V30ZM43 19V24H27V19H43ZM11 19V24H5V30H0V22C0 20.3431 1.34315 19 3 19H11ZM0 46H5V62H0V46ZM0 78H5V84H11V89H3C1.34315 89 0 87.6569 0 86V78ZM27 89V84H43V89H27Z\" fill=\"#FF832B\"/>\r\n<rect width=\"70\" height=\"70\" rx=\"3\" transform=\"matrix(-1 0 0 1 94 0)\" fill=\"#E5E5E5\"/>\r\n<mask id=\"path-3-inside-1_728_13414\" fill=\"white\">\r\n<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M87.0851 88.684L75.4297 45.1851L118.929 56.8406L107.885 64.9126L116.442 73.4693L103.714 86.1973L95.1572 77.6405L87.0851 88.684Z\"/>\r\n</mask>\r\n<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M87.0851 88.684L75.4297 45.1851L118.929 56.8406L107.885 64.9126L116.442 73.4693L103.714 86.1973L95.1572 77.6405L87.0851 88.684Z\" fill=\"#393939\"/>\r\n<path d=\"M75.4297 45.1851L70.6 46.4792L68.3586 38.114L76.7238 40.3555L75.4297 45.1851ZM87.0851 88.684L91.1218 91.6345L84.9586 100.066L82.2555 89.9781L87.0851 88.684ZM118.929 56.8406L120.223 52.011L130.311 54.7141L121.879 60.8772L118.929 56.8406ZM107.885 64.9126L104.35 68.4482L100.222 64.3206L104.935 60.876L107.885 64.9126ZM116.442 73.4693L119.977 69.9338L123.513 73.4693L119.977 77.0049L116.442 73.4693ZM103.714 86.1973L107.25 89.7328L103.714 93.2683L100.178 89.7328L103.714 86.1973ZM95.1572 77.6405L91.1206 74.69L94.5652 69.9774L98.6928 74.105L95.1572 77.6405ZM80.2593 43.891L91.9148 87.3899L82.2555 89.9781L70.6 46.4792L80.2593 43.891ZM117.634 61.6702L74.1356 50.0147L76.7238 40.3555L120.223 52.011L117.634 61.6702ZM104.935 60.876L115.978 52.804L121.879 60.8772L110.836 68.9492L104.935 60.876ZM112.906 77.0049L104.35 68.4482L111.421 61.3771L119.977 69.9338L112.906 77.0049ZM100.178 82.6617L112.906 69.9338L119.977 77.0049L107.25 89.7328L100.178 82.6617ZM98.6928 74.105L107.25 82.6617L100.178 89.7328L91.6217 81.1761L98.6928 74.105ZM83.0485 85.7334L91.1206 74.69L99.1939 80.5911L91.1218 91.6345L83.0485 85.7334Z\" fill=\"#393939\" mask=\"url(#path-3-inside-1_728_13414)\"/>\r\n<line x1=\"1.5\" y1=\"-1.5\" x2=\"14.5\" y2=\"-1.5\" transform=\"matrix(-0.707107 -0.707107 -0.707107 0.707107 69.431 41.2843)\" stroke=\"black\" stroke-width=\"3\" stroke-linecap=\"round\"/>\r\n<line x1=\"1.5\" y1=\"-1.5\" x2=\"9.5\" y2=\"-1.5\" transform=\"matrix(-1 -4.21468e-08 0 1 68.2132 50.1234)\" stroke=\"black\" stroke-width=\"3\" stroke-linecap=\"round\"/>\r\n<line x1=\"78.9695\" y1=\"36.3671\" x2=\"78.9695\" y2=\"28.3671\" stroke=\"black\" stroke-width=\"3\" stroke-linecap=\"round\"/>\r\n</svg>\r\n","import { Text } from '@bpmn-io/form-js-viewer';\r\nimport { editorFormFieldClasses } from '../Util';\r\nimport { useService } from '../../hooks';\r\n\r\nimport { iconsByType } from '../icons';\r\n\r\nexport function EditorText(props) {\r\n\r\n  const { type, text = '' } = props.field;\r\n\r\n  const Icon = iconsByType('text');\r\n\r\n  const templating = useService('templating');\r\n  const expressionLanguage = useService('expressionLanguage');\r\n\r\n  if (!text || !text.trim()) {\r\n    return <div class={ editorFormFieldClasses(type) }>\r\n      <div class=\"fjs-form-field-placeholder\"><Icon viewBox=\"0 0 54 54\" />Text view is empty</div>\r\n    </div>;\r\n  }\r\n\r\n  if (expressionLanguage.isExpression(text)) {\r\n    return <div class={ editorFormFieldClasses(type) }>\r\n      <div class=\"fjs-form-field-placeholder\"><Icon viewBox=\"0 0 54 54\" />Text view is populated by an expression</div>\r\n    </div>;\r\n  }\r\n\r\n  if (templating.isTemplate(text)) {\r\n    return <div class={ editorFormFieldClasses(type) }>\r\n      <div class=\"fjs-form-field-placeholder\"><Icon viewBox=\"0 0 54 54\" />Text view is templated</div>\r\n    </div>;\r\n  }\r\n\r\n  return <Text { ...{ ...props, disableLinks: true } } />;\r\n}\r\n\r\nEditorText.config = Text.config;\r\n","import { Html } from '@bpmn-io/form-js-viewer';\r\nimport { editorFormFieldClasses } from '../Util';\r\nimport { useService } from '../../hooks';\r\n\r\nimport { iconsByType } from '../icons';\r\n\r\nexport function EditorHtml(props) {\r\n\r\n  const { type, content = '' } = props.field;\r\n\r\n  const Icon = iconsByType(type);\r\n\r\n  const templating = useService('templating');\r\n  const expressionLanguage = useService('expressionLanguage');\r\n\r\n  if (!content || !content.trim()) {\r\n    return <div class={ editorFormFieldClasses(type) }>\r\n      <div class=\"fjs-form-field-placeholder\"><Icon viewBox=\"0 0 54 54\" />Html is empty</div>\r\n    </div>;\r\n  }\r\n\r\n  if (expressionLanguage.isExpression(content)) {\r\n    return <div class={ editorFormFieldClasses(type) }>\r\n      <div class=\"fjs-form-field-placeholder\"><Icon viewBox=\"0 0 54 54\" />Html is populated by an expression</div>\r\n    </div>;\r\n  }\r\n\r\n  if (templating.isTemplate(content)) {\r\n    return <div class={ editorFormFieldClasses(type) }>\r\n      <div class=\"fjs-form-field-placeholder\"><Icon viewBox=\"0 0 54 54\" />Html is templated</div>\r\n    </div>;\r\n  }\r\n\r\n  return <Html { ...{ ...props, disableLinks: true } } />;\r\n}\r\n\r\nEditorHtml.config = Html.config;\r\n","import { Label, Table } from '@bpmn-io/form-js-viewer';\r\nimport { editorFormFieldClasses } from '../Util';\r\nimport classNames from 'classnames';\r\n\r\n/**\r\n * @param {import('@bpmn-io/form-js-viewer/src/render/components/form-fields/Table').Props} props\r\n * @returns {import(\"preact\").JSX.Element}\r\n */\r\nexport function EditorTable(props) {\r\n  const { columnsExpression, columns, id, label } = props.field;\r\n  const shouldUseMockColumns =\r\n    (typeof columnsExpression === 'string' && columnsExpression.length > 0) ||\r\n    (Array.isArray(columns) && columns.length === 0);\r\n  const editorColumns = shouldUseMockColumns\r\n    ? [\r\n      { key: '1', label: 'Column 1' },\r\n      { key: '2', label: 'Column 2' },\r\n      { key: '3', label: 'Column 3' }\r\n    ]\r\n    : columns;\r\n  const prefixId = `fjs-form-${id}`;\r\n\r\n  return (\r\n    <div class={ editorFormFieldClasses('table', { disabled: true }) }>\r\n      <Label id={ prefixId } label={ label } />\r\n      <div class=\"fjs-table-middle-container\">\r\n        <div class=\"fjs-table-inner-container\">\r\n          <table class={ classNames('fjs-table', 'fjs-disabled') } id={ prefixId }>\r\n            <thead class=\"fjs-table-head\">\r\n              <tr class=\"fjs-table-tr\">\r\n                {editorColumns.map(({ key, label }) => (\r\n                  <th key={ key } class=\"fjs-table-th\">\r\n                    {label}\r\n                  </th>\r\n                ))}\r\n              </tr>\r\n            </thead>\r\n            <tbody class=\"fjs-table-body\">\r\n              <tr class=\"fjs-table-tr\">\r\n                {editorColumns.map(({ key }) => (\r\n                  <td class=\"fjs-table-td\" key={ key }>\r\n                    Content\r\n                  </td>\r\n                ))}\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nEditorTable.config = Table.config;\r\n","import { ExpressionField, iconsByType } from '@bpmn-io/form-js-viewer';\r\nimport { editorFormFieldClasses } from '../Util';\r\nimport { useService } from '../../hooks';\r\n\r\nconst type = 'expression';\r\n\r\nexport function EditorExpressionField(props) {\r\n  const { field } = props;\r\n  const { expression = '' } = field;\r\n\r\n  const Icon = iconsByType('expression');\r\n  const expressionLanguage = useService('expressionLanguage');\r\n\r\n  let placeholderContent = 'Expression is empty';\r\n\r\n  if (expression.trim() && expressionLanguage.isExpression(expression)) {\r\n    placeholderContent = 'Expression';\r\n  }\r\n\r\n  return (\r\n    <div class={ editorFormFieldClasses(type) }>\r\n      <div class=\"fjs-form-field-placeholder\">\r\n        <Icon viewBox=\"0 0 54 54\" />{placeholderContent}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nEditorExpressionField.config = {\r\n  ...ExpressionField.config,\r\n  escapeGridRender: false\r\n};\r\n","import { EditorIFrame } from './EditorIFrame';\r\nimport { EditorText } from './EditorText';\r\nimport { EditorHtml } from './EditorHtml';\r\nimport { EditorTable } from './EditorTable';\r\nimport { EditorExpressionField } from './EditorExpressionField';\r\n\r\nexport const editorFormFields = [\r\n  EditorIFrame,\r\n  EditorText,\r\n  EditorHtml,\r\n  EditorTable,\r\n  EditorExpressionField\r\n];","import { FormFields } from '@bpmn-io/form-js-viewer';\r\nimport { editorFormFields } from './components/editor-form-fields/';\r\n\r\nexport class EditorFormFields extends FormFields {\r\n  constructor() {\r\n    super();\r\n    editorFormFields.forEach((formField) => {\r\n      this.register(formField.config.type, formField);\r\n    });\r\n  }\r\n}","import { useCallback, useEffect, useMemo, useState } from 'preact/hooks';\r\nimport { createPortal } from 'preact/compat';\r\nimport { useService } from '../hooks';\r\n\r\nexport const ModularSection = (props) => {\r\n  const {\r\n    rootClass,\r\n    RootElement,\r\n    section,\r\n    children\r\n  } = props;\r\n\r\n  const eventBus = useService('eventBus');\r\n  const sectionConfig = useService(`config.${section}`);\r\n\r\n  const [ parent, setParent ] = useState(sectionConfig && sectionConfig.parent || null);\r\n  const [ shouldRender, setShouldRender ] = useState(true);\r\n\r\n  const ParentElement = useMemo(() => {\r\n\r\n    if (parent === null) {\r\n      return null;\r\n    }\r\n\r\n    if (typeof parent === 'string') {\r\n\r\n      const element = document.querySelector(parent);\r\n\r\n      if (!element) {\r\n        throw new Error(`Target root element with selector '${ parent }' not found for section '${ section }'`);\r\n      }\r\n\r\n      return document.querySelector(parent);\r\n    }\r\n\r\n    // @ts-ignore\r\n    if (!(parent instanceof Element)) {\r\n      throw new Error(`Target root element for section '${ section }' must be a valid selector or DOM element`);\r\n    }\r\n\r\n    return parent;\r\n\r\n  }, [ section, parent ]);\r\n\r\n  useEffect(() => {\r\n    const onAttach = ({ container }) => {\r\n      setParent(container);\r\n      setShouldRender(true);\r\n    };\r\n\r\n    const onDetach = () => {\r\n      setParent(null);\r\n      setShouldRender(false);\r\n    };\r\n\r\n    const onReset = () => {\r\n      setParent(null);\r\n      setShouldRender(true);\r\n    };\r\n\r\n    eventBus.on(`${ section }.attach`, onAttach);\r\n    eventBus.on(`${ section }.detach`, onDetach);\r\n    eventBus.on(`${ section }.reset`, onReset);\r\n    eventBus.fire(`${ section }.section.rendered`);\r\n\r\n    return () => {\r\n      eventBus.off(`${ section }.attach`, onAttach);\r\n      eventBus.off(`${ section }.detach`, onDetach);\r\n      eventBus.off(`${ section }.reset`, onReset);\r\n      eventBus.fire(`${ section }.section.destroyed`);\r\n    };\r\n  }, [ eventBus, section ]);\r\n\r\n\r\n  useEffect(() => {\r\n    if (shouldRender) {\r\n      eventBus.fire(`${ section }.rendered`, { element: ParentElement });\r\n      return () => { eventBus.fire(`${ section }.destroyed`, { element: ParentElement }); };\r\n    }\r\n  }, [ eventBus, section, shouldRender, ParentElement ]);\r\n\r\n  const Root = useCallback(\r\n    ({ children }) => RootElement ? <RootElement>{ children }</RootElement> : <div className={ rootClass }>{ children }</div>, [ rootClass, RootElement ]\r\n  );\r\n\r\n  return (\r\n    shouldRender\r\n      ? (parent\r\n        ? createPortal(<Root>{ children }</Root>, ParentElement)\r\n        : <Root>{ children }</Root>)\r\n      : null\r\n  );\r\n};","import { createContext } from 'preact';\r\n\r\nexport const FillContext = createContext({\r\n  addFill(uid, props) { throw new Error('FillContext.addFill() uninitialized'); },\r\n  removeFill(uid) { throw new Error('FillContext.addFill() uninitialized'); }\r\n});\r\n","import { FillContext } from './FillContext';\r\nimport { useContext, useEffect, useRef } from 'preact/compat';\r\n\r\nexport const Fill = (props) => {\r\n\r\n  const uid = useRef(Symbol('fill_uid'));\r\n  const fillContext = useContext(FillContext);\r\n\r\n  useEffect(() => {\r\n\r\n    if (!fillContext) {\r\n      return;\r\n    }\r\n\r\n    fillContext.addFill({ id: uid, ...props });\r\n    return () => {\r\n      fillContext.removeFill(uid);\r\n    };\r\n\r\n  }, [ fillContext, props ]);\r\n\r\n  return null;\r\n};\r\n","import { createContext } from 'preact';\r\n\r\nexport const SlotContext = createContext({ fills: [] });\r\n","import { Fragment } from 'preact';\r\nimport { useContext, useMemo } from 'preact/hooks';\r\nimport { SlotContext } from './SlotContext';\r\n\r\n/**\r\n * Functional component for rendering slot fills.\r\n *\r\n * @param {Object} props Component properties\r\n * @param {string} props.name Slot name\r\n * @param {Function} props.fillRoot Function for creating a fill root element\r\n * @param {Function} props.groupFn Function for grouping slot fills\r\n * @param {Function} props.separatorFn Function for creating separator elements between groups\r\n * @param {number} props.limit Limit on the number of slot fills to render\r\n * @returns {Array} Array of rendered slot fills, grouped and separated as specified\r\n */\r\nexport const Slot = (props) => {\r\n  const {\r\n    name,\r\n    fillRoot = FillFragment,\r\n    groupFn = _groupByGroupName,\r\n    separatorFn = (key) => null,\r\n    limit\r\n  } = props;\r\n\r\n  const { fills } = useContext(SlotContext);\r\n\r\n  const filtered = useMemo(() => fills.filter(fill => fill.slot === name), [ fills, name ]);\r\n\r\n  const cropped = useMemo(() => limit ? filtered.slice(0, limit) : filtered, [ filtered, limit ]);\r\n\r\n  const groups = useMemo(() => groupFn(cropped), [ cropped , groupFn ]);\r\n\r\n  const fillsAndSeparators = useMemo(() => {\r\n    return buildFills(groups, fillRoot, separatorFn);\r\n  }, [ groups, fillRoot, separatorFn ]);\r\n\r\n  return fillsAndSeparators;\r\n};\r\n\r\n/**\r\n * Creates a Fragment for a fill.\r\n *\r\n * @param {Object} fill Fill to be rendered\r\n * @returns {Object} Preact Fragment containing fill's children\r\n */\r\nconst FillFragment = (fill) => <Fragment key={ fill.id }>{fill.children}</Fragment>;\r\n\r\n/**\r\n * Creates an array of fills, with separators inserted between groups.\r\n *\r\n * @param {Array} groups Groups of fills\r\n * @param {Function} fillRenderer Function to create a fill\r\n * @param {Function} separatorRenderer Function to create a separator\r\n * @returns {Array} Array of fills and separators\r\n */\r\nconst buildFills = (groups, fillRenderer, separatorRenderer) => {\r\n\r\n  const result = [];\r\n\r\n  groups.forEach((array, idx) => {\r\n\r\n    if (idx !== 0) {\r\n      const separator = separatorRenderer(`__separator_${idx}`);\r\n\r\n      if (separator) {\r\n        result.push(separator);\r\n      }\r\n    }\r\n\r\n    array.forEach((fill) => {\r\n      result.push(fillRenderer(fill));\r\n    });\r\n  });\r\n\r\n  return result;\r\n};\r\n\r\n/**\r\n * Groups fills by group name property.\r\n */\r\nconst _groupByGroupName = (fills) => {\r\n\r\n  const groups = [];\r\n\r\n  const groupsById = {};\r\n\r\n  fills.forEach(function(fill) {\r\n\r\n    const {\r\n      group: groupName = 'z_default'\r\n    } = fill;\r\n\r\n    let group = groupsById[groupName];\r\n\r\n    if (!group) {\r\n      groupsById[groupName] = group = [];\r\n      groups.push(group);\r\n    }\r\n\r\n    group.push(fill);\r\n  });\r\n\r\n  groups.forEach(group => group.sort(_comparePriority));\r\n\r\n  return Object.keys(groupsById)\r\n    .sort()\r\n    .map(id => groupsById[id]);\r\n};\r\n\r\n/**\r\n * Compares fills by priority.\r\n */\r\nconst _comparePriority = (a, b) => {\r\n  return (b.priority || 0) - (a.priority || 0);\r\n};","import { FillContext } from './FillContext';\r\nimport { SlotContext } from './SlotContext';\r\nimport { useMemo, useState } from 'preact/hooks';\r\n\r\nconst noop = () => {};\r\n\r\nexport const SlotFillRoot = (props) => {\r\n  const [ fills, setFills ] = useState([]);\r\n\r\n  const {\r\n    onSetFill = noop,\r\n    onRemoveFill = noop\r\n  } = props;\r\n\r\n  const fillContext = useMemo(() => ({\r\n    addFill: (fill) => {\r\n      setFills((fills) => [ ...fills.filter((f) => f.id !== fill.id), fill ]);\r\n      onSetFill(fill);\r\n    },\r\n    removeFill: (id) => {\r\n      setFills((fills) => fills.filter((f) => f.id !== id));\r\n      onRemoveFill(id);\r\n    }\r\n  }), [ onRemoveFill, onSetFill ]);\r\n\r\n  const slotContext = useMemo(() => ({ fills }), [ fills ]);\r\n\r\n  return (\r\n    <SlotContext.Provider value={ slotContext }>\r\n      <FillContext.Provider /* @ts-expect-error */\r\n        value={ fillContext }>\r\n        { props.children }\r\n      </FillContext.Provider>\r\n    </SlotContext.Provider>\r\n  );\r\n};","import { useService } from '../../../render/hooks';\r\n\r\nexport function PaletteEntry(props) {\r\n  const {\r\n    type,\r\n    label,\r\n    icon,\r\n    iconUrl,\r\n    getPaletteIcon\r\n  } = props;\r\n\r\n  const modeling = useService('modeling');\r\n  const formEditor = useService('formEditor');\r\n\r\n  const Icon = getPaletteIcon({ icon, iconUrl, label, type });\r\n\r\n  const onKeyDown = (event) => {\r\n    if (event.code === 'Enter') {\r\n\r\n      const { fieldType: type } = event.target.dataset;\r\n\r\n      const { schema } = formEditor._getState();\r\n\r\n      // add new form field to last position\r\n      modeling.addFormField({ type }, schema, schema.components.length);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <button\r\n      type=\"button\"\r\n      class=\"fjs-palette-field fjs-drag-copy fjs-no-drop\"\r\n      data-field-type={ type }\r\n      title={ `Vložit komponent \"${label}\"` }\r\n      onKeyDown={ onKeyDown }\r\n    >\r\n      {\r\n        Icon ? <Icon class=\"fjs-palette-field-icon\" width=\"36\" height=\"36\" viewBox=\"0 0 54 54\" /> : null\r\n      }\r\n      <span class=\"fjs-palette-field-text\">{ label }</span>\r\n    </button>\r\n  );\r\n}\r\n\r\n\r\n// helpers ///////////\r\n\r\n// function getIndefiniteArticle(type) {\r\n//   if ([\r\n//     'image'\r\n//   ].includes(type)) {\r\n//     return 'an';\r\n//   }\r\n\r\n//   return 'a';\r\n// }","import {\r\n  useCallback,\r\n  useEffect,\r\n  useRef,\r\n  useState\r\n} from 'preact/hooks';\r\n\r\nimport { useService } from '../../../render/hooks';\r\nimport { sanitizeImageSource } from '@bpmn-io/form-js-viewer';\r\n\r\nimport { CloseIcon, SearchIcon, iconsByType } from '../../../render/components/icons';\r\nimport { Slot } from '../../render-injection/slot-fill';\r\nimport { PaletteEntry } from './PaletteEntry';\r\n\r\n/**\r\n * @typedef { import('@bpmn-io/form-js-viewer').FormFields } FormFields\r\n *\r\n * @typedef { {\r\n *  label: string,\r\n *  type: string,\r\n *  group: ('basic-input'|'selection'|'presentation'|'action'),\r\n *  icon: preact.FunctionalComponent,\r\n *  iconUrl: string\r\n * } } PaletteEntry\r\n */\r\n\r\nexport const PALETTE_GROUPS = [\r\n  {\r\n    label: 'Základní',\r\n    id: 'basic-input'\r\n  },\r\n  {\r\n    label: 'Výběrové',\r\n    id: 'selection'\r\n  },\r\n  {\r\n    label: 'Prezentační',\r\n    id: 'presentation'\r\n  },\r\n  {\r\n    label: 'Kontejnerové',\r\n    id: 'container'\r\n  },\r\n  {\r\n    label: 'Akční',\r\n    id: 'action'\r\n  }\r\n];\r\n\r\nexport function Palette(props) {\r\n\r\n  const formFields = useService('formFields');\r\n\r\n  const initialPaletteEntries = useRef(collectPaletteEntries(formFields));\r\n\r\n  const [ paletteEntries, setPaletteEntries ] = useState(initialPaletteEntries.current);\r\n\r\n  const [ searchTerm, setSearchTerm ] = useState('');\r\n\r\n  const inputRef = useRef();\r\n\r\n  const groups = groupEntries(paletteEntries);\r\n\r\n  const simplifyString = useCallback((str) => {\r\n    return str\r\n      .toLowerCase()\r\n      .replace(/\\s+/g, '');\r\n  }, []);\r\n\r\n  const filter = useCallback((entry) => {\r\n\r\n    const simplifiedSearchTerm = simplifyString(searchTerm);\r\n\r\n    if (!simplifiedSearchTerm) {\r\n      return true;\r\n    }\r\n\r\n    const simplifiedEntryLabel = simplifyString(entry.label);\r\n    const simplifiedEntryType = simplifyString(entry.type);\r\n\r\n    return simplifiedEntryLabel.includes(simplifiedSearchTerm)\r\n        || simplifiedEntryType.includes(simplifiedSearchTerm);\r\n\r\n  }, [ searchTerm, simplifyString ]);\r\n\r\n  // filter entries on search change\r\n  useEffect(() => {\r\n    const entries = initialPaletteEntries.current.filter(filter);\r\n    setPaletteEntries(entries);\r\n  }, [ filter, searchTerm ]);\r\n\r\n  const handleInput = useCallback(event => {\r\n    setSearchTerm(() => event.target.value);\r\n  }, [ setSearchTerm ]);\r\n\r\n  const handleClear = useCallback(event => {\r\n    setSearchTerm('');\r\n    inputRef.current.focus();\r\n  }, [ inputRef, setSearchTerm ]);\r\n\r\n  return <div class=\"fjs-palette\">\r\n    <div class=\"fjs-palette-header\" title=\"Komponenty\">\r\n      Komponenty\r\n    </div>\r\n    <div class=\"fjs-palette-search-container\">\r\n      <span class=\"fjs-palette-search-icon\">\r\n        <SearchIcon></SearchIcon>\r\n      </span>\r\n      <input class=\"fjs-palette-search\"\r\n        ref={ inputRef }\r\n        type=\"text\"\r\n        placeholder=\"Hledat komponenty\"\r\n        value={ searchTerm }\r\n        onInput={ handleInput } />\r\n      {\r\n        searchTerm && (\r\n          <button type=\"button\" title=\"Clear content\" class=\"fjs-palette-search-clear\" onClick={ handleClear }>\r\n            <CloseIcon></CloseIcon>\r\n          </button>\r\n        )\r\n      }\r\n    </div>\r\n    <div class=\"fjs-palette-entries\">\r\n      {\r\n        groups.map(({ label, entries, id }) =>\r\n          <div class=\"fjs-palette-group\" data-group-id={ id }>\r\n            <span class=\"fjs-palette-group-title\">{ label }</span>\r\n            <div class=\"fjs-palette-fields fjs-drag-container fjs-no-drop\">\r\n              {\r\n                entries.map(entry => {\r\n                  return (\r\n                    <PaletteEntry\r\n                      getPaletteIcon={ getPaletteIcon }\r\n                      { ...entry }\r\n                    />\r\n                  );\r\n                })\r\n              }\r\n            </div>\r\n          </div>\r\n        )\r\n      }\r\n      {\r\n        groups.length == 0 && (\r\n          <div class=\"fjs-palette-no-entries\">Nebyly nalezeny žádné komponenty.</div>\r\n        )\r\n      }\r\n    </div>\r\n    <div class=\"fjs-palette-footer\">\r\n      {/* @ts-ignore */}\r\n      <Slot name=\"editor-palette__footer\" fillRoot={ FillRoot } />\r\n    </div>\r\n  </div>;\r\n}\r\n\r\nconst FillRoot = (fill) => <div className=\"fjs-palette-footer-fill\">{fill.children}</div>;\r\n\r\n// helpers ///////\r\n\r\nfunction groupEntries(entries) {\r\n  const groups = PALETTE_GROUPS.map(group => {\r\n    return {\r\n      ...group,\r\n      entries: []\r\n    };\r\n  });\r\n\r\n  const getGroup = id => groups.find(group => id === group.id);\r\n\r\n  entries.forEach(entry => {\r\n    const { group } = entry;\r\n    getGroup(group).entries.push(entry);\r\n  });\r\n\r\n  return groups.filter(g => g.entries.length);\r\n}\r\n\r\n/**\r\n * Returns a list of palette entries.\r\n *\r\n * @param {FormFields} formFields\r\n * @returns {Array<PaletteEntry>}\r\n */\r\nexport function collectPaletteEntries(formFields) {\r\n  return Object.entries(formFields._formFields).map(([ type, formField ]) => {\r\n\r\n    const { config: fieldConfig } = formField;\r\n\r\n    return {\r\n      label: fieldConfig.label,\r\n      type: type,\r\n      group: fieldConfig.group,\r\n      icon: fieldConfig.icon,\r\n      iconUrl: fieldConfig.iconUrl\r\n    };\r\n  }).filter(({ type }) => type !== 'default');\r\n}\r\n\r\n/**\r\n * There are various options to specify an icon for a palette entry.\r\n *\r\n * a) via `iconUrl` property in a form field config\r\n * b) via `icon` property in a form field config\r\n * c) via statically defined iconsByType (fallback)\r\n */\r\nexport function getPaletteIcon(entry) {\r\n  const { icon, iconUrl, type, label } = entry;\r\n\r\n  let Icon;\r\n\r\n  if (iconUrl) {\r\n    Icon = () => <img class=\"fjs-field-icon-image\" width={ 36 } style={ { margin: 'auto' } } alt={ label } src={ sanitizeImageSource(iconUrl) } />;\r\n  } else {\r\n    Icon = icon || iconsByType(type);\r\n  }\r\n\r\n  return Icon;\r\n}","import { Fragment } from 'preact';\r\nimport { useMemo } from 'preact/hooks';\r\nimport { useService } from '../../../render/hooks';\r\nimport { Fill, Slot } from '../slot-fill';\r\n\r\n/**\r\n * A functional component that holds all injected renderers.\r\n * @returns {any} The rendered component.\r\n */\r\nexport const InjectedRendersRoot = () => {\r\n\r\n  const renderInjector = useService('renderInjector');\r\n\r\n  const injectedRenderers = renderInjector.fetchRenderers();\r\n\r\n  const injectedProps = useMemo(() => ({\r\n    useService,\r\n    components: {\r\n      Fill,\r\n      Slot\r\n    }\r\n  }), []);\r\n\r\n  return <Fragment>{ injectedRenderers.map(({ Renderer }) => <Renderer { ...injectedProps } />) }</Fragment>;\r\n};","import {\r\n  classes as domClasses\r\n} from 'min-dom';\r\n\r\nconst CURSOR_CLS_PATTERN = /^fjs-cursor-.*$/;\r\n\r\n\r\nexport function set(mode) {\r\n  const classes = domClasses(document.body);\r\n\r\n  classes.removeMatching(CURSOR_CLS_PATTERN);\r\n\r\n  if (mode) {\r\n    classes.add('fjs-cursor-' + mode);\r\n  }\r\n}\r\n\r\nexport function unset() {\r\n  set(null);\r\n}\r\n\r\nexport function has(mode) {\r\n  const classes = domClasses(document.body);\r\n\r\n  return classes.has('fjs-cursor-' + mode);\r\n}\r\n","import dragula from '@bpmn-io/draggle';\r\n\r\nimport { set as setCursor } from '../../render/util/Cursor';\r\nimport { getAncestryList } from '@bpmn-io/form-js-viewer';\r\n\r\nexport const DRAG_CONTAINER_CLS = 'fjs-drag-container';\r\nexport const DROP_CONTAINER_VERTICAL_CLS = 'fjs-drop-container-vertical';\r\nexport const DROP_CONTAINER_HORIZONTAL_CLS = 'fjs-drop-container-horizontal';\r\nexport const DRAG_MOVE_CLS = 'fjs-drag-move';\r\nexport const DRAG_ROW_MOVE_CLS = 'fjs-drag-row-move';\r\nexport const DRAG_COPY_CLS = 'fjs-drag-copy';\r\nexport const DRAG_NO_DROP_CLS = 'fjs-no-drop';\r\nexport const DRAG_NO_MOVE_CLS = 'fjs-no-move';\r\nexport const ERROR_DROP_CLS = 'fjs-error-drop';\r\n\r\n/**\r\n * @typedef { { id: String, components: Array<any> } } FormRow\r\n */\r\n\r\nexport class Dragging {\r\n\r\n  /**\r\n   * @constructor\r\n   *\r\n   * @param { import('../../core/FormFieldRegistry').FormFieldRegistry } formFieldRegistry\r\n   * @param { import('../../core/FormLayouter').FormLayouter } formLayouter\r\n   * @param { import('../../core/FormLayoutValidator').FormLayoutValidator } formLayoutValidator\r\n   * @param { import('../../core/EventBus').EventBus } eventBus\r\n   * @param { import('../modeling/Modeling').Modeling } modeling\r\n   * @param { import('@bpmn-io/form-js-viewer').PathRegistry } pathRegistry\r\n   */\r\n  constructor(formFieldRegistry, formLayouter, formLayoutValidator, eventBus, modeling, pathRegistry) {\r\n    this._formFieldRegistry = formFieldRegistry;\r\n    this._formLayouter = formLayouter;\r\n    this._formLayoutValidator = formLayoutValidator;\r\n    this._eventBus = eventBus;\r\n    this._modeling = modeling;\r\n    this._pathRegistry = pathRegistry;\r\n  }\r\n\r\n  /**\r\n   * Calculates position in form schema given the dropped place.\r\n   *\r\n   * @param { FormRow } targetRow\r\n   * @param { any } targetFormField\r\n   * @param { HTMLElement } sibling\r\n   * @returns { number }\r\n   */\r\n  getTargetIndex(targetRow, targetFormField, sibling) {\r\n\r\n    /** @type HTMLElement */\r\n    const siblingFormFieldNode = sibling && sibling.querySelector('.fjs-element');\r\n    const siblingFormField = siblingFormFieldNode && this._formFieldRegistry.get(siblingFormFieldNode.dataset.id);\r\n\r\n    // (1) dropped before existing field => place before\r\n    if (siblingFormField) {\r\n      return getFormFieldIndex(targetFormField, siblingFormField);\r\n    }\r\n\r\n    // (2) dropped in row => place at the end of row (after last field in row)\r\n    if (targetRow) {\r\n      return (\r\n        getFormFieldIndex(\r\n          targetFormField,\r\n          this._formFieldRegistry.get(\r\n            targetRow.components[targetRow.components.length - 1],\r\n          ),\r\n        ) + 1\r\n      );\r\n    }\r\n\r\n    // (3) dropped as last item\r\n    return targetFormField.components.length;\r\n  }\r\n\r\n  validateDrop(element, target) {\r\n    const formFieldNode = element.querySelector('.fjs-element');\r\n    const targetRow = this._formLayouter.getRow(target.dataset.rowId);\r\n\r\n    let columns;\r\n    let formField;\r\n    let targetParentId;\r\n\r\n    if (formFieldNode) {\r\n      formField = this._formFieldRegistry.get(formFieldNode.dataset.id);\r\n      columns = (formField.layout || {}).columns;\r\n\r\n      // (1) check for row constraints\r\n      if (isRow(target)) {\r\n        targetParentId = getFormParent(target).dataset.id;\r\n        const rowError = this._formLayoutValidator.validateField(formField, columns, targetRow);\r\n        if (rowError) {\r\n          return rowError;\r\n        }\r\n      }\r\n      else {\r\n        targetParentId = target.dataset.id;\r\n      }\r\n\r\n      // (2) check target is a valid parent\r\n      if (!targetParentId) {\r\n        return 'Drop is not a valid target';\r\n      }\r\n\r\n      // (3) check  for path collisions\r\n      const targetParentFormField = this._formFieldRegistry.get(targetParentId);\r\n      const currentParentFormField = this._formFieldRegistry.get(formField._parent);\r\n\r\n      if (targetParentFormField !== currentParentFormField) {\r\n        const targetParentPath = this._pathRegistry.getValuePath(targetParentFormField);\r\n        const currentParentPath = this._pathRegistry.getValuePath(currentParentFormField);\r\n\r\n        if (targetParentPath.join('.') !== currentParentPath.join('.')) {\r\n\r\n          const isDropAllowedByPathRegistry = this._pathRegistry.executeRecursivelyOnFields(formField, ({ field, isClosed, isRepeatable }) => {\r\n            const options = {\r\n              cutoffNode: currentParentFormField.id,\r\n            };\r\n\r\n            const fieldPath = this._pathRegistry.getValuePath(field, options);\r\n            return this._pathRegistry.canClaimPath([ ...targetParentPath, ...fieldPath ], { isClosed, isRepeatable, knownAncestorIds: getAncestryList(targetParentId, this._formFieldRegistry) });\r\n          });\r\n\r\n          if (!isDropAllowedByPathRegistry) {\r\n            return 'Drop not allowed by path registry';\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  moveField(element, source, targetRow, targetFormField, targetIndex) {\r\n    const formFieldNode = element.querySelector('.fjs-element');\r\n    const formField = this._formFieldRegistry.get(formFieldNode.dataset.id);\r\n\r\n    const sourceParent = getFormParent(source);\r\n    const sourceFormField = this._formFieldRegistry.get(sourceParent.dataset.id);\r\n    const sourceIndex = getFormFieldIndex(sourceFormField, formField);\r\n    const sourceRow = this._formLayouter.getRowForField(formField);\r\n\r\n    this._modeling.moveFormField(\r\n      formField,\r\n      sourceFormField,\r\n      targetFormField,\r\n      sourceIndex,\r\n      targetIndex,\r\n      sourceRow,\r\n      targetRow\r\n    );\r\n  }\r\n\r\n  createNewField(element, targetRow, targetFormField, targetIndex) {\r\n    const type = element.dataset.fieldType;\r\n\r\n    let attrs = {\r\n      type\r\n    };\r\n\r\n    attrs = {\r\n      ...attrs,\r\n      _parent: targetFormField.id,\r\n      layout: {\r\n        row: targetRow ? targetRow.id : this._formLayouter.nextRowId(),\r\n\r\n        // enable auto columns\r\n        columns: null\r\n      }\r\n    };\r\n\r\n    this._modeling.addFormField(attrs, targetFormField, targetIndex);\r\n  }\r\n\r\n  handleRowDrop(el, target, source, sibling) {\r\n    const targetFormField = this._formFieldRegistry.get(target.dataset.id);\r\n    const rowNode = el.querySelector('.fjs-layout-row');\r\n    const row = this._formLayouter.getRow(rowNode.dataset.rowId);\r\n\r\n    // move each field in the row before first field of sibling row\r\n    row.components.forEach((id, index) => {\r\n      const formField = this._formFieldRegistry.get(id);\r\n\r\n      const sourceParent = getFormParent(source);\r\n      const sourceFormField = this._formFieldRegistry.get(sourceParent.dataset.id);\r\n\r\n      const siblingRowNode = sibling && sibling.querySelector('.fjs-layout-row');\r\n      const siblingRow = siblingRowNode && this._formLayouter.getRow(siblingRowNode.dataset.rowId);\r\n      const siblingFormField = sibling && this._formFieldRegistry.get(\r\n        siblingRow.components[0]\r\n      );\r\n\r\n      const sourceIndex = getFormFieldIndex(sourceFormField, formField);\r\n      const targetIndex = (\r\n        siblingRowNode ? getFormFieldIndex(targetFormField, siblingFormField) : targetFormField.components.length\r\n      ) + index;\r\n\r\n      this._modeling.moveFormField(\r\n        formField,\r\n        sourceFormField,\r\n        targetFormField,\r\n        sourceIndex,\r\n        targetIndex,\r\n        row,\r\n        row);\r\n    });\r\n  }\r\n\r\n  handleElementDrop(el, target, source, sibling, drake) {\r\n\r\n    // (1) detect drop target\r\n    const targetFormField = this._formFieldRegistry.get(getFormParent(target).dataset.id);\r\n\r\n    let targetRow;\r\n\r\n    // (2.1) dropped in existing row\r\n    if (isRow(target)) {\r\n      targetRow = this._formLayouter.getRow(target.dataset.rowId);\r\n    }\r\n\r\n    // (2.2) validate whether drop is allowed\r\n    const validationError = this.validateDrop(el, target);\r\n\r\n    if (validationError) {\r\n      return drake.cancel(true);\r\n    }\r\n\r\n    drake.remove();\r\n\r\n    // (3) detect position to drop field in schema order\r\n    const targetIndex = this.getTargetIndex(targetRow, targetFormField, sibling);\r\n\r\n    // (4) create new field or move existing\r\n    if (isPalette(source)) {\r\n      this.createNewField(el, targetRow, targetFormField, targetIndex);\r\n    } else {\r\n      this.moveField(el, source, targetRow, targetFormField, targetIndex);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param { { container: Array<string>, direction: string, mirrorContainer: string } } options\r\n   */\r\n  createDragulaInstance(options) {\r\n\r\n    const {\r\n      container,\r\n      mirrorContainer\r\n    } = options || {};\r\n\r\n    let dragulaOptions = {\r\n      direction: function(el, target) {\r\n        if (isRow(target)) {\r\n          return 'horizontal';\r\n        }\r\n\r\n        return 'vertical';\r\n      },\r\n      mirrorContainer,\r\n      isContainer(el) {\r\n        return container.some(cls => el.classList.contains(cls));\r\n      },\r\n      moves(el, source, handle) {\r\n        return !handle.classList.contains(DRAG_NO_MOVE_CLS) && (\r\n          el.classList.contains(DRAG_MOVE_CLS) ||\r\n          el.classList.contains(DRAG_COPY_CLS) ||\r\n          el.classList.contains(DRAG_ROW_MOVE_CLS)\r\n        );\r\n      },\r\n      copy(el) {\r\n        return el.classList.contains(DRAG_COPY_CLS);\r\n      },\r\n\r\n      accepts: (el, target) => {\r\n\r\n        unsetDropNotAllowed(target);\r\n\r\n        // allow dropping rows only between rows\r\n        if (el.classList.contains(DRAG_ROW_MOVE_CLS)) {\r\n          return !target.classList.contains(DROP_CONTAINER_HORIZONTAL_CLS);\r\n        }\r\n\r\n        // validate field drop\r\n        const validationError = this.validateDrop(el, target);\r\n\r\n        if (validationError) {\r\n\r\n          // set error feedback to row\r\n          setDropNotAllowed(target);\r\n        }\r\n\r\n        return !target.classList.contains(DRAG_NO_DROP_CLS);\r\n      },\r\n      slideFactorX: 10,\r\n      slideFactorY: 5\r\n    };\r\n\r\n    const dragulaInstance = dragula(dragulaOptions);\r\n\r\n    // bind life cycle events\r\n    dragulaInstance.on('drag', (element, source) => {\r\n      this.emit('drag.start', { element, source });\r\n    });\r\n\r\n    dragulaInstance.on('dragend', (element) => {\r\n      this.emit('drag.end', { element });\r\n    });\r\n\r\n    dragulaInstance.on('drop', (element, target, source, sibling) => {\r\n      this.emit('drag.drop', { element, target, source, sibling });\r\n    });\r\n\r\n    dragulaInstance.on('over', (element, container, source) => {\r\n      this.emit('drag.hover', { element, container, source });\r\n    });\r\n\r\n    dragulaInstance.on('out', (element, container, source) => {\r\n      this.emit('drag.out', { element, container, source });\r\n    });\r\n\r\n    dragulaInstance.on('cancel', (element, container, source) => {\r\n      this.emit('drag.cancel', { element, container, source });\r\n    });\r\n\r\n    dragulaInstance.on('drop', (el, target, source, sibling) => {\r\n      if (!target) {\r\n        dragulaInstance.remove();\r\n        return;\r\n      }\r\n\r\n      // (1) handle row drop\r\n      if (isDragRow(el)) {\r\n        this.handleRowDrop(el, target, source, sibling);\r\n      } else {\r\n\r\n        // (2) handle form field drop\r\n        this.handleElementDrop(el, target, source, sibling, dragulaInstance);\r\n      }\r\n\r\n    });\r\n\r\n    this.emit('dragula.created', dragulaInstance);\r\n\r\n    return dragulaInstance;\r\n  }\r\n\r\n  emit(event, context) {\r\n    this._eventBus.fire(event, context);\r\n  }\r\n}\r\n\r\nDragging.$inject = [\r\n  'formFieldRegistry',\r\n  'formLayouter',\r\n  'formLayoutValidator',\r\n  'eventBus',\r\n  'modeling',\r\n  'pathRegistry'\r\n];\r\n\r\n\r\n// helper //////////\r\n\r\nfunction getFormFieldIndex(parent, formField) {\r\n  let fieldFormIndex = parent.components.length;\r\n\r\n  parent.components.forEach(({ id }, index) => {\r\n    if (id === formField.id) {\r\n      fieldFormIndex = index;\r\n    }\r\n  });\r\n\r\n  return fieldFormIndex;\r\n}\r\n\r\nfunction isRow(node) {\r\n  return node.classList.contains('fjs-layout-row');\r\n}\r\n\r\nfunction isDragRow(node) {\r\n  return node.classList.contains(DRAG_ROW_MOVE_CLS);\r\n}\r\n\r\nfunction isPalette(node) {\r\n  return node.classList.contains('fjs-palette-fields');\r\n}\r\n\r\nfunction getFormParent(node) {\r\n  return node.closest('.fjs-element');\r\n}\r\n\r\nfunction setDropNotAllowed(node) {\r\n  node.classList.add(ERROR_DROP_CLS);\r\n  setCursor('not-allowed');\r\n}\r\n\r\nfunction unsetDropNotAllowed(node) {\r\n  node.classList.remove(ERROR_DROP_CLS);\r\n  setCursor('grabbing');\r\n}","import classNames from 'classnames';\r\n\r\nexport function FieldDragPreview(props) {\r\n  const {\r\n    class: className,\r\n    Icon,\r\n    label\r\n  } = props;\r\n\r\n  return (\r\n    <div class={ classNames('fjs-field-preview', className) }>\r\n      <Icon class=\"fjs-field-preview-icon\" width=\"36\" height=\"36\" viewBox=\"0 0 54 54\" />\r\n      <span class=\"fjs-field-preview-text\">{ label }</span>\r\n    </div>\r\n  );\r\n}","import {\r\n  useRef\r\n} from 'preact/hooks';\r\n\r\nimport {\r\n  classes,\r\n  query as domQuery\r\n} from 'min-dom';\r\n\r\nimport { useService } from '../hooks';\r\n\r\nimport { createDragger, throttle } from './Util';\r\n\r\nimport { DRAG_NO_MOVE_CLS } from '../../features/dragging/Dragging';\r\n\r\nimport classNames from 'classnames';\r\n\r\nconst COLUMNS_REGEX = /^cds--col(-lg)?/;\r\n\r\nconst ELEMENT_RESIZING_CLS = 'fjs-element-resizing';\r\n\r\nconst GRID_OFFSET_PX = 16;\r\n\r\nexport function FieldResizer(props) {\r\n\r\n  const {\r\n    field,\r\n    position\r\n  } = props;\r\n\r\n  const ref = useRef(null);\r\n\r\n  const formLayoutValidator = useService('formLayoutValidator');\r\n  const modeling = useService('modeling');\r\n\r\n  // we can't use state as we need to\r\n  // manipulate this inside dragging events\r\n  const context = useRef({\r\n    startColumns: 0,\r\n    newColumns: 0\r\n  });\r\n\r\n  const onResize = throttle((_, delta) => {\r\n    const { x: dx } = delta;\r\n\r\n    const { layout = {} } = field;\r\n\r\n    const newColumns = calculateNewColumns(\r\n      ref.current,\r\n      layout.columns || context.current.startColumns,\r\n      dx,\r\n      position\r\n    );\r\n\r\n    const errorMessage = formLayoutValidator.validateField(field, newColumns);\r\n\r\n    if (!errorMessage) {\r\n\r\n      context.current.newColumns = newColumns;\r\n\r\n      // make visual updates to preview change\r\n      const columnNode = ref.current.closest('.fjs-layout-column');\r\n      removeMatching(columnNode, COLUMNS_REGEX);\r\n      columnNode.classList.add(`cds--col-lg-${newColumns}`);\r\n    }\r\n  });\r\n\r\n  const onResizeStart = (event) => {\r\n\r\n    const target = getElementNode(field);\r\n    const parent = getParent(target);\r\n\r\n    // initialize drag handler\r\n    const onDragStart = createDragger(onResize);\r\n    onDragStart(event);\r\n\r\n    // mitigate auto columns on the grid that\r\n    // has a offset of 16px (1rem) to both side\r\n    const columnNode = getColumnNode(target);\r\n    const startWidth = columnNode.getBoundingClientRect().width + GRID_OFFSET_PX;\r\n    context.current.startColumns = asColumns(startWidth, parent);\r\n\r\n    setResizing(target, position);\r\n  };\r\n\r\n  const onResizeEnd = () => {\r\n    const { layout = {} } = field;\r\n\r\n    if (context.current.newColumns) {\r\n      modeling.editFormField(field, 'layout', {\r\n        ...layout,\r\n        columns: context.current.newColumns\r\n      });\r\n    }\r\n\r\n    const target = getElementNode(field);\r\n    unsetResizing(target, position);\r\n\r\n    context.current.newColumns = null;\r\n  };\r\n\r\n  if (field.type === 'default') {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div\r\n      ref={ ref }\r\n      class={ classNames(\r\n        'fjs-field-resize-handle',\r\n        'fjs-field-resize-handle-' + position,\r\n        DRAG_NO_MOVE_CLS\r\n      ) }\r\n      draggable\r\n      onDragStart={ onResizeStart }\r\n      onDragEnd={ onResizeEnd }>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n// helper //////\r\n\r\nfunction asColumns(width, parent) {\r\n  const totalWidth = parent.getBoundingClientRect().width;\r\n\r\n  const oneColumn = (1 / 16) * totalWidth;\r\n\r\n  return Math.round(width / oneColumn);\r\n}\r\n\r\nfunction calculateNewColumns(node, currentColumns, deltaX, position) {\r\n  const parent = getParent(node);\r\n\r\n  // invert delta if we are resizing from the left\r\n  if (position === 'left') {\r\n    deltaX = deltaX * -1;\r\n  }\r\n\r\n  const deltaColumns = asColumns(deltaX, parent);\r\n\r\n  return currentColumns + deltaColumns;\r\n}\r\n\r\nfunction getParent(node) {\r\n  return node.closest('.fjs-layout-row');\r\n}\r\n\r\nfunction removeMatching(node, regex) {\r\n  return classes(node).removeMatching(regex);\r\n}\r\n\r\nfunction getColumnNode(node) {\r\n  return node.closest('.fjs-layout-column');\r\n}\r\n\r\nfunction getElementNode(field) {\r\n  return domQuery('.fjs-element[data-id=\"' + field.id + '\"]');\r\n}\r\n\r\nfunction setResizing(node, position) {\r\n  classes(node).add(ELEMENT_RESIZING_CLS + '-' + position);\r\n}\r\n\r\nfunction unsetResizing(node, position) {\r\n  classes(node).remove(ELEMENT_RESIZING_CLS + '-' + position);\r\n}","import { render } from 'preact';\r\nimport {\r\n  useCallback,\r\n  useContext,\r\n  useEffect,\r\n  useLayoutEffect,\r\n  useMemo,\r\n  useRef,\r\n  useState\r\n} from 'preact/hooks';\r\n\r\nimport {\r\n  FormComponent,\r\n  FormContext,\r\n  FormRenderContext,\r\n  getScrollContainer\r\n} from '@bpmn-io/form-js-viewer';\r\n\r\nimport {\r\n  EmptyFormIcon\r\n} from './icons';\r\n\r\nimport classNames from 'classnames';\r\n\r\nimport { useService } from '../hooks/useService';\r\n\r\nimport { DragAndDropContext } from '../context';\r\n\r\nimport { DeleteIcon, DraggableIcon } from './icons';\r\n\r\nimport { ModularSection } from './ModularSection';\r\nimport { Palette, collectPaletteEntries, getPaletteIcon } from '../../features/palette/components/Palette';\r\nimport { InjectedRendersRoot } from '../../features/render-injection/components/InjectedRendersRoot';\r\n\r\nimport { SlotFillRoot } from '../../features/render-injection/slot-fill';\r\n\r\nimport {\r\n  DRAG_CONTAINER_CLS,\r\n  DROP_CONTAINER_HORIZONTAL_CLS,\r\n  DROP_CONTAINER_VERTICAL_CLS,\r\n  DRAG_MOVE_CLS,\r\n  DRAG_ROW_MOVE_CLS\r\n} from '../../features/dragging/Dragging';\r\n\r\nimport {\r\n  FieldDragPreview\r\n} from './FieldDragPreview';\r\n\r\nimport {\r\n  FieldResizer\r\n} from './FieldResizer';\r\n\r\nimport { set as setCursor, unset as unsetCursor } from '../util/Cursor';\r\n\r\nfunction ContextPad(props) {\r\n  if (!props.children) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div class=\"fjs-context-pad\">\r\n      {\r\n        props.children\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction EmptyGroup() {\r\n  return (\r\n    <div class=\"fjs-empty-component\">\r\n      <span class=\"fjs-empty-component-text\">Komponenty přetáhněte zde.</span>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction EmptyForm() {\r\n  return (\r\n    <div class=\"fjs-empty-editor\">\r\n      <div class=\"fjs-empty-editor-card\">\r\n        <EmptyFormIcon />\r\n        <h2>Sestavte svůj formulář</h2>\r\n        <span>Přetáhněte komponenty z postranní nabídky a začnětě navrhovat.</span>\r\n        <span>Použijte náhledové okno pro otestování formuláře.</span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Empty(props) {\r\n  if ([ 'group', 'dynamiclist' ].includes(props.field.type)) {\r\n    return <EmptyGroup />;\r\n  }\r\n\r\n  if (props.field.type === 'default') {\r\n    return <EmptyForm />;\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\nfunction Element(props) {\r\n  const eventBus = useService('eventBus'),\r\n        formFieldRegistry = useService('formFieldRegistry'),\r\n        formFields = useService('formFields'),\r\n        modeling = useService('modeling'),\r\n        selection = useService('selection');\r\n\r\n  const { hoverInfo } = useContext(FormRenderContext);\r\n\r\n  const { field } = props;\r\n\r\n  const {\r\n    id,\r\n    type,\r\n    showOutline\r\n  } = field;\r\n\r\n  const ref = useRef();\r\n\r\n  const [ hovered, setHovered ] = useState(false);\r\n\r\n  useEffect(() => {\r\n\r\n    function scrollIntoView({ selection }) {\r\n      const scrollContainer = getScrollContainer(ref.current);\r\n      if (!selection || selection.type === 'default' || selection.id !== id || !scrollContainer || !ref.current) {\r\n        return;\r\n      }\r\n\r\n      const elementBounds = ref.current.getBoundingClientRect();\r\n      const scrollContainerBounds = scrollContainer.getBoundingClientRect();\r\n      const isElementLarger = elementBounds.height > scrollContainerBounds.height;\r\n      const isNotFullyVisible = elementBounds.bottom > scrollContainerBounds.bottom || elementBounds.top < scrollContainerBounds.top;\r\n\r\n      if (isNotFullyVisible && !isElementLarger) {\r\n        ref.current.scrollIntoView({ behavior: 'auto', block: 'nearest' });\r\n      }\r\n    }\r\n\r\n    eventBus.on('selection.changed', scrollIntoView);\r\n\r\n    return () => eventBus.off('selection.changed', scrollIntoView);\r\n  }, [ eventBus, id ]);\r\n\r\n  useLayoutEffect(() => {\r\n    if (selection.isSelected(field)) {\r\n      ref.current.focus();\r\n    }\r\n  }, [ selection, field ]);\r\n\r\n  function onClick(event) {\r\n    event.stopPropagation();\r\n\r\n    selection.toggle(field);\r\n\r\n    // properly focus on field\r\n    ref.current.focus();\r\n  }\r\n\r\n  const isSelected = selection.isSelected(field);\r\n\r\n  const classString = useMemo(() => {\r\n\r\n    const classes = [];\r\n\r\n    if (props.class) {\r\n      classes.push(...props.class.split(' '));\r\n    }\r\n\r\n    if (isSelected) {\r\n      classes.push('fjs-editor-selected');\r\n    }\r\n\r\n    const grouplike = [ 'group', 'dynamiclist' ].includes(type);\r\n\r\n    if (grouplike) {\r\n      classes.push(showOutline ? 'fjs-outlined' : 'fjs-dashed-outlined');\r\n    }\r\n\r\n    if (hovered) {\r\n      classes.push('fjs-editor-hovered');\r\n    }\r\n\r\n    return classes.join(' ');\r\n\r\n  }, [ hovered, isSelected, props.class, showOutline, type ]);\r\n\r\n  const onRemove = (event) => {\r\n    event.stopPropagation();\r\n\r\n    const parentField = formFieldRegistry.get(field._parent);\r\n\r\n    const index = getFormFieldIndex(parentField, field);\r\n\r\n    modeling.removeFormField(field, parentField, index);\r\n  };\r\n\r\n  const onKeyPress = (event) => {\r\n    if (event.key === 'Enter') {\r\n      event.stopPropagation();\r\n      selection.toggle(field);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      class={ classString }\r\n      data-id={ id }\r\n      data-field-type={ type }\r\n      tabIndex={ type === 'default' ? -1 : 0 }\r\n      onClick={ onClick }\r\n      onKeyPress={ onKeyPress }\r\n      onMouseOver={\r\n        (e) => {\r\n          if (hoverInfo.cleanup) {\r\n            hoverInfo.cleanup();\r\n          }\r\n\r\n          setHovered(true);\r\n          hoverInfo.cleanup = () => setHovered(false);\r\n          e.stopPropagation();\r\n        }\r\n      }\r\n      ref={ ref }>\r\n      <DebugColumns field={ field } />\r\n      <ContextPad>\r\n        {\r\n          selection.isSelected(field) && field.type !== 'default'\r\n            ? <button type=\"button\" title={ getRemoveButtonTitle(field, formFields) } class=\"fjs-context-pad-item\" onClick={ onRemove }><DeleteIcon /></button>\r\n            : null\r\n        }\r\n      </ContextPad>\r\n      { props.children }\r\n      <FieldResizer position=\"left\" field={ field }></FieldResizer>\r\n      <FieldResizer position=\"right\" field={ field }></FieldResizer>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction DebugColumns(props) {\r\n\r\n  const { field } = props;\r\n\r\n  const debugColumnsConfig = useService('config.debugColumns');\r\n\r\n  if (!debugColumnsConfig || field.type == 'default') {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div\r\n      style=\"width: fit-content;\r\n        padding: 2px 6px;\r\n        height: 16px;\r\n        background: var(--color-blue-205-100-95);\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        position: absolute;\r\n        bottom: -2px;\r\n        z-index: 2;\r\n        font-size: 10px;\r\n        right: 3px;\"\r\n      class=\"fjs-debug-columns\">\r\n      { (field.layout || {}).columns || 'auto' }\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Children(props) {\r\n  const { field } = props;\r\n\r\n  const { id } = field;\r\n\r\n  const classes = [ 'fjs-children', DROP_CONTAINER_VERTICAL_CLS ];\r\n\r\n  if (props.class) {\r\n    classes.push(...props.class.split(' '));\r\n  }\r\n\r\n  return (\r\n    <div\r\n      class={ classes.join(' ') }\r\n      data-id={ id }>\r\n      { props.children }\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Row(props) {\r\n  const { row } = props;\r\n\r\n  const { id } = row;\r\n\r\n  const classes = [ DROP_CONTAINER_HORIZONTAL_CLS ];\r\n\r\n  if (props.class) {\r\n    classes.push(...props.class.split(' '));\r\n  }\r\n\r\n  return (\r\n    <div class={ classNames(DRAG_ROW_MOVE_CLS) }>\r\n      <span class=\"fjs-row-dragger\">\r\n        <DraggableIcon></DraggableIcon>\r\n      </span>\r\n      <div\r\n        class={ classes.join(' ') }\r\n        style={ props.style }\r\n        data-row-id={ id }>\r\n        { props.children }\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Column(props) {\r\n  const { field } = props;\r\n\r\n  const classes = [ DRAG_MOVE_CLS ];\r\n\r\n  if (field.type === 'default') {\r\n    return props.children;\r\n  }\r\n\r\n  if (props.class) {\r\n    classes.push(...props.class.split(' '));\r\n  }\r\n\r\n  return (\r\n    <div\r\n      data-field-type={ field.type }\r\n      class={ classes.join(' ') }>\r\n      { props.children }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function FormEditor() {\r\n  const dragging = useService('dragging'),\r\n        eventBus = useService('eventBus'),\r\n        formEditor = useService('formEditor'),\r\n        injector = useService('injector'),\r\n        selection = useService('selection'),\r\n        propertiesPanel = useService('propertiesPanel'),\r\n        propertiesPanelConfig = useService('config.propertiesPanel');\r\n\r\n  const { schema, properties } = formEditor._getState();\r\n\r\n  const { ariaLabel } = properties;\r\n\r\n  const formContainerRef = useRef(null);\r\n\r\n  const propertiesPanelRef = useRef(null);\r\n\r\n  const [ , setSelection ] = useState(schema);\r\n\r\n  const [ hasInitialized, setHasInitialized ] = useState(false);\r\n\r\n  useEffect(() => {\r\n    function handleSelectionChanged(event) {\r\n      setSelection(event.selection || schema);\r\n    }\r\n\r\n    eventBus.on('selection.changed', handleSelectionChanged);\r\n\r\n    return () => {\r\n      eventBus.off('selection.changed', handleSelectionChanged);\r\n    };\r\n  }, [ eventBus, schema ]);\r\n\r\n  useEffect(() => {\r\n    setSelection(selection.get() || schema);\r\n  }, [ selection, schema ]);\r\n\r\n  const [ drake, setDrake ] = useState(null);\r\n\r\n  const dragAndDropContext = {\r\n    drake\r\n  };\r\n\r\n  useEffect(() => {\r\n\r\n    let dragulaInstance = dragging.createDragulaInstance({\r\n      container: [\r\n        DRAG_CONTAINER_CLS,\r\n        DROP_CONTAINER_VERTICAL_CLS,\r\n        DROP_CONTAINER_HORIZONTAL_CLS\r\n      ],\r\n      mirrorContainer: formContainerRef.current\r\n    });\r\n\r\n    setDrake(dragulaInstance);\r\n\r\n    const onDetach = () => {\r\n      if (dragulaInstance) {\r\n        dragulaInstance.destroy();\r\n        eventBus.fire('dragula.destroyed');\r\n      }\r\n    };\r\n\r\n    const onAttach = () => {\r\n      onDetach();\r\n\r\n      dragulaInstance = dragging.createDragulaInstance({\r\n        container: [\r\n          DRAG_CONTAINER_CLS,\r\n          DROP_CONTAINER_VERTICAL_CLS,\r\n          DROP_CONTAINER_HORIZONTAL_CLS\r\n        ],\r\n        mirrorContainer: formContainerRef.current\r\n      });\r\n      setDrake(dragulaInstance);\r\n    };\r\n\r\n    const onCreate = (drake) => {\r\n      setDrake(drake);\r\n    };\r\n\r\n    const onDragStart = () => {\r\n      setCursor('grabbing');\r\n    };\r\n\r\n    const onDragEnd = () => {\r\n      unsetCursor();\r\n    };\r\n\r\n    eventBus.on('attach', onAttach);\r\n    eventBus.on('detach', onDetach);\r\n    eventBus.on('dragula.created', onCreate);\r\n    eventBus.on('drag.start', onDragStart);\r\n    eventBus.on('drag.end', onDragEnd);\r\n\r\n    return () => {\r\n      onDetach();\r\n\r\n      eventBus.off('attach', onAttach);\r\n      eventBus.off('detach', onDetach);\r\n      eventBus.off('dragula.created', onCreate);\r\n      eventBus.off('drag.start', onDragStart);\r\n      eventBus.off('drag.end', onDragEnd);\r\n    };\r\n  }, [ dragging, eventBus ]);\r\n\r\n  // fire event after render to notify interested parties\r\n  useEffect(() => {\r\n\r\n    if (hasInitialized) {\r\n      return;\r\n    }\r\n\r\n    setHasInitialized(true);\r\n    eventBus.fire('rendered');\r\n\r\n    // keep deprecated event to ensure backward compatibility\r\n    eventBus.fire('formEditor.rendered');\r\n  }, [ eventBus, hasInitialized ]);\r\n\r\n  const formRenderContext = useMemo(() => ({\r\n    Children,\r\n    Column,\r\n    Element,\r\n    Empty,\r\n    Row,\r\n    hoverInfo: {}\r\n  }), []);\r\n\r\n  const formContext = useMemo(() => ({\r\n    getService(type, strict = true) {\r\n\r\n      // TODO(philippfromme): clean up\r\n      if (type === 'form') {\r\n        return {\r\n          _getState() {\r\n            return {\r\n              data: {},\r\n              errors: {},\r\n              properties: {\r\n                ariaLabel,\r\n                disabled: true\r\n              },\r\n              schema\r\n            };\r\n          }\r\n        };\r\n      }\r\n\r\n      return injector.get(type, strict);\r\n    },\r\n    formId: formEditor._id\r\n  }), [ ariaLabel, formEditor, injector, schema ]);\r\n\r\n  const onSubmit = useCallback(() => {}, []);\r\n\r\n  const onReset = useCallback(() => {}, []);\r\n\r\n  // attach default properties panel\r\n  const hasDefaultPropertiesPanel = defaultPropertiesPanel(propertiesPanelConfig);\r\n\r\n  useEffect(() => {\r\n    if (hasDefaultPropertiesPanel) {\r\n      propertiesPanel.attachTo(propertiesPanelRef.current);\r\n    }\r\n  }, [ propertiesPanelRef, propertiesPanel, hasDefaultPropertiesPanel ]);\r\n\r\n  return (\r\n    <div class=\"fjs-form-editor\">\r\n      <SlotFillRoot>\r\n        <DragAndDropContext.Provider value={ dragAndDropContext }>\r\n          <ModularSection rootClass=\"fjs-palette-container\" section=\"palette\">\r\n            <Palette />\r\n          </ModularSection>\r\n          <div ref={ formContainerRef } class=\"fjs-form-container\">\r\n            <FormContext.Provider value={ formContext }>\r\n              <FormRenderContext.Provider\r\n\r\n                // @ts-ignore\r\n                value={ formRenderContext }>\r\n                <FormComponent onSubmit={ onSubmit } onReset={ onReset } />\r\n              </FormRenderContext.Provider>\r\n            </FormContext.Provider>\r\n          </div>\r\n          <CreatePreview />\r\n        </DragAndDropContext.Provider>\r\n        { hasDefaultPropertiesPanel && <div class=\"fjs-editor-properties-container\" ref={ propertiesPanelRef } /> }\r\n        <ModularSection rootClass=\"fjs-render-injector-container\" section=\"renderInjector\">\r\n          <InjectedRendersRoot />\r\n        </ModularSection>\r\n      </SlotFillRoot>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction getFormFieldIndex(parent, formField) {\r\n  let fieldFormIndex = parent.components.length;\r\n\r\n  parent.components.forEach(({ id }, index) => {\r\n    if (id === formField.id) {\r\n      fieldFormIndex = index;\r\n    }\r\n  });\r\n\r\n  return fieldFormIndex;\r\n}\r\n\r\nfunction CreatePreview(props) {\r\n\r\n  const { drake } = useContext(DragAndDropContext);\r\n\r\n  const formFields = useService('formFields');\r\n\r\n  useEffect(() => {\r\n    if (!drake) {\r\n      return;\r\n    }\r\n\r\n    function handleCloned(clone, original, type) {\r\n\r\n      const fieldType = clone.dataset.fieldType;\r\n\r\n      // (1) field preview\r\n      if (fieldType) {\r\n\r\n        const paletteEntry = findPaletteEntry(fieldType, formFields);\r\n\r\n        if (!paletteEntry) {\r\n          return;\r\n        }\r\n\r\n        const { label } = paletteEntry;\r\n\r\n        const Icon = getPaletteIcon(paletteEntry);\r\n\r\n        clone.innerHTML = '';\r\n\r\n        clone.class = 'gu-mirror';\r\n        clone.classList.add('fjs-field-preview-container');\r\n\r\n        if (original.classList.contains('fjs-palette-field')) {\r\n\r\n          // default to auto columns when creating from palette\r\n          clone.classList.add('cds--col');\r\n        }\r\n\r\n        // todo(pinussilvestrus): dragula, how to mitigate cursor position\r\n        // https://github.com/bevacqua/dragula/issues/285\r\n        render(\r\n          <FieldDragPreview label={ label } Icon={ Icon } />,\r\n          clone\r\n        );\r\n      } else {\r\n\r\n        // (2) row preview\r\n\r\n        // remove elements from copy (context pad, row dragger, ...)\r\n        [\r\n          'fjs-context-pad',\r\n          'fjs-row-dragger',\r\n          'fjs-debug-columns'\r\n        ].forEach(cls => {\r\n          const cloneNode = clone.querySelectorAll('.' + cls);\r\n          cloneNode.length && cloneNode.forEach(e => e.remove());\r\n        });\r\n\r\n        // mirror grid\r\n        clone.classList.add('cds--grid');\r\n        clone.classList.add('cds--grid--condensed');\r\n      }\r\n    }\r\n\r\n    drake.on('cloned', handleCloned);\r\n\r\n    return () => drake.off('cloned', handleCloned);\r\n  }, [ drake, formFields ]);\r\n\r\n  return null;\r\n}\r\n\r\n\r\n// helper //////\r\n\r\nfunction findPaletteEntry(type, formFields) {\r\n  return collectPaletteEntries(formFields).find(entry => entry.type === type);\r\n}\r\n\r\nfunction defaultPropertiesPanel(propertiesPanelConfig) {\r\n  return !(propertiesPanelConfig && propertiesPanelConfig.parent);\r\n}\r\n\r\nfunction getRemoveButtonTitle(formField, formFields) {\r\n  const entry = findPaletteEntry(formField.type, formFields);\r\n\r\n  if (!entry) {\r\n    return 'Remove form field';\r\n  }\r\n\r\n  return `Remove ${entry.label}`;\r\n}","import { render } from 'preact';\r\nimport { useState } from 'preact/hooks';\r\n\r\nimport { FormEditor } from './components/FormEditor';\r\n\r\nimport { FormEditorContext } from './context';\r\n\r\n/**\r\n * @typedef { { container: Element, compact?: boolean } } RenderConfig\r\n * @typedef { import('didi').Injector } Injector\r\n * @typedef { import('../core/EventBus').EventBus } EventBus\r\n * @typedef { import('../FormEditor').FormEditor } FormEditor\r\n */\r\n\r\n/**\r\n * @param {RenderConfig} renderConfig\r\n * @param {EventBus} eventBus\r\n * @param {FormEditor} formEditor\r\n * @param {Injector} injector\r\n */\r\nexport class Renderer {\r\n  constructor(renderConfig, eventBus, formEditor, injector) {\r\n\r\n    const {\r\n      container,\r\n      compact = false\r\n    } = renderConfig;\r\n\r\n    const App = () => {\r\n      const [ state, setState ] = useState(formEditor._getState());\r\n\r\n      const formEditorContext = {\r\n        getService(type, strict = true) {\r\n          return injector.get(type, strict);\r\n        }\r\n      };\r\n\r\n      formEditor.on('changed', (newState) => {\r\n        setState(newState);\r\n      });\r\n\r\n      const { schema } = state;\r\n\r\n      if (!schema) {\r\n        return null;\r\n      }\r\n\r\n      return (\r\n        <div class={ `fjs-container fjs-editor-container ${ compact ? 'fjs-editor-compact' : '' }` }>\r\n          <FormEditorContext.Provider value={ formEditorContext }>\r\n            <FormEditor />\r\n          </FormEditorContext.Provider>\r\n        </div>\r\n      );\r\n    };\r\n\r\n    eventBus.on('form.init', () => {\r\n      render(<App />, container);\r\n    });\r\n\r\n    eventBus.on('form.destroy', () => {\r\n      render(null, container);\r\n    });\r\n  }\r\n}\r\n\r\nRenderer.$inject = [ 'config.renderer', 'eventBus', 'formEditor', 'injector' ];","import { EditorFormFields } from './EditorFormFields';\r\nimport { Renderer } from './Renderer';\r\n\r\nexport const RenderModule = {\r\n  __init__: [ 'formFields', 'renderer' ],\r\n  formFields: [ 'type', EditorFormFields ],\r\n  renderer: [ 'type', Renderer ]\r\n};","import { FieldFactory, Importer, PathRegistry } from '@bpmn-io/form-js-viewer';\r\n\r\nimport { EventBus } from './EventBus';\r\nimport { DebounceFactory } from './Debounce';\r\nimport { FormFieldRegistry } from './FormFieldRegistry';\r\nimport { FormLayouter } from './FormLayouter';\r\nimport { FormLayoutValidator } from './FormLayoutValidator';\r\n\r\nimport { RenderModule } from '../render';\r\n\r\nexport const CoreModule = {\r\n  __depends__: [\r\n    RenderModule\r\n  ],\r\n  debounce: [ 'factory', DebounceFactory ],\r\n  eventBus: [ 'type', EventBus ],\r\n  importer: [ 'type', Importer ],\r\n  formFieldRegistry: [ 'type', FormFieldRegistry ],\r\n  pathRegistry: [ 'type', PathRegistry ],\r\n  formLayouter: [ 'type', FormLayouter ],\r\n  formLayoutValidator: [ 'type', FormLayoutValidator ],\r\n  fieldFactory: [ 'type', FieldFactory ]\r\n};","import {\n  forEach,\n  isArray\n} from 'min-dash';\n\n/**\n * @typedef {import('didi').Injector} Injector\n *\n * @typedef {import('../../core/EventBus').default} EventBus\n */\n\nvar NOT_REGISTERED_ERROR = 'is not a registered action',\n    IS_REGISTERED_ERROR = 'is already registered';\n\n\n/**\n * An interface that provides access to modeling actions by decoupling\n * the one who requests the action to be triggered and the trigger itself.\n *\n * It's possible to add new actions by registering them with ´registerAction´\n * and likewise unregister existing ones with ´unregisterAction´.\n *\n *\n * ## Life-Cycle and configuration\n *\n * The editor actions will wait for diagram initialization before\n * registering default actions _and_ firing an `editorActions.init` event.\n *\n * Interested parties may listen to the `editorActions.init` event with\n * low priority to check, which actions got registered. Other components\n * may use the event to register their own actions via `registerAction`.\n *\n * @param {EventBus} eventBus\n * @param {Injector} injector\n */\nexport default function EditorActions(eventBus, injector) {\n\n  // initialize actions\n  this._actions = {};\n\n  var self = this;\n\n  eventBus.on('diagram.init', function() {\n\n    // all diagram modules got loaded; check which ones\n    // are available and register the respective default actions\n    self._registerDefaultActions(injector);\n\n    // ask interested parties to register available editor\n    // actions on diagram initialization\n    eventBus.fire('editorActions.init', {\n      editorActions: self\n    });\n  });\n\n}\n\nEditorActions.$inject = [\n  'eventBus',\n  'injector'\n];\n\n/**\n * Register default actions.\n *\n * @param {Injector} injector\n */\nEditorActions.prototype._registerDefaultActions = function(injector) {\n\n  // (1) retrieve optional components to integrate with\n\n  var commandStack = injector.get('commandStack', false);\n  var modeling = injector.get('modeling', false);\n  var selection = injector.get('selection', false);\n  var zoomScroll = injector.get('zoomScroll', false);\n  var copyPaste = injector.get('copyPaste', false);\n  var canvas = injector.get('canvas', false);\n  var rules = injector.get('rules', false);\n  var keyboardMove = injector.get('keyboardMove', false);\n  var keyboardMoveSelection = injector.get('keyboardMoveSelection', false);\n\n  // (2) check components and register actions\n\n  if (commandStack) {\n    this.register('undo', function() {\n      commandStack.undo();\n    });\n\n    this.register('redo', function() {\n      commandStack.redo();\n    });\n  }\n\n  if (copyPaste && selection) {\n    this.register('copy', function() {\n      var selectedElements = selection.get();\n\n      if (selectedElements.length) {\n        return copyPaste.copy(selectedElements);\n      }\n    });\n  }\n\n  if (copyPaste) {\n    this.register('paste', function() {\n      copyPaste.paste();\n    });\n  }\n\n  if (zoomScroll) {\n    this.register('stepZoom', function(opts) {\n      zoomScroll.stepZoom(opts.value);\n    });\n  }\n\n  if (canvas) {\n    this.register('zoom', function(opts) {\n      canvas.zoom(opts.value);\n    });\n  }\n\n  if (modeling && selection && rules) {\n    this.register('removeSelection', function() {\n\n      var selectedElements = selection.get();\n\n      if (!selectedElements.length) {\n        return;\n      }\n\n      var allowed = rules.allowed('elements.delete', { elements: selectedElements }),\n          removableElements;\n\n      if (allowed === false) {\n        return;\n      }\n      else if (isArray(allowed)) {\n        removableElements = allowed;\n      }\n      else {\n        removableElements = selectedElements;\n      }\n\n      if (removableElements.length) {\n        modeling.removeElements(removableElements.slice());\n      }\n    });\n  }\n\n  if (keyboardMove) {\n    this.register('moveCanvas', function(opts) {\n      keyboardMove.moveCanvas(opts);\n    });\n  }\n\n  if (keyboardMoveSelection) {\n    this.register('moveSelection', function(opts) {\n      keyboardMoveSelection.moveSelection(opts.direction, opts.accelerated);\n    });\n  }\n\n};\n\n\n/**\n * Triggers a registered action\n *\n * @param {string} action\n * @param {Object} opts\n *\n * @return {unknown} Returns what the registered listener returns\n */\nEditorActions.prototype.trigger = function(action, opts) {\n  if (!this._actions[action]) {\n    throw error(action, NOT_REGISTERED_ERROR);\n  }\n\n  return this._actions[action](opts);\n};\n\n\n/**\n * Registers a collections of actions.\n * The key of the object will be the name of the action.\n *\n * @example\n *\n * ```javascript\n * var actions = {\n *   spaceTool: function() {\n *     spaceTool.activateSelection();\n *   },\n *   lassoTool: function() {\n *     lassoTool.activateSelection();\n *   }\n * ];\n *\n * editorActions.register(actions);\n *\n * editorActions.isRegistered('spaceTool'); // true\n * ```\n *\n * @param {Object} actions\n */\nEditorActions.prototype.register = function(actions, listener) {\n  var self = this;\n\n  if (typeof actions === 'string') {\n    return this._registerAction(actions, listener);\n  }\n\n  forEach(actions, function(listener, action) {\n    self._registerAction(action, listener);\n  });\n};\n\n/**\n * Registers a listener to an action key\n *\n * @param {string} action\n * @param {Function} listener\n */\nEditorActions.prototype._registerAction = function(action, listener) {\n  if (this.isRegistered(action)) {\n    throw error(action, IS_REGISTERED_ERROR);\n  }\n\n  this._actions[action] = listener;\n};\n\n/**\n * Unregister an existing action\n *\n * @param {string} action\n */\nEditorActions.prototype.unregister = function(action) {\n  if (!this.isRegistered(action)) {\n    throw error(action, NOT_REGISTERED_ERROR);\n  }\n\n  this._actions[action] = undefined;\n};\n\n/**\n * Returns the identifiers of all currently registered editor actions\n *\n * @return {string[]}\n */\nEditorActions.prototype.getActions = function() {\n  return Object.keys(this._actions);\n};\n\n/**\n * Checks wether the given action is registered\n *\n * @param {string} action\n *\n * @return {boolean}\n */\nEditorActions.prototype.isRegistered = function(action) {\n  return !!this._actions[action];\n};\n\n\nfunction error(action, message) {\n  return new Error(action + ' ' + message);\n}\n","import EditorActions from './EditorActions';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __init__: [ 'editorActions' ],\n  editorActions: [ 'type', EditorActions ]\n};\n","import EditorActions from 'diagram-js/lib/features/editor-actions/EditorActions';\r\n\r\n\r\nexport class FormEditorActions extends EditorActions {\r\n  constructor(eventBus, injector) {\r\n    super(eventBus, injector);\r\n\r\n    eventBus.on('form.init', () => {\r\n      this._registerDefaultActions(injector);\r\n\r\n      eventBus.fire('editorActions.init', {\r\n        editorActions: this\r\n      });\r\n    });\r\n  }\r\n\r\n  _registerDefaultActions(injector) {\r\n    const commandStack = injector.get('commandStack', false),\r\n          formFieldRegistry = injector.get('formFieldRegistry', false),\r\n          selection = injector.get('selection', false);\r\n\r\n    if (commandStack) {\r\n\r\n      // @ts-ignore\r\n      this.register('undo', () => {\r\n        commandStack.undo();\r\n      });\r\n\r\n      // @ts-ignore\r\n      this.register('redo', () => {\r\n        commandStack.redo();\r\n      });\r\n    }\r\n\r\n    if (formFieldRegistry && selection) {\r\n\r\n      // @ts-ignore\r\n      this.register('selectFormField', (options = {}) => {\r\n        const { id } = options;\r\n\r\n        if (!id) {\r\n          return;\r\n        }\r\n\r\n        const formField = formFieldRegistry.get(id);\r\n\r\n        if (formField) {\r\n          selection.set(formField);\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nFormEditorActions.$inject = [\r\n  'eventBus',\r\n  'injector'\r\n];","import BaseEditorActionsModule from 'diagram-js/lib/features/editor-actions';\r\n\r\nimport { FormEditorActions } from './FormEditorActions';\r\n\r\nexport const EditorActionsModule = {\r\n  __depends__: [\r\n    BaseEditorActionsModule\r\n  ],\r\n  editorActions: [ 'type', FormEditorActions ]\r\n};\r\n","import { isString } from 'min-dash';\r\n\r\nexport class EditorTemplating {\r\n\r\n  // same rules as viewer templating\r\n  isTemplate(value) { return isString(value) && (value.startsWith('=') || /{{/.test(value)); }\r\n\r\n  // return the template raw, as we usually just want to display that\r\n  evaluate(template) { return template; }\r\n}\r\n\r\nEditorTemplating.$inject = [];\r\n","import { FeelExpressionLanguage } from '@bpmn-io/form-js-viewer';\r\nimport { EditorTemplating } from './EditorTemplating';\r\n\r\nexport const EditorExpressionLanguageModule = {\r\n  __init__: [ 'expressionLanguage', 'templating' ],\r\n  expressionLanguage: [ 'type', FeelExpressionLanguage ],\r\n  templating: [ 'type', EditorTemplating ]\r\n};\r\n","import { isArray } from 'min-dash';\r\n\r\nexport var KEYS_COPY = [ 'c', 'C' ];\r\nexport var KEYS_PASTE = [ 'v', 'V' ];\r\nexport var KEYS_REDO = [ 'y', 'Y' ];\r\nexport var KEYS_UNDO = [ 'z', 'Z' ];\r\n\r\n/**\r\n * Returns true if event was triggered with any modifier\r\n * @param {KeyboardEvent} event\r\n */\r\nexport function hasModifier(event) {\r\n  return (event.ctrlKey || event.metaKey || event.shiftKey || event.altKey);\r\n}\r\n\r\n/**\r\n * @param {KeyboardEvent} event\r\n * @return {boolean}\r\n */\r\nexport function isCmd(event) {\r\n\r\n  // ensure we don't react to AltGr\r\n  // (mapped to CTRL + ALT)\r\n  if (event.altKey) {\r\n    return false;\r\n  }\r\n\r\n  return event.ctrlKey || event.metaKey;\r\n}\r\n\r\n/**\r\n * Checks if key pressed is one of provided keys.\r\n *\r\n * @param {string|string[]} keys\r\n * @param {KeyboardEvent} event\r\n * @return {boolean}\r\n */\r\nexport function isKey(keys, event) {\r\n  keys = isArray(keys) ? keys : [ keys ];\r\n\r\n  return keys.indexOf(event.key) !== -1 || keys.indexOf(event.code) !== -1;\r\n}\r\n\r\n/**\r\n * @param {KeyboardEvent} event\r\n */\r\nexport function isShift(event) {\r\n  return event.shiftKey;\r\n}\r\n\r\n/**\r\n * @param {KeyboardEvent} event\r\n */\r\nexport function isCopy(event) {\r\n  return isCmd(event) && isKey(KEYS_COPY, event);\r\n}\r\n\r\n/**\r\n * @param {KeyboardEvent} event\r\n */\r\nexport function isPaste(event) {\r\n  return isCmd(event) && isKey(KEYS_PASTE, event);\r\n}\r\n\r\n/**\r\n * @param {KeyboardEvent} event\r\n */\r\nexport function isUndo(event) {\r\n  return isCmd(event) && !isShift(event) && isKey(KEYS_UNDO, event);\r\n}\r\n\r\n/**\r\n * @param {KeyboardEvent} event\r\n */\r\nexport function isRedo(event) {\r\n  return isCmd(event) && (\r\n    isKey(KEYS_REDO, event) || (\r\n      isKey(KEYS_UNDO, event) && isShift(event)\r\n    )\r\n  );\r\n}\r\n","import {\n  isFunction\n} from 'min-dash';\n\nimport {\n  closest as domClosest,\n  event as domEvent,\n  matches as domMatches\n} from 'min-dom';\n\nimport {\n  hasModifier,\n  isCmd,\n  isKey,\n  isShift\n} from './KeyboardUtil';\n\n/**\n * @typedef {import('../../core/EventBus').default} EventBus\n *\n * @typedef {({ keyEvent: KeyboardEvent }) => any} Listener\n */\n\nvar KEYDOWN_EVENT = 'keyboard.keydown',\n    KEYUP_EVENT = 'keyboard.keyup';\n\nvar HANDLE_MODIFIER_ATTRIBUTE = 'input-handle-modified-keys';\n\nvar DEFAULT_PRIORITY = 1000;\n\n/**\n * A keyboard abstraction that may be activated and\n * deactivated by users at will, consuming global key events\n * and triggering diagram actions.\n *\n * For keys pressed down, keyboard fires `keyboard.keydown` event.\n * The event context contains one field which is `KeyboardEvent` event.\n *\n * The implementation fires the following key events that allow\n * other components to hook into key handling:\n *\n *  - keyboard.bind\n *  - keyboard.unbind\n *  - keyboard.init\n *  - keyboard.destroy\n *\n * All events contain one field which is node.\n *\n * A default binding for the keyboard may be specified via the\n * `keyboard.bindTo` configuration option.\n *\n * @param {Object} config\n * @param {EventTarget} [config.bindTo]\n * @param {EventBus} eventBus\n */\nexport default function Keyboard(config, eventBus) {\n  var self = this;\n\n  this._config = config || {};\n  this._eventBus = eventBus;\n\n  this._keydownHandler = this._keydownHandler.bind(this);\n  this._keyupHandler = this._keyupHandler.bind(this);\n\n  // properly clean dom registrations\n  eventBus.on('diagram.destroy', function() {\n    self._fire('destroy');\n\n    self.unbind();\n  });\n\n  eventBus.on('diagram.init', function() {\n    self._fire('init');\n  });\n\n  eventBus.on('attach', function() {\n    if (config && config.bindTo) {\n      self.bind(config.bindTo);\n    }\n  });\n\n  eventBus.on('detach', function() {\n    self.unbind();\n  });\n}\n\nKeyboard.$inject = [\n  'config.keyboard',\n  'eventBus'\n];\n\nKeyboard.prototype._keydownHandler = function(event) {\n  this._keyHandler(event, KEYDOWN_EVENT);\n};\n\nKeyboard.prototype._keyupHandler = function(event) {\n  this._keyHandler(event, KEYUP_EVENT);\n};\n\nKeyboard.prototype._keyHandler = function(event, type) {\n  var eventBusResult;\n\n  if (this._isEventIgnored(event)) {\n    return;\n  }\n\n  var context = {\n    keyEvent: event\n  };\n\n  eventBusResult = this._eventBus.fire(type || KEYDOWN_EVENT, context);\n\n  if (eventBusResult) {\n    event.preventDefault();\n  }\n};\n\nKeyboard.prototype._isEventIgnored = function(event) {\n  if (event.defaultPrevented) {\n    return true;\n  }\n\n  return (\n    isInput(event.target) || (\n      isButton(event.target) && isKey([ ' ', 'Enter' ], event)\n    )\n  ) && this._isModifiedKeyIgnored(event);\n};\n\nKeyboard.prototype._isModifiedKeyIgnored = function(event) {\n  if (!isCmd(event)) {\n    return true;\n  }\n\n  var allowedModifiers = this._getAllowedModifiers(event.target);\n  return allowedModifiers.indexOf(event.key) === -1;\n};\n\nKeyboard.prototype._getAllowedModifiers = function(element) {\n  var modifierContainer = domClosest(element, '[' + HANDLE_MODIFIER_ATTRIBUTE + ']', true);\n\n  if (!modifierContainer || (this._node && !this._node.contains(modifierContainer))) {\n    return [];\n  }\n\n  return modifierContainer.getAttribute(HANDLE_MODIFIER_ATTRIBUTE).split(',');\n};\n\n/**\n * Bind keyboard events to the given DOM node.\n *\n * @param {EventTarget} node\n */\nKeyboard.prototype.bind = function(node) {\n\n  // make sure that the keyboard is only bound once to the DOM\n  this.unbind();\n\n  this._node = node;\n\n  // bind key events\n  domEvent.bind(node, 'keydown', this._keydownHandler);\n  domEvent.bind(node, 'keyup', this._keyupHandler);\n\n  this._fire('bind');\n};\n\n/**\n * @return {EventTarget}\n */\nKeyboard.prototype.getBinding = function() {\n  return this._node;\n};\n\nKeyboard.prototype.unbind = function() {\n  var node = this._node;\n\n  if (node) {\n    this._fire('unbind');\n\n    // unbind key events\n    domEvent.unbind(node, 'keydown', this._keydownHandler);\n    domEvent.unbind(node, 'keyup', this._keyupHandler);\n  }\n\n  this._node = null;\n};\n\n/**\n * @param {string} event\n */\nKeyboard.prototype._fire = function(event) {\n  this._eventBus.fire('keyboard.' + event, { node: this._node });\n};\n\n/**\n * Add a listener function that is notified with `KeyboardEvent` whenever\n * the keyboard is bound and the user presses a key. If no priority is\n * provided, the default value of 1000 is used.\n *\n * @param {number} [priority]\n * @param {Listener} listener\n * @param {string} [type='keyboard.keydown']\n */\nKeyboard.prototype.addListener = function(priority, listener, type) {\n  if (isFunction(priority)) {\n    type = listener;\n    listener = priority;\n    priority = DEFAULT_PRIORITY;\n  }\n\n  this._eventBus.on(type || KEYDOWN_EVENT, priority, listener);\n};\n\n/**\n * Remove a listener function.\n *\n * @param {Listener} listener\n * @param {string} [type='keyboard.keydown']\n */\nKeyboard.prototype.removeListener = function(listener, type) {\n  this._eventBus.off(type || KEYDOWN_EVENT, listener);\n};\n\nKeyboard.prototype.hasModifier = hasModifier;\nKeyboard.prototype.isCmd = isCmd;\nKeyboard.prototype.isShift = isShift;\nKeyboard.prototype.isKey = isKey;\n\n\n\n// helpers ///////\n\nfunction isInput(target) {\n  return target && (domMatches(target, 'input, textarea') || target.contentEditable === 'true');\n}\n\nfunction isButton(target) {\n  return target && domMatches(target, 'button, input[type=submit], input[type=button], a[href], [aria-role=button]');\n}","import {\n  isCmd,\n  isKey,\n  isCopy,\n  isPaste,\n  isUndo,\n  isRedo,\n  KEYS_COPY,\n  KEYS_PASTE,\n  KEYS_UNDO,\n  KEYS_REDO\n} from './KeyboardUtil';\n\n/**\n * @typedef {import('../editor-actions/EditorActions').default} EditorActions\n * @typedef {import('../../core/EventBus').default} EventBus\n * @typedef {import('./Keyboard').default} Keyboard\n */\n\nexport {\n  KEYS_COPY,\n  KEYS_PASTE,\n  KEYS_UNDO,\n  KEYS_REDO\n};\n\n\nvar LOW_PRIORITY = 500;\n\n\n/**\n * Adds default keyboard bindings.\n *\n * This does not pull in any features will bind only actions that\n * have previously been registered against the editorActions component.\n *\n * @param {EventBus} eventBus\n * @param {Keyboard} keyboard\n */\nexport default function KeyboardBindings(eventBus, keyboard) {\n\n  var self = this;\n\n  eventBus.on('editorActions.init', LOW_PRIORITY, function(event) {\n\n    var editorActions = event.editorActions;\n\n    self.registerBindings(keyboard, editorActions);\n  });\n}\n\nKeyboardBindings.$inject = [\n  'eventBus',\n  'keyboard'\n];\n\n\n/**\n * Register available keyboard bindings.\n *\n * @param {Keyboard} keyboard\n * @param {EditorActions} editorActions\n */\nKeyboardBindings.prototype.registerBindings = function(keyboard, editorActions) {\n\n  /**\n   * Add keyboard binding if respective editor action\n   * is registered.\n   *\n   * @param {string} action name\n   * @param {Function} fn that implements the key binding\n   */\n  function addListener(action, fn) {\n\n    if (editorActions.isRegistered(action)) {\n      keyboard.addListener(fn);\n    }\n  }\n\n\n  // undo\n  // (CTRL|CMD) + Z\n  addListener('undo', function(context) {\n\n    var event = context.keyEvent;\n\n    if (isUndo(event)) {\n      editorActions.trigger('undo');\n\n      return true;\n    }\n  });\n\n  // redo\n  // CTRL + Y\n  // CMD + SHIFT + Z\n  addListener('redo', function(context) {\n\n    var event = context.keyEvent;\n\n    if (isRedo(event)) {\n      editorActions.trigger('redo');\n\n      return true;\n    }\n  });\n\n  // copy\n  // CTRL/CMD + C\n  addListener('copy', function(context) {\n\n    var event = context.keyEvent;\n\n    if (isCopy(event)) {\n      editorActions.trigger('copy');\n\n      return true;\n    }\n  });\n\n  // paste\n  // CTRL/CMD + V\n  addListener('paste', function(context) {\n\n    var event = context.keyEvent;\n\n    if (isPaste(event)) {\n      editorActions.trigger('paste');\n\n      return true;\n    }\n  });\n\n  // zoom in one step\n  // CTRL/CMD + +\n  addListener('stepZoom', function(context) {\n\n    var event = context.keyEvent;\n\n    // quirk: it has to be triggered by `=` as well to work on international keyboard layout\n    // cf: https://github.com/bpmn-io/bpmn-js/issues/1362#issuecomment-722989754\n    if (isKey([ '+', 'Add', '=' ], event) && isCmd(event)) {\n      editorActions.trigger('stepZoom', { value: 1 });\n\n      return true;\n    }\n  });\n\n  // zoom out one step\n  // CTRL + -\n  addListener('stepZoom', function(context) {\n\n    var event = context.keyEvent;\n\n    if (isKey([ '-', 'Subtract' ], event) && isCmd(event)) {\n      editorActions.trigger('stepZoom', { value: -1 });\n\n      return true;\n    }\n  });\n\n  // zoom to the default level\n  // CTRL + 0\n  addListener('zoom', function(context) {\n\n    var event = context.keyEvent;\n\n    if (isKey('0', event) && isCmd(event)) {\n      editorActions.trigger('zoom', { value: 1 });\n\n      return true;\n    }\n  });\n\n  // delete selected element\n  // DEL\n  addListener('removeSelection', function(context) {\n\n    var event = context.keyEvent;\n\n    if (isKey([ 'Backspace', 'Delete', 'Del' ], event)) {\n      editorActions.trigger('removeSelection');\n\n      return true;\n    }\n  });\n};","import Keyboard from './Keyboard';\nimport KeyboardBindings from './KeyboardBindings';\n\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  __init__: [ 'keyboard', 'keyboardBindings' ],\n  keyboard: [ 'type', Keyboard ],\n  keyboardBindings: [ 'type', KeyboardBindings ]\n};\n","import {\r\n  isCmd,\r\n  isKey,\r\n  isShift\r\n} from 'diagram-js/lib/features/keyboard/KeyboardUtil';\r\n\r\nimport {\r\n  KEYS_REDO,\r\n  KEYS_UNDO\r\n} from 'diagram-js/lib/features/keyboard/KeyboardBindings';\r\n\r\nconst LOW_PRIORITY = 500;\r\n\r\nexport class FormEditorKeyboardBindings {\r\n  constructor(eventBus, keyboard) {\r\n    eventBus.on('editorActions.init', LOW_PRIORITY, (event) => {\r\n      const { editorActions } = event;\r\n\r\n      this.registerBindings(keyboard, editorActions);\r\n    });\r\n  }\r\n\r\n  registerBindings(keyboard, editorActions) {\r\n\r\n    function addListener(action, fn) {\r\n      if (editorActions.isRegistered(action)) {\r\n        keyboard.addListener(fn);\r\n      }\r\n    }\r\n\r\n    // undo\r\n    // (CTRL|CMD) + Z\r\n    addListener('undo', (context) => {\r\n      const { keyEvent } = context;\r\n\r\n      if (isCmd(keyEvent) && !isShift(keyEvent) && isKey(KEYS_UNDO, keyEvent)) {\r\n        editorActions.trigger('undo');\r\n\r\n        return true;\r\n      }\r\n    });\r\n\r\n    // redo\r\n    // CTRL + Y\r\n    // CMD + SHIFT + Z\r\n    addListener('redo', (context) => {\r\n      const { keyEvent } = context;\r\n\r\n      if (isCmd(keyEvent) && (isKey(KEYS_REDO, keyEvent) || (isKey(KEYS_UNDO, keyEvent) && isShift(keyEvent)))) {\r\n        editorActions.trigger('redo');\r\n\r\n        return true;\r\n      }\r\n    });\r\n\r\n  }\r\n}\r\n\r\nFormEditorKeyboardBindings.$inject = [ 'eventBus', 'keyboard' ];","import KeyboardModule from 'diagram-js/lib/features/keyboard';\r\n\r\nimport { FormEditorKeyboardBindings } from './FormEditorKeyboardBindings';\r\n\r\nexport const FormEditorKeyboardModule = {\r\n  __depends__: [\r\n    KeyboardModule\r\n  ],\r\n  __init__: [ 'keyboardBindings' ],\r\n  keyboardBindings: [ 'type', FormEditorKeyboardBindings ]\r\n};","import { Dragging } from './Dragging';\r\n\r\nexport const DraggingModule = {\r\n  __init__: [ 'dragging' ],\r\n  dragging: [ 'type', Dragging ]\r\n};","import {\n  uniqueBy,\n  isArray\n} from 'min-dash';\n\n/**\n * @typedef {import('didi').Injector} Injector\n *\n * @typedef {import('../core/Types').ElementLike} ElementLike\n *\n * @typedef {import('../core/EventBus').default} EventBus\n * @typedef {import('./CommandHandler').default} CommandHandler\n *\n * @typedef { any } CommandContext\n * @typedef { {\n *   new (...args: any[]) : CommandHandler\n * } } CommandHandlerConstructor\n * @typedef { {\n *   [key: string]: CommandHandler;\n * } } CommandHandlerMap\n * @typedef { {\n *   command: string;\n *   context: any;\n *   id?: any;\n * } } CommandStackAction\n * @typedef { {\n *   actions: CommandStackAction[];\n *   dirty: ElementLike[];\n *   trigger: 'execute' | 'undo' | 'redo' | 'clear' | null;\n *   atomic?: boolean;\n * } } CurrentExecution\n */\n\n/**\n * A service that offers un- and redoable execution of commands.\n *\n * The command stack is responsible for executing modeling actions\n * in a un- and redoable manner. To do this it delegates the actual\n * command execution to {@link CommandHandler}s.\n *\n * Command handlers provide {@link CommandHandler#execute(ctx)} and\n * {@link CommandHandler#revert(ctx)} methods to un- and redo a command\n * identified by a command context.\n *\n *\n * ## Life-Cycle events\n *\n * In the process the command stack fires a number of life-cycle events\n * that other components to participate in the command execution.\n *\n *    * preExecute\n *    * preExecuted\n *    * execute\n *    * executed\n *    * postExecute\n *    * postExecuted\n *    * revert\n *    * reverted\n *\n * A special event is used for validating, whether a command can be\n * performed prior to its execution.\n *\n *    * canExecute\n *\n * Each of the events is fired as `commandStack.{eventName}` and\n * `commandStack.{commandName}.{eventName}`, respectively. This gives\n * components fine grained control on where to hook into.\n *\n * The event object fired transports `command`, the name of the\n * command and `context`, the command context.\n *\n *\n * ## Creating Command Handlers\n *\n * Command handlers should provide the {@link CommandHandler#execute(ctx)}\n * and {@link CommandHandler#revert(ctx)} methods to implement\n * redoing and undoing of a command.\n *\n * A command handler _must_ ensure undo is performed properly in order\n * not to break the undo chain. It must also return the shapes that\n * got changed during the `execute` and `revert` operations.\n *\n * Command handlers may execute other modeling operations (and thus\n * commands) in their `preExecute(d)` and `postExecute(d)` phases. The command\n * stack will properly group all commands together into a logical unit\n * that may be re- and undone atomically.\n *\n * Command handlers must not execute other commands from within their\n * core implementation (`execute`, `revert`).\n *\n *\n * ## Change Tracking\n *\n * During the execution of the CommandStack it will keep track of all\n * elements that have been touched during the command's execution.\n *\n * At the end of the CommandStack execution it will notify interested\n * components via an 'elements.changed' event with all the dirty\n * elements.\n *\n * The event can be picked up by components that are interested in the fact\n * that elements have been changed. One use case for this is updating\n * their graphical representation after moving / resizing or deletion.\n *\n * @see CommandHandler\n *\n * @param {EventBus} eventBus\n * @param {Injector} injector\n */\nexport default function CommandStack(eventBus, injector) {\n\n  /**\n   * A map of all registered command handlers.\n   *\n   * @type {CommandHandlerMap}\n   */\n  this._handlerMap = {};\n\n  /**\n   * A stack containing all re/undoable actions on the diagram\n   *\n   * @type {CommandStackAction[]}\n   */\n  this._stack = [];\n\n  /**\n   * The current index on the stack\n   *\n   * @type {number}\n   */\n  this._stackIdx = -1;\n\n  /**\n   * Current active commandStack execution\n   *\n   * @type {CurrentExecution}\n   */\n  this._currentExecution = {\n    actions: [],\n    dirty: [],\n    trigger: null\n  };\n\n  /**\n   * @type {Injector}\n   */\n  this._injector = injector;\n\n  /**\n   * @type EventBus\n   */\n  this._eventBus = eventBus;\n\n  /**\n   * @type { number }\n   */\n  this._uid = 1;\n\n  eventBus.on([\n    'diagram.destroy',\n    'diagram.clear'\n  ], function() {\n    this.clear(false);\n  }, this);\n}\n\nCommandStack.$inject = [ 'eventBus', 'injector' ];\n\n\n/**\n * Execute a command.\n *\n * @param {string} command The command to execute.\n * @param {CommandContext} context The context with which to execute the command.\n */\nCommandStack.prototype.execute = function(command, context) {\n  if (!command) {\n    throw new Error('command required');\n  }\n\n  this._currentExecution.trigger = 'execute';\n\n  const action = { command: command, context: context };\n\n  this._pushAction(action);\n  this._internalExecute(action);\n  this._popAction();\n};\n\n\n/**\n * Check whether a command can be executed.\n *\n * Implementors may hook into the mechanism on two ways:\n *\n *   * in event listeners:\n *\n *     Users may prevent the execution via an event listener.\n *     It must prevent the default action for `commandStack.(<command>.)canExecute` events.\n *\n *   * in command handlers:\n *\n *     If the method {@link CommandHandler#canExecute} is implemented in a handler\n *     it will be called to figure out whether the execution is allowed.\n *\n * @param {string} command The command to execute.\n * @param {CommandContext} context The context with which to execute the command.\n *\n * @return {boolean} Whether the command can be executed with the given context.\n */\nCommandStack.prototype.canExecute = function(command, context) {\n\n  const action = { command: command, context: context };\n\n  const handler = this._getHandler(command);\n\n  let result = this._fire(command, 'canExecute', action);\n\n  // handler#canExecute will only be called if no listener\n  // decided on a result already\n  if (result === undefined) {\n    if (!handler) {\n      return false;\n    }\n\n    if (handler.canExecute) {\n      result = handler.canExecute(context);\n    }\n  }\n\n  return result;\n};\n\n\n/**\n * Clear the command stack, erasing all undo / redo history.\n *\n * @param {boolean} [emit=true] Whether to fire an event. Defaults to `true`.\n */\nCommandStack.prototype.clear = function(emit) {\n  this._stack.length = 0;\n  this._stackIdx = -1;\n\n  if (emit !== false) {\n    this._fire('changed', { trigger: 'clear' });\n  }\n};\n\n\n/**\n * Undo last command(s)\n */\nCommandStack.prototype.undo = function() {\n  let action = this._getUndoAction(),\n      next;\n\n  if (action) {\n    this._currentExecution.trigger = 'undo';\n\n    this._pushAction(action);\n\n    while (action) {\n      this._internalUndo(action);\n      next = this._getUndoAction();\n\n      if (!next || next.id !== action.id) {\n        break;\n      }\n\n      action = next;\n    }\n\n    this._popAction();\n  }\n};\n\n\n/**\n * Redo last command(s)\n */\nCommandStack.prototype.redo = function() {\n  let action = this._getRedoAction(),\n      next;\n\n  if (action) {\n    this._currentExecution.trigger = 'redo';\n\n    this._pushAction(action);\n\n    while (action) {\n      this._internalExecute(action, true);\n      next = this._getRedoAction();\n\n      if (!next || next.id !== action.id) {\n        break;\n      }\n\n      action = next;\n    }\n\n    this._popAction();\n  }\n};\n\n\n/**\n * Register a handler instance with the command stack.\n *\n * @param {string} command Command to be executed.\n * @param {CommandHandler} handler Handler to execute the command.\n */\nCommandStack.prototype.register = function(command, handler) {\n  this._setHandler(command, handler);\n};\n\n\n/**\n * Register a handler type with the command stack  by instantiating it and\n * injecting its dependencies.\n *\n * @param {string} command Command to be executed.\n * @param {CommandHandlerConstructor} handlerCls Constructor to instantiate a {@link CommandHandler}.\n */\nCommandStack.prototype.registerHandler = function(command, handlerCls) {\n\n  if (!command || !handlerCls) {\n    throw new Error('command and handlerCls must be defined');\n  }\n\n  const handler = this._injector.instantiate(handlerCls);\n  this.register(command, handler);\n};\n\n/**\n * @return {boolean}\n */\nCommandStack.prototype.canUndo = function() {\n  return !!this._getUndoAction();\n};\n\n/**\n * @return {boolean}\n */\nCommandStack.prototype.canRedo = function() {\n  return !!this._getRedoAction();\n};\n\n// stack access  //////////////////////\n\nCommandStack.prototype._getRedoAction = function() {\n  return this._stack[this._stackIdx + 1];\n};\n\n\nCommandStack.prototype._getUndoAction = function() {\n  return this._stack[this._stackIdx];\n};\n\n\n// internal functionality //////////////////////\n\nCommandStack.prototype._internalUndo = function(action) {\n  const command = action.command,\n        context = action.context;\n\n  const handler = this._getHandler(command);\n\n  // guard against illegal nested command stack invocations\n  this._atomicDo(() => {\n    this._fire(command, 'revert', action);\n\n    if (handler.revert) {\n      this._markDirty(handler.revert(context));\n    }\n\n    this._revertedAction(action);\n\n    this._fire(command, 'reverted', action);\n  });\n};\n\n\nCommandStack.prototype._fire = function(command, qualifier, event) {\n  if (arguments.length < 3) {\n    event = qualifier;\n    qualifier = null;\n  }\n\n  const names = qualifier ? [ command + '.' + qualifier, qualifier ] : [ command ];\n  let result;\n\n  event = this._eventBus.createEvent(event);\n\n  for (const name of names) {\n    result = this._eventBus.fire('commandStack.' + name, event);\n\n    if (event.cancelBubble) {\n      break;\n    }\n  }\n\n  return result;\n};\n\nCommandStack.prototype._createId = function() {\n  return this._uid++;\n};\n\nCommandStack.prototype._atomicDo = function(fn) {\n\n  const execution = this._currentExecution;\n\n  execution.atomic = true;\n\n  try {\n    fn();\n  } finally {\n    execution.atomic = false;\n  }\n};\n\nCommandStack.prototype._internalExecute = function(action, redo) {\n  const command = action.command,\n        context = action.context;\n\n  const handler = this._getHandler(command);\n\n  if (!handler) {\n    throw new Error('no command handler registered for <' + command + '>');\n  }\n\n  this._pushAction(action);\n\n  if (!redo) {\n    this._fire(command, 'preExecute', action);\n\n    if (handler.preExecute) {\n      handler.preExecute(context);\n    }\n\n    this._fire(command, 'preExecuted', action);\n  }\n\n  // guard against illegal nested command stack invocations\n  this._atomicDo(() => {\n\n    this._fire(command, 'execute', action);\n\n    if (handler.execute) {\n\n      // actual execute + mark return results as dirty\n      this._markDirty(handler.execute(context));\n    }\n\n    // log to stack\n    this._executedAction(action, redo);\n\n    this._fire(command, 'executed', action);\n  });\n\n  if (!redo) {\n    this._fire(command, 'postExecute', action);\n\n    if (handler.postExecute) {\n      handler.postExecute(context);\n    }\n\n    this._fire(command, 'postExecuted', action);\n  }\n\n  this._popAction();\n};\n\n\nCommandStack.prototype._pushAction = function(action) {\n\n  const execution = this._currentExecution,\n        actions = execution.actions;\n\n  const baseAction = actions[0];\n\n  if (execution.atomic) {\n    throw new Error('illegal invocation in <execute> or <revert> phase (action: ' + action.command + ')');\n  }\n\n  if (!action.id) {\n    action.id = (baseAction && baseAction.id) || this._createId();\n  }\n\n  actions.push(action);\n};\n\n\nCommandStack.prototype._popAction = function() {\n  const execution = this._currentExecution,\n        trigger = execution.trigger,\n        actions = execution.actions,\n        dirty = execution.dirty;\n\n  actions.pop();\n\n  if (!actions.length) {\n    this._eventBus.fire('elements.changed', { elements: uniqueBy('id', dirty.reverse()) });\n\n    dirty.length = 0;\n\n    this._fire('changed', { trigger: trigger });\n\n    execution.trigger = null;\n  }\n};\n\n\nCommandStack.prototype._markDirty = function(elements) {\n  const execution = this._currentExecution;\n\n  if (!elements) {\n    return;\n  }\n\n  elements = isArray(elements) ? elements : [ elements ];\n\n  execution.dirty = execution.dirty.concat(elements);\n};\n\n\nCommandStack.prototype._executedAction = function(action, redo) {\n  const stackIdx = ++this._stackIdx;\n\n  if (!redo) {\n    this._stack.splice(stackIdx, this._stack.length, action);\n  }\n};\n\n\nCommandStack.prototype._revertedAction = function(action) {\n  this._stackIdx--;\n};\n\n\nCommandStack.prototype._getHandler = function(command) {\n  return this._handlerMap[command];\n};\n\nCommandStack.prototype._setHandler = function(command, handler) {\n  if (!command || !handler) {\n    throw new Error('command and handler required');\n  }\n\n  if (this._handlerMap[command]) {\n    throw new Error('overriding handler for command <' + command + '>');\n  }\n\n  this._handlerMap[command] = handler;\n};\n","import CommandStack from './CommandStack';\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  commandStack: [ 'type', CommandStack ]\n};\n","import {\n  forEach,\n  isFunction,\n  isArray,\n  isNumber,\n  isObject\n} from 'min-dash';\n\n/**\n * @typedef {import('../core/Types').ElementLike} ElementLike\n * @typedef {import('../core/EventBus').default} EventBus\n * @typedef {import('./CommandStack').CommandContext} CommandContext\n *\n * @typedef {string|string[]} Events\n * @typedef { (context: CommandContext) => ElementLike[] | void } HandlerFunction\n * @typedef { (context: CommandContext) => void } ComposeHandlerFunction\n */\n\nvar DEFAULT_PRIORITY = 1000;\n\n/**\n * A utility that can be used to plug into the command execution for\n * extension and/or validation.\n *\n * @class\n * @constructor\n *\n * @example\n *\n * ```javascript\n * import CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n *\n * class CommandLogger extends CommandInterceptor {\n *   constructor(eventBus) {\n *     super(eventBus);\n *\n *   this.preExecute('shape.create', (event) => {\n *     console.log('commandStack.shape-create.preExecute', event);\n *   });\n * }\n * ```\n *\n * @param {EventBus} eventBus\n */\nexport default function CommandInterceptor(eventBus) {\n\n  /**\n   * @type {EventBus}\n   */\n  this._eventBus = eventBus;\n}\n\nCommandInterceptor.$inject = [ 'eventBus' ];\n\nfunction unwrapEvent(fn, that) {\n  return function(event) {\n    return fn.call(that || null, event.context, event.command, event);\n  };\n}\n\n\n/**\n * Intercept a command during one of the phases.\n *\n * @param {Events} [events] command(s) to intercept\n * @param {string} [hook] phase to intercept\n * @param {number} [priority]\n * @param {ComposeHandlerFunction|HandlerFunction} handlerFn\n * @param {boolean} [unwrap] whether the event should be unwrapped\n * @param {any} [that]\n */\nCommandInterceptor.prototype.on = function(events, hook, priority, handlerFn, unwrap, that) {\n\n  if (isFunction(hook) || isNumber(hook)) {\n    that = unwrap;\n    unwrap = handlerFn;\n    handlerFn = priority;\n    priority = hook;\n    hook = null;\n  }\n\n  if (isFunction(priority)) {\n    that = unwrap;\n    unwrap = handlerFn;\n    handlerFn = priority;\n    priority = DEFAULT_PRIORITY;\n  }\n\n  if (isObject(unwrap)) {\n    that = unwrap;\n    unwrap = false;\n  }\n\n  if (!isFunction(handlerFn)) {\n    throw new Error('handlerFn must be a function');\n  }\n\n  if (!isArray(events)) {\n    events = [ events ];\n  }\n\n  var eventBus = this._eventBus;\n\n  forEach(events, function(event) {\n\n    // concat commandStack(.event)?(.hook)?\n    var fullEvent = [ 'commandStack', event, hook ].filter(function(e) { return e; }).join('.');\n\n    eventBus.on(fullEvent, priority, unwrap ? unwrapEvent(handlerFn, that) : handlerFn, that);\n  });\n};\n\n/**\n * Add a <canExecute> phase of command interceptor.\n *\n * @param {Events} [events] command(s) to intercept\n * @param {number} [priority]\n * @param {ComposeHandlerFunction|HandlerFunction} handlerFn\n * @param {boolean} [unwrap] whether the event should be unwrapped\n * @param {any} [that]\n */\nCommandInterceptor.prototype.canExecute = createHook('canExecute');\n\n/**\n * Add a <preExecute> phase of command interceptor.\n *\n * @param {Events} [events] command(s) to intercept\n * @param {number} [priority]\n * @param {ComposeHandlerFunction|HandlerFunction} handlerFn\n * @param {boolean} [unwrap] whether the event should be unwrapped\n * @param {any} [that]\n */\nCommandInterceptor.prototype.preExecute = createHook('preExecute');\n\n/**\n * Add a <preExecuted> phase of command interceptor.\n *\n * @param {Events} [events] command(s) to intercept\n * @param {number} [priority]\n * @param {ComposeHandlerFunction|HandlerFunction} handlerFn\n * @param {boolean} [unwrap] whether the event should be unwrapped\n * @param {any} [that]\n */\nCommandInterceptor.prototype.preExecuted = createHook('preExecuted');\n\n/**\n * Add a <execute> phase of command interceptor.\n *\n * @param {Events} [events] command(s) to intercept\n * @param {number} [priority]\n * @param {ComposeHandlerFunction|HandlerFunction} handlerFn\n * @param {boolean} [unwrap] whether the event should be unwrapped\n * @param {any} [that]\n */\nCommandInterceptor.prototype.execute = createHook('execute');\n\n/**\n * Add a <executed> phase of command interceptor.\n *\n * @param {Events} [events] command(s) to intercept\n * @param {number} [priority]\n * @param {ComposeHandlerFunction|HandlerFunction} handlerFn\n * @param {boolean} [unwrap] whether the event should be unwrapped\n * @param {any} [that]\n */\nCommandInterceptor.prototype.executed = createHook('executed');\n\n/**\n * Add a <postExecute> phase of command interceptor.\n *\n * @param {Events} [events] command(s) to intercept\n * @param {number} [priority]\n * @param {ComposeHandlerFunction|HandlerFunction} handlerFn\n * @param {boolean} [unwrap] whether the event should be unwrapped\n * @param {any} [that]\n */\nCommandInterceptor.prototype.postExecute = createHook('postExecute');\n\n/**\n * Add a <postExecuted> phase of command interceptor.\n *\n * @param {Events} [events] command(s) to intercept\n * @param {number} [priority]\n * @param {ComposeHandlerFunction|HandlerFunction} handlerFn\n * @param {boolean} [unwrap] whether the event should be unwrapped\n * @param {any} [that]\n */\nCommandInterceptor.prototype.postExecuted = createHook('postExecuted');\n\n/**\n * Add a <revert> phase of command interceptor.\n *\n * @param {Events} [events] command(s) to intercept\n * @param {number} [priority]\n * @param {ComposeHandlerFunction|HandlerFunction} handlerFn\n * @param {boolean} [unwrap] whether the event should be unwrapped\n * @param {any} [that]\n */\nCommandInterceptor.prototype.revert = createHook('revert');\n\n/**\n * Add a <reverted> phase of command interceptor.\n *\n * @param {Events} [events] command(s) to intercept\n * @param {number} [priority]\n * @param {ComposeHandlerFunction|HandlerFunction} handlerFn\n * @param {boolean} [unwrap] whether the event should be unwrapped\n * @param {any} [that]\n */\nCommandInterceptor.prototype.reverted = createHook('reverted');\n\n/*\n * Add prototype methods for each phase of command execution (e.g. execute,\n * revert).\n *\n * @param {string} hook\n *\n * @return { (\n *   events?: Events,\n *   priority?: number,\n *   handlerFn: ComposeHandlerFunction|HandlerFunction,\n *   unwrap?: boolean\n * ) => any }\n */\nfunction createHook(hook) {\n\n  /**\n   * @this {CommandInterceptor}\n   *\n   * @param {Events} [events]\n   * @param {number} [priority]\n   * @param {ComposeHandlerFunction|HandlerFunction} handlerFn\n   * @param {boolean} [unwrap]\n   * @param {any} [that]\n   */\n  const hookFn = function(events, priority, handlerFn, unwrap, that) {\n\n    if (isFunction(events) || isNumber(events)) {\n      that = unwrap;\n      unwrap = handlerFn;\n      handlerFn = priority;\n      priority = events;\n      events = null;\n    }\n\n    this.on(events, hook, priority, handlerFn, unwrap, that);\n  };\n\n  return hookFn;\n}\n","import CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\r\n\r\nexport class IdBehavior extends CommandInterceptor {\r\n  constructor(eventBus, modeling) {\r\n    super(eventBus);\r\n\r\n    this.preExecute('formField.remove', function(context) {\r\n      const { formField } = context;\r\n\r\n      const { id } = formField;\r\n\r\n      modeling.unclaimId(formField, id);\r\n    }, true);\r\n\r\n    this.preExecute('formField.edit', function(context) {\r\n      const {\r\n        formField,\r\n        properties\r\n      } = context;\r\n\r\n      if ('id' in properties) {\r\n        modeling.unclaimId(formField, formField.id);\r\n\r\n        modeling.claimId(formField, properties.id);\r\n      }\r\n    }, true);\r\n  }\r\n}\r\n\r\nIdBehavior.$inject = [ 'eventBus', 'modeling' ];","import CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\r\n\r\nexport class KeyBehavior extends CommandInterceptor {\r\n  constructor(eventBus, modeling, formFields) {\r\n    super(eventBus);\r\n\r\n    this.preExecute('formField.remove', function(context) {\r\n\r\n      const { formField } = context;\r\n      const { key, type } = formField;\r\n      const { config } = formFields.get(type);\r\n\r\n      if (config.keyed) {\r\n        modeling.unclaimKey(formField, key);\r\n      }\r\n    }, true);\r\n\r\n    this.preExecute('formField.edit', function(context) {\r\n      const {\r\n        formField,\r\n        properties\r\n      } = context;\r\n\r\n      const { key, type } = formField;\r\n      const { config } = formFields.get(type);\r\n\r\n      if (config.keyed && 'key' in properties) {\r\n        modeling.unclaimKey(formField, key);\r\n        modeling.claimKey(formField, properties.key);\r\n      }\r\n    }, true);\r\n  }\r\n}\r\n\r\nKeyBehavior.$inject = [ 'eventBus', 'modeling', 'formFields' ];","import CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\r\n\r\nexport class PathBehavior extends CommandInterceptor {\r\n  constructor(eventBus, modeling, formFields) {\r\n    super(eventBus);\r\n\r\n    this.preExecute('formField.remove', function(context) {\r\n      const { formField } = context;\r\n      const { path, type } = formField;\r\n      const { config } = formFields.get(type);\r\n\r\n      if (config.pathed) {\r\n        modeling.unclaimPath(formField, path);\r\n      }\r\n    }, true);\r\n\r\n    this.preExecute('formField.edit', function(context) {\r\n      const {\r\n        formField,\r\n        properties\r\n      } = context;\r\n\r\n      const { path, type } = formField;\r\n      const { config } = formFields.get(type);\r\n\r\n      if (config.pathed && 'path' in properties) {\r\n        modeling.unclaimPath(formField, path);\r\n        modeling.claimPath(formField, properties.path);\r\n      }\r\n    }, true);\r\n  }\r\n}\r\n\r\nPathBehavior.$inject = [ 'eventBus', 'modeling', 'formFields' ];","import CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\r\n\r\nexport class ValidateBehavior extends CommandInterceptor {\r\n  constructor(eventBus) {\r\n    super(eventBus);\r\n\r\n    /**\r\n     * Remove custom validation if <validationType> is about to be added.\r\n     */\r\n    this.preExecute('formField.edit', function(context) {\r\n      const { properties } = context;\r\n\r\n      const { validate = {} } = properties;\r\n\r\n      if (validate.validationType) {\r\n        const newValidate = {\r\n          ...validate\r\n        };\r\n\r\n        delete newValidate.minLength;\r\n        delete newValidate.maxLength;\r\n        delete newValidate.pattern;\r\n\r\n        properties['validate'] = newValidate;\r\n      }\r\n    }, true);\r\n  }\r\n}\r\n\r\nValidateBehavior.$inject = [ 'eventBus' ];","import CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\r\n\r\nimport { get } from 'min-dash';\r\n\r\nimport {\r\n  OPTIONS_SOURCES,\r\n  OPTIONS_SOURCES_PATHS\r\n} from '@bpmn-io/form-js-viewer';\r\n\r\nexport class OptionsSourceBehavior extends CommandInterceptor {\r\n  constructor(eventBus) {\r\n    super(eventBus);\r\n\r\n    /**\r\n     * Cleanup properties on changing the values source.\r\n     *\r\n     * 1) Remove other sources, e.g. set `values` => remove `valuesKey` and `valuesExpression`\r\n     * 2) Remove default values for all other values sources\r\n     */\r\n    this.preExecute('formField.edit', function(context) {\r\n      const { properties } = context;\r\n\r\n      const newProperties = {};\r\n\r\n      if (!isValuesSourceUpdate(properties)) {\r\n        return;\r\n      }\r\n\r\n      // clean up value sources that are not to going to be set\r\n      Object.values(OPTIONS_SOURCES).forEach(source => {\r\n        const path = OPTIONS_SOURCES_PATHS[source];\r\n        if (get(properties, path) == undefined) {\r\n          newProperties[OPTIONS_SOURCES_PATHS[source]] = undefined;\r\n        }\r\n      });\r\n\r\n      // clean up default value\r\n      if (\r\n        get(properties, OPTIONS_SOURCES_PATHS[OPTIONS_SOURCES.EXPRESSION]) !== undefined ||\r\n        get(properties, OPTIONS_SOURCES_PATHS[OPTIONS_SOURCES.INPUT]) !== undefined\r\n      ) {\r\n        newProperties['defaultValue'] = undefined;\r\n      }\r\n\r\n      context.properties = {\r\n        ...properties,\r\n        ...newProperties\r\n      };\r\n    }, true);\r\n  }\r\n}\r\n\r\nOptionsSourceBehavior.$inject = [ 'eventBus' ];\r\n\r\n// helper ///////////////////\r\n\r\nfunction isValuesSourceUpdate(properties) {\r\n  return Object.values(OPTIONS_SOURCES_PATHS).some(path => {\r\n    return get(properties, path) !== undefined;\r\n  });\r\n}","import CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\r\n\r\nimport { get, isArray, isDefined, isString } from 'min-dash';\r\n\r\nconst COLUMNS_SOURCE_PROPERTIES = {\r\n  columns: 'columns',\r\n  columnsExpression: 'columnsExpression'\r\n};\r\n\r\nexport class ColumnsSourceBehavior extends CommandInterceptor {\r\n  constructor(eventBus) {\r\n    super(eventBus);\r\n\r\n    this.preExecute('formField.edit', function(context) {\r\n      const { properties, oldProperties } = context;\r\n\r\n      const isColumnSourceUpdate = Object.values(COLUMNS_SOURCE_PROPERTIES).some(path => {\r\n        return get(properties, [ path ]) !== undefined;\r\n      });\r\n\r\n      if (!isColumnSourceUpdate) {\r\n        return;\r\n      }\r\n\r\n      const columns = get(properties, [ COLUMNS_SOURCE_PROPERTIES.columns ]);\r\n      const oldColumns = get(oldProperties, [ COLUMNS_SOURCE_PROPERTIES.columns ]);\r\n      const columnsExpression = get(properties, [ COLUMNS_SOURCE_PROPERTIES.columnsExpression ]);\r\n      const oldColumnsExpression = get(oldProperties, [ COLUMNS_SOURCE_PROPERTIES.columnsExpression ]);\r\n\r\n      if (isArray(columns) && !isDefined(oldColumns)) {\r\n        context.properties = {\r\n          ...properties,\r\n          columnsExpression: undefined\r\n        };\r\n        return;\r\n      }\r\n\r\n      if (isString(columnsExpression) && !isString(oldColumnsExpression)) {\r\n        context.properties = {\r\n          ...properties,\r\n          columns: undefined\r\n        };\r\n        return;\r\n      }\r\n\r\n    }, true);\r\n  }\r\n}\r\n\r\nColumnsSourceBehavior.$inject = [ 'eventBus' ];\r\n\r\n","import CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\r\n\r\nimport { get } from 'min-dash';\r\n\r\nexport class TableDataSourceBehavior extends CommandInterceptor {\r\n  constructor(eventBus) {\r\n    super(eventBus);\r\n\r\n    this.preExecute('formField.add', function(context) {\r\n\r\n      const { formField } = context;\r\n\r\n      if (get(formField, [ 'type' ]) !== 'table') {\r\n        return;\r\n      }\r\n\r\n      context.formField = {\r\n        ...formField,\r\n        dataSource: `=${formField.id}`\r\n      };\r\n    }, true);\r\n  }\r\n}\r\n\r\nTableDataSourceBehavior.$inject = [ 'eventBus' ];","import { IdBehavior } from './IdBehavior';\r\nimport { KeyBehavior } from './KeyBehavior';\r\nimport { PathBehavior } from './PathBehavior';\r\nimport { ValidateBehavior } from './ValidateBehavior';\r\nimport { OptionsSourceBehavior } from './OptionsSourceBehavior';\r\nimport { ColumnsSourceBehavior } from './ColumnsSourceBehavior';\r\nimport { TableDataSourceBehavior } from './TableDataSourceBehavior';\r\n\r\nexport const BehaviorModule = {\r\n  __init__: [\r\n    'idBehavior',\r\n    'keyBehavior',\r\n    'pathBehavior',\r\n    'validateBehavior',\r\n    'optionsSourceBehavior',\r\n    'columnsSourceBehavior',\r\n    'tableDataSourceBehavior'\r\n  ],\r\n  idBehavior: [ 'type', IdBehavior ],\r\n  keyBehavior: [ 'type', KeyBehavior ],\r\n  pathBehavior: [ 'type', PathBehavior ],\r\n  validateBehavior: [ 'type', ValidateBehavior ],\r\n  optionsSourceBehavior: [ 'type', OptionsSourceBehavior ],\r\n  columnsSourceBehavior: [ 'type', ColumnsSourceBehavior ],\r\n  tableDataSourceBehavior: [ 'type', TableDataSourceBehavior ]\r\n};\r\n","export function arrayAdd(array, index, item) {\r\n  array.splice(index, 0, item);\r\n\r\n  return array;\r\n}\r\n\r\nexport { mutate as arrayMove } from 'array-move';\r\n\r\nexport function arrayRemove(array, index) {\r\n  array.splice(index, 1);\r\n\r\n  return array;\r\n}\r\n\r\nexport function updatePath(formFieldRegistry, formField, index) {\r\n  const parent = formFieldRegistry.get(formField._parent);\r\n  refreshPathsRecursively(formField, [ ...parent._path, 'components', index ]);\r\n  return formField;\r\n}\r\n\r\nexport function refreshPathsRecursively(formField, path) {\r\n\r\n  formField._path = path;\r\n  const components = formField.components || [];\r\n\r\n  components.forEach((component, index) => {\r\n    refreshPathsRecursively(component, [ ...path, 'components', index ]);\r\n  });\r\n}\r\n\r\nexport function updateRow(formField, rowId) {\r\n  formField.layout = {\r\n    ...formField.layout || {},\r\n    row: rowId\r\n  };\r\n\r\n  return formField;\r\n}","import { updateRow } from './cmd/Util';\r\n\r\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\r\n\r\nimport { clone } from '@bpmn-io/form-js-viewer';\r\n\r\n\r\nexport class FormLayoutUpdater extends CommandInterceptor {\r\n\r\n  constructor(eventBus, formLayouter, modeling, formEditor) {\r\n    super(eventBus);\r\n\r\n    this._eventBus = eventBus;\r\n    this._formLayouter = formLayouter;\r\n    this._modeling = modeling;\r\n    this._formEditor = formEditor;\r\n\r\n    // @ts-ignore\r\n    this.preExecute([\r\n      'formField.add',\r\n      'formField.remove',\r\n      'formField.move',\r\n      'id.updateClaim'\r\n    ], (event) => this.updateRowIds(event));\r\n\r\n    // we need that as the state got updates\r\n    // on the next tick (not in post execute)\r\n    eventBus.on('changed', (context) => {\r\n      const { schema } = context;\r\n      this.updateLayout(schema);\r\n    });\r\n\r\n  }\r\n\r\n  updateLayout(schema) {\r\n    this._formLayouter.clear();\r\n    this._formLayouter.calculateLayout(clone(schema));\r\n  }\r\n\r\n  updateRowIds(event) {\r\n\r\n    const { schema } = this._formEditor._getState();\r\n\r\n    const setRowIds = parent => {\r\n      if (!parent.components || !parent.components.length) {\r\n        return;\r\n      }\r\n\r\n      parent.components.forEach(formField => {\r\n        const row = this._formLayouter.getRowForField(formField);\r\n\r\n        updateRow(formField, row.id);\r\n\r\n        // handle children recursively\r\n        setRowIds(formField);\r\n      });\r\n    };\r\n\r\n    // make sure rows are persisted in schema (e.g. for migration case)\r\n    setRowIds(schema);\r\n  }\r\n\r\n}\r\n\r\nFormLayoutUpdater.$inject = [ 'eventBus', 'formLayouter', 'modeling', 'formEditor' ];","import { get } from 'min-dash';\r\n\r\nimport {\r\n  arrayAdd,\r\n  arrayRemove,\r\n  updatePath\r\n} from './Util';\r\n\r\nexport class AddFormFieldHandler {\r\n\r\n  /**\r\n   * @constructor\r\n   * @param { import('../../../FormEditor').FormEditor } formEditor\r\n   * @param { import('../../../core/FormFieldRegistry').FormFieldRegistry } formFieldRegistry\r\n   */\r\n  constructor(formEditor, formFieldRegistry) {\r\n    this._formEditor = formEditor;\r\n    this._formFieldRegistry = formFieldRegistry;\r\n  }\r\n\r\n  execute(context) {\r\n    const {\r\n      formField,\r\n      targetFormField,\r\n      targetIndex\r\n    } = context;\r\n\r\n    const { schema } = this._formEditor._getState();\r\n\r\n    const targetPath = [ ...targetFormField._path, 'components' ];\r\n\r\n    formField._parent = targetFormField.id;\r\n\r\n    // (1) Add new form field\r\n    arrayAdd(get(schema, targetPath), targetIndex, formField);\r\n\r\n    // (2) Update internal paths of new form field and its siblings (and their children)\r\n    get(schema, targetPath).forEach((formField, index) => updatePath(this._formFieldRegistry, formField, index));\r\n\r\n    // (3) Add new form field to form field registry\r\n    this._formFieldRegistry.add(formField);\r\n\r\n    // TODO: Create updater/change support that automatically updates paths and schema on command execution\r\n    this._formEditor._setState({ schema });\r\n  }\r\n\r\n  revert(context) {\r\n    const {\r\n      formField,\r\n      targetFormField,\r\n      targetIndex\r\n    } = context;\r\n\r\n    const { schema } = this._formEditor._getState();\r\n\r\n    const targetPath = [ ...targetFormField._path, 'components' ];\r\n\r\n    // (1) Remove new form field\r\n    arrayRemove(get(schema, targetPath), targetIndex);\r\n\r\n    // (2) Update internal paths of new form field and its siblings (and their children)\r\n    get(schema, targetPath).forEach((formField, index) => updatePath(this._formFieldRegistry, formField, index));\r\n\r\n    // (3) Remove new form field from form field registry\r\n    this._formFieldRegistry.remove(formField);\r\n\r\n    // TODO: Create updater/change support that automatically updates paths and schema on command execution\r\n    this._formEditor._setState({ schema });\r\n  }\r\n}\r\n\r\nAddFormFieldHandler.$inject = [ 'formEditor', 'formFieldRegistry' ];","export class EditFormFieldHandler {\r\n\r\n  /**\r\n   * @constructor\r\n   * @param { import('../../../FormEditor').FormEditor } formEditor\r\n   * @param { import('../../../core/FormFieldRegistry').FormFieldRegistry } formFieldRegistry\r\n   */\r\n  constructor(formEditor, formFieldRegistry) {\r\n    this._formEditor = formEditor;\r\n    this._formFieldRegistry = formFieldRegistry;\r\n  }\r\n\r\n  execute(context) {\r\n    const {\r\n      formField,\r\n      properties\r\n    } = context;\r\n\r\n    let { schema } = this._formEditor._getState();\r\n\r\n    const oldProperties = {};\r\n\r\n    for (let key in properties) {\r\n      oldProperties[ key ] = formField[ key ];\r\n\r\n      const property = properties[ key ];\r\n\r\n      if (key === 'id') {\r\n        if (property !== formField.id) {\r\n          this._formFieldRegistry.updateId(formField, property);\r\n        }\r\n      } else {\r\n        formField[ key ] = property;\r\n      }\r\n    }\r\n\r\n    context.oldProperties = oldProperties;\r\n\r\n    // TODO: Create updater/change support that automatically updates paths and schema on command execution\r\n    this._formEditor._setState({ schema });\r\n\r\n    return formField;\r\n  }\r\n\r\n  revert(context) {\r\n    const {\r\n      formField,\r\n      oldProperties\r\n    } = context;\r\n\r\n    let { schema } = this._formEditor._getState();\r\n\r\n    for (let key in oldProperties) {\r\n\r\n      const property = oldProperties[ key ];\r\n\r\n      if (key === 'id') {\r\n        if (property !== formField.id) {\r\n          this._formFieldRegistry.updateId(formField, property);\r\n        }\r\n      } else {\r\n        formField[ key ] = property;\r\n      }\r\n    }\r\n\r\n    // TODO: Create updater/change support that automatically updates paths and schema on command execution\r\n    this._formEditor._setState({ schema });\r\n\r\n    return formField;\r\n  }\r\n\r\n}\r\n\r\nEditFormFieldHandler.$inject = [\r\n  'formEditor',\r\n  'formFieldRegistry'\r\n];","import { get } from 'min-dash';\r\n\r\nimport {\r\n  arrayAdd,\r\n  arrayMove,\r\n  arrayRemove,\r\n  updatePath,\r\n  updateRow\r\n} from './Util';\r\n\r\nexport class MoveFormFieldHandler {\r\n\r\n  /**\r\n   * @constructor\r\n   * @param { import('../../../FormEditor').FormEditor } formEditor\r\n   * @param { import('../../../core/FormFieldRegistry').FormFieldRegistry } formFieldRegistry\r\n   * @param { import('@bpmn-io/form-js-viewer').PathRegistry } pathRegistry\r\n   * @param { import('@bpmn-io/form-js-viewer').FormLayouter } formLayouter\r\n   */\r\n  constructor(formEditor, formFieldRegistry, pathRegistry, formLayouter) {\r\n    this._formEditor = formEditor;\r\n    this._formFieldRegistry = formFieldRegistry;\r\n    this._pathRegistry = pathRegistry;\r\n    this._formLayouter = formLayouter;\r\n  }\r\n\r\n  execute(context) {\r\n    this.moveFormField(context);\r\n  }\r\n\r\n  revert(context) {\r\n    let {\r\n      sourceFormField,\r\n      targetFormField,\r\n      sourceIndex,\r\n      targetIndex,\r\n      sourceRow,\r\n      targetRow\r\n    } = context;\r\n\r\n    this.moveFormField({\r\n      sourceFormField: targetFormField,\r\n      targetFormField: sourceFormField,\r\n      sourceIndex: targetIndex,\r\n      targetIndex: sourceIndex,\r\n      sourceRow: targetRow,\r\n      targetRow: sourceRow\r\n    }, true);\r\n  }\r\n\r\n  moveFormField(context, revert) {\r\n    let {\r\n      sourceFormField,\r\n      targetFormField,\r\n      sourceIndex,\r\n      targetIndex,\r\n      targetRow\r\n    } = context;\r\n\r\n    let { schema } = this._formEditor._getState();\r\n\r\n    const sourcePath = [ ...sourceFormField._path, 'components' ];\r\n\r\n    if (sourceFormField.id === targetFormField.id) {\r\n\r\n      if (revert) {\r\n        if (sourceIndex > targetIndex) {\r\n          sourceIndex--;\r\n        }\r\n      } else {\r\n        if (sourceIndex < targetIndex) {\r\n          targetIndex--;\r\n        }\r\n      }\r\n\r\n      const formField = get(schema, [ ...sourcePath, sourceIndex ]);\r\n\r\n      // (1) Add to row or create new one\r\n      updateRow(formField, targetRow ? targetRow.id : this._formLayouter.nextRowId());\r\n\r\n      // (2) Move form field\r\n      arrayMove(get(schema, sourcePath), sourceIndex, targetIndex);\r\n\r\n      // (3) Update internal paths of new form field and its siblings (and their children)\r\n      get(schema, sourcePath).forEach((formField, index) => updatePath(this._formFieldRegistry, formField, index));\r\n\r\n    } else {\r\n      const formField = get(schema, [ ...sourcePath, sourceIndex ]);\r\n\r\n      // (1) Deregister form field (and children) from path registry\r\n      this._pathRegistry.executeRecursivelyOnFields(formField, ({ field }) => {\r\n        this._pathRegistry.unclaimPath(this._pathRegistry.getValuePath(field));\r\n      });\r\n\r\n      formField._parent = targetFormField.id;\r\n\r\n      // (2) Remove form field\r\n      arrayRemove(get(schema, sourcePath), sourceIndex);\r\n\r\n      // (3) Update internal paths of siblings (and their children)\r\n      get(schema, sourcePath).forEach((formField, index) => updatePath(this._formFieldRegistry, formField, index));\r\n\r\n      const targetPath = [ ...targetFormField._path, 'components' ];\r\n\r\n      // (4) Add to row or create new one\r\n      updateRow(formField, targetRow ? targetRow.id : this._formLayouter.nextRowId());\r\n\r\n      // (5) Add form field\r\n      arrayAdd(get(schema, targetPath), targetIndex, formField);\r\n\r\n      // (6) Update internal paths of siblings (and their children)\r\n      get(schema, targetPath).forEach((formField, index) => updatePath(this._formFieldRegistry, formField, index));\r\n\r\n      // (7) Reregister form field (and children) from path registry\r\n      this._pathRegistry.executeRecursivelyOnFields(formField, ({ field, isClosed, isRepeatable }) => {\r\n        this._pathRegistry.claimPath(this._pathRegistry.getValuePath(field), {\r\n          isClosed,\r\n          isRepeatable,\r\n          claimerId: field.id\r\n        });\r\n      });\r\n    }\r\n\r\n    // TODO: Create updater/change support that automatically updates paths and schema on command execution\r\n    this._formEditor._setState({ schema });\r\n  }\r\n}\r\n\r\nMoveFormFieldHandler.$inject = [ 'formEditor', 'formFieldRegistry', 'pathRegistry', 'formLayouter' ];","import { get } from 'min-dash';\r\n\r\nimport {\r\n  arrayAdd,\r\n  arrayRemove,\r\n  updatePath\r\n} from './Util';\r\n\r\nimport {\r\n  runRecursively\r\n} from '@bpmn-io/form-js-viewer';\r\n\r\nexport class RemoveFormFieldHandler {\r\n\r\n  /**\r\n   * @constructor\r\n   * @param { import('../../../FormEditor').FormEditor } formEditor\r\n   * @param { import('../../../core/FormFieldRegistry').FormFieldRegistry } formFieldRegistry\r\n   */\r\n  constructor(formEditor, formFieldRegistry) {\r\n    this._formEditor = formEditor;\r\n    this._formFieldRegistry = formFieldRegistry;\r\n  }\r\n\r\n  execute(context) {\r\n    const {\r\n      sourceFormField,\r\n      sourceIndex\r\n    } = context;\r\n\r\n    let { schema } = this._formEditor._getState();\r\n\r\n    const sourcePath = [ ...sourceFormField._path, 'components' ];\r\n\r\n    const formField = context.formField = get(schema, [ ...sourcePath, sourceIndex ]);\r\n\r\n    // (1) Remove form field\r\n    arrayRemove(get(schema, sourcePath), sourceIndex);\r\n\r\n    // (2) Update internal paths of its siblings (and their children)\r\n    get(schema, sourcePath).forEach((formField, index) => updatePath(this._formFieldRegistry, formField, index));\r\n\r\n    // (3) Remove form field and children from form field registry\r\n    runRecursively(formField, (formField) => this._formFieldRegistry.remove(formField));\r\n\r\n    // TODO: Create updater/change support that automatically updates paths and schema on command execution\r\n    this._formEditor._setState({ schema });\r\n  }\r\n\r\n  revert(context) {\r\n    const {\r\n      formField,\r\n      sourceFormField,\r\n      sourceIndex\r\n    } = context;\r\n\r\n    let { schema } = this._formEditor._getState();\r\n\r\n    const sourcePath = [ ...sourceFormField._path, 'components' ];\r\n\r\n    // (1) Add form field\r\n    arrayAdd(get(schema, sourcePath), sourceIndex, formField);\r\n\r\n    // (2) Update internal paths of its siblings (and their children)\r\n    get(schema, sourcePath).forEach((formField, index) => updatePath(this._formFieldRegistry, formField, index));\r\n\r\n    // (3) Add form field and children to form field registry\r\n    runRecursively(formField, (formField) => this._formFieldRegistry.add(formField));\r\n\r\n    // TODO: Create updater/change support that automatically updates paths and schema on command execution\r\n    this._formEditor._setState({ schema });\r\n  }\r\n}\r\n\r\nRemoveFormFieldHandler.$inject = [ 'formEditor', 'formFieldRegistry' ];","export class UpdateIdClaimHandler {\r\n\r\n  /**\r\n   * @constructor\r\n   * @param { import('../../../core/FormFieldRegistry').FormFieldRegistry } formFieldRegistry\r\n   */\r\n  constructor(formFieldRegistry) {\r\n    this._formFieldRegistry = formFieldRegistry;\r\n  }\r\n\r\n  execute(context) {\r\n    const {\r\n      claiming,\r\n      formField,\r\n      id\r\n    } = context;\r\n\r\n    if (claiming) {\r\n      this._formFieldRegistry._ids.claim(id, formField);\r\n    } else {\r\n      this._formFieldRegistry._ids.unclaim(id);\r\n    }\r\n  }\r\n\r\n  revert(context) {\r\n    const {\r\n      claiming,\r\n      formField,\r\n      id\r\n    } = context;\r\n\r\n    if (claiming) {\r\n      this._formFieldRegistry._ids.unclaim(id);\r\n    } else {\r\n      this._formFieldRegistry._ids.claim(id, formField);\r\n    }\r\n  }\r\n}\r\n\r\nUpdateIdClaimHandler.$inject = [ 'formFieldRegistry' ];","export class UpdateKeyClaimHandler {\r\n\r\n  /**\r\n   * @constructor\r\n   * @param { import('@bpmn-io/form-js-viewer').PathRegistry } pathRegistry\r\n   */\r\n  constructor(pathRegistry) {\r\n    this._pathRegistry = pathRegistry;\r\n  }\r\n\r\n  execute(context) {\r\n    const {\r\n      claiming,\r\n      formField,\r\n      key\r\n    } = context;\r\n\r\n    const options = {\r\n      replacements: {\r\n        [ formField.id ]: key\r\n      }\r\n    };\r\n\r\n    const valuePath = this._pathRegistry.getValuePath(formField, options);\r\n\r\n    if (claiming) {\r\n      this._pathRegistry.claimPath(valuePath, { isClosed: true, claimerId: formField.id });\r\n    } else {\r\n      this._pathRegistry.unclaimPath(valuePath);\r\n    }\r\n\r\n    // cache path for revert\r\n    context.valuePath = valuePath;\r\n  }\r\n\r\n  revert(context) {\r\n    const {\r\n      claiming,\r\n      formField,\r\n      valuePath\r\n    } = context;\r\n\r\n    if (claiming) {\r\n      this._pathRegistry.unclaimPath(valuePath);\r\n    } else {\r\n      this._pathRegistry.claimPath(valuePath, { isClosed: true, claimerId: formField.id });\r\n    }\r\n  }\r\n}\r\n\r\nUpdateKeyClaimHandler.$inject = [ 'pathRegistry' ];","export class UpdatePathClaimHandler {\r\n\r\n  /**\r\n   * @constructor\r\n   * @param { import('@bpmn-io/form-js-viewer').PathRegistry } pathRegistry\r\n   */\r\n  constructor(pathRegistry) {\r\n    this._pathRegistry = pathRegistry;\r\n  }\r\n\r\n  execute(context) {\r\n    const {\r\n      claiming,\r\n      formField,\r\n      path\r\n    } = context;\r\n\r\n    const options = {\r\n      replacements: {\r\n        [ formField.id ]: path\r\n      }\r\n    };\r\n\r\n    const valuePaths = [];\r\n\r\n    if (claiming) {\r\n      this._pathRegistry.executeRecursivelyOnFields(formField, ({ field, isClosed, isRepeatable }) => {\r\n        const valuePath = this._pathRegistry.getValuePath(field, options);\r\n        valuePaths.push({ valuePath, isClosed, isRepeatable, claimerId: field.id });\r\n        this._pathRegistry.claimPath(valuePath, { isClosed, isRepeatable, claimerId: field.id });\r\n      });\r\n    } else {\r\n      this._pathRegistry.executeRecursivelyOnFields(formField, ({ field, isClosed, isRepeatable }) => {\r\n        const valuePath = this._pathRegistry.getValuePath(field, options);\r\n        valuePaths.push({ valuePath, isClosed, isRepeatable, claimerId: field.id });\r\n        this._pathRegistry.unclaimPath(valuePath);\r\n      });\r\n    }\r\n\r\n    // cache path info for revert\r\n    context.valuePaths = valuePaths;\r\n  }\r\n\r\n  revert(context) {\r\n    const {\r\n      claiming,\r\n      valuePaths\r\n    } = context;\r\n\r\n    if (claiming) {\r\n      valuePaths.forEach(({ valuePath })=> {\r\n        this._pathRegistry.unclaimPath(valuePath);\r\n      });\r\n    } else {\r\n      valuePaths.forEach(({ valuePath, isClosed, isRepeatable, claimerId }) => {\r\n        this._pathRegistry.claimPath(valuePath, {\r\n          isClosed,\r\n          isRepeatable,\r\n          claimerId\r\n        });\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nUpdatePathClaimHandler.$inject = [ 'pathRegistry' ];","import { AddFormFieldHandler } from './cmd/AddFormFieldHandler';\r\nimport { EditFormFieldHandler } from './cmd/EditFormFieldHandler';\r\nimport { MoveFormFieldHandler } from './cmd/MoveFormFieldHandler';\r\nimport { RemoveFormFieldHandler } from './cmd/RemoveFormFieldHandler';\r\nimport { UpdateIdClaimHandler } from './cmd/UpdateIdClaimHandler';\r\nimport { UpdateKeyClaimHandler } from './cmd/UpdateKeyClaimHandler';\r\nimport { UpdatePathClaimHandler } from './cmd/UpdatePathClaimHandler';\r\n\r\nimport { isObject } from 'min-dash';\r\n\r\n\r\nexport class Modeling {\r\n  constructor(commandStack, eventBus, formEditor, formFieldRegistry, fieldFactory) {\r\n    this._commandStack = commandStack;\r\n    this._formEditor = formEditor;\r\n    this._formFieldRegistry = formFieldRegistry;\r\n    this._fieldFactory = fieldFactory;\r\n\r\n    eventBus.on('form.init', () => {\r\n      this.registerHandlers();\r\n    });\r\n  }\r\n\r\n  registerHandlers() {\r\n    Object.entries(this.getHandlers()).forEach(([ id, handler ]) => {\r\n      this._commandStack.registerHandler(id, handler);\r\n    });\r\n  }\r\n\r\n  getHandlers() {\r\n    return {\r\n      'formField.add': AddFormFieldHandler,\r\n      'formField.edit': EditFormFieldHandler,\r\n      'formField.move': MoveFormFieldHandler,\r\n      'formField.remove': RemoveFormFieldHandler,\r\n      'id.updateClaim': UpdateIdClaimHandler,\r\n      'key.updateClaim': UpdateKeyClaimHandler,\r\n      'path.updateClaim': UpdatePathClaimHandler\r\n    };\r\n  }\r\n\r\n  addFormField(attrs, targetFormField, targetIndex) {\r\n\r\n    const formField = this._fieldFactory.create(attrs);\r\n\r\n    const context = {\r\n      formField,\r\n      targetFormField,\r\n      targetIndex\r\n    };\r\n\r\n    this._commandStack.execute('formField.add', context);\r\n\r\n    return formField;\r\n  }\r\n\r\n  editFormField(formField, properties, value) {\r\n    if (!isObject(properties)) {\r\n      properties = {\r\n        [ properties ]: value\r\n      };\r\n    }\r\n\r\n    const context = {\r\n      formField,\r\n      properties\r\n    };\r\n\r\n    this._commandStack.execute('formField.edit', context);\r\n  }\r\n\r\n  moveFormField(formField, sourceFormField, targetFormField, sourceIndex, targetIndex, sourceRow, targetRow) {\r\n    const context = {\r\n      formField,\r\n      sourceFormField,\r\n      targetFormField,\r\n      sourceIndex,\r\n      targetIndex,\r\n      sourceRow,\r\n      targetRow\r\n    };\r\n\r\n    this._commandStack.execute('formField.move', context);\r\n  }\r\n\r\n  removeFormField(formField, sourceFormField, sourceIndex) {\r\n    const context = {\r\n      formField,\r\n      sourceFormField,\r\n      sourceIndex\r\n    };\r\n\r\n    this._commandStack.execute('formField.remove', context);\r\n  }\r\n\r\n  claimId(formField, id) {\r\n    const context = {\r\n      formField,\r\n      id,\r\n      claiming: true\r\n    };\r\n\r\n    this._commandStack.execute('id.updateClaim', context);\r\n  }\r\n\r\n  unclaimId(formField, id) {\r\n    const context = {\r\n      formField,\r\n      id,\r\n      claiming: false\r\n    };\r\n\r\n    this._commandStack.execute('id.updateClaim', context);\r\n  }\r\n\r\n  claimKey(formField, key) {\r\n    const context = {\r\n      formField,\r\n      key,\r\n      claiming: true\r\n    };\r\n\r\n    this._commandStack.execute('key.updateClaim', context);\r\n  }\r\n\r\n  unclaimKey(formField, key) {\r\n    const context = {\r\n      formField,\r\n      key,\r\n      claiming: false\r\n    };\r\n\r\n    this._commandStack.execute('key.updateClaim', context);\r\n  }\r\n\r\n  claimPath(formField, path) {\r\n    const context = {\r\n      formField,\r\n      path,\r\n      claiming: true\r\n    };\r\n\r\n    this._commandStack.execute('path.updateClaim', context);\r\n  }\r\n\r\n  unclaimPath(formField, path) {\r\n    const context = {\r\n      formField,\r\n      path,\r\n      claiming: false\r\n    };\r\n\r\n    this._commandStack.execute('path.updateClaim', context);\r\n  }\r\n}\r\n\r\nModeling.$inject = [\r\n  'commandStack',\r\n  'eventBus',\r\n  'formEditor',\r\n  'formFieldRegistry',\r\n  'fieldFactory'\r\n];","import commandModule from 'diagram-js/lib/command';\r\n\r\nimport { BehaviorModule } from './behavior';\r\nimport { FormLayoutUpdater } from './FormLayoutUpdater';\r\nimport { Modeling } from './Modeling';\r\n\r\nexport const ModelingModule = {\r\n  __depends__: [\r\n    BehaviorModule,\r\n    commandModule\r\n  ],\r\n  __init__: [ 'formLayoutUpdater', 'modeling' ],\r\n  formLayoutUpdater: [ 'type', FormLayoutUpdater ],\r\n  modeling: [ 'type', Modeling ]\r\n};\r\n","export class Selection {\r\n  constructor(eventBus) {\r\n    this._eventBus = eventBus;\r\n    this._selection = null;\r\n  }\r\n\r\n  get() {\r\n    return this._selection;\r\n  }\r\n\r\n  set(selection) {\r\n    if (this._selection === selection) {\r\n      return;\r\n    }\r\n\r\n    this._selection = selection;\r\n\r\n    this._eventBus.fire('selection.changed', {\r\n      selection: this._selection\r\n    });\r\n  }\r\n\r\n  toggle(selection) {\r\n    const newSelection = this._selection === selection ? null : selection;\r\n\r\n    this.set(newSelection);\r\n  }\r\n\r\n  clear() {\r\n    this.set(null);\r\n  }\r\n\r\n  isSelected(formField) {\r\n    return this._selection === formField;\r\n  }\r\n}\r\n\r\nSelection.$inject = [ 'eventBus' ];","export class SelectionBehavior {\r\n  constructor(eventBus, selection) {\r\n    eventBus.on([\r\n      'commandStack.formField.add.postExecuted',\r\n      'commandStack.formField.move.postExecuted'\r\n    ], ({ context }) => {\r\n      const { formField } = context;\r\n\r\n      selection.set(formField);\r\n    });\r\n\r\n    eventBus.on('commandStack.formField.remove.postExecuted', ({ context }) => {\r\n      const {\r\n        sourceFormField,\r\n        sourceIndex\r\n      } = context;\r\n\r\n      const formField = sourceFormField.components[ sourceIndex ] || sourceFormField.components[ sourceIndex - 1 ];\r\n\r\n      if (formField) {\r\n        selection.set(formField);\r\n      } else {\r\n        selection.clear();\r\n      }\r\n    });\r\n\r\n    eventBus.on('formField.remove', ({ formField }) => {\r\n      if (selection.isSelected(formField)) {\r\n        selection.clear();\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nSelectionBehavior.$inject = [ 'eventBus', 'selection' ];","import { Selection } from './Selection';\r\nimport { SelectionBehavior } from './SelectionBehavior';\r\n\r\nexport const SelectionModule = {\r\n  __init__: [ 'selection', 'selectionBehavior' ],\r\n  selection: [ 'type', Selection ],\r\n  selectionBehavior: [ 'type', SelectionBehavior ]\r\n};","/**\r\n * Base class for sectionable UI modules.\r\n *\r\n * @property {EventBus} _eventBus - EventBus instance used for event handling.\r\n * @property {string} managerType - Type of the render manager. Used to form event names.\r\n *\r\n * @class SectionModuleBase\r\n */\r\nexport class SectionModuleBase {\r\n\r\n  /**\r\n   * Create a SectionModuleBase instance.\r\n   *\r\n   * @param {any} eventBus - The EventBus instance used for event handling.\r\n   * @param {string} sectionKey - The type of render manager. Used to form event names.\r\n   *\r\n   * @constructor\r\n   */\r\n  constructor(eventBus, sectionKey) {\r\n    this._eventBus = eventBus;\r\n    this._sectionKey = sectionKey;\r\n    this._eventBus.on(`${this._sectionKey}.section.rendered`, () => { this.isSectionRendered = true; });\r\n    this._eventBus.on(`${this._sectionKey}.section.destroyed`, () => { this.isSectionRendered = false; });\r\n  }\r\n\r\n  /**\r\n   * Attach the managed section to a parent node.\r\n   *\r\n   * @param {HTMLElement} container - The parent node to attach to.\r\n   */\r\n  attachTo(container) {\r\n    this._onceSectionRendered(() => this._eventBus.fire(`${this._sectionKey}.attach`, { container }));\r\n  }\r\n\r\n  /**\r\n   * Detach the managed section from its parent node.\r\n   */\r\n  detach() {\r\n    this._onceSectionRendered(() => this._eventBus.fire(`${this._sectionKey}.detach`));\r\n  }\r\n\r\n  /**\r\n   * Reset the managed section to its initial state.\r\n   */\r\n  reset() {\r\n    this._onceSectionRendered(() => this._eventBus.fire(`${this._sectionKey}.reset`));\r\n  }\r\n\r\n  /**\r\n   * Circumvents timing issues.\r\n   */\r\n  _onceSectionRendered(callback) {\r\n    if (this.isSectionRendered) {\r\n      callback();\r\n    } else {\r\n      this._eventBus.once(`${this._sectionKey}.section.rendered`, callback);\r\n    }\r\n  }\r\n}\r\n","import { SectionModuleBase } from '../SectionModuleBase';\r\n\r\nexport class PaletteRenderer extends SectionModuleBase {\r\n  constructor(eventBus) { super(eventBus, 'palette'); }\r\n}\r\n\r\nPaletteRenderer.$inject = [ 'eventBus' ];","import { PaletteRenderer } from './PaletteRenderer';\r\n\r\nexport const PaletteModule = {\r\n  __init__: [ 'palette' ],\r\n  palette: [ 'type', PaletteRenderer ]\r\n};\r\n","import { useContext, useState, useRef, useEffect, useMemo, useCallback, useLayoutEffect } from '../preact/hooks';\nimport { isFunction, isString, isArray, get, assign, set, sortBy, find, isNumber, debounce } from 'min-dash';\nimport { createPortal, forwardRef } from '../preact/compat';\nimport { jsx, jsxs, Fragment } from '../preact/jsx-runtime';\nimport { createContext, createElement } from '../preact';\nimport classnames from 'classnames';\nimport { query, domify } from 'min-dom';\nimport { FeelersEditor } from 'feelers';\nimport FeelEditor from '@bpmn-io/feel-editor';\nimport { lineNumbers, EditorView } from '@codemirror/view';\nimport * as focusTrap from 'focus-trap';\n\nvar ArrowIcon = function ArrowIcon(props) {\n  return jsx(\"svg\", {\n    ...props,\n    children: jsx(\"path\", {\n      fillRule: \"evenodd\",\n      d: \"m11.657 8-4.95 4.95a1 1 0 0 1-1.414-1.414L8.828 8 5.293 4.464A1 1 0 1 1 6.707 3.05L11.657 8Z\"\n    })\n  });\n};\nArrowIcon.defaultProps = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: \"16\",\n  height: \"16\"\n};\nvar CreateIcon = function CreateIcon(props) {\n  return jsx(\"svg\", {\n    ...props,\n    children: jsx(\"path\", {\n      fillRule: \"evenodd\",\n      d: \"M9 13V9h4a1 1 0 0 0 0-2H9V3a1 1 0 1 0-2 0v4H3a1 1 0 1 0 0 2h4v4a1 1 0 0 0 2 0Z\"\n    })\n  });\n};\nCreateIcon.defaultProps = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: \"16\",\n  height: \"16\"\n};\nvar DeleteIcon = function DeleteIcon(props) {\n  return jsx(\"svg\", {\n    ...props,\n    children: jsx(\"path\", {\n      fillRule: \"evenodd\",\n      d: \"M12 6v7c0 1.1-.4 1.55-1.5 1.55h-5C4.4 14.55 4 14.1 4 13V6h8Zm-1.5 1.5h-5v4.3c0 .66.5 1.2 1.111 1.2H9.39c.611 0 1.111-.54 1.111-1.2V7.5ZM13 3h-2l-1-1H6L5 3H3v1.5h10V3Z\"\n    })\n  });\n};\nDeleteIcon.defaultProps = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: \"16\",\n  height: \"16\"\n};\nvar DragIcon = function DragIcon(props) {\n  return jsxs(\"svg\", {\n    ...props,\n    children: [jsx(\"path\", {\n      fill: \"#fff\",\n      style: {\n        mixBlendMode: \"multiply\"\n      },\n      d: \"M0 0h16v16H0z\"\n    }), jsx(\"path\", {\n      fill: \"#fff\",\n      style: {\n        mixBlendMode: \"multiply\"\n      },\n      d: \"M0 0h16v16H0z\"\n    }), jsx(\"path\", {\n      d: \"M7 3H5v2h2V3zm4 0H9v2h2V3zM7 7H5v2h2V7zm4 0H9v2h2V7zm-4 4H5v2h2v-2zm4 0H9v2h2v-2z\",\n      fill: \"#161616\"\n    })]\n  });\n};\nDragIcon.defaultProps = {\n  width: \"16\",\n  height: \"16\",\n  fill: \"none\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n};\nvar ExternalLinkIcon = function ExternalLinkIcon(props) {\n  return jsx(\"svg\", {\n    ...props,\n    children: jsx(\"path\", {\n      fillRule: \"evenodd\",\n      clipRule: \"evenodd\",\n      d: \"M12.637 12.637v-4.72h1.362v4.721c0 .36-.137.676-.411.95-.275.275-.591.412-.95.412H3.362c-.38 0-.703-.132-.967-.396A1.315 1.315 0 0 1 2 12.638V3.362c0-.38.132-.703.396-.967S2.982 2 3.363 2h4.553v1.363H3.363v9.274h9.274ZM14 2H9.28l-.001 1.362h2.408L5.065 9.984l.95.95 6.622-6.622v2.409H14V2Z\",\n      fill: \"currentcolor\"\n    })\n  });\n};\nExternalLinkIcon.defaultProps = {\n  width: \"16\",\n  height: \"16\",\n  fill: \"none\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n};\nvar FeelIcon$1 = function FeelIcon(props) {\n  return jsx(\"svg\", {\n    ...props,\n    children: jsx(\"path\", {\n      d: \"M3.617 11.99c-.137.684-.392 1.19-.765 1.518-.362.328-.882.492-1.558.492H0l.309-1.579h1.264l1.515-7.64h-.912l.309-1.579h.911l.236-1.191c.137-.685.387-1.192.75-1.52C4.753.164 5.277 0 5.953 0h1.294L6.94 1.579H5.675l-.323 1.623h1.264l-.309 1.579H5.043l-1.426 7.208ZM5.605 11.021l3.029-4.155L7.28 3.202h2.073l.706 2.547h.176l1.691-2.547H14l-3.014 4.051 1.338 3.768H10.25l-.706-2.606H9.37L7.678 11.02H5.605Z\",\n      fill: \"currentcolor\"\n    })\n  });\n};\nFeelIcon$1.defaultProps = {\n  width: \"14\",\n  height: \"14\",\n  fill: \"none\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n};\nvar HelpIcon = function HelpIcon(props) {\n  return jsxs(\"svg\", {\n    ...props,\n    children: [jsx(\"path\", {\n      d: \"M16 2a14 14 0 1 0 14 14A14 14 0 0 0 16 2Zm0 26a12 12 0 1 1 12-12 12 12 0 0 1-12 12Z\"\n    }), jsx(\"circle\", {\n      cx: \"16\",\n      cy: \"23.5\",\n      r: \"1.5\"\n    }), jsx(\"path\", {\n      d: \"M17 8h-1.5a4.49 4.49 0 0 0-4.5 4.5v.5h2v-.5a2.5 2.5 0 0 1 2.5-2.5H17a2.5 2.5 0 0 1 0 5h-2v4.5h2V17a4.5 4.5 0 0 0 0-9Z\"\n    }), jsx(\"path\", {\n      style: {\n        fill: \"none\"\n      },\n      d: \"M0 0h32v32H0z\"\n    })]\n  });\n};\nHelpIcon.defaultProps = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 32 32\"\n};\nvar PopupIcon = function PopupIcon(props) {\n  return jsxs(\"svg\", {\n    ...props,\n    children: [jsx(\"path\", {\n      fill: \"currentColor\",\n      d: \"M28 4H10a2.006 2.006 0 0 0-2 2v14a2.006 2.006 0 0 0 2 2h18a2.006 2.006 0 0 0 2-2V6a2.006 2.006 0 0 0-2-2Zm0 16H10V6h18Z\"\n    }), jsx(\"path\", {\n      fill: \"currentColor\",\n      d: \"M18 26H4V16h2v-2H4a2.006 2.006 0 0 0-2 2v10a2.006 2.006 0 0 0 2 2h14a2.006 2.006 0 0 0 2-2v-2h-2Z\"\n    })]\n  });\n};\nPopupIcon.defaultProps = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: \"16\",\n  height: \"16\",\n  viewBox: \"0 0 32 32\"\n};\n\nfunction Header(props) {\n  const {\n    element,\n    headerProvider\n  } = props;\n  const {\n    getElementIcon,\n    getDocumentationRef,\n    getElementLabel,\n    getTypeLabel\n  } = headerProvider;\n  const label = getElementLabel(element);\n  const type = getTypeLabel(element);\n  const documentationRef = getDocumentationRef && getDocumentationRef(element);\n  const ElementIcon = getElementIcon(element);\n  return jsxs(\"div\", {\n    class: \"bio-properties-panel-header\",\n    children: [jsx(\"div\", {\n      class: \"bio-properties-panel-header-icon\",\n      children: ElementIcon && jsx(ElementIcon, {\n        width: \"32\",\n        height: \"32\",\n        viewBox: \"0 0 32 32\"\n      })\n    }), jsxs(\"div\", {\n      class: \"bio-properties-panel-header-labels\",\n      children: [jsx(\"div\", {\n        title: type,\n        class: \"bio-properties-panel-header-type\",\n        children: type\n      }), label ? jsx(\"div\", {\n        title: label,\n        class: \"bio-properties-panel-header-label\",\n        children: label\n      }) : null]\n    }), jsx(\"div\", {\n      class: \"bio-properties-panel-header-actions\",\n      children: documentationRef ? jsx(\"a\", {\n        rel: \"noopener\",\n        class: \"bio-properties-panel-header-link\",\n        href: documentationRef,\n        title: \"Open documentation\",\n        target: \"_blank\",\n        children: jsx(ExternalLinkIcon, {})\n      }) : null\n    })]\n  });\n}\n\nconst DescriptionContext = createContext({\n  description: {},\n  getDescriptionForId: () => {}\n});\n\nconst ErrorsContext = createContext({\n  errors: {}\n});\n\n/**\n * @typedef {Function} <propertiesPanel.showEntry> callback\n *\n * @example\n *\n * useEvent('propertiesPanel.showEntry', ({ focus = false, ...rest }) => {\n *   // ...\n * });\n *\n * @param {Object} context\n * @param {boolean} [context.focus]\n *\n * @returns void\n */\n\nconst EventContext = createContext({\n  eventBus: null\n});\n\nconst LayoutContext = createContext({\n  layout: {},\n  setLayout: () => {},\n  getLayoutForKey: () => {},\n  setLayoutForKey: () => {}\n});\n\nconst TooltipContext = createContext({\n  tooltip: {},\n  getTooltipForId: () => {}\n});\n\n/**\n * Accesses the global TooltipContext and returns a tooltip for a given id and element.\n *\n * @example\n * ```jsx\n * function TextField(props) {\n *   const tooltip = useTooltipContext('input1', element);\n * }\n * ```\n *\n * @param {string} id\n * @param {object} element\n *\n * @returns {string}\n */\nfunction useTooltipContext(id, element) {\n  const {\n    getTooltipForId\n  } = useContext(TooltipContext);\n  return getTooltipForId(id, element);\n}\n\nfunction TooltipWrapper(props) {\n  const {\n    forId,\n    element\n  } = props;\n  const contextDescription = useTooltipContext(forId, element);\n  const value = props.value || contextDescription;\n  if (!value) {\n    return props.children;\n  }\n  return jsx(Tooltip, {\n    ...props,\n    value: value,\n    forId: prefixId$9(forId)\n  });\n}\nfunction Tooltip(props) {\n  const {\n    forId,\n    value,\n    parent,\n    direction = 'right',\n    position\n  } = props;\n  const [visible, setShow] = useState(false);\n  const [focusedViaKeyboard, setFocusedViaKeyboard] = useState(false);\n  let timeout = null;\n  const wrapperRef = useRef(null);\n  const tooltipRef = useRef(null);\n  const showTooltip = async event => {\n    const show = () => setShow(true);\n    if (!visible && !timeout) {\n      if (event instanceof MouseEvent) {\n        timeout = setTimeout(show, 200);\n      } else {\n        show();\n        setFocusedViaKeyboard(true);\n      }\n    }\n  };\n  const hideTooltip = () => {\n    setShow(false);\n    setFocusedViaKeyboard(false);\n  };\n  const hideTooltipViaEscape = e => {\n    e.code === 'Escape' && hideTooltip();\n  };\n  const isTooltipHovered = ({\n    x,\n    y\n  }) => {\n    const tooltip = tooltipRef.current;\n    const wrapper = wrapperRef.current;\n    return tooltip && (inBounds(x, y, wrapper.getBoundingClientRect()) || inBounds(x, y, tooltip.getBoundingClientRect()));\n  };\n  useEffect(() => {\n    const {\n      current\n    } = wrapperRef;\n    if (!current) {\n      return;\n    }\n    const hideHoveredTooltip = e => {\n      const isFocused = document.activeElement === wrapperRef.current || document.activeElement.closest('.bio-properties-panel-tooltip');\n      if (visible && !isTooltipHovered({\n        x: e.x,\n        y: e.y\n      }) && !(isFocused && focusedViaKeyboard)) {\n        hideTooltip();\n      }\n    };\n    const hideFocusedTooltip = e => {\n      const {\n        relatedTarget\n      } = e;\n      const isTooltipChild = el => !!el.closest('.bio-properties-panel-tooltip');\n      if (visible && !isHovered(wrapperRef.current) && relatedTarget && !isTooltipChild(relatedTarget)) {\n        hideTooltip();\n      }\n    };\n    document.addEventListener('wheel', hideHoveredTooltip);\n    document.addEventListener('focusout', hideFocusedTooltip);\n    document.addEventListener('mousemove', hideHoveredTooltip);\n    return () => {\n      document.removeEventListener('wheel', hideHoveredTooltip);\n      document.removeEventListener('mousemove', hideHoveredTooltip);\n      document.removeEventListener('focusout', hideFocusedTooltip);\n    };\n  }, [wrapperRef.current, visible, focusedViaKeyboard]);\n  const renderTooltip = () => {\n    return jsxs(\"div\", {\n      class: `bio-properties-panel-tooltip ${direction}`,\n      role: \"tooltip\",\n      id: \"bio-properties-panel-tooltip\",\n      \"aria-labelledby\": forId,\n      style: position || getTooltipPosition(wrapperRef.current),\n      ref: tooltipRef,\n      onClick: e => e.stopPropagation(),\n      children: [jsx(\"div\", {\n        class: \"bio-properties-panel-tooltip-content\",\n        children: value\n      }), jsx(\"div\", {\n        class: \"bio-properties-panel-tooltip-arrow\"\n      })]\n    });\n  };\n  return jsxs(\"div\", {\n    class: \"bio-properties-panel-tooltip-wrapper\",\n    tabIndex: \"0\",\n    ref: wrapperRef,\n    onMouseEnter: showTooltip,\n    onMouseLeave: () => {\n      clearTimeout(timeout);\n      timeout = null;\n    },\n    onFocus: showTooltip,\n    onKeyDown: hideTooltipViaEscape,\n    children: [props.children, visible ? parent ? createPortal(renderTooltip(), parent.current) : renderTooltip() : null]\n  });\n}\n\n// helper\nfunction inBounds(x, y, bounds) {\n  const {\n    top,\n    right,\n    bottom,\n    left\n  } = bounds;\n  return x >= left && x <= right && y >= top && y <= bottom;\n}\nfunction getTooltipPosition(refElement) {\n  const refPosition = refElement.getBoundingClientRect();\n  const right = `calc(100% - ${refPosition.x}px)`;\n  const top = `${refPosition.top - 10}px`;\n  return `right: ${right}; top: ${top};`;\n}\nfunction isHovered(element) {\n  return element.matches(':hover');\n}\nfunction prefixId$9(id) {\n  return `bio-properties-panel-${id}`;\n}\n\n/**\n * Accesses the global DescriptionContext and returns a description for a given id and element.\n *\n * @example\n * ```jsx\n * function TextField(props) {\n *   const description = useDescriptionContext('input1', element);\n * }\n * ```\n *\n * @param {string} id\n * @param {object} element\n *\n * @returns {string}\n */\nfunction useDescriptionContext(id, element) {\n  const {\n    getDescriptionForId\n  } = useContext(DescriptionContext);\n  return getDescriptionForId(id, element);\n}\n\nfunction useError(id) {\n  const {\n    errors\n  } = useContext(ErrorsContext);\n  return errors[id];\n}\nfunction useErrors() {\n  const {\n    errors\n  } = useContext(ErrorsContext);\n  return errors;\n}\n\n/**\n * Subscribe to an event immediately. Update subscription after inputs changed.\n *\n * @param {string} event\n * @param {Function} callback\n */\nfunction useEvent(event, callback, eventBus) {\n  const eventContext = useContext(EventContext);\n  if (!eventBus) {\n    ({\n      eventBus\n    } = eventContext);\n  }\n  const didMount = useRef(false);\n\n  // (1) subscribe immediately\n  if (eventBus && !didMount.current) {\n    eventBus.on(event, callback);\n  }\n\n  // (2) update subscription after inputs changed\n  useEffect(() => {\n    if (eventBus && didMount.current) {\n      eventBus.on(event, callback);\n    }\n    didMount.current = true;\n    return () => {\n      if (eventBus) {\n        eventBus.off(event, callback);\n      }\n    };\n  }, [callback, event, eventBus]);\n}\n\nconst KEY_LENGTH = 6;\n\n/**\n * Create a persistent key factory for plain objects without id.\n *\n * @example\n * ```jsx\n * function List({ objects }) {\n *   const getKey = useKeyFactory();\n *   return (<ol>{\n *     objects.map(obj => {\n *       const key = getKey(obj);\n *       return <li key={key}>obj.name</li>\n *     })\n *   }</ol>);\n * }\n * ```\n *\n * @param {any[]} dependencies\n * @returns {(element: object) => string}\n */\nfunction useKeyFactory(dependencies = []) {\n  const map = useMemo(() => new Map(), dependencies);\n  const getKey = el => {\n    let key = map.get(el);\n    if (!key) {\n      key = Math.random().toString().slice(-KEY_LENGTH);\n      map.set(el, key);\n    }\n    return key;\n  };\n  return getKey;\n}\n\n/**\n * Creates a state that persists in the global LayoutContext.\n *\n * @example\n * ```jsx\n * function Group(props) {\n *   const [ open, setOpen ] = useLayoutState([ 'groups', 'foo', 'open' ], false);\n * }\n * ```\n *\n * @param {(string|number)[]} path\n * @param {any} [defaultValue]\n *\n * @returns {[ any, Function ]}\n */\nfunction useLayoutState(path, defaultValue) {\n  const {\n    getLayoutForKey,\n    setLayoutForKey\n  } = useContext(LayoutContext);\n  const layoutForKey = getLayoutForKey(path, defaultValue);\n  const setState = useCallback(newValue => {\n    setLayoutForKey(path, newValue);\n  }, [setLayoutForKey]);\n  return [layoutForKey, setState];\n}\n\n/**\n * @pinussilvestrus: we need to introduce our own hook to persist the previous\n * state on updates.\n *\n * cf. https://reactjs.org/docs/hooks-faq.html#how-to-get-the-previous-props-or-state\n */\n\nfunction usePrevious(value) {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n}\n\n/**\n * Subscribe to `propertiesPanel.showEntry`.\n *\n * @param {string} id\n *\n * @returns {import('preact').Ref}\n */\nfunction useShowEntryEvent(id) {\n  const {\n    onShow\n  } = useContext(LayoutContext);\n  const ref = useRef();\n  const focus = useRef(false);\n  const onShowEntry = useCallback(event => {\n    if (event.id === id) {\n      onShow();\n      if (!focus.current) {\n        focus.current = true;\n      }\n    }\n  }, [id]);\n  useEffect(() => {\n    if (focus.current && ref.current) {\n      if (isFunction(ref.current.focus)) {\n        ref.current.focus();\n      }\n      if (isFunction(ref.current.select)) {\n        ref.current.select();\n      }\n      focus.current = false;\n    }\n  });\n  useEvent('propertiesPanel.showEntry', onShowEntry);\n  return ref;\n}\n\n/**\n * @callback setSticky\n * @param {boolean} value\n */\n\n/**\n * Use IntersectionObserver to identify when DOM element is in sticky mode.\n * If sticky is observered setSticky(true) will be called.\n * If sticky mode is left, setSticky(false) will be called.\n *\n *\n * @param {Object} ref\n * @param {string} scrollContainerSelector\n * @param {setSticky} setSticky\n */\nfunction useStickyIntersectionObserver(ref, scrollContainerSelector, setSticky) {\n  const [scrollContainer, setScrollContainer] = useState(query(scrollContainerSelector));\n  const updateScrollContainer = useCallback(() => {\n    const newScrollContainer = query(scrollContainerSelector);\n    if (newScrollContainer !== scrollContainer) {\n      setScrollContainer(newScrollContainer);\n    }\n  }, [scrollContainerSelector, scrollContainer]);\n  useEffect(() => {\n    updateScrollContainer();\n  }, [updateScrollContainer]);\n  useEvent('propertiesPanel.attach', updateScrollContainer);\n  useEvent('propertiesPanel.detach', updateScrollContainer);\n  useEffect(() => {\n    const Observer = IntersectionObserver;\n\n    // return early if IntersectionObserver is not available\n    if (!Observer) {\n      return;\n    }\n\n    // TODO(@barmac): test this\n    if (!ref.current || !scrollContainer) {\n      return;\n    }\n    const observer = new Observer(entries => {\n      // scroll container is unmounted, do not update sticky state\n      if (scrollContainer.scrollHeight === 0) {\n        return;\n      }\n      entries.forEach(entry => {\n        if (entry.intersectionRatio < 1) {\n          setSticky(true);\n        } else if (entry.intersectionRatio === 1) {\n          setSticky(false);\n        }\n      });\n    }, {\n      root: scrollContainer,\n      rootMargin: '0px 0px 999999% 0px',\n      // Use bottom margin to avoid stickyness when scrolling out to bottom\n      threshold: [1]\n    });\n    observer.observe(ref.current);\n\n    // Unobserve if unmounted\n    return () => {\n      observer.unobserve(ref.current);\n    };\n  }, [ref.current, scrollContainer, setSticky]);\n}\n\n/**\n * Creates a static function reference with changing body.\n * This is necessary when external libraries require a callback function\n * that has references to state variables.\n *\n * Usage:\n * const callback = useStaticCallback((val) => {val === currentState});\n *\n * The `callback` reference is static and can be safely used in external\n * libraries or as a prop that does not cause rerendering of children.\n *\n * @param {Function} callback function with changing reference\n * @returns {Function} static function reference\n */\nfunction useStaticCallback(callback) {\n  const callbackRef = useRef(callback);\n  callbackRef.current = callback;\n  return useCallback((...args) => callbackRef.current(...args), []);\n}\n\nfunction Group(props) {\n  const {\n    element,\n    entries = [],\n    id,\n    label,\n    shouldOpen = false\n  } = props;\n  const groupRef = useRef(null);\n  const [open, setOpen] = useLayoutState(['groups', id, 'open'], shouldOpen);\n  const onShow = useCallback(() => setOpen(true), [setOpen]);\n  const toggleOpen = () => setOpen(!open);\n  const [edited, setEdited] = useState(false);\n  const [sticky, setSticky] = useState(false);\n\n  // set edited state depending on all entries\n  useEffect(() => {\n    // TODO(@barmac): replace with CSS when `:has()` is supported in all major browsers, or rewrite as in https://github.com/camunda/camunda-modeler/issues/3815#issuecomment-1733038161\n    const scheduled = requestAnimationFrame(() => {\n      const hasOneEditedEntry = entries.find(entry => {\n        const {\n          id,\n          isEdited\n        } = entry;\n        const entryNode = query(`[data-entry-id=\"${id}\"]`);\n        if (!isFunction(isEdited) || !entryNode) {\n          return false;\n        }\n        const inputNode = query('.bio-properties-panel-input', entryNode);\n        return isEdited(inputNode);\n      });\n      setEdited(hasOneEditedEntry);\n    });\n    return () => cancelAnimationFrame(scheduled);\n  }, [entries, setEdited]);\n\n  // set error state depending on all entries\n  const allErrors = useErrors();\n  const hasErrors = entries.some(entry => allErrors[entry.id]);\n\n  // set css class when group is sticky to top\n  useStickyIntersectionObserver(groupRef, 'div.bio-properties-panel-scroll-container', setSticky);\n  const propertiesPanelContext = {\n    ...useContext(LayoutContext),\n    onShow\n  };\n  return jsxs(\"div\", {\n    class: \"bio-properties-panel-group\",\n    \"data-group-id\": 'group-' + id,\n    ref: groupRef,\n    children: [jsxs(\"div\", {\n      class: classnames('bio-properties-panel-group-header', edited ? '' : 'empty', open ? 'open' : '', sticky && open ? 'sticky' : ''),\n      onClick: toggleOpen,\n      children: [jsx(\"div\", {\n        title: props.tooltip ? null : label,\n        \"data-title\": label,\n        class: \"bio-properties-panel-group-header-title\",\n        children: jsx(TooltipWrapper, {\n          value: props.tooltip,\n          forId: 'group-' + id,\n          element: element,\n          parent: groupRef,\n          children: label\n        })\n      }), jsxs(\"div\", {\n        class: \"bio-properties-panel-group-header-buttons\",\n        children: [jsx(DataMarker, {\n          edited: edited,\n          hasErrors: hasErrors\n        }), jsx(\"button\", {\n          type: \"button\",\n          title: \"Toggle section\",\n          class: \"bio-properties-panel-group-header-button bio-properties-panel-arrow\",\n          children: jsx(ArrowIcon, {\n            class: open ? 'bio-properties-panel-arrow-down' : 'bio-properties-panel-arrow-right'\n          })\n        })]\n      })]\n    }), jsx(\"div\", {\n      class: classnames('bio-properties-panel-group-entries', open ? 'open' : ''),\n      children: jsx(LayoutContext.Provider, {\n        value: propertiesPanelContext,\n        children: entries.map(entry => {\n          const {\n            component: Component,\n            id\n          } = entry;\n          return createElement(Component, {\n            ...entry,\n            element: element,\n            key: id\n          });\n        })\n      })\n    })]\n  });\n}\nfunction DataMarker(props) {\n  const {\n    edited,\n    hasErrors\n  } = props;\n  if (hasErrors) {\n    return jsx(\"div\", {\n      title: \"Section contains an error\",\n      class: \"bio-properties-panel-dot bio-properties-panel-dot--error\"\n    });\n  }\n  if (edited) {\n    return jsx(\"div\", {\n      title: \"Section contains data\",\n      class: \"bio-properties-panel-dot\"\n    });\n  }\n  return null;\n}\n\n/**\n * @typedef { {\n *  text: (element: object) => string,\n *  icon?: (element: Object) => import('preact').Component\n * } } PlaceholderDefinition\n *\n * @param { PlaceholderDefinition } props\n */\nfunction Placeholder(props) {\n  const {\n    text,\n    icon: Icon\n  } = props;\n  return jsx(\"div\", {\n    class: \"bio-properties-panel open\",\n    children: jsxs(\"section\", {\n      class: \"bio-properties-panel-placeholder\",\n      children: [Icon && jsx(Icon, {\n        class: \"bio-properties-panel-placeholder-icon\"\n      }), jsx(\"p\", {\n        class: \"bio-properties-panel-placeholder-text\",\n        children: text\n      })]\n    })\n  });\n}\n\nfunction Description(props) {\n  const {\n    element,\n    forId,\n    value\n  } = props;\n  const contextDescription = useDescriptionContext(forId, element);\n  const description = value || contextDescription;\n  if (description) {\n    return jsx(\"div\", {\n      class: \"bio-properties-panel-description\",\n      children: description\n    });\n  }\n}\n\nconst noop$6 = () => {};\n\n/**\n * Buffer `.focus()` calls while the editor is not initialized.\n * Set Focus inside when the editor is ready.\n */\nconst useBufferedFocus$1 = function (editor, ref) {\n  const [buffer, setBuffer] = useState(undefined);\n  ref.current = useMemo(() => ({\n    focus: offset => {\n      if (editor) {\n        editor.focus(offset);\n      } else {\n        if (typeof offset === 'undefined') {\n          offset = Infinity;\n        }\n        setBuffer(offset);\n      }\n    }\n  }), [editor]);\n  useEffect(() => {\n    if (typeof buffer !== 'undefined' && editor) {\n      editor.focus(buffer);\n      setBuffer(false);\n    }\n  }, [editor, buffer]);\n};\nconst CodeEditor$1 = forwardRef((props, ref) => {\n  const {\n    onInput,\n    disabled,\n    tooltipContainer,\n    enableGutters,\n    value,\n    onLint = noop$6,\n    onPopupOpen = noop$6,\n    popupOpen,\n    contentAttributes = {},\n    hostLanguage = null,\n    singleLine = false\n  } = props;\n  const inputRef = useRef();\n  const [editor, setEditor] = useState();\n  const [localValue, setLocalValue] = useState(value || '');\n  useBufferedFocus$1(editor, ref);\n  const handleInput = useStaticCallback(newValue => {\n    onInput(newValue);\n    setLocalValue(newValue);\n  });\n  useEffect(() => {\n    let editor;\n    editor = new FeelersEditor({\n      container: inputRef.current,\n      onChange: handleInput,\n      value: localValue,\n      onLint,\n      contentAttributes,\n      tooltipContainer,\n      enableGutters,\n      hostLanguage,\n      singleLine\n    });\n    setEditor(editor);\n    return () => {\n      onLint([]);\n      inputRef.current.innerHTML = '';\n      setEditor(null);\n    };\n  }, []);\n  useEffect(() => {\n    if (!editor) {\n      return;\n    }\n    if (value === localValue) {\n      return;\n    }\n    editor.setValue(value);\n    setLocalValue(value);\n  }, [value]);\n  const handleClick = () => {\n    ref.current.focus();\n  };\n  return jsxs(\"div\", {\n    class: classnames('bio-properties-panel-feelers-editor-container', popupOpen ? 'popupOpen' : null),\n    children: [jsx(\"div\", {\n      class: \"bio-properties-panel-feelers-editor__open-popup-placeholder\",\n      children: \"Opened in editor\"\n    }), jsx(\"div\", {\n      name: props.name,\n      class: classnames('bio-properties-panel-feelers-editor bio-properties-panel-input', localValue ? 'edited' : null, disabled ? 'disabled' : null),\n      ref: inputRef,\n      onClick: handleClick\n    }), jsx(\"button\", {\n      type: \"button\",\n      title: \"Open pop-up editor\",\n      class: \"bio-properties-panel-open-feel-popup\",\n      onClick: () => onPopupOpen('feelers'),\n      children: jsx(ExternalLinkIcon, {})\n    })]\n  });\n});\n\nconst noop$5 = () => {};\n\n/**\n * Buffer `.focus()` calls while the editor is not initialized.\n * Set Focus inside when the editor is ready.\n */\nconst useBufferedFocus = function (editor, ref) {\n  const [buffer, setBuffer] = useState(undefined);\n  ref.current = useMemo(() => ({\n    focus: offset => {\n      if (editor) {\n        editor.focus(offset);\n      } else {\n        if (typeof offset === 'undefined') {\n          offset = Infinity;\n        }\n        setBuffer(offset);\n      }\n    }\n  }), [editor]);\n  useEffect(() => {\n    if (typeof buffer !== 'undefined' && editor) {\n      editor.focus(buffer);\n      setBuffer(false);\n    }\n  }, [editor, buffer]);\n};\nconst CodeEditor = forwardRef((props, ref) => {\n  const {\n    enableGutters,\n    value,\n    onInput,\n    onFeelToggle = noop$5,\n    onLint = noop$5,\n    onPopupOpen = noop$5,\n    popupOpen,\n    disabled,\n    tooltipContainer,\n    variables\n  } = props;\n  const inputRef = useRef();\n  const [editor, setEditor] = useState();\n  const [localValue, setLocalValue] = useState(value || '');\n  useBufferedFocus(editor, ref);\n  const handleInput = useStaticCallback(newValue => {\n    onInput(newValue);\n    setLocalValue(newValue);\n  });\n  useEffect(() => {\n    let editor;\n\n    /* Trigger FEEL toggle when\n     *\n     * - `backspace` is pressed\n     * - AND the cursor is at the beginning of the input\n     */\n    const onKeyDown = e => {\n      if (e.key !== 'Backspace' || !editor) {\n        return;\n      }\n      const selection = editor.getSelection();\n      const range = selection.ranges[selection.mainIndex];\n      if (range.from === 0 && range.to === 0) {\n        onFeelToggle();\n      }\n    };\n    editor = new FeelEditor({\n      container: inputRef.current,\n      onChange: handleInput,\n      onKeyDown: onKeyDown,\n      onLint: onLint,\n      tooltipContainer: tooltipContainer,\n      value: localValue,\n      variables: variables,\n      extensions: [...(enableGutters ? [lineNumbers()] : []), EditorView.lineWrapping]\n    });\n    setEditor(editor);\n    return () => {\n      onLint([]);\n      inputRef.current.innerHTML = '';\n      setEditor(null);\n    };\n  }, []);\n  useEffect(() => {\n    if (!editor) {\n      return;\n    }\n    if (value === localValue) {\n      return;\n    }\n    editor.setValue(value);\n    setLocalValue(value);\n  }, [value]);\n  useEffect(() => {\n    if (!editor) {\n      return;\n    }\n    editor.setVariables(variables);\n  }, [variables]);\n  const handleClick = () => {\n    ref.current.focus();\n  };\n  return jsxs(\"div\", {\n    class: classnames('bio-properties-panel-feel-editor-container', disabled ? 'disabled' : null, popupOpen ? 'popupOpen' : null),\n    children: [jsx(\"div\", {\n      class: \"bio-properties-panel-feel-editor__open-popup-placeholder\",\n      children: \"Opened in editor\"\n    }), jsx(\"div\", {\n      name: props.name,\n      class: classnames('bio-properties-panel-input', localValue ? 'edited' : null),\n      ref: inputRef,\n      onClick: handleClick\n    }), jsx(\"button\", {\n      type: \"button\",\n      title: \"Open pop-up editor\",\n      class: \"bio-properties-panel-open-feel-popup\",\n      onClick: () => onPopupOpen(),\n      children: jsx(PopupIcon, {})\n    })]\n  });\n});\n\nfunction FeelIndicator(props) {\n  const {\n    active\n  } = props;\n  if (!active) {\n    return null;\n  }\n  return jsx(\"span\", {\n    class: \"bio-properties-panel-feel-indicator\",\n    children: \"=\"\n  });\n}\n\nconst noop$4 = () => {};\n\n/**\n * @param {Object} props\n * @param {Object} props.label\n * @param {String} props.feel\n */\nfunction FeelIcon(props) {\n  const {\n    feel = false,\n    active,\n    disabled = false,\n    onClick = noop$4\n  } = props;\n  const feelRequiredLabel = 'FEEL expression is mandatory';\n  const feelOptionalLabel = `Click to ${active ? 'remove' : 'set a'} dynamic value with FEEL expression`;\n  const handleClick = e => {\n    onClick(e);\n\n    // when pointer event was created from keyboard, keep focus on button\n    if (!e.pointerType) {\n      e.stopPropagation();\n    }\n  };\n  return jsx(\"button\", {\n    type: \"button\",\n    class: classnames('bio-properties-panel-feel-icon', active ? 'active' : null, feel === 'required' ? 'required' : 'optional'),\n    onClick: handleClick,\n    disabled: feel === 'required' || disabled,\n    title: feel === 'required' ? feelRequiredLabel : feelOptionalLabel,\n    children: jsx(FeelIcon$1, {})\n  });\n}\n\nconst FeelPopupContext = createContext({\n  open: () => {},\n  close: () => {},\n  source: null\n});\n\n/**\n * Add a dragger that calls back the passed function with\n * { event, delta } on drag.\n *\n * @example\n *\n * function dragMove(event, delta) {\n *   // we are dragging (!!)\n * }\n *\n * domElement.addEventListener('dragstart', dragger(dragMove));\n *\n * @param {Function} fn\n * @param {Element} [dragPreview]\n *\n * @return {Function} drag start callback function\n */\nfunction createDragger(fn, dragPreview) {\n  let self;\n  let startX, startY;\n\n  /** drag start */\n  function onDragStart(event) {\n    self = this;\n    startX = event.clientX;\n    startY = event.clientY;\n\n    // (1) prevent preview image\n    if (event.dataTransfer) {\n      event.dataTransfer.setDragImage(dragPreview || emptyCanvas(), 0, 0);\n    }\n\n    // (2) setup drag listeners\n\n    // attach drag + cleanup event\n    // we need to do this to make sure we track cursor\n    // movements before we reach other drag event handlers,\n    // e.g. in child containers.\n    document.addEventListener('dragover', onDrag, true);\n    document.addEventListener('dragenter', preventDefault, true);\n    document.addEventListener('dragend', onEnd);\n    document.addEventListener('drop', preventDefault);\n  }\n  function onDrag(event) {\n    const delta = {\n      x: event.clientX - startX,\n      y: event.clientY - startY\n    };\n\n    // call provided fn with event, delta\n    return fn.call(self, event, delta);\n  }\n  function onEnd() {\n    document.removeEventListener('dragover', onDrag, true);\n    document.removeEventListener('dragenter', preventDefault, true);\n    document.removeEventListener('dragend', onEnd);\n    document.removeEventListener('drop', preventDefault);\n  }\n  return onDragStart;\n}\nfunction preventDefault(event) {\n  event.preventDefault();\n  event.stopPropagation();\n}\nfunction emptyCanvas() {\n  return domify('<canvas width=\"0\" height=\"0\" />');\n}\n\nconst noop$3 = () => {};\n\n/**\n * A generic popup component.\n *\n * @param {Object} props\n * @param {HTMLElement} [props.container]\n * @param {string} [props.className]\n * @param {boolean} [props.delayInitialFocus]\n * @param {{x: number, y: number}} [props.position]\n * @param {number} [props.width]\n * @param {number} [props.height]\n * @param {Function} props.onClose\n * @param {Function} [props.onPostActivate]\n * @param {Function} [props.onPostDeactivate]\n * @param {boolean} [props.returnFocus]\n * @param {boolean} [props.closeOnEscape]\n * @param {string} props.title\n * @param {Ref} [ref]\n */\nfunction PopupComponent(props, globalRef) {\n  const {\n    container,\n    className,\n    delayInitialFocus,\n    position,\n    width,\n    height,\n    onClose,\n    onPostActivate = noop$3,\n    onPostDeactivate = noop$3,\n    returnFocus = true,\n    closeOnEscape = true,\n    title\n  } = props;\n  const focusTrapRef = useRef(null);\n  const localRef = useRef(null);\n  const popupRef = globalRef || localRef;\n  const containerNode = useMemo(() => getContainerNode(container), [container]);\n  const handleKeydown = event => {\n    // do not allow keyboard events to bubble\n    event.stopPropagation();\n    if (closeOnEscape && event.key === 'Escape') {\n      onClose();\n    }\n  };\n\n  // re-activate focus trap on focus\n  const handleFocus = () => {\n    if (focusTrapRef.current) {\n      focusTrapRef.current.activate();\n    }\n  };\n  let style = {};\n  if (position) {\n    style = {\n      ...style,\n      top: position.top + 'px',\n      left: position.left + 'px'\n    };\n  }\n  if (width) {\n    style.width = width + 'px';\n  }\n  if (height) {\n    style.height = height + 'px';\n  }\n  useEffect(() => {\n    if (popupRef.current) {\n      popupRef.current.addEventListener('focusin', handleFocus);\n    }\n    return () => {\n      popupRef.current.removeEventListener('focusin', handleFocus);\n    };\n  }, [popupRef]);\n  useEffect(() => {\n    if (popupRef.current) {\n      focusTrapRef.current = focusTrap.createFocusTrap(popupRef.current, {\n        clickOutsideDeactivates: true,\n        delayInitialFocus,\n        fallbackFocus: popupRef.current,\n        onPostActivate,\n        onPostDeactivate,\n        returnFocusOnDeactivate: returnFocus\n      });\n      focusTrapRef.current.activate();\n    }\n    return () => focusTrapRef.current && focusTrapRef.current.deactivate();\n  }, [popupRef]);\n  useEvent('propertiesPanel.detach', onClose);\n  return createPortal(jsx(\"div\", {\n    \"aria-label\": title,\n    tabIndex: -1,\n    ref: popupRef,\n    onKeyDown: handleKeydown,\n    role: \"dialog\",\n    class: classnames('bio-properties-panel-popup', className),\n    style: style,\n    children: props.children\n  }), containerNode || document.body);\n}\nconst Popup = forwardRef(PopupComponent);\nPopup.Title = Title;\nPopup.Body = Body;\nPopup.Footer = Footer;\nfunction Title(props) {\n  const {\n    children,\n    className,\n    draggable,\n    emit = () => {},\n    title,\n    ...rest\n  } = props;\n\n  // we can't use state as we need to\n  // manipulate this inside dragging events\n  const context = useRef({\n    startPosition: null,\n    newPosition: null\n  });\n  const dragPreviewRef = useRef();\n  const titleRef = useRef();\n  const onMove = (event, delta) => {\n    cancel(event);\n    const {\n      x: dx,\n      y: dy\n    } = delta;\n    const newPosition = {\n      x: context.current.startPosition.x + dx,\n      y: context.current.startPosition.y + dy\n    };\n    const popupParent = getPopupParent(titleRef.current);\n    popupParent.style.top = newPosition.y + 'px';\n    popupParent.style.left = newPosition.x + 'px';\n\n    // notify interested parties\n    emit('dragover', {\n      newPosition,\n      delta\n    });\n  };\n  const onMoveStart = event => {\n    // initialize drag handler\n    const onDragStart = createDragger(onMove, dragPreviewRef.current);\n    onDragStart(event);\n    event.stopPropagation();\n    const popupParent = getPopupParent(titleRef.current);\n    const bounds = popupParent.getBoundingClientRect();\n    context.current.startPosition = {\n      x: bounds.left,\n      y: bounds.top\n    };\n\n    // notify interested parties\n    emit('dragstart');\n  };\n  const onMoveEnd = () => {\n    context.current.newPosition = null;\n\n    // notify interested parties\n    emit('dragend');\n  };\n  return jsxs(\"div\", {\n    class: classnames('bio-properties-panel-popup__header', draggable && 'draggable', className),\n    ref: titleRef,\n    draggable: draggable,\n    onDragStart: onMoveStart,\n    onDragEnd: onMoveEnd,\n    ...rest,\n    children: [draggable && jsxs(Fragment, {\n      children: [jsx(\"div\", {\n        ref: dragPreviewRef,\n        class: \"bio-properties-panel-popup__drag-preview\"\n      }), jsx(\"div\", {\n        class: \"bio-properties-panel-popup__drag-handle\",\n        children: jsx(DragIcon, {})\n      })]\n    }), jsx(\"div\", {\n      class: \"bio-properties-panel-popup__title\",\n      children: title\n    }), children]\n  });\n}\nfunction Body(props) {\n  const {\n    children,\n    className,\n    ...rest\n  } = props;\n  return jsx(\"div\", {\n    class: classnames('bio-properties-panel-popup__body', className),\n    ...rest,\n    children: children\n  });\n}\nfunction Footer(props) {\n  const {\n    children,\n    className,\n    ...rest\n  } = props;\n  return jsx(\"div\", {\n    class: classnames('bio-properties-panel-popup__footer', className),\n    ...rest,\n    children: props.children\n  });\n}\n\n// helpers //////////////////////\n\nfunction getPopupParent(node) {\n  return node.closest('.bio-properties-panel-popup');\n}\nfunction cancel(event) {\n  event.preventDefault();\n  event.stopPropagation();\n}\nfunction getContainerNode(node) {\n  if (typeof node === 'string') {\n    return query(node);\n  }\n  return node;\n}\n\nconst FEEL_POPUP_WIDTH = 700;\nconst FEEL_POPUP_HEIGHT = 250;\n\n/**\n * FEEL popup component, built as a singleton. Emits lifecycle events as follows:\n *  - `feelPopup.open` - fired before the popup is mounted\n *  - `feelPopup.opened` - fired after the popup is mounted. Event context contains the DOM node of the popup\n *  - `feelPopup.close` - fired before the popup is unmounted. Event context contains the DOM node of the popup\n *  - `feelPopup.closed` - fired after the popup is unmounted\n */\nfunction FEELPopupRoot(props) {\n  const {\n    element,\n    eventBus = {\n      fire() {},\n      on() {},\n      off() {}\n    },\n    popupContainer\n  } = props;\n  const prevElement = usePrevious(element);\n  const [popupConfig, setPopupConfig] = useState({});\n  const [open, setOpen] = useState(false);\n  const [source, setSource] = useState(null);\n  const [sourceElement, setSourceElement] = useState(null);\n  const emit = (type, context) => {\n    eventBus.fire('feelPopup.' + type, context);\n  };\n  const isOpen = useCallback(() => {\n    return !!open;\n  }, [open]);\n  useUpdateEffect(() => {\n    if (!open) {\n      emit('closed');\n    }\n  }, [open]);\n  const handleOpen = (entryId, config, _sourceElement) => {\n    setSource(entryId);\n    setPopupConfig(config);\n    setOpen(true);\n    setSourceElement(_sourceElement);\n    emit('open');\n  };\n  const handleClose = (event = {}) => {\n    const {\n      id\n    } = event;\n    if (id && id !== source) {\n      return;\n    }\n    setOpen(false);\n    setSource(null);\n  };\n  const feelPopupContext = {\n    open: handleOpen,\n    close: handleClose,\n    source\n  };\n\n  // close popup on element change, cf. https://github.com/bpmn-io/properties-panel/issues/270\n  useEffect(() => {\n    if (element && prevElement && element !== prevElement) {\n      handleClose();\n    }\n  }, [element]);\n\n  // allow close and open via events\n  useEffect(() => {\n    const handlePopupOpen = context => {\n      const {\n        entryId,\n        popupConfig,\n        sourceElement\n      } = context;\n      handleOpen(entryId, popupConfig, sourceElement);\n    };\n    const handleIsOpen = () => {\n      return isOpen();\n    };\n    eventBus.on('feelPopup._close', handleClose);\n    eventBus.on('feelPopup._open', handlePopupOpen);\n    eventBus.on('feelPopup._isOpen', handleIsOpen);\n    return () => {\n      eventBus.off('feelPopup._close', handleClose);\n      eventBus.off('feelPopup._open', handleOpen);\n      eventBus.off('feelPopup._isOpen', handleIsOpen);\n    };\n  }, [eventBus, isOpen]);\n  return jsxs(FeelPopupContext.Provider, {\n    value: feelPopupContext,\n    children: [open && jsx(FeelPopupComponent, {\n      onClose: handleClose,\n      container: popupContainer,\n      sourceElement: sourceElement,\n      emit: emit,\n      ...popupConfig\n    }), props.children]\n  });\n}\nfunction FeelPopupComponent(props) {\n  const {\n    container,\n    id,\n    hostLanguage,\n    onInput,\n    onClose,\n    position,\n    singleLine,\n    sourceElement,\n    title,\n    tooltipContainer,\n    type,\n    value,\n    variables,\n    emit\n  } = props;\n  const editorRef = useRef();\n  const popupRef = useRef();\n  const isAutoCompletionOpen = useRef(false);\n  const handleSetReturnFocus = () => {\n    sourceElement && sourceElement.focus();\n  };\n  const onKeyDownCapture = event => {\n    // we use capture here to make sure we handle the event before the editor does\n    if (event.key === 'Escape') {\n      isAutoCompletionOpen.current = autoCompletionOpen(event.target);\n    }\n  };\n  const onKeyDown = event => {\n    if (event.key === 'Escape') {\n      // close popup only if auto completion is not open\n      // we need to do check this because the editor is not\n      // stop propagating the keydown event\n      // cf. https://discuss.codemirror.net/t/how-can-i-replace-the-default-autocompletion-keymap-v6/3322/5\n      if (!isAutoCompletionOpen.current) {\n        onClose();\n        isAutoCompletionOpen.current = false;\n      }\n    }\n  };\n  useEffect(() => {\n    emit('opened', {\n      domNode: popupRef.current\n    });\n    return () => emit('close', {\n      domNode: popupRef.current\n    });\n  }, []);\n  useEffect(() => {\n    // Set focus on editor when popup is opened\n    if (editorRef.current) {\n      editorRef.current.focus();\n    }\n  }, [editorRef]);\n  return jsxs(Popup, {\n    container: container,\n    className: \"bio-properties-panel-feel-popup\",\n    emit: emit,\n    position: position,\n    title: title,\n    onClose: onClose\n\n    // handle focus manually on deactivate\n    ,\n    returnFocus: false,\n    closeOnEscape: false,\n    delayInitialFocus: false,\n    onPostDeactivate: handleSetReturnFocus,\n    height: FEEL_POPUP_HEIGHT,\n    width: FEEL_POPUP_WIDTH,\n    ref: popupRef,\n    children: [jsxs(Popup.Title, {\n      title: title,\n      emit: emit,\n      draggable: true,\n      children: [type === 'feel' && jsxs(\"a\", {\n        href: \"https://docs.camunda.io/docs/components/modeler/feel/what-is-feel/\",\n        target: \"_blank\",\n        class: \"bio-properties-panel-feel-popup__title-link\",\n        children: [\"Learn FEEL expressions\", jsx(HelpIcon, {})]\n      }), type === 'feelers' && jsxs(\"a\", {\n        href: \"https://docs.camunda.io/docs/components/modeler/forms/configuration/forms-config-templating-syntax/\",\n        target: \"_blank\",\n        class: \"bio-properties-panel-feel-popup__title-link\",\n        children: [\"Learn templating\", jsx(HelpIcon, {})]\n      })]\n    }), jsx(Popup.Body, {\n      children: jsxs(\"div\", {\n        onKeyDownCapture: onKeyDownCapture,\n        onKeyDown: onKeyDown,\n        class: \"bio-properties-panel-feel-popup__body\",\n        children: [type === 'feel' && jsx(CodeEditor, {\n          enableGutters: true,\n          id: prefixId$8(id),\n          name: id,\n          onInput: onInput,\n          value: value,\n          variables: variables,\n          ref: editorRef,\n          tooltipContainer: tooltipContainer\n        }), type === 'feelers' && jsx(CodeEditor$1, {\n          id: prefixId$8(id),\n          contentAttributes: {\n            'aria-label': title\n          },\n          enableGutters: true,\n          hostLanguage: hostLanguage,\n          name: id,\n          onInput: onInput,\n          value: value,\n          ref: editorRef,\n          singleLine: singleLine,\n          tooltipContainer: tooltipContainer\n        })]\n      })\n    }), jsx(Popup.Footer, {\n      children: jsx(\"button\", {\n        type: \"button\",\n        onClick: () => onClose(),\n        title: \"Close pop-up editor\",\n        class: \"bio-properties-panel-feel-popup__close-btn\",\n        children: \"Close\"\n      })\n    })]\n  });\n}\n\n// helpers /////////////////\n\nfunction prefixId$8(id) {\n  return `bio-properties-panel-${id}`;\n}\nfunction autoCompletionOpen(element) {\n  return element.closest('.cm-editor').querySelector('.cm-tooltip-autocomplete');\n}\n\n/**\n * This hook behaves like useEffect, but does not trigger on the first render.\n *\n * @param {Function} effect\n * @param {Array} deps\n */\nfunction useUpdateEffect(effect, deps) {\n  const isMounted = useRef(false);\n  useEffect(() => {\n    if (isMounted.current) {\n      return effect();\n    } else {\n      isMounted.current = true;\n    }\n  }, deps);\n}\n\nfunction ToggleSwitch(props) {\n  const {\n    id,\n    label,\n    onInput,\n    value,\n    switcherLabel,\n    inline,\n    onFocus,\n    onBlur,\n    inputRef,\n    tooltip\n  } = props;\n  const [localValue, setLocalValue] = useState(value);\n  const handleInputCallback = async () => {\n    onInput(!value);\n  };\n  const handleInput = e => {\n    handleInputCallback();\n    setLocalValue(e.target.value);\n  };\n  useEffect(() => {\n    if (value === localValue) {\n      return;\n    }\n    setLocalValue(value);\n  }, [value]);\n  return jsxs(\"div\", {\n    class: classnames('bio-properties-panel-toggle-switch', {\n      inline\n    }),\n    children: [jsx(\"label\", {\n      class: \"bio-properties-panel-label\",\n      for: prefixId$7(id),\n      children: jsx(TooltipWrapper, {\n        value: tooltip,\n        forId: id,\n        element: props.element,\n        children: label\n      })\n    }), jsxs(\"div\", {\n      class: \"bio-properties-panel-field-wrapper\",\n      children: [jsxs(\"label\", {\n        class: \"bio-properties-panel-toggle-switch__switcher\",\n        children: [jsx(\"input\", {\n          ref: inputRef,\n          id: prefixId$7(id),\n          class: \"bio-properties-panel-input\",\n          type: \"checkbox\",\n          onFocus: onFocus,\n          onBlur: onBlur,\n          name: id,\n          onInput: handleInput,\n          checked: !!localValue\n        }), jsx(\"span\", {\n          class: \"bio-properties-panel-toggle-switch__slider\"\n        })]\n      }), switcherLabel && jsx(\"p\", {\n        class: \"bio-properties-panel-toggle-switch__label\",\n        children: switcherLabel\n      })]\n    })]\n  });\n}\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.id\n * @param {String} props.description\n * @param {String} props.label\n * @param {String} props.switcherLabel\n * @param {Boolean} props.inline\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n * @param {string|import('preact').Component} props.tooltip\n */\nfunction ToggleSwitchEntry(props) {\n  const {\n    element,\n    id,\n    description,\n    label,\n    switcherLabel,\n    inline,\n    getValue,\n    setValue,\n    onFocus,\n    onBlur,\n    tooltip\n  } = props;\n  const value = getValue(element);\n  return jsxs(\"div\", {\n    class: \"bio-properties-panel-entry bio-properties-panel-toggle-switch-entry\",\n    \"data-entry-id\": id,\n    children: [jsx(ToggleSwitch, {\n      id: id,\n      label: label,\n      value: value,\n      onInput: setValue,\n      onFocus: onFocus,\n      onBlur: onBlur,\n      switcherLabel: switcherLabel,\n      inline: inline,\n      tooltip: tooltip,\n      element: element\n    }), jsx(Description, {\n      forId: id,\n      element: element,\n      value: description\n    })]\n  });\n}\nfunction isEdited$8(node) {\n  return node && !!node.checked;\n}\n\n// helpers /////////////////\n\nfunction prefixId$7(id) {\n  return `bio-properties-panel-${id}`;\n}\n\nfunction NumberField(props) {\n  const {\n    debounce,\n    disabled,\n    displayLabel = true,\n    id,\n    inputRef,\n    label,\n    max,\n    min,\n    onInput,\n    step,\n    value = '',\n    onFocus,\n    onBlur\n  } = props;\n  const [localValue, setLocalValue] = useState(value);\n  const handleInputCallback = useMemo(() => {\n    return debounce(target => {\n      if (target.validity.valid) {\n        onInput(target.value ? parseFloat(target.value) : undefined);\n      }\n    });\n  }, [onInput, debounce]);\n  const handleInput = e => {\n    handleInputCallback(e.target);\n    setLocalValue(e.target.value);\n  };\n  useEffect(() => {\n    if (value === localValue) {\n      return;\n    }\n    setLocalValue(value);\n  }, [value]);\n  return jsxs(\"div\", {\n    class: \"bio-properties-panel-numberfield\",\n    children: [displayLabel && jsx(\"label\", {\n      for: prefixId$6(id),\n      class: \"bio-properties-panel-label\",\n      children: label\n    }), jsx(\"input\", {\n      id: prefixId$6(id),\n      ref: inputRef,\n      type: \"number\",\n      name: id,\n      spellCheck: \"false\",\n      autoComplete: \"off\",\n      disabled: disabled,\n      class: \"bio-properties-panel-input\",\n      max: max,\n      min: min,\n      onInput: handleInput,\n      onFocus: onFocus,\n      onBlur: onBlur,\n      step: step,\n      value: localValue\n    })]\n  });\n}\n\n/**\n * @param {Object} props\n * @param {Boolean} props.debounce\n * @param {String} props.description\n * @param {Boolean} props.disabled\n * @param {Object} props.element\n * @param {Function} props.getValue\n * @param {String} props.id\n * @param {String} props.label\n * @param {String} props.max\n * @param {String} props.min\n * @param {Function} props.setValue\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n * @param {String} props.step\n * @param {Function} props.validate\n */\nfunction NumberFieldEntry(props) {\n  const {\n    debounce,\n    description,\n    disabled,\n    element,\n    getValue,\n    id,\n    label,\n    max,\n    min,\n    setValue,\n    step,\n    onFocus,\n    onBlur,\n    validate\n  } = props;\n  const globalError = useError(id);\n  const [localError, setLocalError] = useState(null);\n  let value = getValue(element);\n  useEffect(() => {\n    if (isFunction(validate)) {\n      const newValidationError = validate(value) || null;\n      setLocalError(newValidationError);\n    }\n  }, [value, validate]);\n  const onInput = newValue => {\n    let newValidationError = null;\n    if (isFunction(validate)) {\n      newValidationError = validate(newValue) || null;\n    }\n    setValue(newValue, newValidationError);\n    setLocalError(newValidationError);\n  };\n  const error = globalError || localError;\n  return jsxs(\"div\", {\n    class: classnames('bio-properties-panel-entry', error ? 'has-error' : ''),\n    \"data-entry-id\": id,\n    children: [jsx(NumberField, {\n      debounce: debounce,\n      disabled: disabled,\n      id: id,\n      label: label,\n      onFocus: onFocus,\n      onBlur: onBlur,\n      onInput: onInput,\n      max: max,\n      min: min,\n      step: step,\n      value: value\n    }, element), error && jsx(\"div\", {\n      class: \"bio-properties-panel-error\",\n      children: error\n    }), jsx(Description, {\n      forId: id,\n      element: element,\n      value: description\n    })]\n  });\n}\nfunction isEdited$7(node) {\n  return node && !!node.value;\n}\n\n// helpers /////////////////\n\nfunction prefixId$6(id) {\n  return `bio-properties-panel-${id}`;\n}\n\nconst noop$2 = () => {};\nfunction FeelTextfieldComponent(props) {\n  const {\n    debounce,\n    id,\n    element,\n    label,\n    hostLanguage,\n    onInput,\n    onError,\n    feel,\n    value = '',\n    disabled = false,\n    variables,\n    singleLine,\n    tooltipContainer,\n    OptionalComponent = OptionalFeelInput,\n    tooltip\n  } = props;\n  const [localValue, _setLocalValue] = useState(value);\n  const editorRef = useShowEntryEvent(id);\n  const containerRef = useRef();\n  const feelActive = isString(localValue) && localValue.startsWith('=') || feel === 'required';\n  const feelOnlyValue = isString(localValue) && localValue.startsWith('=') ? localValue.substring(1) : localValue;\n  const [focus, _setFocus] = useState(undefined);\n  const {\n    open: openPopup,\n    source: popupSource\n  } = useContext(FeelPopupContext);\n  const popuOpen = popupSource === id;\n  const setFocus = (offset = 0) => {\n    const hasFocus = containerRef.current.contains(document.activeElement);\n\n    // Keep caret position if it is already focused, otherwise focus at the end\n    const position = hasFocus ? document.activeElement.selectionStart : Infinity;\n    _setFocus(position + offset);\n  };\n  const handleInputCallback = useMemo(() => {\n    return debounce(newValue => {\n      onInput(newValue);\n    });\n  }, [onInput, debounce]);\n  const setLocalValue = newValue => {\n    _setLocalValue(newValue);\n    if (typeof newValue === 'undefined' || newValue === '' || newValue === '=') {\n      handleInputCallback(undefined);\n    } else {\n      handleInputCallback(newValue);\n    }\n  };\n  const handleFeelToggle = useStaticCallback(() => {\n    if (feel === 'required') {\n      return;\n    }\n    if (!feelActive) {\n      setLocalValue('=' + localValue);\n    } else {\n      setLocalValue(feelOnlyValue);\n    }\n  });\n  const handleLocalInput = newValue => {\n    if (feelActive) {\n      newValue = '=' + newValue;\n    }\n    if (newValue === localValue) {\n      return;\n    }\n    setLocalValue(newValue);\n    if (!feelActive && isString(newValue) && newValue.startsWith('=')) {\n      // focus is behind `=` sign that will be removed\n      setFocus(-1);\n    }\n  };\n  const handleLint = useStaticCallback(lint => {\n    if (!(lint && lint.length)) {\n      onError(undefined);\n      return;\n    }\n    onError('Unparsable FEEL expression.');\n  });\n  const handlePopupOpen = (type = 'feel') => {\n    const popupOptions = {\n      id,\n      hostLanguage,\n      onInput: handleLocalInput,\n      position: calculatePopupPosition(containerRef.current),\n      singleLine,\n      title: getPopupTitle(element, label),\n      tooltipContainer,\n      type,\n      value: feelOnlyValue,\n      variables\n    };\n    openPopup(id, popupOptions, editorRef.current);\n  };\n  useEffect(() => {\n    if (typeof focus !== 'undefined') {\n      editorRef.current.focus(focus);\n      _setFocus(undefined);\n    }\n  }, [focus]);\n  useEffect(() => {\n    if (value === localValue) {\n      return;\n    }\n\n    // External value change removed content => keep FEEL configuration\n    if (!value) {\n      setLocalValue(feelActive ? '=' : '');\n      return;\n    }\n    setLocalValue(value);\n  }, [value]);\n\n  // copy-paste integration\n  useEffect(() => {\n    const copyHandler = event => {\n      if (!feelActive) {\n        return;\n      }\n      event.clipboardData.setData('application/FEEL', event.clipboardData.getData('text'));\n    };\n    const pasteHandler = event => {\n      if (feelActive || popuOpen) {\n        return;\n      }\n      const data = event.clipboardData.getData('application/FEEL');\n      if (data) {\n        setTimeout(() => {\n          handleFeelToggle();\n          setFocus();\n        });\n      }\n    };\n    containerRef.current.addEventListener('copy', copyHandler);\n    containerRef.current.addEventListener('cut', copyHandler);\n    containerRef.current.addEventListener('paste', pasteHandler);\n    return () => {\n      containerRef.current.removeEventListener('copy', copyHandler);\n      containerRef.current.removeEventListener('cut', copyHandler);\n      containerRef.current.removeEventListener('paste', pasteHandler);\n    };\n  }, [containerRef, feelActive, handleFeelToggle, setFocus]);\n  return jsxs(\"div\", {\n    class: classnames('bio-properties-panel-feel-entry', {\n      'feel-active': feelActive\n    }),\n    children: [jsxs(\"label\", {\n      for: prefixId$5(id),\n      class: \"bio-properties-panel-label\",\n      onClick: () => setFocus(),\n      children: [jsx(TooltipWrapper, {\n        value: tooltip,\n        forId: id,\n        element: props.element,\n        children: label\n      }), jsx(FeelIcon, {\n        label: label,\n        feel: feel,\n        onClick: handleFeelToggle,\n        active: feelActive\n      })]\n    }), jsxs(\"div\", {\n      class: \"bio-properties-panel-feel-container\",\n      ref: containerRef,\n      children: [jsx(FeelIndicator, {\n        active: feelActive,\n        disabled: feel !== 'optional' || disabled,\n        onClick: handleFeelToggle\n      }), feelActive ? jsx(CodeEditor, {\n        id: prefixId$5(id),\n        name: id,\n        onInput: handleLocalInput,\n        disabled: disabled,\n        popupOpen: popuOpen,\n        onFeelToggle: () => {\n          handleFeelToggle();\n          setFocus(true);\n        },\n        onLint: handleLint,\n        onPopupOpen: handlePopupOpen,\n        value: feelOnlyValue,\n        variables: variables,\n        ref: editorRef,\n        tooltipContainer: tooltipContainer\n      }) : jsx(OptionalComponent, {\n        ...props,\n        popupOpen: popuOpen,\n        onInput: handleLocalInput,\n        contentAttributes: {\n          'id': prefixId$5(id),\n          'aria-label': label\n        },\n        value: localValue,\n        ref: editorRef,\n        onPopupOpen: handlePopupOpen,\n        containerRef: containerRef\n      })]\n    })]\n  });\n}\nconst FeelTextfield = withAutoClosePopup(FeelTextfieldComponent);\nconst OptionalFeelInput = forwardRef((props, ref) => {\n  const {\n    id,\n    disabled,\n    onInput,\n    value,\n    onFocus,\n    onBlur\n  } = props;\n  const inputRef = useRef();\n\n  // To be consistent with the FEEL editor, set focus at start of input\n  // this ensures clean editing experience when switching with the keyboard\n  ref.current = {\n    focus: position => {\n      const input = inputRef.current;\n      if (!input) {\n        return;\n      }\n      input.focus();\n      if (typeof position === 'number') {\n        if (position > value.length) {\n          position = value.length;\n        }\n        input.setSelectionRange(position, position);\n      }\n    }\n  };\n  return jsx(\"input\", {\n    id: prefixId$5(id),\n    type: \"text\",\n    ref: inputRef,\n    name: id,\n    spellCheck: \"false\",\n    autoComplete: \"off\",\n    disabled: disabled,\n    class: \"bio-properties-panel-input\",\n    onInput: e => onInput(e.target.value),\n    onFocus: onFocus,\n    onBlur: onBlur,\n    value: value || ''\n  });\n});\nconst OptionalFeelNumberField = forwardRef((props, ref) => {\n  const {\n    id,\n    debounce,\n    disabled,\n    onInput,\n    value,\n    min,\n    max,\n    step,\n    onFocus,\n    onBlur\n  } = props;\n  const inputRef = useRef();\n\n  // To be consistent with the FEEL editor, set focus at start of input\n  // this ensures clean editing experience when switching with the keyboard\n  ref.current = {\n    focus: position => {\n      const input = inputRef.current;\n      if (!input) {\n        return;\n      }\n      input.focus();\n      if (typeof position === 'number' && position !== Infinity) {\n        if (position > value.length) {\n          position = value.length;\n        }\n        input.setSelectionRange(position, position);\n      }\n    }\n  };\n  return jsx(NumberField, {\n    id: id,\n    debounce: debounce,\n    disabled: disabled,\n    displayLabel: false,\n    inputRef: inputRef,\n    max: max,\n    min: min,\n    onInput: onInput,\n    step: step,\n    value: value,\n    onFocus: onFocus,\n    onBlur: onBlur\n  });\n});\nconst OptionalFeelTextArea = forwardRef((props, ref) => {\n  const {\n    id,\n    disabled,\n    onInput,\n    value,\n    onFocus,\n    onBlur\n  } = props;\n  const inputRef = useRef();\n\n  // To be consistent with the FEEL editor, set focus at start of input\n  // this ensures clean editing experience when switching with the keyboard\n  ref.current = {\n    focus: () => {\n      const input = inputRef.current;\n      if (!input) {\n        return;\n      }\n      input.focus();\n      input.setSelectionRange(0, 0);\n    }\n  };\n  return jsx(\"textarea\", {\n    id: prefixId$5(id),\n    type: \"text\",\n    ref: inputRef,\n    name: id,\n    spellCheck: \"false\",\n    autoComplete: \"off\",\n    disabled: disabled,\n    class: \"bio-properties-panel-input\",\n    onInput: e => onInput(e.target.value),\n    onFocus: onFocus,\n    onBlur: onBlur,\n    value: value || '',\n    \"data-gramm\": \"false\"\n  });\n});\nconst OptionalFeelToggleSwitch = forwardRef((props, ref) => {\n  const {\n    id,\n    onInput,\n    value,\n    onFocus,\n    onBlur,\n    switcherLabel\n  } = props;\n  const inputRef = useRef();\n\n  // To be consistent with the FEEL editor, set focus at start of input\n  // this ensures clean editing experience when switching with the keyboard\n  ref.current = {\n    focus: () => {\n      const input = inputRef.current;\n      if (!input) {\n        return;\n      }\n      input.focus();\n    }\n  };\n  return jsx(ToggleSwitch, {\n    id: id,\n    value: value,\n    inputRef: inputRef,\n    onInput: onInput,\n    onFocus: onFocus,\n    onBlur: onBlur,\n    switcherLabel: switcherLabel\n  });\n});\nconst OptionalFeelCheckbox = forwardRef((props, ref) => {\n  const {\n    id,\n    disabled,\n    onInput,\n    value,\n    onFocus,\n    onBlur\n  } = props;\n  const inputRef = useRef();\n  const handleChange = ({\n    target\n  }) => {\n    onInput(target.checked);\n  };\n\n  // To be consistent with the FEEL editor, set focus at start of input\n  // this ensures clean editing experience when switching with the keyboard\n  ref.current = {\n    focus: () => {\n      const input = inputRef.current;\n      if (!input) {\n        return;\n      }\n      input.focus();\n    }\n  };\n  return jsx(\"input\", {\n    ref: inputRef,\n    id: prefixId$5(id),\n    name: id,\n    onFocus: onFocus,\n    onBlur: onBlur,\n    type: \"checkbox\",\n    class: \"bio-properties-panel-input\",\n    onChange: handleChange,\n    checked: value,\n    disabled: disabled\n  });\n});\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.id\n * @param {String} props.description\n * @param {Boolean} props.debounce\n * @param {Boolean} props.disabled\n * @param {Boolean} props.feel\n * @param {String} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.tooltipContainer\n * @param {Function} props.validate\n * @param {Function} props.show\n * @param {Function} props.example\n * @param {Function} props.variables\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n * @param {string|import('preact').Component} props.tooltip\n */\nfunction FeelEntry(props) {\n  const {\n    element,\n    id,\n    description,\n    debounce,\n    disabled,\n    feel,\n    label,\n    getValue,\n    setValue,\n    tooltipContainer,\n    hostLanguage,\n    singleLine,\n    validate,\n    show = noop$2,\n    example,\n    variables,\n    onFocus,\n    onBlur,\n    tooltip\n  } = props;\n  const [validationError, setValidationError] = useState(null);\n  const [localError, setLocalError] = useState(null);\n  let value = getValue(element);\n  useEffect(() => {\n    if (isFunction(validate)) {\n      const newValidationError = validate(value) || null;\n      setValidationError(newValidationError);\n    }\n  }, [value, validate]);\n  const onInput = useStaticCallback(newValue => {\n    let newValidationError = null;\n    if (isFunction(validate)) {\n      newValidationError = validate(newValue) || null;\n    }\n\n    // don't create multiple commandStack entries for the same value\n    if (newValue !== value) {\n      setValue(newValue, newValidationError);\n    }\n    setValidationError(newValidationError);\n  });\n  const onError = useCallback(err => {\n    setLocalError(err);\n  }, []);\n  const temporaryError = useError(id);\n  const error = temporaryError || localError || validationError;\n  return jsxs(\"div\", {\n    class: classnames(props.class, 'bio-properties-panel-entry', error ? 'has-error' : ''),\n    \"data-entry-id\": id,\n    children: [createElement(FeelTextfield, {\n      ...props,\n      debounce: debounce,\n      disabled: disabled,\n      feel: feel,\n      id: id,\n      key: element,\n      label: label,\n      onInput: onInput,\n      onError: onError,\n      onFocus: onFocus,\n      onBlur: onBlur,\n      example: example,\n      hostLanguage: hostLanguage,\n      singleLine: singleLine,\n      show: show,\n      value: value,\n      variables: variables,\n      tooltipContainer: tooltipContainer,\n      OptionalComponent: props.OptionalComponent,\n      tooltip: tooltip\n    }), error && jsx(\"div\", {\n      class: \"bio-properties-panel-error\",\n      children: error\n    }), jsx(Description, {\n      forId: id,\n      element: element,\n      value: description\n    })]\n  });\n}\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.id\n * @param {String} props.description\n * @param {Boolean} props.debounce\n * @param {Boolean} props.disabled\n * @param {String} props.max\n * @param {String} props.min\n * @param {String} props.step\n * @param {Boolean} props.feel\n * @param {String} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.tooltipContainer\n * @param {Function} props.validate\n * @param {Function} props.show\n * @param {Function} props.example\n * @param {Function} props.variables\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n */\nfunction FeelNumberEntry(props) {\n  return jsx(FeelEntry, {\n    class: \"bio-properties-panel-feel-number\",\n    OptionalComponent: OptionalFeelNumberField,\n    ...props\n  });\n}\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.id\n * @param {String} props.description\n * @param {Boolean} props.debounce\n * @param {Boolean} props.disabled\n * @param {Boolean} props.feel\n * @param {String} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.tooltipContainer\n * @param {Function} props.validate\n * @param {Function} props.show\n * @param {Function} props.example\n * @param {Function} props.variables\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n */\nfunction FeelTextAreaEntry(props) {\n  return jsx(FeelEntry, {\n    class: \"bio-properties-panel-feel-textarea\",\n    OptionalComponent: OptionalFeelTextArea,\n    ...props\n  });\n}\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.id\n * @param {String} props.description\n * @param {Boolean} props.debounce\n * @param {Boolean} props.disabled\n * @param {Boolean} props.feel\n * @param {String} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.tooltipContainer\n * @param {Function} props.validate\n * @param {Function} props.show\n * @param {Function} props.example\n * @param {Function} props.variables\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n */\nfunction FeelToggleSwitchEntry(props) {\n  return jsx(FeelEntry, {\n    class: \"bio-properties-panel-feel-toggle-switch\",\n    OptionalComponent: OptionalFeelToggleSwitch,\n    ...props\n  });\n}\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.id\n * @param {String} props.description\n * @param {Boolean} props.debounce\n * @param {Boolean} props.disabled\n * @param {Boolean} props.feel\n * @param {String} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.tooltipContainer\n * @param {Function} props.validate\n * @param {Function} props.show\n * @param {Function} props.example\n * @param {Function} props.variables\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n */\nfunction FeelCheckboxEntry(props) {\n  return jsx(FeelEntry, {\n    class: \"bio-properties-panel-feel-checkbox\",\n    OptionalComponent: OptionalFeelCheckbox,\n    ...props\n  });\n}\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.id\n * @param {String} props.description\n * @param {String} props.hostLanguage\n * @param {Boolean} props.singleLine\n * @param {Boolean} props.debounce\n * @param {Boolean} props.disabled\n * @param {Boolean} props.feel\n * @param {String} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.tooltipContainer\n * @param {Function} props.validate\n * @param {Function} props.show\n * @param {Function} props.example\n * @param {Function} props.variables\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n */\nfunction FeelTemplatingEntry(props) {\n  return jsx(FeelEntry, {\n    class: \"bio-properties-panel-feel-templating\",\n    OptionalComponent: CodeEditor$1,\n    ...props\n  });\n}\nfunction isEdited$6(node) {\n  if (!node) {\n    return false;\n  }\n  if (node.type === 'checkbox') {\n    return !!node.checked || node.classList.contains('edited');\n  }\n  return !!node.value || node.classList.contains('edited');\n}\n\n// helpers /////////////////\n\nfunction prefixId$5(id) {\n  return `bio-properties-panel-${id}`;\n}\nfunction calculatePopupPosition(element) {\n  const {\n    top,\n    left\n  } = element.getBoundingClientRect();\n  return {\n    left: left - FEEL_POPUP_WIDTH - 20,\n    top: top\n  };\n}\n\n// todo(pinussilvestrus): make this configurable in the future\nfunction getPopupTitle(element, label) {\n  let popupTitle = '';\n  if (element && element.type) {\n    popupTitle = `${element.type} / `;\n  }\n  return `${popupTitle}${label}`;\n}\nfunction withAutoClosePopup(Component) {\n  return function (props) {\n    const {\n      id\n    } = props;\n    const {\n      close\n    } = useContext(FeelPopupContext);\n    const closePopup = useStaticCallback(close);\n    useEffect(() => {\n      return () => {\n        closePopup({\n          id\n        });\n      };\n    }, []);\n    return jsx(Component, {\n      ...props\n    });\n  };\n}\n\nconst DEFAULT_LAYOUT = {};\nconst DEFAULT_DESCRIPTION = {};\nconst DEFAULT_TOOLTIP = {};\n\n/**\n * @typedef { {\n *    component: import('preact').Component,\n *    id: String,\n *    isEdited?: Function\n * } } EntryDefinition\n *\n * @typedef { {\n *    autoFocusEntry: String,\n *    autoOpen?: Boolean,\n *    entries: Array<EntryDefinition>,\n *    id: String,\n *    label: String,\n *    remove: (event: MouseEvent) => void\n * } } ListItemDefinition\n *\n * @typedef { {\n *    add: (event: MouseEvent) => void,\n *    component: import('preact').Component,\n *    element: Object,\n *    id: String,\n *    items: Array<ListItemDefinition>,\n *    label: String,\n *    shouldSort?: Boolean,\n *    shouldOpen?: Boolean\n * } } ListGroupDefinition\n *\n * @typedef { {\n *    component?: import('preact').Component,\n *    entries: Array<EntryDefinition>,\n *    id: String,\n *    label: String,\n *    shouldOpen?: Boolean\n * } } GroupDefinition\n *\n *  @typedef { {\n *    [id: String]: GetDescriptionFunction\n * } } DescriptionConfig\n *\n *  @typedef { {\n *    [id: String]: GetTooltipFunction\n * } } TooltipConfig\n *\n * @callback { {\n * @param {string} id\n * @param {Object} element\n * @returns {string}\n * } } GetDescriptionFunction\n *\n * @callback { {\n * @param {string} id\n * @param {Object} element\n * @returns {string}\n * } } GetTooltipFunction\n *\n * @typedef { {\n *  getEmpty: (element: object) => import('./components/Placeholder').PlaceholderDefinition,\n *  getMultiple: (element: Object) => import('./components/Placeholder').PlaceholderDefinition\n * } } PlaceholderProvider\n *\n */\n\n/**\n * A basic properties panel component. Describes *how* content will be rendered, accepts\n * data from implementor to describe *what* will be rendered.\n *\n * @param {Object} props\n * @param {Object|Array} props.element\n * @param {import('./components/Header').HeaderProvider} props.headerProvider\n * @param {PlaceholderProvider} [props.placeholderProvider]\n * @param {Array<GroupDefinition|ListGroupDefinition>} props.groups\n * @param {Object} [props.layoutConfig]\n * @param {Function} [props.layoutChanged]\n * @param {DescriptionConfig} [props.descriptionConfig]\n * @param {Function} [props.descriptionLoaded]\n * @param {TooltipConfig} [props.tooltipConfig]\n * @param {Function} [props.tooltipLoaded]\n * @param {HTMLElement} [props.feelPopupContainer]\n * @param {Object} [props.eventBus]\n */\nfunction PropertiesPanel(props) {\n  const {\n    element,\n    headerProvider,\n    placeholderProvider,\n    groups,\n    layoutConfig,\n    layoutChanged,\n    descriptionConfig,\n    descriptionLoaded,\n    tooltipConfig,\n    tooltipLoaded,\n    feelPopupContainer,\n    eventBus\n  } = props;\n\n  // set-up layout context\n  const [layout, setLayout] = useState(createLayout(layoutConfig));\n\n  // react to external changes in the layout config\n  useUpdateLayoutEffect(() => {\n    const newLayout = createLayout(layoutConfig);\n    setLayout(newLayout);\n  }, [layoutConfig]);\n  useEffect(() => {\n    if (typeof layoutChanged === 'function') {\n      layoutChanged(layout);\n    }\n  }, [layout, layoutChanged]);\n  const getLayoutForKey = (key, defaultValue) => {\n    return get(layout, key, defaultValue);\n  };\n  const setLayoutForKey = (key, config) => {\n    const newLayout = assign({}, layout);\n    set(newLayout, key, config);\n    setLayout(newLayout);\n  };\n  const layoutContext = {\n    layout,\n    setLayout,\n    getLayoutForKey,\n    setLayoutForKey\n  };\n\n  // set-up description context\n  const description = useMemo(() => createDescriptionContext(descriptionConfig), [descriptionConfig]);\n  useEffect(() => {\n    if (typeof descriptionLoaded === 'function') {\n      descriptionLoaded(description);\n    }\n  }, [description, descriptionLoaded]);\n  const getDescriptionForId = (id, element) => {\n    return description[id] && description[id](element);\n  };\n  const descriptionContext = {\n    description,\n    getDescriptionForId\n  };\n\n  // set-up tooltip context\n  const tooltip = useMemo(() => createTooltipContext(tooltipConfig), [tooltipConfig]);\n  useEffect(() => {\n    if (typeof tooltipLoaded === 'function') {\n      tooltipLoaded(tooltip);\n    }\n  }, [tooltip, tooltipLoaded]);\n  const getTooltipForId = (id, element) => {\n    return tooltip[id] && tooltip[id](element);\n  };\n  const tooltipContext = {\n    tooltip,\n    getTooltipForId\n  };\n  const [errors, setErrors] = useState({});\n  const onSetErrors = ({\n    errors\n  }) => setErrors(errors);\n  useEvent('propertiesPanel.setErrors', onSetErrors, eventBus);\n  const errorsContext = {\n    errors\n  };\n  const eventContext = {\n    eventBus\n  };\n  const propertiesPanelContext = {\n    element\n  };\n\n  // empty state\n  if (placeholderProvider && !element) {\n    return jsx(Placeholder, {\n      ...placeholderProvider.getEmpty()\n    });\n  }\n\n  // multiple state\n  if (placeholderProvider && isArray(element)) {\n    return jsx(Placeholder, {\n      ...placeholderProvider.getMultiple()\n    });\n  }\n  return jsx(LayoutContext.Provider, {\n    value: propertiesPanelContext,\n    children: jsx(ErrorsContext.Provider, {\n      value: errorsContext,\n      children: jsx(DescriptionContext.Provider, {\n        value: descriptionContext,\n        children: jsx(TooltipContext.Provider, {\n          value: tooltipContext,\n          children: jsx(LayoutContext.Provider, {\n            value: layoutContext,\n            children: jsx(EventContext.Provider, {\n              value: eventContext,\n              children: jsx(FEELPopupRoot, {\n                element: element,\n                eventBus: eventBus,\n                popupContainer: feelPopupContainer,\n                children: jsxs(\"div\", {\n                  class: \"bio-properties-panel\",\n                  children: [jsx(Header, {\n                    element: element,\n                    headerProvider: headerProvider\n                  }), jsx(\"div\", {\n                    class: \"bio-properties-panel-scroll-container\",\n                    children: groups.map(group => {\n                      const {\n                        component: Component = Group,\n                        id\n                      } = group;\n                      return createElement(Component, {\n                        ...group,\n                        key: id,\n                        element: element\n                      });\n                    })\n                  })]\n                })\n              })\n            })\n          })\n        })\n      })\n    })\n  });\n}\n\n// helpers //////////////////\n\nfunction createLayout(overrides = {}, defaults = DEFAULT_LAYOUT) {\n  return {\n    ...defaults,\n    ...overrides\n  };\n}\nfunction createDescriptionContext(overrides = {}) {\n  return {\n    ...DEFAULT_DESCRIPTION,\n    ...overrides\n  };\n}\nfunction createTooltipContext(overrides = {}) {\n  return {\n    ...DEFAULT_TOOLTIP,\n    ...overrides\n  };\n}\n\n// hooks //////////////////\n\n/**\n * This hook behaves like useLayoutEffect, but does not trigger on the first render.\n *\n * @param {Function} effect\n * @param {Array} deps\n */\nfunction useUpdateLayoutEffect(effect, deps) {\n  const isMounted = useRef(false);\n  useLayoutEffect(() => {\n    if (isMounted.current) {\n      return effect();\n    } else {\n      isMounted.current = true;\n    }\n  }, deps);\n}\n\nfunction DropdownButton(props) {\n  const {\n    class: className,\n    children,\n    menuItems = []\n  } = props;\n  const dropdownRef = useRef(null);\n  const menuRef = useRef(null);\n  const [open, setOpen] = useState(false);\n  const close = () => setOpen(false);\n  function onDropdownToggle(event) {\n    if (menuRef.current && menuRef.current.contains(event.target)) {\n      return;\n    }\n    event.stopPropagation();\n    setOpen(open => !open);\n  }\n  function onActionClick(event, action) {\n    event.stopPropagation();\n    close();\n    action();\n  }\n  useGlobalClick([dropdownRef.current], () => close());\n  return jsxs(\"div\", {\n    class: classnames('bio-properties-panel-dropdown-button', {\n      open\n    }, className),\n    onClick: onDropdownToggle,\n    ref: dropdownRef,\n    children: [children, jsx(\"div\", {\n      class: \"bio-properties-panel-dropdown-button__menu\",\n      ref: menuRef,\n      children: menuItems.map((item, index) => jsx(MenuItem, {\n        onClick: onActionClick,\n        item: item\n      }, index))\n    })]\n  });\n}\nfunction MenuItem({\n  item,\n  onClick\n}) {\n  if (item.separator) {\n    return jsx(\"div\", {\n      class: \"bio-properties-panel-dropdown-button__menu-item bio-properties-panel-dropdown-button__menu-item--separator\"\n    });\n  }\n  if (item.action) {\n    return jsx(\"button\", {\n      type: \"button\",\n      class: \"bio-properties-panel-dropdown-button__menu-item bio-properties-panel-dropdown-button__menu-item--actionable\",\n      onClick: event => onClick(event, item.action),\n      children: item.entry\n    });\n  }\n  return jsx(\"div\", {\n    class: \"bio-properties-panel-dropdown-button__menu-item\",\n    children: item.entry\n  });\n}\n\n/**\n *\n * @param {Array<null | Element>} ignoredElements\n * @param {Function} callback\n */\nfunction useGlobalClick(ignoredElements, callback) {\n  useEffect(() => {\n    /**\n     * @param {MouseEvent} event\n     */\n    function listener(event) {\n      if (ignoredElements.some(element => element && element.contains(event.target))) {\n        return;\n      }\n      callback();\n    }\n    document.addEventListener('click', listener, {\n      capture: true\n    });\n    return () => document.removeEventListener('click', listener, {\n      capture: true\n    });\n  }, [...ignoredElements, callback]);\n}\n\nfunction HeaderButton(props) {\n  const {\n    children = null,\n    class: classname,\n    onClick = () => {},\n    ...otherProps\n  } = props;\n  return jsx(\"button\", {\n    type: \"button\",\n    ...otherProps,\n    onClick: onClick,\n    class: classnames('bio-properties-panel-group-header-button', classname),\n    children: children\n  });\n}\n\nfunction CollapsibleEntry(props) {\n  const {\n    element,\n    entries = [],\n    id,\n    label,\n    open: shouldOpen,\n    remove\n  } = props;\n  const [open, setOpen] = useState(shouldOpen);\n  const toggleOpen = () => setOpen(!open);\n  const {\n    onShow\n  } = useContext(LayoutContext);\n  const propertiesPanelContext = {\n    ...useContext(LayoutContext),\n    onShow: useCallback(() => {\n      setOpen(true);\n      if (isFunction(onShow)) {\n        onShow();\n      }\n    }, [onShow, setOpen])\n  };\n\n  // todo(pinussilvestrus): translate once we have a translate mechanism for the core\n  const placeholderLabel = '<empty>';\n  return jsxs(\"div\", {\n    \"data-entry-id\": id,\n    class: classnames('bio-properties-panel-collapsible-entry', open ? 'open' : ''),\n    children: [jsxs(\"div\", {\n      class: \"bio-properties-panel-collapsible-entry-header\",\n      onClick: toggleOpen,\n      children: [jsx(\"div\", {\n        title: label || placeholderLabel,\n        class: classnames('bio-properties-panel-collapsible-entry-header-title', !label && 'empty'),\n        children: label || placeholderLabel\n      }), jsx(\"button\", {\n        type: \"button\",\n        title: \"Toggle list item\",\n        class: \"bio-properties-panel-arrow  bio-properties-panel-collapsible-entry-arrow\",\n        children: jsx(ArrowIcon, {\n          class: open ? 'bio-properties-panel-arrow-down' : 'bio-properties-panel-arrow-right'\n        })\n      }), remove ? jsx(\"button\", {\n        type: \"button\",\n        title: \"Delete item\",\n        class: \"bio-properties-panel-remove-entry\",\n        onClick: remove,\n        children: jsx(DeleteIcon, {})\n      }) : null]\n    }), jsx(\"div\", {\n      class: classnames('bio-properties-panel-collapsible-entry-entries', open ? 'open' : ''),\n      children: jsx(LayoutContext.Provider, {\n        value: propertiesPanelContext,\n        children: entries.map(entry => {\n          const {\n            component: Component,\n            id\n          } = entry;\n          return createElement(Component, {\n            ...entry,\n            element: element,\n            key: id\n          });\n        })\n      })\n    })]\n  });\n}\n\nfunction ListItem(props) {\n  const {\n    autoFocusEntry,\n    autoOpen\n  } = props;\n\n  // focus specified entry on auto open\n  useEffect(() => {\n    if (autoOpen && autoFocusEntry) {\n      const entry = query(`[data-entry-id=\"${autoFocusEntry}\"]`);\n      const focusableInput = query('.bio-properties-panel-input', entry);\n      if (focusableInput) {\n        if (isFunction(focusableInput.select)) {\n          focusableInput.select();\n        } else if (isFunction(focusableInput.focus)) {\n          focusableInput.focus();\n        }\n      }\n    }\n  }, [autoOpen, autoFocusEntry]);\n  return jsx(\"div\", {\n    class: \"bio-properties-panel-list-item\",\n    children: jsx(CollapsibleEntry, {\n      ...props,\n      open: autoOpen\n    })\n  });\n}\n\nconst noop$1 = () => {};\n\n/**\n * @param {import('../PropertiesPanel').ListGroupDefinition} props\n */\nfunction ListGroup(props) {\n  const {\n    add,\n    element,\n    id,\n    items,\n    label,\n    shouldOpen = true,\n    shouldSort = true\n  } = props;\n  const groupRef = useRef(null);\n  const [open, setOpen] = useLayoutState(['groups', id, 'open'], false);\n  const [sticky, setSticky] = useState(false);\n  const onShow = useCallback(() => setOpen(true), [setOpen]);\n  const [ordering, setOrdering] = useState([]);\n  const [newItemAdded, setNewItemAdded] = useState(false);\n\n  // Flag to mark that add button was clicked in the last render cycle\n  const [addTriggered, setAddTriggered] = useState(false);\n  const prevItems = usePrevious(items);\n  const prevElement = usePrevious(element);\n  const elementChanged = element !== prevElement;\n  const shouldHandleEffects = !elementChanged && (shouldSort || shouldOpen);\n\n  // reset initial ordering when element changes (before first render)\n  if (elementChanged) {\n    setOrdering(createOrdering(shouldSort ? sortItems(items) : items));\n  }\n\n  // keep ordering in sync to items - and open changes\n\n  // (0) set initial ordering from given items\n  useEffect(() => {\n    if (!prevItems || !shouldSort) {\n      setOrdering(createOrdering(items));\n    }\n  }, [items, element]);\n\n  // (1) items were added\n  useEffect(() => {\n    // reset addTriggered flag\n    setAddTriggered(false);\n    if (shouldHandleEffects && prevItems && items.length > prevItems.length) {\n      let add = [];\n      items.forEach(item => {\n        if (!ordering.includes(item.id)) {\n          add.push(item.id);\n        }\n      });\n      let newOrdering = ordering;\n\n      // open if not open, configured and triggered by add button\n      //\n      // TODO(marstamm): remove once we refactor layout handling for listGroups.\n      // Ideally, opening should be handled as part of the `add` callback and\n      // not be a concern for the ListGroup component.\n      if (addTriggered && !open && shouldOpen) {\n        toggleOpen();\n      }\n\n      // filter when not open and configured\n      if (!open && shouldSort) {\n        newOrdering = createOrdering(sortItems(items));\n      }\n\n      // add new items on top or bottom depending on sorting behavior\n      newOrdering = newOrdering.filter(item => !add.includes(item));\n      if (shouldSort) {\n        newOrdering.unshift(...add);\n      } else {\n        newOrdering.push(...add);\n      }\n      setOrdering(newOrdering);\n      setNewItemAdded(addTriggered);\n    } else {\n      setNewItemAdded(false);\n    }\n  }, [items, open, shouldHandleEffects, addTriggered]);\n\n  // (2) sort items on open if shouldSort is set\n  useEffect(() => {\n    if (shouldSort && open && !newItemAdded) {\n      setOrdering(createOrdering(sortItems(items)));\n    }\n  }, [open, shouldSort]);\n\n  // (3) items were deleted\n  useEffect(() => {\n    if (shouldHandleEffects && prevItems && items.length < prevItems.length) {\n      let keep = [];\n      ordering.forEach(o => {\n        if (getItem(items, o)) {\n          keep.push(o);\n        }\n      });\n      setOrdering(keep);\n    }\n  }, [items, shouldHandleEffects]);\n\n  // set css class when group is sticky to top\n  useStickyIntersectionObserver(groupRef, 'div.bio-properties-panel-scroll-container', setSticky);\n  const toggleOpen = () => setOpen(!open);\n  const hasItems = !!items.length;\n  const propertiesPanelContext = {\n    ...useContext(LayoutContext),\n    onShow\n  };\n  const handleAddClick = e => {\n    setAddTriggered(true);\n    add(e);\n  };\n  const allErrors = useErrors();\n  const hasError = items.some(item => {\n    if (allErrors[item.id]) {\n      return true;\n    }\n    if (!item.entries) {\n      return;\n    }\n\n    // also check if the error is nested, e.g. for name-value entries\n    return item.entries.some(entry => allErrors[entry.id]);\n  });\n  return jsxs(\"div\", {\n    class: \"bio-properties-panel-group\",\n    \"data-group-id\": 'group-' + id,\n    ref: groupRef,\n    children: [jsxs(\"div\", {\n      class: classnames('bio-properties-panel-group-header', hasItems ? '' : 'empty', hasItems && open ? 'open' : '', sticky && open ? 'sticky' : ''),\n      onClick: hasItems ? toggleOpen : noop$1,\n      children: [jsx(\"div\", {\n        title: props.tooltip ? null : label,\n        \"data-title\": label,\n        class: \"bio-properties-panel-group-header-title\",\n        children: jsx(TooltipWrapper, {\n          value: props.tooltip,\n          forId: 'group-' + id,\n          element: element,\n          parent: groupRef,\n          children: label\n        })\n      }), jsxs(\"div\", {\n        class: \"bio-properties-panel-group-header-buttons\",\n        children: [add ? jsxs(\"button\", {\n          type: \"button\",\n          title: \"Create new list item\",\n          class: \"bio-properties-panel-group-header-button bio-properties-panel-add-entry\",\n          onClick: handleAddClick,\n          children: [jsx(CreateIcon, {}), !hasItems ? jsx(\"span\", {\n            class: \"bio-properties-panel-add-entry-label\",\n            children: \"Create\"\n          }) : null]\n        }) : null, hasItems ? jsx(\"div\", {\n          title: `List contains ${items.length} item${items.length != 1 ? 's' : ''}`,\n          class: classnames('bio-properties-panel-list-badge', hasError ? 'bio-properties-panel-list-badge--error' : ''),\n          children: items.length\n        }) : null, hasItems ? jsx(\"button\", {\n          type: \"button\",\n          title: \"Toggle section\",\n          class: \"bio-properties-panel-group-header-button bio-properties-panel-arrow\",\n          children: jsx(ArrowIcon, {\n            class: open ? 'bio-properties-panel-arrow-down' : 'bio-properties-panel-arrow-right'\n          })\n        }) : null]\n      })]\n    }), jsx(\"div\", {\n      class: classnames('bio-properties-panel-list', open && hasItems ? 'open' : ''),\n      children: jsx(LayoutContext.Provider, {\n        value: propertiesPanelContext,\n        children: ordering.map((o, index) => {\n          const item = getItem(items, o);\n          if (!item) {\n            return;\n          }\n          const {\n            id\n          } = item;\n\n          // if item was added, open it\n          // Existing items will not be affected as autoOpen is only applied on first render\n          const autoOpen = newItemAdded;\n          return createElement(ListItem, {\n            ...item,\n            autoOpen: autoOpen,\n            element: element,\n            index: index,\n            key: id\n          });\n        })\n      })\n    })]\n  });\n}\n\n// helpers ////////////////////\n\n/**\n * Sorts given items alphanumeric by label\n */\nfunction sortItems(items) {\n  return sortBy(items, i => i.label.toLowerCase());\n}\nfunction getItem(items, id) {\n  return find(items, i => i.id === id);\n}\nfunction createOrdering(items) {\n  return items.map(i => i.id);\n}\n\nfunction Checkbox(props) {\n  const {\n    id,\n    label,\n    onChange,\n    disabled,\n    value = false,\n    onFocus,\n    onBlur,\n    tooltip\n  } = props;\n  const [localValue, setLocalValue] = useState(value);\n  const handleChangeCallback = ({\n    target\n  }) => {\n    onChange(target.checked);\n  };\n  const handleChange = e => {\n    handleChangeCallback(e);\n    setLocalValue(e.target.value);\n  };\n  useEffect(() => {\n    if (value === localValue) {\n      return;\n    }\n    setLocalValue(value);\n  }, [value]);\n  const ref = useShowEntryEvent(id);\n  return jsxs(\"div\", {\n    class: \"bio-properties-panel-checkbox\",\n    children: [jsx(\"input\", {\n      ref: ref,\n      id: prefixId$4(id),\n      name: id,\n      onFocus: onFocus,\n      onBlur: onBlur,\n      type: \"checkbox\",\n      class: \"bio-properties-panel-input\",\n      onChange: handleChange,\n      checked: localValue,\n      disabled: disabled\n    }), jsx(\"label\", {\n      for: prefixId$4(id),\n      class: \"bio-properties-panel-label\",\n      children: jsx(TooltipWrapper, {\n        value: tooltip,\n        forId: id,\n        element: props.element,\n        children: label\n      })\n    })]\n  });\n}\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.id\n * @param {String} props.description\n * @param {String} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n * @param {string|import('preact').Component} props.tooltip\n * @param {boolean} [props.disabled]\n */\nfunction CheckboxEntry(props) {\n  const {\n    element,\n    id,\n    description,\n    label,\n    getValue,\n    setValue,\n    disabled,\n    onFocus,\n    onBlur,\n    tooltip\n  } = props;\n  const value = getValue(element);\n  const error = useError(id);\n  return jsxs(\"div\", {\n    class: \"bio-properties-panel-entry bio-properties-panel-checkbox-entry\",\n    \"data-entry-id\": id,\n    children: [jsx(Checkbox, {\n      disabled: disabled,\n      id: id,\n      label: label,\n      onChange: setValue,\n      onFocus: onFocus,\n      onBlur: onBlur,\n      value: value,\n      tooltip: tooltip,\n      element: element\n    }, element), error && jsx(\"div\", {\n      class: \"bio-properties-panel-error\",\n      children: error\n    }), jsx(Description, {\n      forId: id,\n      element: element,\n      value: description\n    })]\n  });\n}\nfunction isEdited$5(node) {\n  return node && !!node.checked;\n}\n\n// helpers /////////////////\n\nfunction prefixId$4(id) {\n  return `bio-properties-panel-${id}`;\n}\n\nconst noop = () => {};\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.id\n * @param {String} props.description\n * @param {Boolean} props.debounce\n * @param {Boolean} props.disabled\n * @param {String} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.tooltipContainer\n * @param {Function} props.validate\n * @param {Function} props.show\n */\nfunction TemplatingEntry(props) {\n  const {\n    element,\n    id,\n    description,\n    debounce,\n    disabled,\n    label,\n    getValue,\n    setValue,\n    tooltipContainer,\n    validate,\n    show = noop\n  } = props;\n  const [validationError, setValidationError] = useState(null);\n  const [localError, setLocalError] = useState(null);\n  let value = getValue(element);\n  useEffect(() => {\n    if (isFunction(validate)) {\n      const newValidationError = validate(value) || null;\n      setValidationError(newValidationError);\n    }\n  }, [value, validate]);\n  const onInput = useStaticCallback(newValue => {\n    let newValidationError = null;\n    if (isFunction(validate)) {\n      newValidationError = validate(newValue) || null;\n    }\n\n    // don't create multiple commandStack entries for the same value\n    if (newValue !== value) {\n      setValue(newValue, newValidationError);\n    }\n    setValidationError(newValidationError);\n  });\n  const onError = useCallback(err => {\n    setLocalError(err);\n  }, []);\n  const temporaryError = useError(id);\n  const error = localError || temporaryError || validationError;\n  return jsxs(\"div\", {\n    class: classnames('bio-properties-panel-entry', error ? 'has-error' : ''),\n    \"data-entry-id\": id,\n    children: [jsx(Templating, {\n      debounce: debounce,\n      disabled: disabled,\n      id: id,\n      label: label,\n      onInput: onInput,\n      onError: onError,\n      show: show,\n      value: value,\n      tooltipContainer: tooltipContainer\n    }, element), error && jsx(\"div\", {\n      class: \"bio-properties-panel-error\",\n      children: error\n    }), jsx(Description, {\n      forId: id,\n      element: element,\n      value: description\n    })]\n  });\n}\nfunction Templating(props) {\n  const {\n    debounce,\n    id,\n    label,\n    onInput,\n    onError,\n    value = '',\n    disabled = false,\n    tooltipContainer\n  } = props;\n  const [localValue, setLocalValue] = useState(value);\n  const editorRef = useShowEntryEvent(id);\n  const containerRef = useRef();\n  const [focus, _setFocus] = useState(undefined);\n  const setFocus = (offset = 0) => {\n    const hasFocus = containerRef.current.contains(document.activeElement);\n\n    // Keep caret position if it is already focused, otherwise focus at the end\n    const position = hasFocus ? document.activeElement.selectionStart : Infinity;\n    _setFocus(position + offset);\n  };\n  const handleInputCallback = useMemo(() => {\n    return debounce(newValue => onInput(newValue.length ? newValue : undefined));\n  }, [onInput, debounce]);\n  const handleInput = newValue => {\n    handleInputCallback(newValue);\n    setLocalValue(newValue);\n  };\n  const handleLint = useStaticCallback(lint => {\n    const errors = lint && lint.length && lint.filter(e => e.severity === 'error') || [];\n    if (!errors.length) {\n      onError(undefined);\n      return;\n    }\n    const error = lint[0];\n    const message = `${error.source}: ${error.message}`;\n    onError(message);\n  });\n  useEffect(() => {\n    if (typeof focus !== 'undefined') {\n      editorRef.current.focus(focus);\n      _setFocus(undefined);\n    }\n  }, [focus]);\n  useEffect(() => {\n    if (value === localValue) {\n      return;\n    }\n    setLocalValue(value ? value : '');\n  }, [value]);\n  return jsxs(\"div\", {\n    class: \"bio-properties-panel-feelers\",\n    children: [jsx(\"label\", {\n      id: prefixIdLabel(id),\n      class: \"bio-properties-panel-label\",\n      onClick: () => setFocus(),\n      children: label\n    }), jsx(\"div\", {\n      class: \"bio-properties-panel-feelers-input\",\n      ref: containerRef,\n      children: jsx(CodeEditor$1, {\n        name: id,\n        onInput: handleInput,\n        contentAttributes: {\n          'aria-labelledby': prefixIdLabel(id)\n        },\n        disabled: disabled,\n        onLint: handleLint,\n        value: localValue,\n        ref: editorRef,\n        tooltipContainer: tooltipContainer\n      })\n    })]\n  });\n}\nfunction isEdited$4(node) {\n  return node && (!!node.value || node.classList.contains('edited'));\n}\n\n// helpers /////////////////\n\nfunction prefixIdLabel(id) {\n  return `bio-properties-panel-feelers-${id}-label`;\n}\n\nfunction List(props) {\n  const {\n    id,\n    element,\n    items = [],\n    component,\n    label = '<empty>',\n    open: shouldOpen,\n    onAdd,\n    onRemove,\n    autoFocusEntry,\n    compareFn,\n    ...restProps\n  } = props;\n  const [open, setOpen] = useState(!!shouldOpen);\n  const hasItems = !!items.length;\n  const toggleOpen = () => hasItems && setOpen(!open);\n  const opening = !usePrevious(open) && open;\n  const elementChanged = usePrevious(element) !== element;\n  const shouldReset = opening || elementChanged;\n  const sortedItems = useSortedItems(items, compareFn, shouldReset);\n  const newItems = useNewItems(items, elementChanged);\n  useEffect(() => {\n    if (open && !hasItems) {\n      setOpen(false);\n    }\n  }, [open, hasItems]);\n\n  /**\n   * @param {MouseEvent} event\n   */\n  function addItem(event) {\n    event.stopPropagation();\n    onAdd();\n    if (!open) {\n      setOpen(true);\n    }\n  }\n  return jsxs(\"div\", {\n    \"data-entry-id\": id,\n    class: classnames('bio-properties-panel-entry', 'bio-properties-panel-list-entry', hasItems ? '' : 'empty', open ? 'open' : ''),\n    children: [jsxs(\"div\", {\n      class: \"bio-properties-panel-list-entry-header\",\n      onClick: toggleOpen,\n      children: [jsx(\"div\", {\n        title: label,\n        class: classnames('bio-properties-panel-list-entry-header-title', open && 'open'),\n        children: label\n      }), jsxs(\"div\", {\n        class: \"bio-properties-panel-list-entry-header-buttons\",\n        children: [jsxs(\"button\", {\n          type: \"button\",\n          title: \"Create new list item\",\n          onClick: addItem,\n          class: \"bio-properties-panel-add-entry\",\n          children: [jsx(CreateIcon, {}), !hasItems ? jsx(\"span\", {\n            class: \"bio-properties-panel-add-entry-label\",\n            children: \"Create\"\n          }) : null]\n        }), hasItems && jsx(\"div\", {\n          title: `List contains ${items.length} item${items.length != 1 ? 's' : ''}`,\n          class: \"bio-properties-panel-list-badge\",\n          children: items.length\n        }), hasItems && jsx(\"button\", {\n          type: \"button\",\n          title: \"Toggle list item\",\n          class: \"bio-properties-panel-arrow\",\n          children: jsx(ArrowIcon, {\n            class: open ? 'bio-properties-panel-arrow-down' : 'bio-properties-panel-arrow-right'\n          })\n        })]\n      })]\n    }), hasItems && jsx(ItemsList, {\n      ...restProps,\n      autoFocusEntry: autoFocusEntry,\n      component: component,\n      element: element,\n      id: id,\n      items: sortedItems,\n      newItems: newItems,\n      onRemove: onRemove,\n      open: open\n    })]\n  });\n}\nfunction ItemsList(props) {\n  const {\n    autoFocusEntry,\n    component: Component,\n    element,\n    id,\n    items,\n    newItems,\n    onRemove,\n    open,\n    ...restProps\n  } = props;\n  const getKey = useKeyFactory();\n  const newItem = newItems[0];\n  useEffect(() => {\n    if (newItem && autoFocusEntry) {\n      // (0) select the parent entry (containing all list items)\n      const entry = query(`[data-entry-id=\"${id}\"]`);\n\n      // (1) select the first input or a custom element to be focussed\n      const selector = typeof autoFocusEntry === 'boolean' ? '.bio-properties-panel-input' : autoFocusEntry;\n      const focusableInput = query(selector, entry);\n\n      // (2) set focus\n      if (focusableInput) {\n        if (isFunction(focusableInput.select)) {\n          focusableInput.select();\n        } else if (isFunction(focusableInput.focus)) {\n          focusableInput.focus();\n        }\n      }\n    }\n  }, [newItem, autoFocusEntry, id]);\n  return jsx(\"ol\", {\n    class: classnames('bio-properties-panel-list-entry-items', open ? 'open' : ''),\n    children: items.map((item, index) => {\n      const key = getKey(item);\n      return jsxs(\"li\", {\n        class: \"bio-properties-panel-list-entry-item\",\n        children: [jsx(Component, {\n          ...restProps,\n          element: element,\n          id: id,\n          index: index,\n          item: item,\n          open: item === newItem\n        }), onRemove && jsx(\"button\", {\n          type: \"button\",\n          title: \"Delete item\",\n          class: \"bio-properties-panel-remove-entry bio-properties-panel-remove-list-entry\",\n          onClick: () => onRemove && onRemove(item),\n          children: jsx(DeleteIcon, {})\n        })]\n      }, key);\n    })\n  });\n}\n\n/**\n * Place new items in the beginning of the list and sort the rest with provided function.\n *\n * @template Item\n * @param {Item[]} currentItems\n * @param {(a: Item, b: Item) => 0 | 1 | -1} [compareFn] function used to sort items\n * @param {boolean} [shouldReset=false] set to `true` to reset state of the hook\n * @returns {Item[]}\n */\nfunction useSortedItems(currentItems, compareFn, shouldReset = false) {\n  const itemsRef = useRef(currentItems.slice());\n\n  // (1) Reset and optionally sort.\n  if (shouldReset) {\n    itemsRef.current = currentItems.slice();\n    if (compareFn) {\n      itemsRef.current.sort(compareFn);\n    }\n  } else {\n    const items = itemsRef.current;\n\n    // (2) Add new item to the list.\n    for (const item of currentItems) {\n      if (!items.includes(item)) {\n        // Unshift or push depending on whether we have a compareFn\n        compareFn ? items.unshift(item) : items.push(item);\n      }\n    }\n\n    // (3) Filter out removed items.\n    itemsRef.current = items.filter(item => currentItems.includes(item));\n  }\n  return itemsRef.current;\n}\nfunction useNewItems(items = [], shouldReset) {\n  const previousItems = usePrevious(items.slice()) || [];\n  if (shouldReset) {\n    return [];\n  }\n  return previousItems ? items.filter(item => !previousItems.includes(item)) : [];\n}\n\nfunction Select(props) {\n  const {\n    id,\n    label,\n    onChange,\n    options = [],\n    value = '',\n    disabled,\n    onFocus,\n    onBlur,\n    tooltip\n  } = props;\n  const ref = useShowEntryEvent(id);\n  const [localValue, setLocalValue] = useState(value);\n  const handleChangeCallback = ({\n    target\n  }) => {\n    onChange(target.value);\n  };\n  const handleChange = e => {\n    handleChangeCallback(e);\n    setLocalValue(e.target.value);\n  };\n  useEffect(() => {\n    if (value === localValue) {\n      return;\n    }\n    setLocalValue(value);\n  }, [value]);\n  return jsxs(\"div\", {\n    class: \"bio-properties-panel-select\",\n    children: [jsx(\"label\", {\n      for: prefixId$3(id),\n      class: \"bio-properties-panel-label\",\n      children: jsx(TooltipWrapper, {\n        value: tooltip,\n        forId: id,\n        element: props.element,\n        children: label\n      })\n    }), jsx(\"select\", {\n      ref: ref,\n      id: prefixId$3(id),\n      name: id,\n      class: \"bio-properties-panel-input\",\n      onInput: handleChange,\n      onFocus: onFocus,\n      onBlur: onBlur,\n      value: localValue,\n      disabled: disabled,\n      children: options.map((option, idx) => {\n        if (option.children) {\n          return jsx(\"optgroup\", {\n            label: option.label,\n            children: option.children.map((child, idx) => jsx(\"option\", {\n              value: child.value,\n              disabled: child.disabled,\n              children: child.label\n            }, idx))\n          }, idx);\n        }\n        return jsx(\"option\", {\n          value: option.value,\n          disabled: option.disabled,\n          children: option.label\n        }, idx);\n      })\n    })]\n  });\n}\n\n/**\n * @param {object} props\n * @param {object} props.element\n * @param {string} props.id\n * @param {string} [props.description]\n * @param {string} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n * @param {Function} props.getOptions\n * @param {boolean} [props.disabled]\n * @param {Function} [props.validate]\n * @param {string|import('preact').Component} props.tooltip\n */\nfunction SelectEntry(props) {\n  const {\n    element,\n    id,\n    description,\n    label,\n    getValue,\n    setValue,\n    getOptions,\n    disabled,\n    onFocus,\n    onBlur,\n    validate,\n    tooltip\n  } = props;\n  const options = getOptions(element);\n  const globalError = useError(id);\n  const [localError, setLocalError] = useState(null);\n  let value = getValue(element);\n  useEffect(() => {\n    if (isFunction(validate)) {\n      const newValidationError = validate(value) || null;\n      setLocalError(newValidationError);\n    }\n  }, [value, validate]);\n  const onChange = newValue => {\n    let newValidationError = null;\n    if (isFunction(validate)) {\n      newValidationError = validate(newValue) || null;\n    }\n    setValue(newValue, newValidationError);\n    setLocalError(newValidationError);\n  };\n  const error = globalError || localError;\n  return jsxs(\"div\", {\n    class: classnames('bio-properties-panel-entry', error ? 'has-error' : ''),\n    \"data-entry-id\": id,\n    children: [jsx(Select, {\n      id: id,\n      label: label,\n      value: value,\n      onChange: onChange,\n      onFocus: onFocus,\n      onBlur: onBlur,\n      options: options,\n      disabled: disabled,\n      tooltip: tooltip,\n      element: element\n    }, element), error && jsx(\"div\", {\n      class: \"bio-properties-panel-error\",\n      children: error\n    }), jsx(Description, {\n      forId: id,\n      element: element,\n      value: description\n    })]\n  });\n}\nfunction isEdited$3(node) {\n  return node && !!node.value;\n}\n\n// helpers /////////////////\n\nfunction prefixId$3(id) {\n  return `bio-properties-panel-${id}`;\n}\n\nfunction Simple(props) {\n  const {\n    debounce,\n    disabled,\n    element,\n    getValue,\n    id,\n    onBlur,\n    onFocus,\n    setValue\n  } = props;\n  const value = getValue(element);\n  const [localValue, setLocalValue] = useState(value);\n  const handleInputCallback = useMemo(() => {\n    return debounce(target => setValue(target.value.length ? target.value : undefined));\n  }, [setValue, debounce]);\n  const handleInput = e => {\n    handleInputCallback(e.target);\n    setLocalValue(e.target.value);\n  };\n  useEffect(() => {\n    if (value === localValue) {\n      return;\n    }\n    setLocalValue(value);\n  }, [value]);\n  return jsx(\"div\", {\n    class: \"bio-properties-panel-simple\",\n    children: jsx(\"input\", {\n      id: prefixId$2(id),\n      type: \"text\",\n      name: id,\n      spellCheck: \"false\",\n      autoComplete: \"off\",\n      disabled: disabled,\n      class: \"bio-properties-panel-input\",\n      onInput: handleInput,\n      \"aria-label\": localValue || '<empty>',\n      onFocus: onFocus,\n      onBlur: onBlur,\n      value: localValue\n    }, element)\n  });\n}\nfunction isEdited$2(node) {\n  return node && !!node.value;\n}\n\n// helpers /////////////////\n\nfunction prefixId$2(id) {\n  return `bio-properties-panel-${id}`;\n}\n\nfunction resizeToContents(element) {\n  element.style.height = 'auto';\n\n  // a 2px pixel offset is required to prevent scrollbar from\n  // appearing on OS with a full length scroll bar (Windows/Linux)\n  element.style.height = `${element.scrollHeight + 2}px`;\n}\nfunction TextArea(props) {\n  const {\n    id,\n    label,\n    debounce,\n    onInput,\n    value = '',\n    disabled,\n    monospace,\n    onFocus,\n    onBlur,\n    autoResize,\n    rows = autoResize ? 1 : 2,\n    tooltip\n  } = props;\n  const [localValue, setLocalValue] = useState(value);\n  const ref = useShowEntryEvent(id);\n  const handleInputCallback = useMemo(() => {\n    return debounce(target => onInput(target.value.length ? target.value : undefined));\n  }, [onInput, debounce]);\n  const handleInput = e => {\n    handleInputCallback(e.target);\n    autoResize && resizeToContents(e.target);\n    setLocalValue(e.target.value);\n  };\n  useLayoutEffect(() => {\n    autoResize && resizeToContents(ref.current);\n  }, []);\n  useEffect(() => {\n    if (value === localValue) {\n      return;\n    }\n    setLocalValue(value);\n  }, [value]);\n  return jsxs(\"div\", {\n    class: \"bio-properties-panel-textarea\",\n    children: [jsx(\"label\", {\n      for: prefixId$1(id),\n      class: \"bio-properties-panel-label\",\n      children: jsx(TooltipWrapper, {\n        value: tooltip,\n        forId: id,\n        element: props.element,\n        children: label\n      })\n    }), jsx(\"textarea\", {\n      ref: ref,\n      id: prefixId$1(id),\n      name: id,\n      spellCheck: \"false\",\n      class: classnames('bio-properties-panel-input', monospace ? 'bio-properties-panel-input-monospace' : '', autoResize ? 'auto-resize' : ''),\n      onInput: handleInput,\n      onFocus: onFocus,\n      onBlur: onBlur,\n      rows: rows,\n      value: localValue,\n      disabled: disabled,\n      \"data-gramm\": \"false\"\n    })]\n  });\n}\n\n/**\n * @param {object} props\n * @param {object} props.element\n * @param {string} props.id\n * @param {string} props.description\n * @param {boolean} props.debounce\n * @param {string} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n * @param {number} props.rows\n * @param {boolean} props.monospace\n * @param {Function} [props.validate]\n * @param {boolean} [props.disabled]\n */\nfunction TextAreaEntry(props) {\n  const {\n    element,\n    id,\n    description,\n    debounce,\n    label,\n    getValue,\n    setValue,\n    rows,\n    monospace,\n    disabled,\n    validate,\n    onFocus,\n    onBlur,\n    autoResize,\n    tooltip\n  } = props;\n  const globalError = useError(id);\n  const [localError, setLocalError] = useState(null);\n  let value = getValue(element);\n  useEffect(() => {\n    if (isFunction(validate)) {\n      const newValidationError = validate(value) || null;\n      setLocalError(newValidationError);\n    }\n  }, [value, validate]);\n  const onInput = newValue => {\n    let newValidationError = null;\n    if (isFunction(validate)) {\n      newValidationError = validate(newValue) || null;\n    }\n    setValue(newValue, newValidationError);\n    setLocalError(newValidationError);\n  };\n  const error = globalError || localError;\n  return jsxs(\"div\", {\n    class: classnames('bio-properties-panel-entry', error ? 'has-error' : ''),\n    \"data-entry-id\": id,\n    children: [jsx(TextArea, {\n      id: id,\n      label: label,\n      value: value,\n      onInput: onInput,\n      onFocus: onFocus,\n      onBlur: onBlur,\n      rows: rows,\n      debounce: debounce,\n      monospace: monospace,\n      disabled: disabled,\n      autoResize: autoResize,\n      tooltip: tooltip,\n      element: element\n    }, element), error && jsx(\"div\", {\n      class: \"bio-properties-panel-error\",\n      children: error\n    }), jsx(Description, {\n      forId: id,\n      element: element,\n      value: description\n    })]\n  });\n}\nfunction isEdited$1(node) {\n  return node && !!node.value;\n}\n\n// helpers /////////////////\n\nfunction prefixId$1(id) {\n  return `bio-properties-panel-${id}`;\n}\n\nfunction Textfield(props) {\n  const {\n    debounce,\n    disabled = false,\n    id,\n    label,\n    onInput,\n    onFocus,\n    onBlur,\n    value = '',\n    tooltip\n  } = props;\n  const [localValue, setLocalValue] = useState(value || '');\n  const ref = useShowEntryEvent(id);\n  const handleInputCallback = useMemo(() => {\n    return debounce(target => onInput(target.value.length ? target.value : undefined));\n  }, [onInput, debounce]);\n  const handleInput = e => {\n    handleInputCallback(e.target);\n    setLocalValue(e.target.value);\n  };\n  useEffect(() => {\n    if (value === localValue) {\n      return;\n    }\n    setLocalValue(value);\n  }, [value]);\n  return jsxs(\"div\", {\n    class: \"bio-properties-panel-textfield\",\n    children: [jsx(\"label\", {\n      for: prefixId(id),\n      class: \"bio-properties-panel-label\",\n      children: jsx(TooltipWrapper, {\n        value: tooltip,\n        forId: id,\n        element: props.element,\n        children: label\n      })\n    }), jsx(\"input\", {\n      ref: ref,\n      id: prefixId(id),\n      type: \"text\",\n      name: id,\n      spellCheck: \"false\",\n      autoComplete: \"off\",\n      disabled: disabled,\n      class: \"bio-properties-panel-input\",\n      onInput: handleInput,\n      onFocus: onFocus,\n      onBlur: onBlur,\n      value: localValue\n    })]\n  });\n}\n\n/**\n * @param {Object} props\n * @param {Object} props.element\n * @param {String} props.id\n * @param {String} props.description\n * @param {Boolean} props.debounce\n * @param {Boolean} props.disabled\n * @param {String} props.label\n * @param {Function} props.getValue\n * @param {Function} props.setValue\n * @param {Function} props.onFocus\n * @param {Function} props.onBlur\n * @param {string|import('preact').Component} props.tooltip\n * @param {Function} props.validate\n */\nfunction TextfieldEntry(props) {\n  const {\n    element,\n    id,\n    description,\n    debounce,\n    disabled,\n    label,\n    getValue,\n    setValue,\n    validate,\n    onFocus,\n    onBlur,\n    tooltip\n  } = props;\n  const globalError = useError(id);\n  const [localError, setLocalError] = useState(null);\n  let value = getValue(element);\n  useEffect(() => {\n    if (isFunction(validate)) {\n      const newValidationError = validate(value) || null;\n      setLocalError(newValidationError);\n    }\n  }, [value, validate]);\n  const onInput = newValue => {\n    let newValidationError = null;\n    if (isFunction(validate)) {\n      newValidationError = validate(newValue) || null;\n    }\n    setValue(newValue, newValidationError);\n    setLocalError(newValidationError);\n  };\n  const error = globalError || localError;\n  return jsxs(\"div\", {\n    class: classnames('bio-properties-panel-entry', error ? 'has-error' : ''),\n    \"data-entry-id\": id,\n    children: [jsx(Textfield, {\n      debounce: debounce,\n      disabled: disabled,\n      id: id,\n      label: label,\n      onInput: onInput,\n      onFocus: onFocus,\n      onBlur: onBlur,\n      value: value,\n      tooltip: tooltip,\n      element: element\n    }, element), error && jsx(\"div\", {\n      class: \"bio-properties-panel-error\",\n      children: error\n    }), jsx(Description, {\n      forId: id,\n      element: element,\n      value: description\n    })]\n  });\n}\nfunction isEdited(node) {\n  return node && !!node.value;\n}\n\n// helpers /////////////////\n\nfunction prefixId(id) {\n  return `bio-properties-panel-${id}`;\n}\n\nconst DEFAULT_DEBOUNCE_TIME = 300;\nfunction debounceInput(debounceDelay) {\n  return function _debounceInput(fn) {\n    if (debounceDelay !== false) {\n      var debounceTime = isNumber(debounceDelay) ? debounceDelay : DEFAULT_DEBOUNCE_TIME;\n      return debounce(fn, debounceTime);\n    } else {\n      return fn;\n    }\n  };\n}\ndebounceInput.$inject = ['config.debounceInput'];\n\nvar index$1 = {\n  debounceInput: ['factory', debounceInput]\n};\n\nclass FeelPopupModule {\n  constructor(eventBus) {\n    this._eventBus = eventBus;\n  }\n\n  /**\n   * Check if the FEEL popup is open.\n   * @return {Boolean}\n   */\n  isOpen() {\n    return this._eventBus.fire('feelPopup._isOpen');\n  }\n\n  /**\n   * Open the FEEL popup.\n   *\n   * @param {String} entryId\n   * @param {Object} popupConfig\n   * @param {HTMLElement} sourceElement\n   */\n  open(entryId, popupConfig, sourceElement) {\n    return this._eventBus.fire('feelPopup._open', {\n      entryId,\n      popupConfig,\n      sourceElement\n    });\n  }\n\n  /**\n   * Close the FEEL popup.\n   */\n  close() {\n    return this._eventBus.fire('feelPopup._close');\n  }\n}\nFeelPopupModule.$inject = ['eventBus'];\n\nvar index = {\n  feelPopup: ['type', FeelPopupModule]\n};\n\nexport { ArrowIcon, CheckboxEntry, CollapsibleEntry, CreateIcon, index$1 as DebounceInputModule, DeleteIcon, DescriptionContext, Description as DescriptionEntry, DragIcon, DropdownButton, ErrorsContext, EventContext, ExternalLinkIcon, FeelCheckboxEntry, FeelEntry, FeelIcon$1 as FeelIcon, FeelNumberEntry, index as FeelPopupModule, FeelTemplatingEntry, FeelTextAreaEntry, FeelToggleSwitchEntry, Group, Header, HeaderButton, HelpIcon, LayoutContext, List as ListEntry, ListGroup, ListItem, NumberFieldEntry, Placeholder, Popup, PopupIcon, PropertiesPanel, LayoutContext as PropertiesPanelContext, SelectEntry, Simple as SimpleEntry, TemplatingEntry, TextAreaEntry, TextfieldEntry as TextFieldEntry, ToggleSwitchEntry, TooltipContext, TooltipWrapper as TooltipEntry, isEdited$5 as isCheckboxEntryEdited, isEdited$6 as isFeelEntryEdited, isEdited$7 as isNumberFieldEntryEdited, isEdited$3 as isSelectEntryEdited, isEdited$2 as isSimpleEntryEdited, isEdited$4 as isTemplatingEntryEdited, isEdited$1 as isTextAreaEntryEdited, isEdited as isTextFieldEntryEdited, isEdited$8 as isToggleSwitchEntryEdited, useDescriptionContext, useError, useErrors, useEvent, useKeyFactory, useLayoutState, usePrevious, useShowEntryEvent, useStaticCallback, useStickyIntersectionObserver, useTooltipContext };\n//# sourceMappingURL=index.esm.js.map\n","import { createContext } from 'preact';\r\n\r\n/**\r\n * @param {string} type\r\n * @param {boolean} [strict]\r\n *\r\n * @returns {any}\r\n */\r\nfunction getService(type, strict) {}\r\n\r\nexport const FormPropertiesPanelContext = createContext({\r\n  getService\r\n});\r\n","import Big from 'big.js';\r\n\r\nexport function arrayAdd(array, index, item) {\r\n  const copy = [ ...array ];\r\n\r\n  copy.splice(index, 0, item);\r\n\r\n  return copy;\r\n}\r\n\r\nexport function arrayRemove(array, index) {\r\n  const copy = [ ...array ];\r\n\r\n  copy.splice(index, 1);\r\n\r\n  return copy;\r\n}\r\n\r\nexport function prefixId(id) {\r\n  return `fjs-properties-panel-${ id }`;\r\n}\r\n\r\n\r\nexport function countDecimals(number) {\r\n  const num = Big(number);\r\n  if (num.toString() === num.toFixed(0)) return 0;\r\n  return num.toFixed().split('.')[1].length || 0;\r\n}\r\n\r\n/**\r\n *\r\n * @param {unknown} value\r\n * @returns {boolean}\r\n */\r\nexport function isValidNumber(value) {\r\n  return (typeof value === 'number' || typeof value === 'string') && value !== '' && !isNaN(Number(value));\r\n}\r\n\r\nexport function stopPropagation(listener) {\r\n  return (event) => {\r\n    event.stopPropagation();\r\n\r\n    listener(event);\r\n  };\r\n}\r\n\r\nexport function textToLabel(text) {\r\n\r\n  if (typeof text != 'string') return null;\r\n\r\n  for (const line of text.split('\\n')) {\r\n\r\n    const displayLine = line.trim();\r\n\r\n    // we use the first non-whitespace line in the text as label\r\n    if (displayLine !== '') {\r\n      return displayLine;\r\n    }\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\n/**\r\n  * @param {string} path\r\n  */\r\nexport function isValidDotPath(path) {\r\n  return /^\\w+(\\.\\w+)*$/.test(path);\r\n}\r\n\r\n/**\r\n  * @param {string} path\r\n  */\r\nexport function isProhibitedPath(path) {\r\n  const prohibitedSegments = [\r\n    '__proto__',\r\n    'prototype',\r\n    'constructor'\r\n  ];\r\n\r\n  return path.split('.').some(segment => prohibitedSegments.includes(segment));\r\n}\r\n\r\nexport const LABELED_NON_INPUTS = [\r\n  'button',\r\n  'group',\r\n  'dynamiclist',\r\n  'iframe',\r\n  'table'\r\n];\r\n\r\nexport const INPUTS = [\r\n  'checkbox',\r\n  'checklist',\r\n  'datetime',\r\n  'number',\r\n  'radio',\r\n  'select',\r\n  'taglist',\r\n  'textfield',\r\n  'textarea'\r\n];\r\n\r\nexport const OPTIONS_INPUTS = [\r\n  'checklist',\r\n  'radio',\r\n  'select',\r\n  'taglist'\r\n];\r\n\r\nexport function hasEntryConfigured(formFieldDefinition, entryId) {\r\n  const { propertiesPanelEntries = [] } = formFieldDefinition;\r\n\r\n  if (!propertiesPanelEntries.length) {\r\n    return false;\r\n  }\r\n\r\n  return propertiesPanelEntries.some(id => id === entryId);\r\n}\r\n\r\nexport function hasOptionsGroupsConfigured(formFieldDefinition) {\r\n  const { propertiesPanelEntries = [] } = formFieldDefinition;\r\n\r\n  if (!propertiesPanelEntries.length) {\r\n    return false;\r\n  }\r\n\r\n  return propertiesPanelEntries.some(id => id === 'values');\r\n}\r\n\r\n/**\r\n  * @param {string} path\r\n  */\r\nexport function hasIntegerPathSegment(path) {\r\n  return path.split('.').some(segment => /^\\d+$/.test(segment));\r\n}","import {\r\n  useContext\r\n} from 'preact/hooks';\r\n\r\nimport { FormPropertiesPanelContext } from '../context';\r\n\r\n\r\nexport function useService(type, strict) {\r\n  const {\r\n    getService\r\n  } = useContext(FormPropertiesPanelContext);\r\n\r\n  return getService(type, strict);\r\n}","import { getSchemaVariables } from '@bpmn-io/form-js-viewer';\r\nimport { useService } from './usePropertiesPanelService';\r\n\r\n/**\r\n * Retrieve list of variables from the form schema.\r\n *\r\n * @returns { string[] } list of variables used in form schema\r\n */\r\nexport function useVariables() {\r\n  const form = useService('formEditor');\r\n  const schema = form.getSchema();\r\n\r\n  return getSchemaVariables(schema);\r\n}\r\n","import {\r\n  textToLabel\r\n} from './Util';\r\n\r\nimport { iconsByType } from '../../render/components/icons';\r\n\r\nimport { getPaletteIcon } from '../palette/components/Palette';\r\n\r\nimport { useService } from './hooks';\r\n\r\nconst headerlessTypes = [\r\n  'spacer',\r\n  'separator',\r\n  'expression',\r\n  'html'\r\n];\r\n\r\nexport const PropertiesPanelHeaderProvider = {\r\n\r\n  getElementLabel: (field) => {\r\n    const {\r\n      type\r\n    } = field;\r\n\r\n    if (headerlessTypes.includes(type)) {\r\n      return '';\r\n    }\r\n\r\n    if (type === 'text') {\r\n      return textToLabel(field.text);\r\n    }\r\n\r\n    if (type === 'image') {\r\n      return field.alt;\r\n    }\r\n\r\n    if (type === 'default') {\r\n      return field.id;\r\n    }\r\n\r\n    return field.label;\r\n  },\r\n\r\n  getElementIcon: (field) => {\r\n    const {\r\n      type\r\n    } = field;\r\n\r\n    // @Note: We know that we are inside the properties panel context,\r\n    // so we can savely use the hook here.\r\n    // eslint-disable-next-line react-hooks/rules-of-hooks\r\n    const fieldDefinition = useService('formFields').get(type).config;\r\n\r\n    const Icon = fieldDefinition.icon || iconsByType(type);\r\n\r\n    if (Icon) {\r\n      return () => <Icon width=\"36\" height=\"36\" viewBox=\"0 0 54 54\" />;\r\n    } else if (fieldDefinition.iconUrl) {\r\n      return getPaletteIcon({ iconUrl: fieldDefinition.iconUrl, label: fieldDefinition.label });\r\n    }\r\n  },\r\n\r\n  getTypeLabel: (field) => {\r\n    const {\r\n      type\r\n    } = field;\r\n\r\n    if (type === 'default') {\r\n      return 'Formulář';\r\n    }\r\n\r\n    // @Note: We know that we are inside the properties panel context,\r\n    // so we can savely use the hook here.\r\n    // eslint-disable-next-line react-hooks/rules-of-hooks\r\n    const fieldDefinition = useService('formFields').get(type).config;\r\n\r\n    return fieldDefinition.label || type;\r\n  }\r\n};","/**\r\n * Provide placeholders for empty and multiple state.\r\n */\r\nexport const PropertiesPanelPlaceholderProvider = {\r\n\r\n  getEmpty: () => {\r\n    return {\r\n      text: 'Select a form field to edit its properties.'\r\n    };\r\n  },\r\n\r\n  getMultiple: () => {\r\n    return {\r\n      text: 'Multiple form fields are selected. Select a single form field to edit its properties.'\r\n    };\r\n  }\r\n};","import { PropertiesPanel as BasePropertiesPanel } from '@bpmn-io/properties-panel';\r\n\r\nimport {\r\n  useCallback,\r\n  useMemo,\r\n  useState,\r\n  useLayoutEffect\r\n} from 'preact/hooks';\r\n\r\nimport { reduce, isArray } from 'min-dash';\r\n\r\nimport { FormPropertiesPanelContext } from './context';\r\n\r\nimport { PropertiesPanelHeaderProvider } from './PropertiesPanelHeaderProvider';\r\nimport { PropertiesPanelPlaceholderProvider } from './PropertiesPanelPlaceholderProvider';\r\n\r\nexport function PropertiesPanel(props) {\r\n  const {\r\n    eventBus,\r\n    getProviders,\r\n    injector\r\n  } = props;\r\n\r\n  const formEditor = injector.get('formEditor');\r\n  const modeling = injector.get('modeling');\r\n  const selectionModule = injector.get('selection');\r\n  const propertiesPanelConfig = injector.get('config.propertiesPanel') || {};\r\n\r\n  const {\r\n    feelPopupContainer\r\n  } = propertiesPanelConfig;\r\n\r\n  const [ state , setState ] = useState({ selectedFormField: selectionModule.get() || formEditor._getState().schema });\r\n\r\n  const selectedFormField = state.selectedFormField;\r\n\r\n  const refresh = useCallback((field) => {\r\n\r\n    // TODO(skaiir): rework state management, re-rendering the whole properties panel is not the way to go\r\n    // https://github.com/bpmn-io/form-js/issues/686\r\n    setState({ selectedFormField: selectionModule.get() || formEditor._getState().schema });\r\n\r\n    // notify interested parties on property panel updates\r\n    eventBus.fire('propertiesPanel.updated', {\r\n      formField: field\r\n    });\r\n\r\n  }, [ eventBus, formEditor, selectionModule ]);\r\n\r\n\r\n  useLayoutEffect(() => {\r\n\r\n    /**\r\n     * TODO(pinussilvestrus): update with actual updated element,\r\n     * once we have a proper updater/change support\r\n     */\r\n    eventBus.on('changed', refresh);\r\n    eventBus.on('import.done', refresh);\r\n    eventBus.on('selection.changed', refresh);\r\n\r\n    return () => {\r\n      eventBus.off('changed', refresh);\r\n      eventBus.off('import.done', refresh);\r\n      eventBus.off('selection.changed', refresh);\r\n    };\r\n  }, [ eventBus, refresh ]);\r\n\r\n  const getService = (type, strict = true) => injector.get(type, strict);\r\n\r\n  const propertiesPanelContext = { getService };\r\n\r\n  const onFocus = () => eventBus.fire('propertiesPanel.focusin');\r\n\r\n  const onBlur = () => eventBus.fire('propertiesPanel.focusout');\r\n\r\n  const editField = useCallback((formField, key, value) => modeling.editFormField(formField, key, value), [ modeling ]);\r\n\r\n  // retrieve groups for selected form field\r\n  const providers = getProviders(selectedFormField);\r\n\r\n  const groups = useMemo(() => {\r\n    return reduce(providers, function(groups, provider) {\r\n\r\n      // do not collect groups for multi element state\r\n      if (isArray(selectedFormField)) {\r\n        return [];\r\n      }\r\n\r\n      const updater = provider.getGroups(selectedFormField, editField);\r\n\r\n      return updater(groups);\r\n    }, []);\r\n  }, [ providers, selectedFormField, editField ]);\r\n\r\n  return (\r\n    <div\r\n      class=\"fjs-properties-panel\"\r\n      data-field={ selectedFormField && selectedFormField.id }\r\n      onFocusCapture={ onFocus }\r\n      onBlurCapture={ onBlur }\r\n    >\r\n      <FormPropertiesPanelContext.Provider value={ propertiesPanelContext }>\r\n        <BasePropertiesPanel\r\n          element={ selectedFormField }\r\n          eventBus={ eventBus }\r\n          groups={ groups }\r\n          headerProvider={ PropertiesPanelHeaderProvider }\r\n          placeholderProvider={ PropertiesPanelPlaceholderProvider }\r\n          feelPopupContainer={ feelPopupContainer }\r\n        />\r\n      </FormPropertiesPanelContext.Provider>\r\n    </div>\r\n  );\r\n}","import { PropertiesPanel } from './PropertiesPanel';\r\n\r\nimport {\r\n  render\r\n} from 'preact';\r\n\r\nimport {\r\n  domify,\r\n  query as domQuery\r\n} from 'min-dom';\r\n\r\nconst DEFAULT_PRIORITY = 1000;\r\n\r\n/**\r\n * @typedef { { parent: Element } } PropertiesPanelConfig\r\n * @typedef { import('../../core/EventBus').EventBus } EventBus\r\n * @typedef { import('../../types').Injector } Injector\r\n * @typedef { { getGroups: ({ formField, editFormField }) => ({ groups}) => Array } } PropertiesProvider\r\n */\r\n\r\n/**\r\n * @param {PropertiesPanelConfig} propertiesPanelConfig\r\n * @param {Injector} injector\r\n * @param {EventBus} eventBus\r\n */\r\nexport class PropertiesPanelRenderer {\r\n\r\n  constructor(propertiesPanelConfig, injector, eventBus) {\r\n    const {\r\n      parent\r\n    } = propertiesPanelConfig || {};\r\n\r\n    this._eventBus = eventBus;\r\n    this._injector = injector;\r\n\r\n    this._container = domify('<div class=\"fjs-properties-container\" input-handle-modified-keys=\"y,z\"></div>');\r\n\r\n    if (parent) {\r\n      this.attachTo(parent);\r\n    }\r\n\r\n    this._eventBus.once('formEditor.rendered', 500, () => {\r\n      this._render();\r\n    });\r\n  }\r\n\r\n\r\n  /**\r\n   * Attach the properties panel to a parent node.\r\n   *\r\n   * @param {HTMLElement} container\r\n   */\r\n  attachTo(container) {\r\n    if (!container) {\r\n      throw new Error('container required');\r\n    }\r\n\r\n    if (typeof container === 'string') {\r\n      container = domQuery(container);\r\n    }\r\n\r\n    // (1) detach from old parent\r\n    this.detach();\r\n\r\n    // (2) append to parent container\r\n    container.appendChild(this._container);\r\n\r\n    // (3) notify interested parties\r\n    this._eventBus.fire('propertiesPanel.attach');\r\n  }\r\n\r\n  /**\r\n   * Detach the properties panel from its parent node.\r\n   */\r\n  detach() {\r\n    const parentNode = this._container.parentNode;\r\n\r\n    if (parentNode) {\r\n      parentNode.removeChild(this._container);\r\n\r\n      this._eventBus.fire('propertiesPanel.detach');\r\n    }\r\n  }\r\n\r\n  _render() {\r\n    render(\r\n      <PropertiesPanel\r\n        getProviders={ this._getProviders.bind(this) }\r\n        eventBus={ this._eventBus }\r\n        injector={ this._injector }\r\n      />,\r\n      this._container\r\n    );\r\n\r\n    this._eventBus.fire('propertiesPanel.rendered');\r\n  }\r\n\r\n  _destroy() {\r\n    if (this._container) {\r\n      render(null, this._container);\r\n\r\n      this._eventBus.fire('propertiesPanel.destroyed');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Register a new properties provider to the properties panel.\r\n   *\r\n   * @param {PropertiesProvider} provider\r\n   * @param {Number} [priority]\r\n   */\r\n  registerProvider(provider, priority) {\r\n\r\n    if (!priority) {\r\n      priority = DEFAULT_PRIORITY;\r\n    }\r\n\r\n    if (typeof provider.getGroups !== 'function') {\r\n      console.error(\r\n        'Properties provider does not implement #getGroups(element) API'\r\n      );\r\n\r\n      return;\r\n    }\r\n\r\n    this._eventBus.on('propertiesPanel.getProviders', priority, function(event) {\r\n      event.providers.push(provider);\r\n    });\r\n\r\n    this._eventBus.fire('propertiesPanel.providersChanged');\r\n  }\r\n\r\n  _getProviders() {\r\n    const event = this._eventBus.createEvent({\r\n      type: 'propertiesPanel.getProviders',\r\n      providers: []\r\n    });\r\n\r\n    this._eventBus.fire(event);\r\n\r\n    return event.providers;\r\n  }\r\n}\r\n\r\nPropertiesPanelRenderer.$inject = [ 'config.propertiesPanel', 'injector', 'eventBus' ];","import { get } from 'min-dash';\r\n\r\nimport { SelectEntry, isSelectEntryEdited } from '@bpmn-io/properties-panel';\r\n\r\n\r\nexport function ActionEntry(props) {\r\n  const {\r\n    editField,\r\n    field\r\n  } = props;\r\n\r\n  const entries = [];\r\n\r\n  entries.push({\r\n    id: 'action',\r\n    component: Action,\r\n    editField: editField,\r\n    field: field,\r\n    isEdited: isSelectEntryEdited,\r\n    isDefaultVisible: (field) => field.type === 'button'\r\n  });\r\n\r\n  return entries;\r\n}\r\n\r\nfunction Action(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n\r\n  const path = [ 'action' ];\r\n\r\n  const getValue = () => {\r\n    return get(field, path, '');\r\n  };\r\n\r\n  const setValue = (value) => {\r\n    return editField(field, path, value);\r\n  };\r\n\r\n  const getOptions = () => [\r\n    {\r\n      label: 'Odeslat',\r\n      value: 'submit'\r\n    },\r\n    {\r\n      label: 'Resetovat',\r\n      value: 'reset'\r\n    }\r\n  ];\r\n\r\n  return SelectEntry({\r\n    element: field,\r\n    getOptions,\r\n    getValue,\r\n    id,\r\n    label: 'Akce',\r\n    setValue\r\n  });\r\n}","import { get } from 'min-dash';\r\n\r\nimport { useService, useVariables } from '../hooks';\r\n\r\nimport { FeelTemplatingEntry, isFeelEntryEdited } from '@bpmn-io/properties-panel';\r\n\r\nexport function AltTextEntry(props) {\r\n  const {\r\n    editField,\r\n    field\r\n  } = props;\r\n\r\n  const entries = [];\r\n\r\n  entries.push({\r\n    id: 'alt',\r\n    component: AltText,\r\n    editField: editField,\r\n    field: field,\r\n    isEdited: isFeelEntryEdited,\r\n    isDefaultVisible: (field) => [ 'image' ].includes(field.type)\r\n  });\r\n\r\n  return entries;\r\n}\r\n\r\nfunction AltText(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  const variables = useVariables().map(name => ({ name }));\r\n\r\n  const path = [ 'alt' ];\r\n\r\n  const getValue = () => {\r\n    return get(field, path, '');\r\n  };\r\n\r\n  const setValue = (value) => {\r\n    return editField(field, path, value);\r\n  };\r\n\r\n  return FeelTemplatingEntry({\r\n    debounce,\r\n    element: field,\r\n    feel: 'optional',\r\n    getValue,\r\n    id,\r\n    label: 'Zástupný text',\r\n    tooltip: 'Popisný text pro přístupnost pomocí čtečky obrazovky.',\r\n    setValue,\r\n    singleLine: true,\r\n    variables\r\n  });\r\n}\r\n","import { get, set } from 'min-dash';\r\n\r\nimport { useService } from '../hooks';\r\n\r\nimport {\r\n  isSelectEntryEdited,\r\n  SelectEntry\r\n} from '@bpmn-io/properties-panel';\r\n\r\nimport { MIN_COLUMNS } from '../../../core/FormLayoutValidator';\r\nimport { useCallback } from 'preact/hooks';\r\n\r\n\r\nexport const AUTO_OPTION_VALUE = '';\r\n\r\nexport function ColumnsEntry(props) {\r\n  const {\r\n    editField,\r\n    field\r\n  } = props;\r\n\r\n  const entries = [\r\n    {\r\n      id: 'columns',\r\n      component: Columns,\r\n      field,\r\n      editField,\r\n      isEdited: isSelectEntryEdited\r\n    },\r\n  ];\r\n\r\n  return entries;\r\n}\r\n\r\nfunction Columns(props) {\r\n  const {\r\n    field,\r\n    editField,\r\n    id\r\n  } = props;\r\n\r\n  const debounce = useService('debounce');\r\n  const formLayoutValidator = useService('formLayoutValidator');\r\n\r\n  const validate = useCallback((value) => {\r\n    return formLayoutValidator.validateField(field, value ? parseInt(value) : null);\r\n  }, [ field, formLayoutValidator ]);\r\n\r\n  const setValue = (value, error) => {\r\n\r\n    if (error) {\r\n      return;\r\n    }\r\n\r\n    const layout = get(field, [ 'layout' ], {});\r\n\r\n    const newValue = value ? parseInt(value) : null;\r\n\r\n    editField(field, [ 'layout' ], set(layout, [ 'columns' ], newValue));\r\n  };\r\n\r\n  const getValue = () => {\r\n    return get(field, [ 'layout', 'columns' ]);\r\n  };\r\n\r\n  const getOptions = () => {\r\n    return [\r\n      {\r\n        label: 'Automaticky',\r\n        value: AUTO_OPTION_VALUE\r\n      },\r\n\r\n      // todo(pinussilvestrus): make options dependant on field type\r\n      // cf. https://github.com/bpmn-io/form-js/issues/575\r\n      ...asArray(16).filter(i => i >= MIN_COLUMNS).map(asOption)\r\n    ];\r\n  };\r\n\r\n  return SelectEntry({\r\n    debounce,\r\n    element: field,\r\n    id,\r\n    label: 'Šířka sloupce',\r\n    getOptions,\r\n    getValue,\r\n    setValue,\r\n    validate\r\n  });\r\n}\r\n\r\n\r\n// helper /////////\r\n\r\nfunction asOption(number) {\r\n  return {\r\n    value: number,\r\n    label: number.toString()\r\n  };\r\n}\r\n\r\nfunction asArray(length) {\r\n  return Array.from({ length }).map((_, i) => i + 1);\r\n}\r\n","import { get } from 'min-dash';\r\n\r\nimport { INPUTS } from '../Util';\r\n\r\nimport { useService, useVariables } from '../hooks';\r\n\r\nimport { FeelTemplatingEntry, isFeelEntryEdited } from '@bpmn-io/properties-panel';\r\n\r\n\r\nexport function DescriptionEntry(props) {\r\n  const {\r\n    editField,\r\n    field\r\n  } = props;\r\n\r\n  const entries = [];\r\n\r\n  entries.push({\r\n    id: 'description',\r\n    component: Description,\r\n    editField: editField,\r\n    field: field,\r\n    isEdited: isFeelEntryEdited,\r\n    isDefaultVisible: (field) => INPUTS.includes(field.type)\r\n  });\r\n\r\n  return entries;\r\n}\r\n\r\n\r\nfunction Description(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  const variables = useVariables().map(name => ({ name }));\r\n\r\n  const path = [ 'description' ];\r\n\r\n  const getValue = () => {\r\n    return get(field, path, '');\r\n  };\r\n\r\n  const setValue = (value) => {\r\n    return editField(field, path, value);\r\n  };\r\n\r\n  return FeelTemplatingEntry({\r\n    debounce,\r\n    element: field,\r\n    getValue,\r\n    id,\r\n    label: 'Popisek',\r\n    singleLine: true,\r\n    setValue,\r\n    variables\r\n  });\r\n}","import {\r\n  isSelectEntryEdited,\r\n  isTextFieldEntryEdited,\r\n  isTextAreaEntryEdited,\r\n  SelectEntry,\r\n  TextFieldEntry,\r\n  TextAreaEntry\r\n} from '@bpmn-io/properties-panel';\r\n\r\nimport { get } from 'min-dash';\r\n\r\nimport Big from 'big.js';\r\n\r\nimport { useService } from '../hooks';\r\n\r\nimport { countDecimals, INPUTS, isValidNumber, OPTIONS_INPUTS } from '../Util';\r\nimport { useCallback } from 'preact/hooks';\r\n\r\nexport const EMPTY_OPTION = null;\r\n\r\nexport function DefaultValueEntry(props) {\r\n  const {\r\n    editField,\r\n    field\r\n  } = props;\r\n\r\n  const {\r\n    type\r\n  } = field;\r\n\r\n  const entries = [];\r\n\r\n  function isDefaultVisible(matchers) {\r\n    return (field) => {\r\n\r\n      // Only make default values available when they are statically defined\r\n      if (!INPUTS.includes(type) || OPTIONS_INPUTS.includes(type) && !field.values) {\r\n        return false;\r\n      }\r\n\r\n      return matchers(field);\r\n    };\r\n\r\n  }\r\n\r\n  const defaulValueBase = {\r\n    editField,\r\n    field,\r\n    id: 'defaultValue',\r\n    label: 'Výchozí hodnota'\r\n  };\r\n\r\n  entries.push({\r\n    ...defaulValueBase,\r\n    component: DefaultValueCheckbox,\r\n    isEdited: isSelectEntryEdited,\r\n    isDefaultVisible: isDefaultVisible((field) => field.type === 'checkbox')\r\n  });\r\n\r\n  entries.push({\r\n    ...defaulValueBase,\r\n    component: DefaultValueNumber,\r\n    isEdited: isTextFieldEntryEdited,\r\n    isDefaultVisible: isDefaultVisible((field) => field.type === 'number')\r\n  });\r\n\r\n  entries.push({\r\n    ...defaulValueBase,\r\n    component: DefaultValueSingleSelect,\r\n    isEdited: isSelectEntryEdited,\r\n    isDefaultVisible: isDefaultVisible((field) => field.type === 'radio' || field.type === 'select')\r\n  });\r\n\r\n  // todo(Skaiir): implement a multiselect equivalent (cf. https://github.com/bpmn-io/form-js/issues/265)\r\n\r\n  entries.push({\r\n    ...defaulValueBase,\r\n    component: DefaultValueTextfield,\r\n    isEdited: isTextFieldEntryEdited,\r\n    isDefaultVisible: isDefaultVisible((field) => field.type === 'textfield')\r\n  });\r\n\r\n  entries.push({\r\n    ...defaulValueBase,\r\n    component: DefaultValueTextarea,\r\n    isEdited: isTextAreaEntryEdited,\r\n    isDefaultVisible: isDefaultVisible((field) => field.type === 'textarea')\r\n  });\r\n\r\n  return entries;\r\n}\r\n\r\nfunction DefaultValueCheckbox(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id,\r\n    label\r\n  } = props;\r\n\r\n  const {\r\n    defaultValue\r\n  } = field;\r\n\r\n  const path = [ 'defaultValue' ];\r\n\r\n  const getOptions = () => {\r\n    return [\r\n      {\r\n        label: 'Zaškrtnuto',\r\n        value: 'true'\r\n      },\r\n      {\r\n        label: 'Nezaškrtnuto',\r\n        value: 'false'\r\n      }\r\n    ];\r\n  };\r\n\r\n  const setValue = (value) => {\r\n    return editField(field, path, parseStringToBoolean(value));\r\n  };\r\n\r\n  const getValue = () => {\r\n    return parseBooleanToString(defaultValue);\r\n  };\r\n\r\n  return SelectEntry({\r\n    element: field,\r\n    getOptions,\r\n    getValue,\r\n    id,\r\n    label,\r\n    setValue\r\n  });\r\n}\r\n\r\nfunction DefaultValueNumber(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id,\r\n    label\r\n  } = props;\r\n\r\n  const {\r\n    decimalDigits,\r\n    serializeToString = false\r\n  } = field;\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  const path = [ 'defaultValue' ];\r\n\r\n  const getValue = (e) => {\r\n\r\n    let value = get(field, path);\r\n\r\n    if (!isValidNumber(value)) return;\r\n\r\n    // Enforces decimal notation so that we do not submit defaults in exponent form\r\n    return serializeToString ? Big(value).toFixed() : value;\r\n  };\r\n\r\n  const setValue = (value, error) => {\r\n\r\n    if (error) {\r\n      return;\r\n    }\r\n\r\n    let newValue;\r\n\r\n    if (isValidNumber(value)) {\r\n      newValue = serializeToString ? value : Number(value);\r\n    }\r\n\r\n    return editField(field, path, newValue);\r\n  };\r\n\r\n  const decimalDigitsSet = decimalDigits || decimalDigits === 0;\r\n\r\n  const validate = useCallback(\r\n    (value) => {\r\n      if (value === undefined || value === null) {\r\n        return;\r\n      }\r\n\r\n      if (!isValidNumber(value)) {\r\n        return 'Hodnota musí být platné číslo';\r\n      }\r\n      if (decimalDigitsSet && countDecimals(value) > decimalDigits) {\r\n        return `Hodnota nesmí obsahovat více než ${decimalDigits} desetinných míst`;\r\n      }\r\n    },\r\n    [ decimalDigitsSet, decimalDigits ],\r\n  );\r\n\r\n  return TextFieldEntry({\r\n    debounce,\r\n    label,\r\n    element: field,\r\n    getValue,\r\n    id,\r\n    setValue,\r\n    validate\r\n  });\r\n}\r\n\r\nfunction DefaultValueSingleSelect(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id,\r\n    label\r\n  } = props;\r\n\r\n  const {\r\n    defaultValue = EMPTY_OPTION,\r\n    values = []\r\n  } = field;\r\n\r\n  const path = [ 'defaultValue' ];\r\n\r\n  const getOptions = () => {\r\n    return [\r\n      {\r\n        label: '<neurčeno>',\r\n        value: EMPTY_OPTION\r\n      },\r\n      ...values\r\n    ];\r\n  };\r\n\r\n  const setValue = (value) => {\r\n    return editField(field, path, value.length ? value : undefined);\r\n  };\r\n\r\n  const getValue = () => {\r\n    return defaultValue;\r\n  };\r\n\r\n  return SelectEntry({\r\n    element: field,\r\n    getOptions,\r\n    getValue,\r\n    id,\r\n    label,\r\n    setValue\r\n  });\r\n}\r\n\r\nfunction DefaultValueTextfield(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id,\r\n    label\r\n  } = props;\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  const path = [ 'defaultValue' ];\r\n\r\n  const getValue = () => {\r\n    return get(field, path, '');\r\n  };\r\n\r\n  const setValue = (value) => {\r\n    return editField(field, path, value);\r\n  };\r\n\r\n  return TextFieldEntry({\r\n    debounce,\r\n    element: field,\r\n    getValue,\r\n    id,\r\n    label,\r\n    setValue\r\n  });\r\n}\r\n\r\nfunction DefaultValueTextarea(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id,\r\n    label\r\n  } = props;\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  const path = [ 'defaultValue' ];\r\n\r\n  const getValue = () => {\r\n    return get(field, path, '');\r\n  };\r\n\r\n  const setValue = (value) => {\r\n    return editField(field, path, value);\r\n  };\r\n\r\n  return TextAreaEntry({\r\n    debounce,\r\n    element: field,\r\n    getValue,\r\n    id,\r\n    label,\r\n    setValue\r\n  });\r\n}\r\n\r\n// helpers /////////////////\r\n\r\nfunction parseStringToBoolean(value) {\r\n  if (value === 'true') {\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nfunction parseBooleanToString(value) {\r\n  if (value === true) {\r\n    return 'true';\r\n  }\r\n\r\n  return 'false';\r\n}","import { get } from 'min-dash';\r\n\r\nimport { INPUTS } from '../Util';\r\n\r\nimport { ToggleSwitchEntry, isToggleSwitchEntryEdited } from '@bpmn-io/properties-panel';\r\n\r\n\r\nexport function DisabledEntry(props) {\r\n  const {\r\n    editField,\r\n    field\r\n  } = props;\r\n\r\n  const entries = [];\r\n\r\n  entries.push({\r\n    id: 'disabled',\r\n    component: Disabled,\r\n    editField: editField,\r\n    field: field,\r\n    isEdited: isToggleSwitchEntryEdited,\r\n    isDefaultVisible: (field) => INPUTS.includes(field.type)\r\n  });\r\n\r\n  return entries;\r\n}\r\n\r\nfunction Disabled(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n\r\n  const path = [ 'disabled' ];\r\n\r\n  const getValue = () => {\r\n    return get(field, path, '');\r\n  };\r\n\r\n  const setValue = (value) => {\r\n    return editField(field, path, value);\r\n  };\r\n\r\n  return ToggleSwitchEntry({\r\n    element: field,\r\n    getValue,\r\n    id,\r\n    label: 'Deaktivováno',\r\n    tooltip: 'Obsah pole nelze upravit a data se neodešlou. Má přednost před volbou \"pouze pro čtení\".',\r\n    inline: true,\r\n    setValue\r\n  });\r\n}","import { get } from 'min-dash';\r\n\r\nimport { useService } from '../hooks';\r\n\r\nimport { TextFieldEntry, isTextFieldEntryEdited } from '@bpmn-io/properties-panel';\r\nimport { useCallback } from 'preact/hooks';\r\n\r\n\r\nexport function IdEntry(props) {\r\n  const {\r\n    editField,\r\n    field\r\n  } = props;\r\n\r\n  const entries = [];\r\n\r\n  entries.push({\r\n    id: 'id',\r\n    component: Id,\r\n    editField: editField,\r\n    field: field,\r\n    isEdited: isTextFieldEntryEdited,\r\n    isDefaultVisible: (field) => field.type === 'default'\r\n  });\r\n\r\n  return entries;\r\n}\r\n\r\nfunction Id(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n\r\n  const formFieldRegistry = useService('formFieldRegistry');\r\n  const debounce = useService('debounce');\r\n\r\n  const path = [ 'id' ];\r\n\r\n  const getValue = () => {\r\n    return get(field, path, '');\r\n  };\r\n\r\n  const setValue = (value, error) => {\r\n    if (error) {\r\n      return;\r\n    }\r\n\r\n    return editField(field, path, value);\r\n  };\r\n\r\n  const validate = useCallback((value) => {\r\n    if (typeof value !== 'string' || value.length === 0) {\r\n      return 'Must not be empty.';\r\n    }\r\n\r\n    const assigned = formFieldRegistry._ids.assigned(value);\r\n\r\n    if (assigned && assigned !== field) {\r\n      return 'Must be unique.';\r\n    }\r\n\r\n    return validateId(value) || null;\r\n  }, [ formFieldRegistry, field ]);\r\n\r\n  return TextFieldEntry({\r\n    debounce,\r\n    element: field,\r\n    getValue,\r\n    id,\r\n    label: 'ID',\r\n    setValue,\r\n    validate,\r\n  });\r\n}\r\n\r\n// id structural validation /////////////\r\n\r\nconst SPACE_REGEX = /\\s/;\r\n\r\n// for QName validation as per http://www.w3.org/TR/REC-xml/#NT-NameChar\r\nconst QNAME_REGEX = /^([a-z][\\w-.]*:)?[a-z_][\\w-.]*$/i;\r\n\r\n// for ID validation as per BPMN Schema (QName - Namespace)\r\nconst ID_REGEX = /^[a-z_][\\w-.]*$/i;\r\n\r\nfunction validateId(idValue) {\r\n\r\n  if (containsSpace(idValue)) {\r\n    return 'Must not contain spaces.';\r\n  }\r\n\r\n  if (!ID_REGEX.test(idValue)) {\r\n\r\n    if (QNAME_REGEX.test(idValue)) {\r\n      return 'Must not contain prefix.';\r\n    }\r\n\r\n    return 'Must be a valid QName.';\r\n  }\r\n}\r\n\r\nfunction containsSpace(value) {\r\n  return SPACE_REGEX.test(value);\r\n}","import { isString, get } from 'min-dash';\r\n\r\nimport { hasIntegerPathSegment, isProhibitedPath, isValidDotPath } from '../Util';\r\n\r\nimport { useService } from '../hooks';\r\n\r\nimport { TextFieldEntry, isTextFieldEntryEdited } from '@bpmn-io/properties-panel';\r\nimport { useCallback } from 'preact/hooks';\r\n\r\n\r\nexport function KeyEntry(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    getService\r\n  } = props;\r\n\r\n  const entries = [];\r\n\r\n  entries.push({\r\n    id: 'key',\r\n    component: Key,\r\n    editField: editField,\r\n    field: field,\r\n    isEdited: isTextFieldEntryEdited,\r\n    isDefaultVisible: (field) => {\r\n      const formFields = getService('formFields');\r\n      const { config } = formFields.get(field.type);\r\n      return config.keyed;\r\n    }\r\n  });\r\n\r\n  return entries;\r\n}\r\n\r\nfunction Key(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n\r\n  const pathRegistry = useService('pathRegistry');\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  const path = [ 'key' ];\r\n\r\n  const getValue = () => {\r\n    return get(field, path, '');\r\n  };\r\n\r\n  const setValue = (value, error) => {\r\n    if (error) {\r\n      return;\r\n    }\r\n\r\n    return editField(field, path, value);\r\n  };\r\n\r\n  const validate = useCallback((value) => {\r\n\r\n    if (value === field.key) {\r\n      return null;\r\n    }\r\n\r\n    if (!isString(value) || value.length === 0) {\r\n      return 'Klíč nesmí být prázdný.';\r\n    }\r\n\r\n    if (!isValidDotPath(value)) {\r\n      return 'Klíč musí být korektní proměnná nebo cesta oddělená tečkami.';\r\n    }\r\n\r\n    if (hasIntegerPathSegment(value)) {\r\n      return 'Klíč nesmí obsahovat pouze čísla.';\r\n    }\r\n\r\n    if (isProhibitedPath(value)) {\r\n      return 'Must not be a prohibited path.';\r\n    }\r\n\r\n    const replacements = {\r\n      [ field.id ]: value.split('.')\r\n    };\r\n\r\n    const oldPath = pathRegistry.getValuePath(field);\r\n    const newPath = pathRegistry.getValuePath(field, { replacements });\r\n\r\n    // unclaim temporarily to avoid self-conflicts\r\n    pathRegistry.unclaimPath(oldPath);\r\n    const canClaim = pathRegistry.canClaimPath(newPath, { isClosed: true, claimerId: field.id });\r\n    pathRegistry.claimPath(oldPath, { isClosed: true, claimerId: field.id });\r\n\r\n    return canClaim ? null : 'Klíč se nesmí shodovat s již existujícím klíčem/cestou.';\r\n  }, [ field, pathRegistry ]);\r\n\r\n  return TextFieldEntry({\r\n    debounce,\r\n    description: 'Klíč, pod kterým je uložená hodnota pole.',\r\n    element: field,\r\n    getValue,\r\n    id,\r\n    label: 'Klíč',\r\n    tooltip: 'Klíč slouží k identifikaci pole a jeho hodnoty v datovém schématu.',\r\n    setValue,\r\n    validate\r\n  });\r\n}","import { get } from 'min-dash';\r\n\r\nimport { useService } from '../hooks';\r\n\r\nimport { TextFieldEntry, isTextFieldEntryEdited } from '@bpmn-io/properties-panel';\r\n\r\nimport { isProhibitedPath, isValidDotPath, hasIntegerPathSegment } from '../Util';\r\nimport { useCallback } from 'preact/hooks';\r\n\r\n\r\nexport function PathEntry(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    getService\r\n  } = props;\r\n\r\n  const {\r\n    type\r\n  } = field;\r\n\r\n  const entries = [];\r\n\r\n  const formFieldDefinition = getService('formFields').get(type);\r\n\r\n  if (formFieldDefinition && formFieldDefinition.config.pathed) {\r\n    entries.push({\r\n      id: 'path',\r\n      component: Path,\r\n      editField: editField,\r\n      field: field,\r\n      isEdited: isTextFieldEntryEdited\r\n    });\r\n  }\r\n\r\n  return entries;\r\n}\r\n\r\nfunction Path(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n\r\n  const debounce = useService('debounce');\r\n  const pathRegistry = useService('pathRegistry');\r\n  const fieldConfig = useService('formFields').get(field.type).config;\r\n  const isRepeating = fieldConfig.repeatable && field.isRepeating;\r\n\r\n  const path = [ 'path' ];\r\n\r\n  const getValue = () => {\r\n    return get(field, path, '');\r\n  };\r\n\r\n  const setValue = (value, error) => {\r\n    if (error) {\r\n      return;\r\n    }\r\n\r\n    return editField(field, path, value);\r\n  };\r\n\r\n  const validate = useCallback((value) => {\r\n\r\n    if (!value && isRepeating) {\r\n      return 'Must not be empty';\r\n    }\r\n\r\n    // Early return for empty value in non-repeating cases or if the field path hasn't changed\r\n    if (!value && !isRepeating || value === field.path) {\r\n      return null;\r\n    }\r\n\r\n    // Validate dot-separated path format\r\n    if (!isValidDotPath(value)) {\r\n      const msg = isRepeating ? 'Must be a variable or a dot-separated path' : 'Must be empty, a variable or a dot-separated path';\r\n      return msg;\r\n    }\r\n\r\n    // Check for integer segments in the path\r\n    if (hasIntegerPathSegment(value)) {\r\n      return 'Must not contain numerical path segments.';\r\n    }\r\n\r\n    // Check for special prohibited paths\r\n    if (isProhibitedPath(value)) {\r\n      return 'Must not be a prohibited path.';\r\n    }\r\n\r\n    // Check for path collisions\r\n    const options = {\r\n      replacements: {\r\n        [field.id]: value.split('.')\r\n      }\r\n    };\r\n\r\n    const canClaim = pathRegistry.executeRecursivelyOnFields(field, ({ field, isClosed, isRepeatable }) => {\r\n      const path = pathRegistry.getValuePath(field, options);\r\n      return pathRegistry.canClaimPath(path, { isClosed, isRepeatable, claimerId: field.id });\r\n    });\r\n\r\n    if (!canClaim) {\r\n      return 'Must not cause two binding paths to collide';\r\n    }\r\n\r\n    // If all checks pass\r\n    return null;\r\n  }, [ field, isRepeating, pathRegistry ]);\r\n\r\n  const tooltip = isRepeating\r\n    ? 'Směruje podřízené proměnné komponentu do proměnné v datovém schématu. Lze ponachat prázdné pro uložení na kořenové úrovni.'\r\n    : 'Směruje podřízené proměnné komponentu do proměnné v datovém schématu.';\r\n\r\n  return TextFieldEntry({\r\n    debounce,\r\n    description: 'Cesta, kam se uloží podřízené proměnné komponentu.',\r\n    element: field,\r\n    getValue,\r\n    id,\r\n    label: 'Cesta',\r\n    tooltip,\r\n    setValue,\r\n    validate\r\n  });\r\n}","import { get } from 'min-dash';\r\nimport { ToggleSwitchEntry, isToggleSwitchEntryEdited } from '@bpmn-io/properties-panel';\r\n\r\nexport function simpleBoolEntryFactory(options) {\r\n  const {\r\n    id,\r\n    label,\r\n    description,\r\n    path,\r\n    props,\r\n    getValue,\r\n    setValue,\r\n    isDefaultVisible\r\n  } = options;\r\n\r\n  const {\r\n    editField,\r\n    field\r\n  } = props;\r\n\r\n  return {\r\n    id,\r\n    label,\r\n    path,\r\n    field,\r\n    editField,\r\n    description,\r\n    component: SimpleBoolComponent,\r\n    isEdited: isToggleSwitchEntryEdited,\r\n    isDefaultVisible,\r\n    getValue,\r\n    setValue\r\n  };\r\n}\r\n\r\nconst SimpleBoolComponent = (props) => {\r\n  const {\r\n    id,\r\n    label,\r\n    path,\r\n    field,\r\n    editField,\r\n    getValue = () => get(field, path, ''),\r\n    setValue = (value) => editField(field, path, value || false),\r\n    description\r\n  } = props;\r\n\r\n  return ToggleSwitchEntry({\r\n    element: field,\r\n    getValue,\r\n    id,\r\n    label,\r\n    setValue,\r\n    inline: true,\r\n    description\r\n  });\r\n};","import { get } from 'min-dash';\r\nimport { isSelectEntryEdited, SelectEntry } from '@bpmn-io/properties-panel';\r\n\r\nexport function simpleSelectEntryFactory(options) {\r\n  const {\r\n    id,\r\n    label,\r\n    path,\r\n    props,\r\n    optionsArray\r\n  } = options;\r\n\r\n  const {\r\n    editField,\r\n    field\r\n  } = props;\r\n\r\n  return {\r\n    id,\r\n    label,\r\n    path,\r\n    field,\r\n    editField,\r\n    optionsArray,\r\n    component: SimpleSelectComponent,\r\n    isEdited: isSelectEntryEdited,\r\n  };\r\n}\r\n\r\nconst SimpleSelectComponent = (props) => {\r\n  const {\r\n    id,\r\n    label,\r\n    path,\r\n    field,\r\n    editField,\r\n    optionsArray\r\n  } = props;\r\n\r\n  const getValue = () => get(field, path, '');\r\n\r\n  const setValue = (value) => editField(field, path, value);\r\n\r\n  const getOptions = () => optionsArray;\r\n\r\n  return SelectEntry({\r\n    label,\r\n    element: field,\r\n    getOptions,\r\n    getValue,\r\n    id,\r\n    setValue\r\n  });\r\n};\r\n","import { get } from 'min-dash';\r\nimport { useService } from '../../hooks';\r\nimport { TextFieldEntry, isTextFieldEntryEdited } from '@bpmn-io/properties-panel';\r\nimport { isValidNumber } from '../../Util';\r\n\r\nimport Big from 'big.js';\r\nimport { useCallback } from 'preact/hooks';\r\n\r\nexport function simpleRangeIntegerEntryFactory(options) {\r\n  const {\r\n    id,\r\n    label,\r\n    path,\r\n    props,\r\n    min,\r\n    max\r\n  } = options;\r\n\r\n  const {\r\n    editField,\r\n    field\r\n  } = props;\r\n\r\n  return {\r\n    id,\r\n    label,\r\n    path,\r\n    field,\r\n    editField,\r\n    min,\r\n    max,\r\n    component: SimpleRangeIntegerEntry,\r\n    isEdited: isTextFieldEntryEdited\r\n  };\r\n}\r\n\r\nconst SimpleRangeIntegerEntry = (props) => {\r\n  const {\r\n    id,\r\n    label,\r\n    path,\r\n    field,\r\n    editField,\r\n    min = Number.MIN_SAFE_INTEGER,\r\n    max = Number.MAX_SAFE_INTEGER\r\n  } = props;\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  const getValue = () => {\r\n    const value = get(field, path);\r\n    const isValid = isValidNumber(value) && Number.isInteger(value);\r\n    return isValid ? value : null;\r\n  };\r\n\r\n  const setValue = (value, error) => {\r\n    if (error) {\r\n      return;\r\n    }\r\n\r\n    editField(field, path, Number(value));\r\n  };\r\n\r\n  const validate = useCallback((value) => {\r\n    if (value === undefined || value === null || value === '') { return; }\r\n    if (!Number.isInteger(Number(value))) { return 'Hodnota musí být platné celé číslo.'; }\r\n    if (Big(value).cmp(min) < 0) { return `Hodnota musí být alespoň ${min}.`; }\r\n    if (Big(value).cmp(max) > 0) { return `Hodnota nesmí být větší než ${max}.`; }\r\n  }, [ min, max ]);\r\n\r\n  return TextFieldEntry({\r\n    debounce,\r\n    label,\r\n    element: field,\r\n    getValue,\r\n    id,\r\n    setValue,\r\n    validate\r\n  });\r\n};\r\n","import { simpleBoolEntryFactory } from './factories';\r\n\r\nexport function GroupAppearanceEntry(props) {\r\n  const {\r\n    field,\r\n  } = props;\r\n\r\n  const {\r\n    type\r\n  } = field;\r\n\r\n  if (![ 'group', 'dynamiclist' ].includes(type)) {\r\n    return [];\r\n  }\r\n\r\n  const entries = [\r\n    simpleBoolEntryFactory({\r\n      id: 'showOutline',\r\n      path: [ 'showOutline' ],\r\n      label: 'Obrys sekce',\r\n      props\r\n    })\r\n  ];\r\n\r\n  return entries;\r\n}","import { INPUTS, LABELED_NON_INPUTS } from '../Util';\r\nimport { DATETIME_SUBTYPES, DATE_LABEL_PATH, TIME_LABEL_PATH } from '@bpmn-io/form-js-viewer';\r\nimport { useService, useVariables } from '../hooks';\r\nimport { FeelTemplatingEntry, isFeelEntryEdited } from '@bpmn-io/properties-panel';\r\nimport { get } from 'min-dash';\r\n\r\nexport function LabelEntry(props) {\r\n  const {\r\n    field,\r\n    editField\r\n  } = props;\r\n\r\n  const entries = [];\r\n\r\n  entries.push(\r\n    {\r\n      id: 'date-label',\r\n      component: DateLabel,\r\n      editField,\r\n      field,\r\n      isEdited: isFeelEntryEdited,\r\n      isDefaultVisible: function(field) {\r\n        return (\r\n          field.type === 'datetime' &&\r\n          (field.subtype === DATETIME_SUBTYPES.DATE || field.subtype === DATETIME_SUBTYPES.DATETIME)\r\n        );\r\n      }\r\n    }\r\n  );\r\n\r\n  entries.push(\r\n    {\r\n      id: 'time-label',\r\n      component: TimeLabel,\r\n      editField,\r\n      field,\r\n      isEdited: isFeelEntryEdited,\r\n      isDefaultVisible: function(field) {\r\n        return (\r\n          field.type === 'datetime' &&\r\n          (field.subtype === DATETIME_SUBTYPES.TIME || field.subtype === DATETIME_SUBTYPES.DATETIME)\r\n        );\r\n      }\r\n    }\r\n  );\r\n\r\n  const isSimplyLabled = (field) => {\r\n    return [ ...INPUTS.filter(input => input !== 'datetime'), ...LABELED_NON_INPUTS ].includes(field.type);\r\n  };\r\n\r\n  entries.push(\r\n    {\r\n      id: 'label',\r\n      component: Label,\r\n      editField,\r\n      field,\r\n      isEdited: isFeelEntryEdited,\r\n      isDefaultVisible: isSimplyLabled\r\n    }\r\n  );\r\n\r\n  return entries;\r\n}\r\n\r\n\r\nfunction Label(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  const variables = useVariables().map(name => ({ name }));\r\n\r\n  const path = [ 'label' ];\r\n\r\n  const getValue = () => {\r\n    return get(field, path, '');\r\n  };\r\n\r\n  const setValue = (value) => {\r\n    return editField(field, path, value || '');\r\n  };\r\n\r\n  const label = getLabelText(field.type);\r\n\r\n  return FeelTemplatingEntry({\r\n    debounce,\r\n    element: field,\r\n    getValue,\r\n    id,\r\n    label,\r\n    singleLine: true,\r\n    setValue,\r\n    variables\r\n  });\r\n}\r\n\r\nfunction DateLabel(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  const variables = useVariables().map(name => ({ name }));\r\n\r\n  const path = DATE_LABEL_PATH;\r\n\r\n  const getValue = () => {\r\n    return get(field, path, '');\r\n  };\r\n\r\n  const setValue = (value) => {\r\n    return editField(field, path, value || '');\r\n  };\r\n\r\n  return FeelTemplatingEntry({\r\n    debounce,\r\n    element: field,\r\n    getValue,\r\n    id,\r\n    label: 'Nadpis datumu',\r\n    singleLine: true,\r\n    setValue,\r\n    variables\r\n  });\r\n}\r\n\r\nfunction TimeLabel(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  const variables = useVariables().map(name => ({ name }));\r\n\r\n  const path = TIME_LABEL_PATH;\r\n\r\n  const getValue = () => {\r\n    return get(field, path, '');\r\n  };\r\n\r\n  const setValue = (value) => {\r\n    return editField(field, path, value || '');\r\n  };\r\n\r\n  return FeelTemplatingEntry({\r\n    debounce,\r\n    element: field,\r\n    getValue,\r\n    id,\r\n    label: 'Nadpis času',\r\n    singleLine: true,\r\n    setValue,\r\n    variables\r\n  });\r\n}\r\n\r\n// helpers //////////\r\n\r\n/**\r\n * @param {string} type\r\n * @returns {string}\r\n */\r\nfunction getLabelText(type) {\r\n  switch (type) {\r\n  case 'group':\r\n  case 'dynamiclist':\r\n    return 'Nadpis skupiny';\r\n  case 'table':\r\n    return 'Nadpis tabulky';\r\n  case 'iframe':\r\n    return 'Nadpis';\r\n  default:\r\n    return 'Nadpis pole';\r\n  }\r\n}\r\n","import { NumberFieldEntry, isNumberFieldEntryEdited } from '@bpmn-io/properties-panel';\r\n\r\nimport { get, isFunction } from 'min-dash';\r\nimport { useService } from '../hooks';\r\n\r\nexport function HeightEntry(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id,\r\n    description,\r\n    isDefaultVisible,\r\n    defaultValue\r\n  } = props;\r\n\r\n  const entries = [];\r\n\r\n  entries.push({\r\n    id: id + '-height',\r\n    component: Height,\r\n    description,\r\n    isEdited: isNumberFieldEntryEdited,\r\n    editField,\r\n    field,\r\n    defaultValue,\r\n    isDefaultVisible: (field) => {\r\n      if (isFunction(isDefaultVisible)) {\r\n        return isDefaultVisible(field);\r\n      }\r\n\r\n      return field.type === 'spacer';\r\n    }\r\n  });\r\n\r\n  return entries;\r\n}\r\n\r\nfunction Height(props) {\r\n\r\n  const {\r\n    description,\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  const getValue = (e) => get(field, [ 'height' ], null);\r\n\r\n  const setValue = (value, error) => {\r\n    if (error) {\r\n      return;\r\n    }\r\n\r\n    editField(field, [ 'height' ], value);\r\n  };\r\n\r\n  return NumberFieldEntry({\r\n    debounce,\r\n    description,\r\n    label: 'Výška v pixelech',\r\n    element: field,\r\n    id,\r\n    getValue,\r\n    setValue,\r\n    validate\r\n  });\r\n}\r\n\r\n// helpers //////////\r\n\r\n/**\r\n  * @param {number|void} value\r\n  * @returns {string|null}\r\n  */\r\nconst validate = (value) => {\r\n  if (typeof value !== 'number') {\r\n    return 'Pole musí obsahovat číslo.';\r\n  }\r\n\r\n  if (!Number.isInteger(value)) {\r\n    return 'Hodnota musí být platné celé číslo.';\r\n  }\r\n\r\n  if (value < 1) {\r\n    return 'Hodnota musí být větší než 0.';\r\n  }\r\n};\r\n\r\n","import { HeightEntry } from './HeightEntry';\r\n\r\nexport function IFrameHeightEntry(props) {\r\n  return [\r\n    ...HeightEntry({\r\n      ...props,\r\n      description: 'Výška okna v pixelech.',\r\n      isDefaultVisible: (field) => field.type === 'iframe'\r\n    })\r\n  ];\r\n}","import { get } from 'min-dash';\r\n\r\nimport { useService, useVariables } from '../hooks';\r\n\r\nimport { FeelTemplatingEntry, isFeelEntryEdited } from '@bpmn-io/properties-panel';\r\n\r\nconst HTTPS_PATTERN = /^(https):\\/\\/*/i; // eslint-disable-line no-useless-escape\r\n\r\n\r\nexport function IFrameUrlEntry(props) {\r\n  const {\r\n    editField,\r\n    field\r\n  } = props;\r\n\r\n  const entries = [];\r\n  entries.push({\r\n    id: 'url',\r\n    component: Url,\r\n    editField: editField,\r\n    field: field,\r\n    isEdited: isFeelEntryEdited,\r\n    isDefaultVisible: (field) => field.type === 'iframe'\r\n  });\r\n\r\n  return entries;\r\n}\r\n\r\nfunction Url(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  const variables = useVariables().map(name => ({ name }));\r\n\r\n  const path = [ 'url' ];\r\n\r\n  const getValue = () => {\r\n    return get(field, path, '');\r\n  };\r\n\r\n  const setValue = (value) => {\r\n    return editField(field, path, value);\r\n  };\r\n\r\n  return FeelTemplatingEntry({\r\n    debounce,\r\n    element: field,\r\n    feel: 'optional',\r\n    getValue,\r\n    id,\r\n    label: 'URL',\r\n    setValue,\r\n    singleLine: true,\r\n    tooltip: getTooltip(),\r\n    validate,\r\n    variables\r\n  });\r\n}\r\n\r\n// helper //////////////////////\r\n\r\nfunction getTooltip() {\r\n  return (\r\n    <>\r\n      <p>\r\n        Jako zdroj použijte HTTPS URL adresu, šablonu nebo výraz (pro předání hodnoty skrz proměnnou).\r\n      </p>\r\n      <p>\r\n        Ujistěte se, že je URL adresa bezpečná, protože může představovat bezpečnostní riziko.\r\n      </p>\r\n      <p>\r\n        Ne všechny externí zdroje mohou být zobrazeny skrz iFrame. Více informací najdete v <a target=\"_blank\" href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Frame-Options\">dokumentaci X-FRAME-OPTIONS</a>.\r\n      </p>\r\n    </>\r\n  );\r\n}\r\n\r\n/**\r\n  * @param {string|void} value\r\n  * @returns {string|null}\r\n  */\r\nconst validate = (value) => {\r\n  if (!value || value.startsWith('=')) {\r\n    return;\r\n  }\r\n\r\n  if (!HTTPS_PATTERN.test(value)) {\r\n    return 'Z bezpečnostních důvodů musí URL adresa začínat \"https\".';\r\n  }\r\n};","import { get } from 'min-dash';\r\n\r\nimport { useService, useVariables } from '../hooks';\r\n\r\nimport { FeelTemplatingEntry, isFeelEntryEdited } from '@bpmn-io/properties-panel';\r\n\r\nexport function ImageSourceEntry(props) {\r\n  const {\r\n    editField,\r\n    field\r\n  } = props;\r\n\r\n  const entries = [];\r\n  entries.push({\r\n    id: 'source',\r\n    component: Source,\r\n    editField: editField,\r\n    field: field,\r\n    isEdited: isFeelEntryEdited,\r\n    isDefaultVisible: (field) => field.type === 'image'\r\n  });\r\n\r\n  return entries;\r\n}\r\n\r\nfunction Source(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  const variables = useVariables().map(name => ({ name }));\r\n\r\n  const path = [ 'source' ];\r\n\r\n  const getValue = () => {\r\n    return get(field, path, '');\r\n  };\r\n\r\n  const setValue = (value) => {\r\n    return editField(field, path, value);\r\n  };\r\n\r\n  return FeelTemplatingEntry({\r\n    debounce,\r\n    description: 'Výraz, URL odkaz, nebo datové URI',\r\n    element: field,\r\n    feel: 'optional',\r\n    getValue,\r\n    id,\r\n    label: 'Zdroj obrázku',\r\n    tooltip: 'Jako zdroj lze použít URL odkaz nebo datové URI se zakódovaným obrázkem (např. ve formátu data:image/jpeg;base64,<zakódovaný obrázek>).',\r\n    setValue,\r\n    singleLine: true,\r\n    variables\r\n  });\r\n}\r\n","import { get } from 'min-dash';\r\n\r\nimport { useService, useVariables } from '../hooks';\r\n\r\nimport { FeelTemplatingEntry, isFeelEntryEdited } from '@bpmn-io/properties-panel';\r\n\r\nexport function TextEntry(props) {\r\n  const {\r\n    editField,\r\n    field\r\n  } = props;\r\n\r\n  const entries = [\r\n    {\r\n      id: 'text',\r\n      component: Text,\r\n      editField: editField,\r\n      field: field,\r\n      isEdited: isFeelEntryEdited,\r\n      isDefaultVisible: (field) => field.type === 'text'\r\n    }\r\n  ];\r\n\r\n  return entries;\r\n}\r\n\r\nfunction Text(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  const variables = useVariables().map(name => ({ name }));\r\n\r\n  const path = [ 'text' ];\r\n\r\n  const getValue = () => {\r\n    return get(field, path, '');\r\n  };\r\n\r\n  const setValue = (value) => {\r\n    return editField(field, path, value || '');\r\n  };\r\n\r\n  return FeelTemplatingEntry({\r\n    debounce,\r\n    description,\r\n    element: field,\r\n    getValue,\r\n    id,\r\n    label: 'Text',\r\n    hostLanguage: 'markdown',\r\n    setValue,\r\n    variables\r\n  });\r\n}\r\n\r\nconst description = <>Podporuje formát markdown a šablonování. <a href=\"https://docs.camunda.io/docs/components/modeler/forms/form-element-library/forms-element-library-text/\" target=\"_blank\">Dokumentace</a></>;","import { get } from 'min-dash';\r\n\r\nimport { useService, useVariables } from '../hooks';\r\n\r\nimport { FeelTemplatingEntry, isFeelEntryEdited } from '@bpmn-io/properties-panel';\r\n\r\nexport function HtmlEntry(props) {\r\n  const {\r\n    editField,\r\n    field\r\n  } = props;\r\n\r\n  const entries = [\r\n    {\r\n      id: 'content',\r\n      component: Content,\r\n      editField: editField,\r\n      field: field,\r\n      isEdited: isFeelEntryEdited,\r\n      isDefaultVisible: (field) => field.type === 'html'\r\n    }\r\n  ];\r\n\r\n  return entries;\r\n}\r\n\r\nfunction Content(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  const variables = useVariables().map(name => ({ name }));\r\n\r\n  const path = [ 'content' ];\r\n\r\n  const getValue = () => {\r\n    return get(field, path, '');\r\n  };\r\n\r\n  const setValue = (value) => {\r\n    return editField(field, path, value || '');\r\n  };\r\n\r\n\r\n\r\n  return FeelTemplatingEntry({\r\n    debounce,\r\n    description,\r\n    element: field,\r\n    getValue,\r\n    id,\r\n    label: 'Obsah',\r\n    hostLanguage: 'html',\r\n    validate,\r\n    setValue,\r\n    variables\r\n  });\r\n}\r\n\r\n// helpers //////////\r\n\r\nconst description = <>Podporuje HTML, styly a šablonování. <a href=\"https://docs.camunda.io/docs/next/components/modeler/forms/form-element-library/forms-element-library-html/\" target=\"_blank\">Dokumentace</a></>;\r\n\r\n/**\r\n  * @param {string|void} value\r\n  * @returns {string|null}\r\n  */\r\nconst validate = (value) => {\r\n\r\n  // allow empty state\r\n  if (typeof value !== 'string' || value === '') {\r\n    return null;\r\n  }\r\n\r\n  // allow expressions\r\n  if (value.startsWith('=')) { return null; }\r\n\r\n};","import { NumberFieldEntry, isNumberFieldEntryEdited, TextFieldEntry, isTextFieldEntryEdited } from '@bpmn-io/properties-panel';\r\nimport { get } from 'min-dash';\r\nimport { useService } from '../hooks';\r\nimport { countDecimals, isValidNumber } from '../Util';\r\n\r\nimport Big from 'big.js';\r\nimport { useCallback } from 'preact/hooks';\r\n\r\nexport function NumberEntries(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n\r\n  const entries = [];\r\n\r\n  entries.push({\r\n    id: id + '-decimalDigits',\r\n    component: NumberDecimalDigits,\r\n    isEdited: isNumberFieldEntryEdited,\r\n    editField,\r\n    field,\r\n    isDefaultVisible: (field) => field.type === 'number'\r\n  });\r\n\r\n  entries.push({\r\n    id: id + '-step',\r\n    component: NumberArrowStep,\r\n    isEdited: isTextFieldEntryEdited,\r\n    editField,\r\n    field,\r\n    isDefaultVisible: (field) => field.type === 'number'\r\n  });\r\n\r\n  return entries;\r\n}\r\n\r\nfunction NumberDecimalDigits(props) {\r\n\r\n  const {\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  const getValue = (e) => get(field, [ 'decimalDigits' ]);\r\n\r\n  const setValue = (value, error) => {\r\n    if (error) {\r\n      return;\r\n    }\r\n\r\n    editField(field, [ 'decimalDigits' ], value);\r\n  };\r\n\r\n  return NumberFieldEntry({\r\n    debounce,\r\n    label: 'Desetinná místa',\r\n    element: field,\r\n    step: 'any',\r\n    getValue,\r\n    id,\r\n    setValue,\r\n    validate: validateNumberEntries\r\n  });\r\n\r\n}\r\n\r\nfunction NumberArrowStep(props) {\r\n\r\n  const {\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n\r\n  const {\r\n    decimalDigits\r\n  } = field;\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  const getValue = (e) => {\r\n\r\n    let value = get(field, [ 'increment' ]);\r\n\r\n    if (!isValidNumber(value)) return null;\r\n\r\n    return value;\r\n  };\r\n\r\n  const clearLeadingZeroes = (value) => {\r\n    if (!value) return value;\r\n    const trimmed = value.replace(/^0+/g, '');\r\n    return (trimmed.startsWith('.') ? '0' : '') + trimmed;\r\n  };\r\n\r\n  const setValue = (value, error) => {\r\n    if (error) {\r\n      return;\r\n    }\r\n\r\n    editField(field, [ 'increment' ], clearLeadingZeroes(value));\r\n  };\r\n\r\n  const decimalDigitsSet = decimalDigits || decimalDigits === 0;\r\n\r\n  const validate = useCallback(\r\n    (value) => {\r\n      if (value === undefined || value === null) {\r\n        return;\r\n      }\r\n\r\n      if (!isValidNumber(value)) {\r\n        return 'Hodnota musí být platné číslo.';\r\n      }\r\n\r\n      if (Big(value).cmp(0) <= 0) {\r\n        return 'Hodnota musí být větší než 0.';\r\n      }\r\n\r\n      if (decimalDigitsSet) {\r\n        const minimumValue = Big(`1e-${decimalDigits}`);\r\n\r\n        if (Big(value).cmp(minimumValue) < 0) {\r\n          return `Hodnota musí být alespoň ${minimumValue.toString()}.`;\r\n        }\r\n\r\n        if (countDecimals(value) > decimalDigits) {\r\n          return `Hodnota nesmí obsahovat více než ${decimalDigits} desetinných míst.`;\r\n        }\r\n      }\r\n    },\r\n    [ decimalDigitsSet, decimalDigits ],\r\n  );\r\n\r\n  return TextFieldEntry({\r\n    debounce,\r\n    label: 'Krok',\r\n    element: field,\r\n    getValue,\r\n    id,\r\n    setValue,\r\n    validate\r\n  });\r\n}\r\n\r\n// helpers //////////\r\n\r\n/**\r\n * @param {number|void} value\r\n * @returns {string|void}\r\n */\r\nconst validateNumberEntries = (value) => {\r\n  if (typeof value !== 'number') {\r\n    return;\r\n  }\r\n\r\n  if (!Number.isInteger(value)) {\r\n    return 'Hodnota musí být platné celé číslo.';\r\n  }\r\n\r\n  if (value < 0) {\r\n    return 'Hodnota musí být větší nebo rovna 0.';\r\n  }\r\n};\r\n","import { FeelEntry, isFeelEntryEdited, SelectEntry, isSelectEntryEdited } from '@bpmn-io/properties-panel';\r\nimport { useService, useVariables } from '../hooks';\r\n\r\nexport function ExpressionFieldEntries(props) {\r\n  const { editField, field, id } = props;\r\n\r\n  const entries = [];\r\n\r\n  entries.push({\r\n    id: `${id}-expression`,\r\n    component: ExpressionFieldExpression,\r\n    isEdited: isFeelEntryEdited,\r\n    editField,\r\n    field,\r\n    isDefaultVisible: (field) => field.type === 'expression'\r\n  });\r\n\r\n  entries.push({\r\n    id: `${id}-computeOn`,\r\n    component: ExpressionFieldComputeOn,\r\n    isEdited: isSelectEntryEdited,\r\n    editField,\r\n    field,\r\n    isDefaultVisible: (field) => field.type === 'expression'\r\n  });\r\n\r\n  return entries;\r\n}\r\n\r\nfunction ExpressionFieldExpression(props) {\r\n  const { editField, field, id } = props;\r\n\r\n  const debounce = useService('debounce');\r\n  const variables = useVariables().map(name => ({ name }));\r\n\r\n  const getValue = () => field.expression || '';\r\n\r\n  const setValue = (value) => {\r\n    editField(field, [ 'expression' ], value);\r\n  };\r\n\r\n  return FeelEntry({\r\n    debounce,\r\n    description: 'Výraz pro výpočet hodnoty pole',\r\n    element: field,\r\n    feel: 'required',\r\n    getValue,\r\n    id,\r\n    label: 'Cílová hodnota',\r\n    setValue,\r\n    variables\r\n  });\r\n}\r\n\r\nfunction ExpressionFieldComputeOn(props) {\r\n  const { editField, field, id } = props;\r\n\r\n  const getValue = () => field.computeOn || '';\r\n\r\n  const setValue = (value) => {\r\n    editField(field, [ 'computeOn' ], value);\r\n  };\r\n\r\n  const getOptions = () => ([\r\n    { value: 'change', label: 'Změna hodnoty' },\r\n    { value: 'presubmit', label: 'Odeslání formuláře' }\r\n  ]);\r\n\r\n  return SelectEntry({\r\n    id,\r\n    label: 'Spouštěč výpočtu',\r\n    getValue,\r\n    setValue,\r\n    getOptions\r\n  });\r\n}\r\n","import { CheckboxEntry, isCheckboxEntryEdited } from '@bpmn-io/properties-panel';\r\n\r\nimport { get } from 'min-dash';\r\n\r\nimport Big from 'big.js';\r\n\r\n\r\nexport function NumberSerializationEntry(props) {\r\n  const {\r\n    editField,\r\n    field\r\n  } = props;\r\n\r\n  const entries = [];\r\n\r\n  entries.push({\r\n    id: 'serialize-to-string',\r\n    component: SerializeToString,\r\n    isEdited: isCheckboxEntryEdited,\r\n    editField,\r\n    field,\r\n    isDefaultVisible: (field) => field.type === 'number'\r\n  });\r\n\r\n  return entries;\r\n}\r\n\r\nfunction SerializeToString(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n\r\n  const {\r\n    defaultValue\r\n  } = field;\r\n\r\n  const path = [ 'serializeToString' ];\r\n\r\n  const getValue = () => {\r\n    return get(field, path, '');\r\n  };\r\n\r\n  const setValue = (value) => {\r\n\r\n    // Whenever changing the formatting, make sure to change the default value type along with it\r\n    if (defaultValue || defaultValue === 0) {\r\n      editField(field, [ 'defaultValue' ], value ? Big(defaultValue).toFixed() : Number(defaultValue));\r\n    }\r\n\r\n    return editField(field, path, value);\r\n  };\r\n\r\n  return CheckboxEntry({\r\n    element: field,\r\n    getValue,\r\n    id,\r\n    label: 'Uložit jako řetězec',\r\n    description: 'Umožňuje uložit číslo s libovolnou přesností',\r\n    setValue\r\n  });\r\n}","import { CheckboxEntry, isCheckboxEntryEdited, SelectEntry, isSelectEntryEdited } from '@bpmn-io/properties-panel';\r\n\r\nimport {\r\n  DATETIME_SUBTYPES,\r\n  DATETIME_SUBTYPES_LABELS,\r\n  DATETIME_SUBTYPE_PATH,\r\n  DATE_LABEL_PATH,\r\n  DATE_DISALLOW_PAST_PATH,\r\n  TIME_USE24H_PATH,\r\n  TIME_LABEL_PATH,\r\n  TIME_INTERVAL_PATH,\r\n  TIME_SERIALISING_FORMAT_PATH,\r\n  TIME_SERIALISING_FORMATS\r\n} from '@bpmn-io/form-js-viewer';\r\n\r\nimport { get } from 'min-dash';\r\n\r\nexport function DateTimeEntry(props) {\r\n  const {\r\n    editField,\r\n    field\r\n  } = props;\r\n\r\n  const entries = [\r\n    {\r\n      id: 'subtype',\r\n      component: DateTimeSubtypeSelect,\r\n      isEdited: isSelectEntryEdited,\r\n      editField,\r\n      field,\r\n      isDefaultVisible: (field) => field.type === 'datetime'\r\n    }\r\n  ];\r\n\r\n  entries.push({\r\n    id: 'use24h',\r\n    component: Use24h,\r\n    isEdited: isCheckboxEntryEdited,\r\n    editField,\r\n    field,\r\n    isDefaultVisible: (field) => field.type === 'datetime' && (\r\n      field.subtype === DATETIME_SUBTYPES.TIME || field.subtype === DATETIME_SUBTYPES.DATETIME\r\n    )\r\n  });\r\n\r\n  return entries;\r\n}\r\n\r\nfunction DateTimeSubtypeSelect(props) {\r\n\r\n  const {\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n\r\n  const getValue = (e) => get(field, DATETIME_SUBTYPE_PATH);\r\n\r\n  const clearTimeConfig = () => {\r\n    const timeConfigPaths = [ TIME_LABEL_PATH, TIME_USE24H_PATH, TIME_INTERVAL_PATH, TIME_SERIALISING_FORMAT_PATH ];\r\n    for (const path of timeConfigPaths) {\r\n      editField(field, path, undefined);\r\n    }\r\n  };\r\n\r\n  const initTimeConfig = () => {\r\n    editField(field, TIME_LABEL_PATH, 'Čas');\r\n    editField(field, TIME_SERIALISING_FORMAT_PATH, TIME_SERIALISING_FORMATS.UTC_OFFSET);\r\n    editField(field, TIME_INTERVAL_PATH, 15);\r\n  };\r\n\r\n  const clearDateConfig = () => {\r\n    const dateConfigPaths = [ DATE_LABEL_PATH, DATE_DISALLOW_PAST_PATH ];\r\n    for (const path of dateConfigPaths) {\r\n      editField(field, path, undefined);\r\n    }\r\n  };\r\n\r\n  const initDateConfig = () => {\r\n    editField(field, DATE_LABEL_PATH, 'Datum');\r\n  };\r\n\r\n  const setValue = (value) => {\r\n\r\n    const oldValue = getValue();\r\n\r\n    if (oldValue === value) return;\r\n\r\n    if (value === DATETIME_SUBTYPES.DATE) {\r\n      clearTimeConfig();\r\n      oldValue === DATETIME_SUBTYPES.TIME && initDateConfig();\r\n    }\r\n    else if (value === DATETIME_SUBTYPES.TIME) {\r\n      clearDateConfig();\r\n      oldValue === DATETIME_SUBTYPES.DATE && initTimeConfig();\r\n    }\r\n    else if (value === DATETIME_SUBTYPES.DATETIME) {\r\n      oldValue === DATETIME_SUBTYPES.DATE && initTimeConfig();\r\n      oldValue === DATETIME_SUBTYPES.TIME && initDateConfig();\r\n    }\r\n\r\n    return editField(field, DATETIME_SUBTYPE_PATH, value);\r\n  };\r\n\r\n  const getDatetimeSubtypes = () => {\r\n\r\n    return Object.values(DATETIME_SUBTYPES).map((subtype) => ({\r\n      label: DATETIME_SUBTYPES_LABELS[subtype],\r\n      value: subtype\r\n    }));\r\n  };\r\n\r\n  return SelectEntry({\r\n    label: 'Typ',\r\n    element: field,\r\n    getOptions: getDatetimeSubtypes,\r\n    getValue,\r\n    id,\r\n    setValue\r\n  });\r\n}\r\n\r\nfunction Use24h(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n\r\n  const path = TIME_USE24H_PATH;\r\n\r\n  const getValue = () => {\r\n    return get(field, path, '');\r\n  };\r\n\r\n  const setValue = (value) => {\r\n    return editField(field, path, value);\r\n  };\r\n\r\n  return CheckboxEntry({\r\n    element: field,\r\n    getValue,\r\n    id,\r\n    label: '24h formát',\r\n    setValue\r\n  });\r\n}\r\n","import { CheckboxEntry, isCheckboxEntryEdited, SelectEntry, isSelectEntryEdited } from '@bpmn-io/properties-panel';\r\n\r\nimport { DATETIME_SUBTYPES, DATE_DISALLOW_PAST_PATH, TIME_INTERVAL_PATH } from '@bpmn-io/form-js-viewer';\r\n\r\nimport { get } from 'min-dash';\r\n\r\nexport function DateTimeConstraintsEntry(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n\r\n  function isDefaultVisible(subtypes) {\r\n    return (field) => {\r\n      if (field.type !== 'datetime') {\r\n        return false;\r\n      }\r\n\r\n      return subtypes.includes(field.subtype);\r\n    };\r\n  }\r\n\r\n  const entries = [];\r\n\r\n  entries.push({\r\n    id: id + '-timeInterval',\r\n    component: TimeIntervalSelect,\r\n    isEdited: isSelectEntryEdited,\r\n    editField,\r\n    field,\r\n    isDefaultVisible: isDefaultVisible([ DATETIME_SUBTYPES.TIME, DATETIME_SUBTYPES.DATETIME ])\r\n  });\r\n\r\n\r\n  entries.push({\r\n    id: id + '-disallowPassedDates',\r\n    component: DisallowPassedDates,\r\n    isEdited: isCheckboxEntryEdited,\r\n    editField,\r\n    field,\r\n    isDefaultVisible: isDefaultVisible([ DATETIME_SUBTYPES.DATE, DATETIME_SUBTYPES.DATETIME ])\r\n  });\r\n\r\n\r\n  return entries;\r\n}\r\n\r\nfunction DisallowPassedDates(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n\r\n  const path = DATE_DISALLOW_PAST_PATH;\r\n\r\n  const getValue = () => {\r\n    return get(field, path, '');\r\n  };\r\n\r\n  const setValue = (value) => {\r\n    return editField(field, path, value);\r\n  };\r\n\r\n  return CheckboxEntry({\r\n    element: field,\r\n    getValue,\r\n    id,\r\n    label: 'Zakázat data v minulosti',\r\n    setValue\r\n  });\r\n}\r\n\r\nfunction TimeIntervalSelect(props) {\r\n\r\n  const {\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n\r\n  const timeIntervals = [ 1, 5, 10, 15, 30, 60 ];\r\n\r\n  const getValue = (e) => get(field, TIME_INTERVAL_PATH);\r\n\r\n  const setValue = (value) => editField(field, TIME_INTERVAL_PATH, parseInt(value));\r\n\r\n  const getTimeIntervals = () => {\r\n\r\n    return timeIntervals.map((timeInterval) => ({\r\n      label: timeInterval === 60 ? '1h' : (timeInterval + 'm'),\r\n      value: timeInterval\r\n    }));\r\n  };\r\n\r\n  return SelectEntry({\r\n    label: 'Časový interval',\r\n    element: field,\r\n    getOptions: getTimeIntervals,\r\n    getValue,\r\n    id,\r\n    setValue\r\n  });\r\n}","import { SelectEntry, isSelectEntryEdited } from '@bpmn-io/properties-panel';\r\n\r\nimport { DATETIME_SUBTYPES, TIME_SERIALISING_FORMATS, TIME_SERIALISINGFORMAT_LABELS, TIME_SERIALISING_FORMAT_PATH } from '@bpmn-io/form-js-viewer';\r\n\r\nimport { get } from 'min-dash';\r\n\r\nexport function DateTimeFormatEntry(props) {\r\n  const {\r\n    editField,\r\n    field\r\n  } = props;\r\n\r\n  const entries = [];\r\n\r\n  entries.push({\r\n    id: 'time-format',\r\n    component: TimeFormatSelect,\r\n    isEdited: isSelectEntryEdited,\r\n    editField,\r\n    field,\r\n    isDefaultVisible: (field) => field.type === 'datetime' && (\r\n      field.subtype === DATETIME_SUBTYPES.TIME || field.subtype === DATETIME_SUBTYPES.DATETIME\r\n    )\r\n  });\r\n\r\n  return entries;\r\n}\r\n\r\nfunction TimeFormatSelect(props) {\r\n\r\n  const {\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n\r\n  const getValue = (e) => get(field, TIME_SERIALISING_FORMAT_PATH);\r\n\r\n  const setValue = (value) => editField(field, TIME_SERIALISING_FORMAT_PATH, value);\r\n\r\n  const getTimeSerialisingFormats = () => {\r\n\r\n    return Object.values(TIME_SERIALISING_FORMATS).map((format) => ({\r\n      label: TIME_SERIALISINGFORMAT_LABELS[format],\r\n      value: format\r\n    }));\r\n  };\r\n\r\n  return SelectEntry({\r\n    label: 'Časový formát',\r\n    element: field,\r\n    getOptions: getTimeSerialisingFormats,\r\n    getValue,\r\n    id,\r\n    setValue\r\n  });\r\n}","\r\nimport { simpleBoolEntryFactory } from './factories';\r\n\r\nexport function SelectEntries(props) {\r\n  const entries = [\r\n    simpleBoolEntryFactory({\r\n      id: 'searchable',\r\n      path: [ 'searchable' ],\r\n      label: 'Povolit vyhledávání',\r\n      props,\r\n      isDefaultVisible: (field) => field.type === 'select'\r\n    })\r\n  ];\r\n\r\n  return entries;\r\n}","import {\r\n  get,\r\n  set\r\n} from 'min-dash';\r\n\r\nimport { useService } from '../hooks';\r\n\r\nimport { TextFieldEntry } from '@bpmn-io/properties-panel';\r\nimport { useMemo } from 'preact/hooks';\r\n\r\n\r\nexport function ValueEntry(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    idPrefix,\r\n    index,\r\n    validateFactory\r\n  } = props;\r\n\r\n  const entries = [\r\n    {\r\n      component: Label,\r\n      editField,\r\n      field,\r\n      id: idPrefix + '-label',\r\n      idPrefix,\r\n      index,\r\n      validateFactory\r\n    },\r\n    {\r\n      component: Value,\r\n      editField,\r\n      field,\r\n      id: idPrefix + '-value',\r\n      idPrefix,\r\n      index,\r\n      validateFactory\r\n    }\r\n  ];\r\n\r\n  return entries;\r\n}\r\n\r\nfunction Label(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id,\r\n    index,\r\n    validateFactory\r\n  } = props;\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  const setValue = (value, error) => {\r\n    if (error) {\r\n      return;\r\n    }\r\n\r\n    const values = get(field, [ 'values' ]);\r\n    return editField(field, 'values', set(values, [ index, 'label' ], value));\r\n  };\r\n\r\n  const getValue = () => {\r\n    return get(field, [ 'values', index, 'label' ]);\r\n  };\r\n\r\n  const validate = useMemo(\r\n    () =>\r\n      validateFactory(\r\n        get(field, [ 'values', index, 'label' ]),\r\n        (entry) => entry.label,\r\n      ),\r\n    [ field, index, validateFactory ],\r\n  );\r\n\r\n  return TextFieldEntry({\r\n    debounce,\r\n    element: field,\r\n    getValue,\r\n    id,\r\n    label: 'Název',\r\n    setValue,\r\n    validate\r\n  });\r\n}\r\n\r\nfunction Value(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id,\r\n    index,\r\n    validateFactory\r\n  } = props;\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  const setValue = (value, error) => {\r\n    if (error) {\r\n      return;\r\n    }\r\n\r\n    const values = get(field, [ 'values' ]);\r\n    return editField(field, 'values', set(values, [ index, 'value' ], value));\r\n  };\r\n\r\n  const getValue = () => {\r\n    return get(field, [ 'values', index, 'value' ]);\r\n  };\r\n\r\n  const validate = useMemo(\r\n    () =>\r\n      validateFactory(\r\n        get(field, [ 'values', index, 'value' ]),\r\n        (entry) => entry.value,\r\n      ),\r\n    [ field, index, validateFactory ],\r\n  );\r\n\r\n  return TextFieldEntry({\r\n    debounce,\r\n    element: field,\r\n    getValue,\r\n    id,\r\n    label: 'Hodnota',\r\n    setValue,\r\n    validate\r\n  });\r\n}","import { get } from 'min-dash';\r\n\r\nimport { useService } from '../hooks';\r\n\r\nimport { TextFieldEntry } from '@bpmn-io/properties-panel';\r\nimport { useMemo } from 'preact/hooks';\r\n\r\n\r\nexport function CustomValueEntry(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    idPrefix,\r\n    index,\r\n    validateFactory\r\n  } = props;\r\n\r\n  const entries = [\r\n    {\r\n      component: Key,\r\n      editField,\r\n      field,\r\n      id: idPrefix + '-key',\r\n      idPrefix,\r\n      index,\r\n      validateFactory\r\n    },\r\n    {\r\n      component: Value,\r\n      editField,\r\n      field,\r\n      id: idPrefix + '-value',\r\n      idPrefix,\r\n      index,\r\n      validateFactory\r\n    }\r\n  ];\r\n\r\n  return entries;\r\n}\r\n\r\nfunction Key(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id,\r\n    index,\r\n    validateFactory\r\n  } = props;\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  const setValue = (value, error) => {\r\n    if (error) {\r\n      return;\r\n    }\r\n\r\n    const properties = get(field, [ 'properties' ]);\r\n    const key = Object.keys(properties)[ index ];\r\n    return editField(field, 'properties', updateKey(properties, key, value));\r\n  };\r\n\r\n  const getValue = () => {\r\n    return Object.keys(get(field, [ 'properties' ]))[ index ];\r\n  };\r\n\r\n  const validate = useMemo(\r\n    () => validateFactory(Object.keys(get(field, [ 'properties' ]))[index]),\r\n    [ validateFactory, field, index ],\r\n  );\r\n\r\n\r\n  return TextFieldEntry({\r\n    debounce,\r\n    element: field,\r\n    getValue,\r\n    id,\r\n    label: 'Klíč',\r\n    setValue,\r\n    validate\r\n  });\r\n}\r\n\r\nfunction Value(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id,\r\n    index,\r\n    validateFactory\r\n  } = props;\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  const setValue = (value) => {\r\n    const properties = get(field, [ 'properties' ]);\r\n    const key = Object.keys(properties)[ index ];\r\n    editField(field, 'properties', updateValue(properties, key, value));\r\n  };\r\n\r\n  const getValue = () => {\r\n    const properties = get(field, [ 'properties' ]);\r\n    const key = Object.keys(properties)[ index ];\r\n    return get(field, [ 'properties', key ]);\r\n  };\r\n\r\n  return TextFieldEntry({\r\n    debounce,\r\n    element: field,\r\n    getValue,\r\n    id,\r\n    label: 'Hodnota',\r\n    setValue,\r\n    validate: validateFactory(getValue())\r\n  });\r\n}\r\n\r\n\r\n// helpers //////////\r\n\r\n/**\r\n * Returns copy of object with updated value.\r\n *\r\n * @param {Object} properties\r\n * @param {string} key\r\n * @param {string} value\r\n *\r\n * @returns {Object}\r\n */\r\nfunction updateValue(properties, key, value) {\r\n  return {\r\n    ...properties,\r\n    [ key ]: value\r\n  };\r\n}\r\n\r\n/**\r\n * Returns copy of object with updated key.\r\n *\r\n * @param {Object} properties\r\n * @param {string} oldKey\r\n * @param {string} newKey\r\n *\r\n * @returns {Object}\r\n */\r\nfunction updateKey(properties, oldKey, newKey) {\r\n  return Object.entries(properties).reduce((newProperties, entry) => {\r\n    const [ key, value ] = entry;\r\n\r\n    return {\r\n      ...newProperties,\r\n      [ key === oldKey ? newKey : key ]: value\r\n    };\r\n  }, {});\r\n}","import {\r\n  useEffect\r\n} from 'preact/hooks';\r\n\r\nimport {\r\n  SelectEntry,\r\n  usePrevious\r\n} from '@bpmn-io/properties-panel';\r\n\r\nimport { useService } from '../hooks';\r\n\r\n\r\nexport function AutoFocusSelectEntry(props) {\r\n  const {\r\n    autoFocusEntry,\r\n    element,\r\n    getValue\r\n  } = props;\r\n\r\n  const value = getValue(element);\r\n  const prevValue = usePrevious(value);\r\n\r\n  const eventBus = useService('eventBus');\r\n\r\n  // auto focus specifc other entry when selected value changed\r\n  useEffect(() => {\r\n    if (autoFocusEntry && prevValue && value !== prevValue) {\r\n\r\n      // @Note(pinussilvestrus): There is an issue in the properties\r\n      // panel so we have to wait a bit before showing the entry.\r\n      // Cf. https://github.com/camunda/linting/blob/4f5328e2722f73ae60ae584c5f576eaec3999cb2/lib/modeler/Linting.js#L37\r\n      setTimeout(() => {\r\n        eventBus.fire('propertiesPanel.showEntry', {\r\n          id: autoFocusEntry\r\n        });\r\n      });\r\n\r\n    }\r\n  }, [ value, autoFocusEntry, prevValue, eventBus ]);\r\n\r\n  return (\r\n    <SelectEntry { ...props } />\r\n  );\r\n}","import { isSelectEntryEdited } from '@bpmn-io/properties-panel';\r\n\r\nimport { AutoFocusSelectEntry } from '../components';\r\n\r\nimport {\r\n  getOptionsSource,\r\n  OPTIONS_SOURCES,\r\n  OPTIONS_SOURCES_DEFAULTS,\r\n  OPTIONS_SOURCES_LABELS,\r\n  OPTIONS_SOURCES_PATHS\r\n} from '@bpmn-io/form-js-viewer';\r\n\r\n\r\nexport function OptionsSourceSelectEntry(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n\r\n  return [\r\n    {\r\n      id: id + '-select',\r\n      component: ValuesSourceSelect,\r\n      isEdited: isSelectEntryEdited,\r\n      editField,\r\n      field\r\n    }\r\n  ];\r\n}\r\n\r\nfunction ValuesSourceSelect(props) {\r\n\r\n  const {\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n\r\n  const getValue = getOptionsSource;\r\n\r\n  const setValue = (value) => {\r\n\r\n    let newField = field;\r\n\r\n    const newProperties = {};\r\n\r\n    newProperties[OPTIONS_SOURCES_PATHS[value]] = OPTIONS_SOURCES_DEFAULTS[value];\r\n\r\n    newField = editField(field, newProperties);\r\n    return newField;\r\n  };\r\n\r\n  const getOptionsSourceOptions = () => {\r\n\r\n    return Object.values(OPTIONS_SOURCES).map((valueSource) => ({\r\n      label: OPTIONS_SOURCES_LABELS[valueSource],\r\n      value: valueSource\r\n    }));\r\n  };\r\n\r\n  return AutoFocusSelectEntry({\r\n    autoFocusEntry: getAutoFocusEntryId(field),\r\n    label: 'Typ',\r\n    element: field,\r\n    getOptions: getOptionsSourceOptions,\r\n    getValue,\r\n    id,\r\n    setValue\r\n  });\r\n}\r\n\r\n// helpers //////////\r\n\r\nfunction getAutoFocusEntryId(field) {\r\n  const valuesSource = getOptionsSource(field);\r\n\r\n  if (valuesSource === OPTIONS_SOURCES.EXPRESSION) {\r\n    return 'optionsExpression-expression';\r\n  } else if (valuesSource === OPTIONS_SOURCES.INPUT) {\r\n    return 'dynamicOptions-key';\r\n  } else if (valuesSource === OPTIONS_SOURCES.STATIC) {\r\n    return 'staticOptions-0-label';\r\n  }\r\n\r\n  return null;\r\n}\r\n","import { TextFieldEntry, isTextFieldEntryEdited } from '@bpmn-io/properties-panel';\r\nimport { get } from 'min-dash';\r\nimport { useService } from '../hooks';\r\nimport { OPTIONS_SOURCES, OPTIONS_SOURCES_PATHS } from '@bpmn-io/form-js-viewer';\r\n\r\n\r\nexport function InputKeyOptionsSourceEntry(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n\r\n  return [\r\n    {\r\n      id: id + '-key',\r\n      component: InputValuesKey,\r\n      isEdited: isTextFieldEntryEdited,\r\n      editField,\r\n      field,\r\n    }\r\n  ];\r\n}\r\n\r\nfunction InputValuesKey(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  const path = OPTIONS_SOURCES_PATHS[OPTIONS_SOURCES.INPUT];\r\n\r\n  const schema = '[\\n  {\\n    \"label\": \"dollar\",\\n    \"value\": \"$\"\\n  }\\n]';\r\n\r\n  const tooltip = <div>\r\n    Vstup může být pole jednoduchých hodnot nebo musí podléhat následujícímu schématu:\r\n    <pre><code>{schema}</code></pre>\r\n  </div>;\r\n\r\n  const getValue = () => get(field, path, '');\r\n\r\n  const setValue = (value, error) => {\r\n    if (error) {\r\n      return;\r\n    }\r\n\r\n    editField(field, path, value || '');\r\n  };\r\n\r\n  return TextFieldEntry({\r\n    debounce,\r\n    description: 'Klíč ze schématu formuláře obsahující možnosti.',\r\n    tooltip,\r\n    element: field,\r\n    getValue,\r\n    id,\r\n    label: 'Klíč vstupních hodnot',\r\n    setValue,\r\n    validate\r\n  });\r\n}\r\n\r\n\r\n// helpers //////////\r\n\r\n/**\r\n  * @param {string|void} value\r\n  * @returns {string|null}\r\n  */\r\nconst validate = (value) => {\r\n  if (typeof value !== 'string' || value.length === 0) {\r\n    return 'Hodnota nesmí být prázdná.';\r\n  }\r\n\r\n  if (/\\s/.test(value)) {\r\n    return 'Hodnota nesmí obsahovat mezery.';\r\n  }\r\n\r\n  return null;\r\n};\r\n","import { without } from 'min-dash';\r\nimport { arrayAdd } from '../Util';\r\nimport { ValueEntry } from './ValueEntry';\r\nimport { OPTIONS_SOURCES, OPTIONS_SOURCES_PATHS } from '@bpmn-io/form-js-viewer';\r\n\r\nexport function StaticOptionsSourceEntry(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id: idPrefix\r\n  } = props;\r\n\r\n  const {\r\n    values\r\n  } = field;\r\n\r\n  const addEntry = (e) => {\r\n\r\n    e.stopPropagation();\r\n\r\n    const index = values.length + 1;\r\n\r\n    const entry = getIndexedEntry(index, values);\r\n\r\n    editField(field, OPTIONS_SOURCES_PATHS[OPTIONS_SOURCES.STATIC], arrayAdd(values, values.length, entry));\r\n  };\r\n\r\n  const removeEntry = (entry) => {\r\n    editField(field, OPTIONS_SOURCES_PATHS[OPTIONS_SOURCES.STATIC], without(values, entry));\r\n  };\r\n\r\n  const validateFactory = (key, getValue) => {\r\n    return (value) => {\r\n      if (value === key) {\r\n        return;\r\n      }\r\n\r\n      if (typeof value !== 'string' || value.length === 0) {\r\n        return 'Hodnota nesmí být prázdná.';\r\n      }\r\n\r\n      const isValueAssigned = values.find(entry => getValue(entry) === value);\r\n\r\n      if (isValueAssigned) {\r\n        return 'Hodnota musí být unikátní.';\r\n      }\r\n    };\r\n  };\r\n\r\n  const items = values.map((entry, index) => {\r\n    const id = idPrefix + '-' + index;\r\n\r\n    return {\r\n      id,\r\n      label: entry.label,\r\n      entries: ValueEntry({\r\n        editField,\r\n        field,\r\n        idPrefix: id,\r\n        index,\r\n        validateFactory\r\n      }),\r\n      autoFocusEntry: id + '-label',\r\n      remove: () => removeEntry(entry)\r\n    };\r\n  });\r\n\r\n  return {\r\n    items,\r\n    add: addEntry,\r\n    shouldSort: false\r\n  };\r\n}\r\n\r\n\r\n// helper\r\n\r\nfunction getIndexedEntry(index, values) {\r\n  const entry = {\r\n    label: 'Možnost',\r\n    value: 'moznost'\r\n  };\r\n\r\n  while (labelOrValueIsAlreadyAssignedForIndex(index, values)) {\r\n    index++;\r\n  }\r\n\r\n  if (index > 1) {\r\n    entry.label += ` ${index}`;\r\n    entry.value += `${index}`;\r\n  }\r\n\r\n  return entry;\r\n}\r\n\r\nfunction labelOrValueIsAlreadyAssignedForIndex(index, values) {\r\n  return values.some(existingEntry =>\r\n    existingEntry.label === `Možnost ${index}` ||\r\n    existingEntry.value === `moznost${index}`);\r\n}","import { FeelTemplatingEntry, isFeelEntryEdited } from '@bpmn-io/properties-panel';\r\n\r\nimport { get, set } from 'min-dash';\r\nimport { useService, useVariables } from '../hooks';\r\n\r\nexport function AdornerEntry(props) {\r\n  const {\r\n    editField,\r\n    field\r\n  } = props;\r\n\r\n  const entries = [];\r\n\r\n  const onChange = (key) => {\r\n    return (value) => {\r\n      const appearance = get(field, [ 'appearance' ], {});\r\n\r\n      editField(field, [ 'appearance' ], set(appearance, [ key ], value));\r\n    };\r\n  };\r\n\r\n  const getValue = (key) => {\r\n    return () => {\r\n      return get(field, [ 'appearance', key ]);\r\n    };\r\n  };\r\n\r\n  entries.push({\r\n    id: 'prefix-adorner',\r\n    component: PrefixAdorner,\r\n    isEdited: isFeelEntryEdited,\r\n    editField,\r\n    field,\r\n    onChange,\r\n    getValue,\r\n    isDefaultVisible: (field) => [ 'number', 'textfield' ].includes(field.type)\r\n  });\r\n\r\n  entries.push({\r\n    id: 'suffix-adorner',\r\n    component: SuffixAdorner,\r\n    isEdited: isFeelEntryEdited,\r\n    editField,\r\n    field,\r\n    onChange,\r\n    getValue,\r\n    isDefaultVisible: (field) => [ 'number', 'textfield' ].includes(field.type)\r\n  });\r\n\r\n  return entries;\r\n}\r\n\r\nfunction PrefixAdorner(props) {\r\n  const {\r\n    field,\r\n    id,\r\n    onChange,\r\n    getValue\r\n  } = props;\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  const variables = useVariables().map(name => ({ name }));\r\n\r\n  return FeelTemplatingEntry({\r\n    debounce,\r\n    element: field,\r\n    feel: 'optional',\r\n    getValue: getValue('prefixAdorner'),\r\n    id,\r\n    label: 'Předpona',\r\n    setValue: onChange('prefixAdorner'),\r\n    singleLine: true,\r\n    variables\r\n  });\r\n}\r\n\r\nfunction SuffixAdorner(props) {\r\n  const {\r\n    field,\r\n    id,\r\n    onChange,\r\n    getValue\r\n  } = props;\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  const variables = useVariables().map(name => ({ name }));\r\n\r\n  return FeelTemplatingEntry({\r\n    debounce,\r\n    element: field,\r\n    getValue: getValue('suffixAdorner'),\r\n    id,\r\n    label: 'Přípona',\r\n    setValue: onChange('suffixAdorner'),\r\n    singleLine: true,\r\n    variables\r\n  });\r\n}","import { get } from 'min-dash';\r\n\r\nimport { INPUTS } from '../Util';\r\n\r\nimport { useService, useVariables } from '../hooks';\r\n\r\nimport { FeelToggleSwitchEntry, isFeelEntryEdited } from '@bpmn-io/properties-panel';\r\n\r\n\r\nexport function ReadonlyEntry(props) {\r\n  const {\r\n    editField,\r\n    field\r\n  } = props;\r\n\r\n  const {\r\n    disabled\r\n  } = field;\r\n\r\n  const entries = [];\r\n\r\n  if (!disabled) {\r\n    entries.push({\r\n      id: 'readonly',\r\n      component: Readonly,\r\n      editField: editField,\r\n      field: field,\r\n      isEdited: isFeelEntryEdited,\r\n      isDefaultVisible: (field) => INPUTS.includes(field.type)\r\n    });\r\n  }\r\n\r\n  return entries;\r\n}\r\n\r\nfunction Readonly(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  const variables = useVariables().map(name => ({ name }));\r\n\r\n  const path = [ 'readonly' ];\r\n\r\n  const getValue = () => {\r\n    return get(field, path, '');\r\n  };\r\n\r\n  const setValue = (value) => {\r\n    return editField(field, path, value || false);\r\n  };\r\n\r\n  return FeelToggleSwitchEntry({\r\n    debounce,\r\n    element: field,\r\n    feel: 'optional',\r\n    getValue,\r\n    id,\r\n    label: 'Pouze pro čtení',\r\n    tooltip: 'Obsah pole nelze upravit, ale data se odešlou.',\r\n    setValue,\r\n    variables\r\n  });\r\n}","import { simpleSelectEntryFactory } from './factories';\r\n\r\nexport function LayouterAppearanceEntry(props) {\r\n  const {\r\n    field\r\n  } = props;\r\n\r\n  if (![ 'group', 'dynamiclist' ].includes(field.type)) {\r\n    return [];\r\n  }\r\n\r\n  const entries = [\r\n    simpleSelectEntryFactory({\r\n      id: 'verticalAlignment',\r\n      path: [ 'verticalAlignment' ],\r\n      label: 'Vertikální zarovnání',\r\n      optionsArray: [\r\n        { value: 'start', label: 'Horní okraj' },\r\n        { value: 'center', label: 'Střed' },\r\n        { value: 'end', label: 'Dolní okraj' }\r\n      ],\r\n      props\r\n    }),\r\n  ];\r\n\r\n  return entries;\r\n}","import { simpleRangeIntegerEntryFactory, simpleBoolEntryFactory } from './factories';\r\n\r\nexport function RepeatableEntry(props) {\r\n  const {\r\n    field,\r\n    getService\r\n  } = props;\r\n\r\n  const {\r\n    type\r\n  } = field;\r\n\r\n  const formFieldDefinition = getService('formFields').get(type);\r\n\r\n  if (!formFieldDefinition || !formFieldDefinition.config.repeatable) {\r\n    return [];\r\n  }\r\n\r\n  const entries = [\r\n    simpleRangeIntegerEntryFactory({\r\n      id: 'defaultRepetitions',\r\n      path: [ 'defaultRepetitions' ],\r\n      label: 'Výchozí počet položek',\r\n      min: 1,\r\n      max: 20,\r\n      props\r\n    }),\r\n    simpleBoolEntryFactory({\r\n      id: 'allowAddRemove',\r\n      path: [ 'allowAddRemove' ],\r\n      label: 'Povolit přidání/mazání',\r\n      props\r\n    }),\r\n    simpleBoolEntryFactory({\r\n      id: 'disableCollapse',\r\n      path: [ 'disableCollapse' ],\r\n      label: 'Zakázat sbalení seznamu',\r\n      props\r\n    })\r\n  ];\r\n\r\n  if (!field.disableCollapse) {\r\n    const nonCollapseItemsEntry = simpleRangeIntegerEntryFactory({\r\n      id: 'nonCollapsedItems',\r\n      path: [ 'nonCollapsedItems' ],\r\n      label: 'Počet rozbalených položek',\r\n      min: 1,\r\n      defaultValue: 5,\r\n      props\r\n    });\r\n\r\n    entries.push(nonCollapseItemsEntry);\r\n  }\r\n\r\n  return entries;\r\n}","import { FeelEntry, isFeelEntryEdited } from '@bpmn-io/properties-panel';\r\nimport { get } from 'min-dash';\r\n\r\nimport { useService, useVariables } from '../hooks';\r\n\r\nexport function ConditionEntry(props) {\r\n  const {\r\n    editField,\r\n    field\r\n  } = props;\r\n\r\n  return [\r\n    {\r\n      id: 'conditional-hide',\r\n      component: Condition,\r\n      editField: editField,\r\n      field: field,\r\n      isEdited: isFeelEntryEdited\r\n    }\r\n  ];\r\n}\r\n\r\n\r\nfunction Condition(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  const variables = useVariables().map(name => ({ name }));\r\n\r\n  const path = [ 'conditional', 'hide' ];\r\n\r\n  const getValue = () => {\r\n    return get(field, path, '');\r\n  };\r\n\r\n  const setValue = (value) => {\r\n    if (!value) {\r\n      return editField(field, 'conditional', undefined);\r\n    }\r\n\r\n    return editField(field, 'conditional', { hide: value });\r\n  };\r\n\r\n  let label = 'Skrýt pokud';\r\n  let description = 'Podmínka, při které zůstane komponent skrytý.';\r\n\r\n  // special case for expression fields which do not render\r\n  if (field.type === 'expression') {\r\n    label = 'Deaktivovat pokud';\r\n    description = 'Podmínka, při které zůstane výraz deaktivovaný.';\r\n  }\r\n\r\n  return FeelEntry({\r\n    debounce,\r\n    description,\r\n    element: field,\r\n    feel: 'required',\r\n    getValue,\r\n    id,\r\n    label,\r\n    setValue,\r\n    variables\r\n  });\r\n}\r\n","import { FeelEntry, isFeelEntryEdited } from '@bpmn-io/properties-panel';\r\nimport { get } from 'min-dash';\r\nimport { useService, useVariables } from '../hooks';\r\nimport { OPTIONS_SOURCES, OPTIONS_SOURCES_PATHS } from '@bpmn-io/form-js-viewer';\r\n\r\nexport function OptionsExpressionEntry(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n\r\n  return [\r\n    {\r\n      id: id + '-expression',\r\n      component: OptionsExpression,\r\n      isEdited: isFeelEntryEdited,\r\n      editField,\r\n      field\r\n    }\r\n  ];\r\n}\r\n\r\nfunction OptionsExpression(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  const variables = useVariables().map(name => ({ name }));\r\n\r\n  const path = OPTIONS_SOURCES_PATHS[OPTIONS_SOURCES.EXPRESSION];\r\n\r\n  const schema = '[\\n  {\\n    \"label\": \"dollar\",\\n    \"value\": \"$\"\\n  }\\n]';\r\n\r\n  const tooltip = <div>\r\n    Výsledek výrazu může být pole jednoduchých hodnot nebo musí podléhat následujícímu schématu:\r\n    <pre><code>{schema}</code></pre>\r\n  </div>;\r\n\r\n  const getValue = () => get(field, path, '');\r\n\r\n  const setValue = (value) => editField(field, path, value || '');\r\n\r\n  return FeelEntry({\r\n    debounce,\r\n    description: 'Výraz, který naplní seznam možností.',\r\n    tooltip,\r\n    element: field,\r\n    feel: 'required',\r\n    getValue,\r\n    id,\r\n    label: 'Výraz',\r\n    setValue,\r\n    variables\r\n  });\r\n}\r\n","import { get, isString } from 'min-dash';\r\n\r\nimport { hasIntegerPathSegment, isValidDotPath } from '../Util';\r\n\r\nimport { useService, useVariables } from '../hooks';\r\n\r\nimport { FeelTemplatingEntry, isFeelEntryEdited } from '@bpmn-io/properties-panel';\r\n\r\nexport function TableDataSourceEntry(props) {\r\n  const {\r\n    editField,\r\n    field\r\n  } = props;\r\n\r\n  const entries = [];\r\n  entries.push({\r\n    id: 'dataSource',\r\n    component: Source,\r\n    editField: editField,\r\n    field: field,\r\n    isEdited: isFeelEntryEdited,\r\n    isDefaultVisible: (field) => field.type === 'table'\r\n  });\r\n\r\n  return entries;\r\n}\r\n\r\nfunction Source(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  const variables = useVariables().map(name => ({ name }));\r\n\r\n  const path = [ 'dataSource' ];\r\n\r\n  const getValue = () => {\r\n\r\n    return get(field, path, field.id);\r\n  };\r\n\r\n  const setValue = (value, error) => {\r\n    if (error) {\r\n      return;\r\n    }\r\n\r\n    editField(field, path, value);\r\n  };\r\n\r\n  return FeelTemplatingEntry({\r\n    debounce,\r\n    description: 'Uveďte zdroj dat pro naplnění tabulky',\r\n    element: field,\r\n    feel: 'required',\r\n    getValue,\r\n    id,\r\n    label: 'Zdroj dat',\r\n    tooltip: 'Zadejte vstupní proměnnou formuláře, která obsahuje data pro tabulku, nebo definujte výraz pro dynamické naplnění.',\r\n    setValue,\r\n    singleLine: true,\r\n    variables,\r\n    validate,\r\n  });\r\n}\r\n\r\n\r\n// helper ////////////////\r\n\r\n/**\r\n   * @param {string|void} value\r\n   * @returns {string|null}\r\n   */\r\nconst validate = (value) => {\r\n\r\n  if (!isString(value) || value.length === 0) {\r\n    return 'Must not be empty.';\r\n  }\r\n\r\n  if (value.startsWith('=')) {\r\n    return null;\r\n  }\r\n\r\n  if (!isValidDotPath(value)) {\r\n    return 'Must be a variable or a dot separated path.';\r\n  }\r\n\r\n  if (hasIntegerPathSegment(value)) {\r\n    return 'Must not contain numerical path segments.';\r\n  }\r\n\r\n  return null;\r\n};\r\n","import { get, isNumber } from 'min-dash';\r\n\r\nimport { ToggleSwitchEntry, isToggleSwitchEntryEdited } from '@bpmn-io/properties-panel';\r\n\r\n\r\nexport function PaginationEntry(props) {\r\n  const {\r\n    editField,\r\n    field\r\n  } = props;\r\n\r\n  const entries = [];\r\n\r\n  entries.push({\r\n    id: 'pagination',\r\n    component: Pagination,\r\n    editField: editField,\r\n    field: field,\r\n    isEdited: isToggleSwitchEntryEdited,\r\n    isDefaultVisible: (field) => field.type === 'table'\r\n  });\r\n\r\n  return entries;\r\n}\r\n\r\nfunction Pagination(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n  const defaultRowCount = 10;\r\n\r\n  const path = [ 'rowCount' ];\r\n\r\n  const getValue = () => {\r\n    return isNumber(get(field, path));\r\n  };\r\n\r\n  /**\r\n    * @param {boolean} value\r\n    */\r\n  const setValue = (value) => {\r\n    value ? editField(field, path, defaultRowCount) : editField(field, path, undefined);\r\n  };\r\n\r\n  return ToggleSwitchEntry({\r\n    element: field,\r\n    getValue,\r\n    id,\r\n    label: 'Stránkování',\r\n    inline: true,\r\n    setValue,\r\n  });\r\n}","import { NumberFieldEntry, isNumberFieldEntryEdited } from '@bpmn-io/properties-panel';\r\n\r\nimport { get, isNumber, isNil } from 'min-dash';\r\n\r\nimport { useService } from '../hooks';\r\n\r\nconst path = [ 'rowCount' ];\r\n\r\nexport function RowCountEntry(props) {\r\n  const {\r\n    editField,\r\n    field\r\n  } = props;\r\n\r\n  const entries = [];\r\n\r\n  entries.push({\r\n    id: 'rowCount',\r\n    component: RowCount,\r\n    isEdited: isNumberFieldEntryEdited,\r\n    editField,\r\n    field,\r\n    isDefaultVisible: (field) => field.type === 'table' && isNumber(get(field, path))\r\n  });\r\n\r\n  return entries;\r\n}\r\n\r\nfunction RowCount(props) {\r\n\r\n  const {\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  const getValue = () => get(field, path);\r\n\r\n  /**\r\n   * @param {number|void} value\r\n   * @param {string|null} error\r\n   * @returns {void}\r\n   */\r\n  const setValue = (value, error) => {\r\n    if (error) {\r\n      return;\r\n    }\r\n\r\n    editField(field, path, value);\r\n  };\r\n\r\n  return NumberFieldEntry({\r\n    debounce,\r\n    label: 'Počet řádků na stránce',\r\n    element: field,\r\n    id,\r\n    getValue,\r\n    setValue,\r\n    validate\r\n  });\r\n}\r\n\r\n\r\n// helpers //////////\r\n\r\n/**\r\n   * @param {string|void} value\r\n   * @returns {string|null}\r\n   */\r\nconst validate = (value) => {\r\n\r\n  if (isNil(value)) {\r\n    return null;\r\n  }\r\n\r\n  if (!isNumber(value)) {\r\n    return 'Hodnota musí být číslo.';\r\n  }\r\n\r\n  if (!Number.isInteger(value)) {\r\n    return 'Hodnota musí být platné celé číslo.';\r\n  }\r\n\r\n  if (value < 1) {\r\n    return 'Hodnota musí být větší než 0.';\r\n  }\r\n\r\n  return null;\r\n};","import { isSelectEntryEdited } from '@bpmn-io/properties-panel';\r\n\r\nimport { AutoFocusSelectEntry } from '../components';\r\n\r\nimport { get, isString, isArray } from 'min-dash';\r\n\r\n\r\nconst OPTIONS = {\r\n  static: {\r\n    label: 'Seznam položek',\r\n    value: 'static'\r\n  },\r\n  expression: {\r\n    label: 'Výraz',\r\n    value: 'expression'\r\n  }\r\n};\r\n\r\nconst SELECT_OPTIONS = Object.values(OPTIONS);\r\n\r\nconst COLUMNS_PATH = [ 'columns' ];\r\n\r\nconst COLUMNS_EXPRESSION_PATH = [ 'columnsExpression' ];\r\n\r\nexport function HeadersSourceSelectEntry(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n\r\n  return [\r\n    {\r\n      id: id + '-select',\r\n      component: HeadersSourceSelect,\r\n      isEdited: isSelectEntryEdited,\r\n      editField,\r\n      field\r\n    }\r\n  ];\r\n}\r\n\r\nfunction HeadersSourceSelect(props) {\r\n\r\n  const {\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n\r\n  /**\r\n   * @returns {string|void}\r\n   */\r\n  const getValue = () => {\r\n    const columns = get(field, COLUMNS_PATH);\r\n    const columnsExpression = get(field, COLUMNS_EXPRESSION_PATH);\r\n\r\n    if (isString(columnsExpression)) {\r\n      return OPTIONS.expression.value;\r\n    }\r\n\r\n    if (isArray(columns)) {\r\n      return OPTIONS.static.value;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * @param {string|void} value\r\n   */\r\n  const setValue = (value) => {\r\n    switch (value) {\r\n    case OPTIONS.static.value:\r\n      editField(field, {\r\n        columns: [\r\n          {\r\n            label: 'Sloupec',\r\n            key: 'inputVariable'\r\n          }\r\n        ]\r\n      });\r\n      break;\r\n    case OPTIONS.expression.value:\r\n      editField(field, {\r\n        columnsExpression: '=',\r\n      });\r\n      break;\r\n    }\r\n  };\r\n\r\n  const getValuesSourceOptions = () => {\r\n\r\n    return SELECT_OPTIONS;\r\n  };\r\n\r\n  return AutoFocusSelectEntry({\r\n    autoFocusEntry: getAutoFocusEntryId(field),\r\n    label: 'Typ',\r\n    element: field,\r\n    getOptions: getValuesSourceOptions,\r\n    getValue,\r\n    id,\r\n    setValue\r\n  });\r\n}\r\n\r\n// helpers //////////\r\n\r\nfunction getAutoFocusEntryId(field) {\r\n  const columns = get(field, COLUMNS_PATH);\r\n  const columnsExpression = get(field, COLUMNS_EXPRESSION_PATH);\r\n\r\n  if (isString(columnsExpression)) {\r\n    return `${field.id}-columnsExpression`;\r\n  }\r\n\r\n  if (isArray(columns)) {\r\n    return `${field.id}-columns-0-label`;\r\n  }\r\n\r\n  return null;\r\n}\r\n","import { get, isString } from 'min-dash';\r\n\r\nimport { useService, useVariables } from '../hooks';\r\n\r\nimport { FeelTemplatingEntry, isFeelEntryEdited } from '@bpmn-io/properties-panel';\r\n\r\nconst PATH = [ 'columnsExpression' ];\r\n\r\nexport function ColumnsExpressionEntry(props) {\r\n  const {\r\n    editField,\r\n    field\r\n  } = props;\r\n\r\n  const entries = [];\r\n  entries.push({\r\n    id: `${field.id}-columnsExpression`,\r\n    component: ColumnsExpression,\r\n    editField: editField,\r\n    field: field,\r\n    isEdited: isFeelEntryEdited,\r\n    isDefaultVisible: (field) => field.type === 'table' && isString(get(field, PATH))\r\n  });\r\n\r\n  return entries;\r\n}\r\n\r\nfunction ColumnsExpression(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id\r\n  } = props;\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  const variables = useVariables().map(name => ({ name }));\r\n\r\n  const getValue = () => {\r\n\r\n    return get(field, PATH);\r\n  };\r\n\r\n  /**\r\n    * @param {string|void} value\r\n    * @param {string|void} error\r\n    * @returns {void}\r\n    */\r\n  const setValue = (value, error) => {\r\n    if (error) {\r\n      return;\r\n    }\r\n\r\n    editField(field, PATH, value);\r\n  };\r\n\r\n  const schema = '[\\n  {\\n    \"key\": \"column_1\",\\n    \"label\": \"Column 1\"\\n  }\\n]';\r\n\r\n  const tooltip = <div>\r\n    Výsledek výrazu může být pole jednoduchých hodnot nebo musí podléhat následujícímu schématu:\r\n    <pre><code>{schema}</code></pre>\r\n  </div>;\r\n\r\n\r\n  return FeelTemplatingEntry({\r\n    debounce,\r\n    description: 'Výraz pro naplnění záhlaví',\r\n    element: field,\r\n    feel: 'required',\r\n    getValue,\r\n    id,\r\n    label: 'Výraz',\r\n    tooltip,\r\n    setValue,\r\n    singleLine: true,\r\n    variables,\r\n    validate,\r\n  });\r\n}\r\n\r\n\r\n// helpers //////////\r\n\r\n/**\r\n   * @param {string|void} value\r\n   * @returns {string|null}\r\n   */\r\nconst validate = (value) => {\r\n\r\n  if (!isString(value) || value.length === 0 || value === '=') {\r\n    return 'Hodnota nesmí být prázdná.';\r\n  }\r\n\r\n  return null;\r\n};\r\n","import {\r\n  get,\r\n  set,\r\n  isString\r\n} from 'min-dash';\r\n\r\nimport { useService } from '../hooks';\r\n\r\nimport { TextFieldEntry } from '@bpmn-io/properties-panel';\r\n\r\nconst path = 'columns';\r\nconst labelPath = 'label';\r\nconst keyPath = 'key';\r\n\r\nexport function ColumnEntry(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    idPrefix,\r\n    index\r\n  } = props;\r\n\r\n  const entries = [\r\n    {\r\n      component: Label,\r\n      editField,\r\n      field,\r\n      id: idPrefix + '-label',\r\n      idPrefix,\r\n      index\r\n    },\r\n    {\r\n      component: Key,\r\n      editField,\r\n      field,\r\n      id: idPrefix + '-key',\r\n      idPrefix,\r\n      index\r\n    }\r\n  ];\r\n\r\n  return entries;\r\n}\r\n\r\nfunction Label(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id,\r\n    index\r\n  } = props;\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  /**\r\n    * @param {string|void} value\r\n    * @param {string|void} error\r\n    * @returns {void}\r\n    */\r\n  const setValue = (value, error) => {\r\n    if (error) {\r\n      return;\r\n    }\r\n\r\n    const columns = get(field, [ path ]);\r\n    editField(field, path, set(columns, [ index, labelPath ], value));\r\n  };\r\n\r\n  const getValue = () => {\r\n    return get(field, [ path, index, labelPath ]);\r\n  };\r\n\r\n  return TextFieldEntry({\r\n    debounce,\r\n    element: field,\r\n    getValue,\r\n    id,\r\n    label: 'Název',\r\n    setValue\r\n  });\r\n}\r\n\r\nfunction Key(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id,\r\n    index\r\n  } = props;\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  /**\r\n    * @param {string|void} value\r\n    * @param {string|void} error\r\n    * @returns {void}\r\n    */\r\n  const setValue = (value, error) => {\r\n    if (error) {\r\n      return;\r\n    }\r\n\r\n    const columns = get(field, [ path ]);\r\n    editField(field, path, set(columns, [ index, keyPath ], value));\r\n  };\r\n\r\n  const getValue = () => {\r\n    return get(field, [ path, index, keyPath ]);\r\n  };\r\n\r\n  return TextFieldEntry({\r\n    debounce,\r\n    element: field,\r\n    getValue,\r\n    id,\r\n    label: 'Klíč',\r\n    setValue,\r\n    validate\r\n  });\r\n}\r\n\r\n\r\n// helpers //////////////////////\r\n\r\n/**\r\n  * @param {string|void} value\r\n  * @returns {string|null}\r\n  */\r\nfunction validate(value) {\r\n  if (!isString(value) || value.length === 0) {\r\n    return 'Hodnota nesmí být prázdná.';\r\n  }\r\n\r\n  return null;\r\n}","import { without } from 'min-dash';\r\nimport { arrayAdd } from '../Util';\r\nimport { ColumnEntry } from './ColumnEntry';\r\n\r\nconst path = [ 'columns' ];\r\n\r\nexport function StaticColumnsSourceEntry(props) {\r\n  const {\r\n    editField,\r\n    field,\r\n    id: idPrefix\r\n  } = props;\r\n\r\n  const {\r\n    columns\r\n  } = field;\r\n\r\n  const addEntry = (event) => {\r\n\r\n    event.stopPropagation();\r\n\r\n    const entry = {\r\n      label: 'Sloupec',\r\n      key: 'inputVariable'\r\n    };\r\n\r\n    editField(field, path, arrayAdd(columns, columns.length, entry));\r\n  };\r\n\r\n  const removeEntry = (entry) => {\r\n    editField(field, path, without(columns, entry));\r\n  };\r\n\r\n  const items = columns.map((entry, index) => {\r\n    const id = `${idPrefix}-${index}`;\r\n\r\n    return {\r\n      id,\r\n      label: entry.label || entry.key,\r\n      entries: ColumnEntry({\r\n        editField,\r\n        field,\r\n        idPrefix: id,\r\n        index\r\n      }),\r\n      autoFocusEntry: `${id}-label`,\r\n      remove: () => removeEntry(entry)\r\n    };\r\n  });\r\n\r\n  return {\r\n    items,\r\n    add: addEntry,\r\n    shouldSort: false\r\n  };\r\n}\r\n","import {\r\n  ActionEntry,\r\n  AltTextEntry,\r\n  DescriptionEntry,\r\n  DefaultValueEntry,\r\n  DisabledEntry,\r\n  IdEntry,\r\n  IFrameUrlEntry,\r\n  IFrameHeightEntry,\r\n  ImageSourceEntry,\r\n  KeyEntry,\r\n  PathEntry,\r\n  RepeatableEntry,\r\n  LabelEntry,\r\n  ReadonlyEntry,\r\n  SelectEntries,\r\n  TextEntry,\r\n  HtmlEntry,\r\n  HeightEntry,\r\n  NumberEntries,\r\n  ExpressionFieldEntries,\r\n  DateTimeEntry,\r\n  TableDataSourceEntry,\r\n  PaginationEntry,\r\n  RowCountEntry\r\n} from '../entries';\r\n\r\n\r\nexport function GeneralGroup(field, editField, getService) {\r\n\r\n  const entries = [\r\n    ...IdEntry({ field, editField }),\r\n    ...LabelEntry({ field, editField }),\r\n    ...DescriptionEntry({ field, editField }),\r\n    ...KeyEntry({ field, editField, getService }),\r\n    ...PathEntry({ field, editField, getService }),\r\n    ...RepeatableEntry({ field, editField, getService }),\r\n    ...DefaultValueEntry({ field, editField }),\r\n    ...ActionEntry({ field, editField }),\r\n    ...DateTimeEntry({ field, editField }),\r\n    ...TextEntry({ field, editField, getService }),\r\n    ...HtmlEntry({ field, editField, getService }),\r\n    ...IFrameUrlEntry({ field, editField }),\r\n    ...IFrameHeightEntry({ field, editField }),\r\n    ...HeightEntry({ field, editField }),\r\n    ...NumberEntries({ field, editField }),\r\n    ...ExpressionFieldEntries({ field, editField }),\r\n    ...ImageSourceEntry({ field, editField }),\r\n    ...AltTextEntry({ field, editField }),\r\n    ...SelectEntries({ field, editField }),\r\n    ...DisabledEntry({ field, editField }),\r\n    ...ReadonlyEntry({ field, editField }),\r\n    ...TableDataSourceEntry({ field, editField }),\r\n    ...PaginationEntry({ field, editField }),\r\n    ...RowCountEntry({ field, editField })\r\n  ];\r\n\r\n  if (entries.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  return {\r\n    id: 'general',\r\n    label: 'Obecné',\r\n    entries\r\n  };\r\n}","import {\r\n  NumberSerializationEntry,\r\n  DateTimeFormatEntry\r\n} from '../entries';\r\n\r\n\r\nexport function SerializationGroup(field, editField) {\r\n\r\n  const entries = [\r\n    ...NumberSerializationEntry({ field, editField }),\r\n    ...DateTimeFormatEntry({ field, editField })\r\n  ];\r\n\r\n  if (!entries.length) {\r\n    return null;\r\n  }\r\n\r\n  return {\r\n    id: 'serialization',\r\n    label: 'Serializace',\r\n    entries\r\n  };\r\n}","import {\r\n  DateTimeConstraintsEntry\r\n} from '../entries';\r\n\r\n\r\nexport function ConstraintsGroup(field, editField) {\r\n\r\n  const entries = [\r\n    ...DateTimeConstraintsEntry({ field, editField })\r\n  ];\r\n\r\n  if (!entries.length) {\r\n    return null;\r\n  }\r\n\r\n  return {\r\n    id: 'constraints',\r\n    label: 'Omezení',\r\n    entries\r\n  };\r\n}","import {\r\n  get,\r\n  set\r\n} from 'min-dash';\r\n\r\nimport {\r\n  CheckboxEntry,\r\n  isCheckboxEntryEdited,\r\n  isFeelEntryEdited,\r\n  FeelNumberEntry,\r\n  isTextFieldEntryEdited,\r\n  TextFieldEntry,\r\n  SelectEntry\r\n} from '@bpmn-io/properties-panel';\r\n\r\nimport { useService, useVariables } from '../hooks';\r\n\r\nimport { INPUTS } from '../Util';\r\n\r\nconst VALIDATION_TYPE_OPTIONS = {\r\n  custom: {\r\n    value: '',\r\n    label: 'Vlastní',\r\n  },\r\n  email: {\r\n    value: 'email',\r\n    label: 'Email',\r\n  },\r\n  phone: {\r\n    value: 'phone',\r\n    label: 'Telefon',\r\n  },\r\n};\r\n\r\nexport function ValidationGroup(field, editField) {\r\n  const { type } = field;\r\n  const validate = get(field, [ 'validate' ], {});\r\n  const isCustomValidation = [ undefined, VALIDATION_TYPE_OPTIONS.custom.value ].includes(validate.validationType);\r\n\r\n  const onChange = (key) => {\r\n    return (value) => {\r\n      const validate = get(field, [ 'validate' ], {});\r\n\r\n      editField(field, [ 'validate' ], set(validate, [ key ], value));\r\n    };\r\n  };\r\n\r\n  const getValue = (key) => {\r\n    return () => {\r\n      return get(field, [ 'validate', key ]);\r\n    };\r\n  };\r\n\r\n  let entries = [\r\n    {\r\n      id: 'required',\r\n      component: Required,\r\n      getValue,\r\n      field,\r\n      isEdited: isCheckboxEntryEdited,\r\n      onChange,\r\n      isDefaultVisible: (field) => INPUTS.includes(field.type)\r\n    }\r\n  ];\r\n\r\n  entries.push(\r\n    {\r\n      id: 'validationType',\r\n      component: ValidationType,\r\n      getValue,\r\n      field,\r\n      editField,\r\n      isEdited: isTextFieldEntryEdited,\r\n      onChange,\r\n      isDefaultVisible: (field) => field.type === 'textfield'\r\n    }\r\n  );\r\n\r\n  entries.push(\r\n    {\r\n      id: 'minLength',\r\n      component: MinLength,\r\n      getValue,\r\n      field,\r\n      isEdited: isFeelEntryEdited,\r\n      onChange,\r\n      isDefaultVisible: (field) => INPUTS.includes(field.type) && (\r\n        type === 'textarea' || (type === 'textfield' && isCustomValidation)\r\n      )\r\n    },\r\n    {\r\n      id: 'maxLength',\r\n      component: MaxLength,\r\n      getValue,\r\n      field,\r\n      isEdited: isFeelEntryEdited,\r\n      onChange,\r\n      isDefaultVisible: (field) => INPUTS.includes(field.type) && (\r\n        type === 'textarea' || (type === 'textfield' && isCustomValidation)\r\n      )\r\n    }\r\n  );\r\n\r\n  entries.push(\r\n    {\r\n      id: 'pattern',\r\n      component: Pattern,\r\n      getValue,\r\n      field,\r\n      isEdited: isTextFieldEntryEdited,\r\n      onChange,\r\n      isDefaultVisible: (field) => INPUTS.includes(field.type) && (\r\n        type === 'textfield' && isCustomValidation\r\n      )\r\n    }\r\n  );\r\n\r\n  entries.push(\r\n    {\r\n      id: 'min',\r\n      component: Min,\r\n      getValue,\r\n      field,\r\n      isEdited: isFeelEntryEdited,\r\n      onChange,\r\n      isDefaultVisible: (field) => field.type === 'number'\r\n    },\r\n    {\r\n      id: 'max',\r\n      component: Max,\r\n      getValue,\r\n      field,\r\n      isEdited: isFeelEntryEdited,\r\n      onChange,\r\n      isDefaultVisible: (field) => field.type === 'number'\r\n    }\r\n  );\r\n\r\n  return {\r\n    id: 'validation',\r\n    label: 'Validace',\r\n    entries\r\n  };\r\n}\r\n\r\nfunction Required(props) {\r\n  const {\r\n    field,\r\n    getValue,\r\n    id,\r\n    onChange\r\n  } = props;\r\n\r\n  return CheckboxEntry({\r\n    element: field,\r\n    getValue: getValue('required'),\r\n    id,\r\n    label: 'Povinné',\r\n    setValue: onChange('required')\r\n  });\r\n}\r\n\r\nfunction MinLength(props) {\r\n  const {\r\n    field,\r\n    getValue,\r\n    id,\r\n    onChange\r\n  } = props;\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  const variables = useVariables().map(name => ({ name }));\r\n\r\n  return FeelNumberEntry({\r\n    debounce,\r\n    element: field,\r\n    feel: 'optional',\r\n    getValue: getValue('minLength'),\r\n    id,\r\n    label: 'Minimální délka',\r\n    min: 0,\r\n    setValue: onChange('minLength'),\r\n    variables\r\n  });\r\n}\r\n\r\nfunction MaxLength(props) {\r\n  const {\r\n    field,\r\n    getValue,\r\n    id,\r\n    onChange\r\n  } = props;\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  const variables = useVariables().map(name => ({ name }));\r\n\r\n  return FeelNumberEntry({\r\n    debounce,\r\n    element: field,\r\n    feel: 'optional',\r\n    getValue: getValue('maxLength'),\r\n    id,\r\n    label: 'Maximální délka',\r\n    min: 0,\r\n    setValue: onChange('maxLength'),\r\n    variables\r\n  });\r\n}\r\n\r\nfunction Pattern(props) {\r\n  const {\r\n    field,\r\n    getValue,\r\n    id,\r\n    onChange\r\n  } = props;\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  return TextFieldEntry({\r\n    debounce,\r\n    element: field,\r\n    getValue: getValue('pattern'),\r\n    id,\r\n    label: 'Regulární výraz',\r\n    setValue: onChange('pattern')\r\n  });\r\n}\r\n\r\nfunction Min(props) {\r\n  const {\r\n    field,\r\n    getValue,\r\n    id,\r\n    onChange\r\n  } = props;\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  const variables = useVariables().map(name => ({ name }));\r\n\r\n  return FeelNumberEntry({\r\n    debounce,\r\n    element: field,\r\n    feel: 'optional',\r\n    id,\r\n    label: 'Minimální hodnota',\r\n    step: 'any',\r\n    getValue: getValue('min'),\r\n    setValue: onChange('min'),\r\n    variables\r\n  });\r\n}\r\n\r\nfunction Max(props) {\r\n  const {\r\n    field,\r\n    getValue,\r\n    id,\r\n    onChange\r\n  } = props;\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  const variables = useVariables().map(name => ({ name }));\r\n\r\n  return FeelNumberEntry({\r\n    debounce,\r\n    element: field,\r\n    feel: 'optional',\r\n    id,\r\n    label: 'Maximální hodnota',\r\n    step: 'any',\r\n    getValue: getValue('max'),\r\n    setValue: onChange('max'),\r\n    variables\r\n  });\r\n}\r\n\r\nfunction ValidationType(props) {\r\n  const {\r\n    field,\r\n    getValue,\r\n    id,\r\n    onChange\r\n  } = props;\r\n\r\n  const debounce = useService('debounce');\r\n\r\n  const setValue = (validationType) => {\r\n    onChange('validationType')(validationType || undefined);\r\n  };\r\n\r\n  return SelectEntry({\r\n    debounce,\r\n    element: field,\r\n    getValue: getValue('validationType'),\r\n    id,\r\n    label: 'Vzor validace',\r\n    setValue,\r\n    getOptions: () => Object.values(VALIDATION_TYPE_OPTIONS),\r\n    tooltip:\r\n      getValue('validationType')() === VALIDATION_TYPE_OPTIONS.phone.value\r\n        ? 'Validace telefonního čísla je založena na standardu E.164 bez mezer. (např. +491234567890)'\r\n        : undefined\r\n  });\r\n}\r\n","import {\r\n  OptionsSourceSelectEntry,\r\n  StaticOptionsSourceEntry,\r\n  InputKeyOptionsSourceEntry,\r\n  OptionsExpressionEntry\r\n} from '../entries';\r\n\r\nimport { getOptionsSource, OPTIONS_SOURCES } from '@bpmn-io/form-js-viewer';\r\n\r\nimport { Group, ListGroup } from '@bpmn-io/properties-panel';\r\n\r\nimport {\r\n  OPTIONS_INPUTS,\r\n  hasOptionsGroupsConfigured\r\n} from '../Util';\r\n\r\nexport function OptionsGroups(field, editField, getService) {\r\n  const {\r\n    type\r\n  } = field;\r\n\r\n  const formFields = getService('formFields');\r\n\r\n  const fieldDefinition = formFields.get(type).config;\r\n\r\n  if (!OPTIONS_INPUTS.includes(type) && !hasOptionsGroupsConfigured(fieldDefinition)) {\r\n    return [];\r\n  }\r\n\r\n  const context = { editField, field };\r\n  const id = 'valuesSource';\r\n\r\n  /**\r\n   * @type {Array<Group|ListGroup>}\r\n   */\r\n  const groups = [\r\n    {\r\n      id,\r\n      label: 'Zdroj možností',\r\n      tooltip: getValuesTooltip(),\r\n      component: Group,\r\n      entries: OptionsSourceSelectEntry({ ...context, id })\r\n    }\r\n  ];\r\n\r\n  const valuesSource = getOptionsSource(field);\r\n\r\n  if (valuesSource === OPTIONS_SOURCES.INPUT) {\r\n    const id = 'dynamicOptions';\r\n    groups.push({\r\n      id,\r\n      label: 'Dynamické možnosti',\r\n      component: Group,\r\n      entries: InputKeyOptionsSourceEntry({ ...context, id })\r\n    });\r\n  } else if (valuesSource === OPTIONS_SOURCES.STATIC) {\r\n    const id = 'staticOptions';\r\n    groups.push({\r\n      id,\r\n      label: 'Statické možnosti',\r\n      component: ListGroup,\r\n      ...StaticOptionsSourceEntry({ ...context, id })\r\n    });\r\n  } else if (valuesSource === OPTIONS_SOURCES.EXPRESSION) {\r\n    const id = 'optionsExpression';\r\n    groups.push({\r\n      id,\r\n      label: 'Výraz s možnostmi',\r\n      component: Group,\r\n      entries: OptionsExpressionEntry({ ...context, id })\r\n    });\r\n  }\r\n\r\n  return groups;\r\n}\r\n\r\n// helpers //////////\r\n\r\nfunction getValuesTooltip() {\r\n  return '\"Staticky\" - Možnosti existují ve formě předem definovaných konstant.\\n\\n' +\r\n  '\"Dynamicky\" - Možnosti jsou načítány z proměnné schématu, kterou lze plnit na základě podmínek.\\n\\n' +\r\n  '\"Výraz\" - Možnosti jsou načteny pomocí FEEL výrazu.';\r\n}","import { ListGroup } from '@bpmn-io/properties-panel';\r\n\r\nimport { has } from 'min-dash';\r\n\r\nimport { CustomValueEntry } from '../entries';\r\n\r\nexport function CustomPropertiesGroup(field, editField) {\r\n  const {\r\n    properties = {},\r\n    type\r\n  } = field;\r\n\r\n  if (type === 'default') {\r\n    return null;\r\n  }\r\n\r\n  const addEntry = (event) => {\r\n    event.stopPropagation();\r\n\r\n    let index = Object.keys(properties).length + 1;\r\n\r\n    while (`key${ index }` in properties) {\r\n      index++;\r\n    }\r\n\r\n    editField(field, [ 'properties' ], { ...properties, [ `key${ index }` ]: 'value' });\r\n  };\r\n\r\n  const validateFactory = (key) => {\r\n    return (value) => {\r\n      if (value === key) {\r\n        return;\r\n      }\r\n\r\n      if (typeof value !== 'string' || value.length === 0) {\r\n        return 'Hodnota nesmí být prázdná.';\r\n      }\r\n\r\n      if (has(properties, value)) {\r\n        return 'Hodnota musí být unikátní.';\r\n      }\r\n    };\r\n  };\r\n\r\n  const items = Object.keys(properties).map((key, index) => {\r\n    const removeEntry = (event) => {\r\n      event.stopPropagation();\r\n\r\n      return editField(field, [ 'properties' ], removeKey(properties, key));\r\n    };\r\n\r\n    const id = `property-${ index }`;\r\n\r\n    return {\r\n      autoFocusEntry: id + '-key',\r\n      entries: CustomValueEntry({\r\n        editField,\r\n        field,\r\n        idPrefix: id,\r\n        index,\r\n        validateFactory\r\n      }),\r\n      id,\r\n      label: key || '',\r\n      remove: removeEntry\r\n    };\r\n  });\r\n\r\n  return {\r\n    add: addEntry,\r\n    component: ListGroup,\r\n    id: 'custom-values',\r\n    items,\r\n    label: 'Další vlastnosti',\r\n    tooltip: 'Přidejte další vlastnosti ve formátu klíč-hodnota přímo do schéma formuláře.',\r\n    shouldSort: false\r\n  };\r\n}\r\n\r\n\r\n// helpers //////////\r\n\r\n/**\r\n * Returns copy of object without key.\r\n *\r\n * @param {Object} properties\r\n * @param {string} oldKey\r\n *\r\n * @returns {Object}\r\n */\r\nexport function removeKey(properties, oldKey) {\r\n  return Object.entries(properties).reduce((newProperties, entry) => {\r\n    const [ key, value ] = entry;\r\n\r\n    if (key === oldKey) {\r\n      return newProperties;\r\n    }\r\n\r\n    return {\r\n      ...newProperties,\r\n      [ key ]: value\r\n    };\r\n  }, {});\r\n}","import {\r\n  AdornerEntry,\r\n  GroupAppearanceEntry,\r\n  LayouterAppearanceEntry\r\n} from '../entries';\r\n\r\n\r\nexport function AppearanceGroup(field, editField, getService) {\r\n\r\n  const entries = [\r\n    ...AdornerEntry({ field, editField }),\r\n    ...GroupAppearanceEntry({ field, editField }),\r\n    ...LayouterAppearanceEntry({ field, editField })\r\n  ];\r\n\r\n  if (!entries.length) {\r\n    return null;\r\n  }\r\n\r\n  return {\r\n    id: 'appearance',\r\n    label: 'Vzhled',\r\n    entries\r\n  };\r\n}","import { ColumnsEntry } from '../entries';\r\n\r\nexport function LayoutGroup(field, editField) {\r\n  const { type } = field;\r\n\r\n  if (type === 'default') {\r\n    return null;\r\n  }\r\n\r\n  const entries = [\r\n    ...ColumnsEntry({ field, editField })\r\n  ];\r\n\r\n  if (entries.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  return {\r\n    id: 'layout',\r\n    label: 'Rozložení',\r\n    entries\r\n  };\r\n}","import { get, set } from 'min-dash';\r\n\r\nimport { simpleBoolEntryFactory } from '../entries/factories';\r\n\r\nimport { SECURITY_ATTRIBUTES_DEFINITIONS } from '@bpmn-io/form-js-viewer';\r\n\r\n\r\nexport function SecurityAttributesGroup(field, editField) {\r\n\r\n  const {\r\n    type\r\n  } = field;\r\n\r\n  if (type !== 'iframe') {\r\n    return null;\r\n  }\r\n\r\n  const entries = createEntries({ field, editField });\r\n\r\n  if (!entries.length) {\r\n    return null;\r\n  }\r\n\r\n  return {\r\n    id: 'securityAttributes',\r\n    label: 'Zabezpečení',\r\n    entries,\r\n    tooltip: getTooltip()\r\n  };\r\n}\r\n\r\nfunction createEntries(props) {\r\n  const {\r\n    editField,\r\n    field\r\n  } = props;\r\n\r\n  const securityEntries = SECURITY_ATTRIBUTES_DEFINITIONS.map((definition) => {\r\n    const {\r\n      label,\r\n      property\r\n    } = definition;\r\n\r\n    return simpleBoolEntryFactory({\r\n      id: property,\r\n      label: label,\r\n      isDefaultVisible: (field) => field.type === 'iframe',\r\n      path: [ 'security', property ],\r\n      props,\r\n      getValue: () => get(field, [ 'security', property ]),\r\n      setValue: (value) => {\r\n        const security = get(field, [ 'security' ], {});\r\n        editField(field, [ 'security' ], set(security, [ property ], value));\r\n      }\r\n    });\r\n  });\r\n\r\n  return [\r\n    { component: Advisory },\r\n    ...securityEntries\r\n  ];\r\n\r\n}\r\n\r\nconst Advisory = (props) => {\r\n  return <div class=\"bio-properties-panel-description fjs-properties-panel-detached-description\">Tyto možnosti mohou představovat bezpečnostní rizika, zejména pokud se používají v kombinaci s dynamickými odkazy. Ujistěte se, že o nich víte, že důvěřujete zdrojové adrese URL a povolíte pouze to, co váš případ použití vyžaduje.</div>;\r\n};\r\n\r\n// helpers //////////\r\n\r\nfunction getTooltip() {\r\n  return <>\r\n    <p>Povolte prvku iFrame přístup k dalším funkcím vašeho prohlížeče. Podrobnosti týkající se různých možností naleznete v <a target=\"_blank\" href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe\">MDN dokumentaci iFrame.</a></p>\r\n  </>;\r\n}","import {\r\n  ConditionEntry\r\n} from '../entries';\r\n\r\n\r\nexport function ConditionGroup(field, editField) {\r\n\r\n  const { type } = field;\r\n\r\n  if (type === 'default') {\r\n    return null;\r\n  }\r\n\r\n  const entries = [\r\n    ...ConditionEntry({ field, editField })\r\n  ];\r\n\r\n  return {\r\n    id: 'condition',\r\n    label: 'Podmínky',\r\n    entries\r\n  };\r\n}","import { get, isArray } from 'min-dash';\r\n\r\nimport {\r\n  ColumnsExpressionEntry,\r\n  HeadersSourceSelectEntry,\r\n  StaticColumnsSourceEntry\r\n} from '../entries';\r\n\r\nimport { Group, ListGroup } from '@bpmn-io/properties-panel';\r\n\r\nexport function TableHeaderGroups(field, editField) {\r\n  const {\r\n    type,\r\n    id: fieldId\r\n  } = field;\r\n\r\n  if (type !== 'table') {\r\n    return [];\r\n  }\r\n\r\n  const areStaticColumnsEnabled = isArray(get(field, [ 'columns' ]));\r\n\r\n  /**\r\n    * @type {Array<Group>}\r\n    */\r\n  const groups = [\r\n    {\r\n      id: `${fieldId}-columnsSource`,\r\n      label: 'Zdroj záhlaví',\r\n      tooltip: TOOLTIP_TEXT,\r\n      component: Group,\r\n      entries: [\r\n        ...HeadersSourceSelectEntry({ field, editField }),\r\n        ...ColumnsExpressionEntry({ field, editField })\r\n      ]\r\n    }\r\n  ];\r\n\r\n  if (areStaticColumnsEnabled) {\r\n    const id = `${fieldId}-columns`;\r\n\r\n    groups.push({\r\n      id,\r\n      label: 'Položky záhlaví',\r\n      component: ListGroup,\r\n      ...StaticColumnsSourceEntry({ field, editField, id })\r\n    });\r\n  }\r\n\r\n  return groups;\r\n}\r\n\r\n// helpers //////////\r\n\r\nconst TOOLTIP_TEXT = `\"Seznam položek\" - Záhlaví je naplněno z předem definovaných statických položek.\r\n\r\n\"Výraz\" - Záhlaví je naplněno pomocí výsledku FEEL výrazu.\r\n`;\r\n","import {\r\n  ConditionGroup,\r\n  AppearanceGroup,\r\n  CustomPropertiesGroup,\r\n  GeneralGroup,\r\n  SerializationGroup,\r\n  ConstraintsGroup,\r\n  ValidationGroup,\r\n  OptionsGroups,\r\n  TableHeaderGroups,\r\n  LayoutGroup,\r\n  SecurityAttributesGroup\r\n} from './groups';\r\n\r\nimport { hasEntryConfigured } from './Util';\r\n\r\nexport class PropertiesProvider {\r\n  constructor(propertiesPanel, injector) {\r\n    this._injector = injector;\r\n    propertiesPanel.registerProvider(this);\r\n  }\r\n\r\n  _filterVisibleEntries(groups, field, getService) {\r\n    return groups.forEach(group => {\r\n      const {\r\n        entries\r\n      } = group;\r\n\r\n      const {\r\n        type\r\n      } = field;\r\n\r\n      const formFields = getService('formFields');\r\n\r\n      const fieldDefinition = formFields.get(type).config;\r\n\r\n      if (!entries) {\r\n        return;\r\n      }\r\n\r\n      group.entries = entries.filter(entry => {\r\n        const {\r\n          isDefaultVisible\r\n        } = entry;\r\n\r\n        if (!isDefaultVisible) {\r\n          return true;\r\n        }\r\n\r\n        return isDefaultVisible(field) || hasEntryConfigured(fieldDefinition, entry.id);\r\n      });\r\n    });\r\n  }\r\n\r\n  getGroups(field, editField) {\r\n    return (groups) => {\r\n      if (!field) {\r\n        return groups;\r\n      }\r\n\r\n      const getService = (type, strict = true) => this._injector.get(type, strict);\r\n\r\n      groups = [\r\n        ...groups,\r\n        GeneralGroup(field, editField, getService),\r\n        ...TableHeaderGroups(field, editField),\r\n        SecurityAttributesGroup(field, editField),\r\n        ConditionGroup(field, editField),\r\n        LayoutGroup(field, editField),\r\n        AppearanceGroup(field, editField),\r\n        SerializationGroup(field, editField),\r\n        ...OptionsGroups(field, editField, getService),\r\n        ConstraintsGroup(field, editField),\r\n        ValidationGroup(field, editField),\r\n        CustomPropertiesGroup(field, editField)\r\n      ].filter(group => group != null);\r\n\r\n      this._filterVisibleEntries(groups, field, getService);\r\n\r\n      // contract: if a group has no entries or items, it should not be displayed at all\r\n      return groups.filter(group => {\r\n        return group.items || group.entries && group.entries.length;\r\n      });\r\n    };\r\n  }\r\n}\r\n\r\nPropertiesProvider.$inject = [ 'propertiesPanel', 'injector' ];","import { PropertiesPanelRenderer } from './PropertiesPanelRenderer';\r\nimport { PropertiesProvider } from './PropertiesProvider';\r\n\r\nimport { FeelPopupModule } from '@bpmn-io/properties-panel';\r\n\r\nexport const PropertiesPanelModule = {\r\n  __depends__: [\r\n    FeelPopupModule\r\n  ],\r\n  __init__: [ 'propertiesPanel', 'propertiesProvider' ],\r\n  propertiesPanel: [ 'type', PropertiesPanelRenderer ],\r\n  propertiesProvider: [ 'type', PropertiesProvider ]\r\n};","import { SectionModuleBase } from '../SectionModuleBase';\r\n\r\n/**\r\n * Manages the rendering of visual plugins.\r\n * @constructor\r\n * @param {Object} eventBus - Event bus for the application.\r\n */\r\nexport class RenderInjector extends SectionModuleBase {\r\n\r\n  constructor(eventBus) {\r\n    super(eventBus, 'renderInjector');\r\n    this._eventBus = eventBus;\r\n    this.registeredRenderers = [];\r\n  }\r\n\r\n  /**\r\n   * Inject a new renderer into the injector.\r\n   * @param {string} identifier - Identifier for the renderer.\r\n   * @param {Function} Renderer - The renderer function.\r\n   */\r\n  attachRenderer(identifier, Renderer) {\r\n    this.registeredRenderers = [ ...this.registeredRenderers, { identifier, Renderer } ];\r\n  }\r\n\r\n  /**\r\n   * Detach a renderer from the by key injector.\r\n   * @param {string} identifier - Identifier for the renderer.\r\n   */\r\n  detachRenderer(identifier) {\r\n    this.registeredRenderers = this.registeredRenderers.filter(r => r.identifier !== identifier);\r\n  }\r\n\r\n  /**\r\n   * Returns the registered renderers.\r\n   * @returns {Array} Array of registered renderers.\r\n   */\r\n  fetchRenderers() {\r\n    return this.registeredRenderers;\r\n  }\r\n}\r\n\r\nRenderInjector.$inject = [ 'eventBus' ];","import { RenderInjector } from './RenderInjector';\r\n\r\nexport const RenderInjectionModule = {\r\n  __init__: [ 'renderInjector' ],\r\n  renderInjector: [ 'type', RenderInjector ],\r\n};","<svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n  <path d=\"M3 3H13.0859L11.2929 1.20705L12 0.5L15 3.5L12 6.5L11.2929 5.79295L13.0859 4H3V7.5H2V4C2.00032 3.73488 2.10578 3.48071 2.29324 3.29324C2.48071 3.10578 2.73488 3.00032 3 3Z\" fill=\"currentColor\"/>\r\n  <path d=\"M4.70705 10.2071L2.91405 12H13V8.5H14V12C13.9997 12.2651 13.8942 12.5193 13.7068 12.7068C13.5193 12.8942 13.2651 12.9997 13 13H2.91405L4.707 14.7929L4 15.5L1 12.5L4 9.5L4.70705 10.2071Z\" fill=\"currentColor\"/>\r\n</svg>\r\n","import RepeatSvg from '../../render/components/icons/Repeat.svg';\r\n\r\nexport class EditorRepeatRenderManager {\r\n\r\n  constructor(formFields, formFieldRegistry) {\r\n    this._formFields = formFields;\r\n    this._formFieldRegistry = formFieldRegistry;\r\n    this.RepeatFooter = this.RepeatFooter.bind(this);\r\n  }\r\n\r\n  /**\r\n   * Checks whether a field should be repeatable.\r\n   *\r\n   * @param {string} id - The id of the field to check\r\n   * @returns {boolean} - True if repeatable, false otherwise\r\n   */\r\n  isFieldRepeating(id) {\r\n\r\n    if (!id) {\r\n      return false;\r\n    }\r\n\r\n    const formField = this._formFieldRegistry.get(id);\r\n    const formFieldDefinition = this._formFields.get(formField.type);\r\n    return formFieldDefinition.config.repeatable && formField.isRepeating;\r\n  }\r\n\r\n  RepeatFooter() {\r\n    return <div className=\"fjs-repeat-render-footer\"><RepeatSvg /><span>Opakující</span></div>;\r\n  }\r\n\r\n}\r\n\r\nEditorRepeatRenderManager.$inject = [ 'formFields', 'formFieldRegistry' ];","import { EditorRepeatRenderManager } from './EditorRepeatRenderManager';\r\n\r\nexport const RepeatRenderModule = {\r\n  __init__: [ 'repeatRenderManager' ],\r\n  repeatRenderManager: [ 'type', EditorRepeatRenderManager ],\r\n};\r\n\r\nexport { EditorRepeatRenderManager };","import Ids from 'ids';\r\nimport { clone, createFormContainer, createInjector, schemaVersion } from '@bpmn-io/form-js-viewer';\r\nimport { isString, set } from 'min-dash';\r\n\r\nimport { CoreModule } from './core';\r\nimport { EditorActionsModule } from './features/editor-actions';\r\nimport { EditorExpressionLanguageModule } from './features/expression-language';\r\nimport { FormEditorKeyboardModule } from './features/keyboard';\r\nimport { DraggingModule } from './features/dragging';\r\nimport { ModelingModule } from './features/modeling';\r\nimport { SelectionModule } from './features/selection';\r\nimport { PaletteModule } from './features/palette';\r\nimport { PropertiesPanelModule } from './features/properties-panel';\r\nimport { RenderInjectionModule } from './features/render-injection';\r\nimport { RepeatRenderModule } from './features/repeat-render';\r\n\r\nimport { MarkdownRendererModule } from '@bpmn-io/form-js-viewer';\r\n\r\nconst ids = new Ids([ 32, 36, 1 ]);\r\n\r\n/**\r\n * @typedef { import('./types').Injector } Injector\r\n * @typedef { import('./types').Module } Module\r\n * @typedef { import('./types').Schema } Schema\r\n *\r\n * @typedef { import('./types').FormEditorOptions } FormEditorOptions\r\n * @typedef { import('./types').FormEditorProperties } FormEditorProperties\r\n *\r\n * @typedef { {\r\n *   properties: FormEditorProperties,\r\n *   schema: Schema\r\n * } } State\r\n *\r\n * @typedef { (type:string, priority:number, handler:Function) => void } OnEventWithPriority\r\n * @typedef { (type:string, handler:Function) => void } OnEventWithOutPriority\r\n * @typedef { OnEventWithPriority & OnEventWithOutPriority } OnEventType\r\n */\r\n\r\n/**\r\n * The form editor.\r\n */\r\nexport class FormEditor {\r\n\r\n  /**\r\n   * @constructor\r\n   * @param {FormEditorOptions} options\r\n   */\r\n  constructor(options = {}) {\r\n\r\n    /**\r\n     * @public\r\n     * @type {OnEventType}\r\n     */\r\n    this.on = this._onEvent;\r\n\r\n    /**\r\n     * @public\r\n     * @type {String}\r\n     */\r\n    this._id = ids.next();\r\n\r\n    /**\r\n     * @private\r\n     * @type {Element}\r\n     */\r\n    this._container = createFormContainer();\r\n\r\n    this._container.setAttribute('input-handle-modified-keys', 'z,y');\r\n\r\n    const {\r\n      container,\r\n      exporter,\r\n      injector = this._createInjector(options, this._container),\r\n      properties = {}\r\n    } = options;\r\n\r\n    /**\r\n     * @private\r\n     * @type {any}\r\n     */\r\n    this.exporter = exporter;\r\n\r\n    /**\r\n     * @private\r\n     * @type {State}\r\n     */\r\n    this._state = {\r\n      properties,\r\n      schema: null\r\n    };\r\n\r\n    this.get = injector.get;\r\n\r\n    this.invoke = injector.invoke;\r\n\r\n    this.get('eventBus').fire('form.init');\r\n\r\n    if (container) {\r\n      this.attachTo(container);\r\n    }\r\n  }\r\n\r\n  clear() {\r\n\r\n    // clear form services\r\n    this._emit('diagram.clear');\r\n\r\n    // clear diagram services (e.g. EventBus)\r\n    this._emit('form.clear');\r\n  }\r\n\r\n  destroy() {\r\n\r\n    // destroy form services\r\n    this.get('eventBus').fire('form.destroy');\r\n\r\n    // destroy diagram services (e.g. EventBus)\r\n    this.get('eventBus').fire('diagram.destroy');\r\n\r\n    this._detach(false);\r\n  }\r\n\r\n  /**\r\n   * @param {Schema} schema\r\n   *\r\n   * @return {Promise<{ warnings: Array<any> }>}\r\n   */\r\n  importSchema(schema) {\r\n    return new Promise((resolve, reject) => {\r\n      try {\r\n        this.clear();\r\n\r\n        const {\r\n          schema: importedSchema,\r\n          warnings\r\n        } = this.get('importer').importSchema(schema);\r\n\r\n        this._setState({\r\n          schema: importedSchema\r\n        });\r\n\r\n        this._emit('import.done', { warnings });\r\n\r\n        return resolve({ warnings });\r\n      } catch (error) {\r\n        this._emit('import.done', {\r\n          error: error,\r\n          warnings: error.warnings || []\r\n        });\r\n\r\n        return reject(error);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @returns {Schema}\r\n   */\r\n  saveSchema() {\r\n    return this.getSchema();\r\n  }\r\n\r\n  /**\r\n   * @returns {Schema}\r\n   */\r\n  getSchema() {\r\n    const { schema } = this._getState();\r\n\r\n    return exportSchema(\r\n      schema,\r\n      this.exporter,\r\n      schemaVersion\r\n    );\r\n  }\r\n\r\n  /**\r\n   * @param {Element|string} parentNode\r\n   */\r\n  attachTo(parentNode) {\r\n    if (!parentNode) {\r\n      throw new Error('parentNode required');\r\n    }\r\n\r\n    this.detach();\r\n\r\n    if (isString(parentNode)) {\r\n      parentNode = document.querySelector(parentNode);\r\n    }\r\n\r\n    const container = this._container;\r\n\r\n    parentNode.appendChild(container);\r\n\r\n    this._emit('attach');\r\n  }\r\n\r\n  detach() {\r\n    this._detach();\r\n  }\r\n\r\n  /**\r\n   * @internal\r\n   *\r\n   * @param {boolean} [emit]\r\n   */\r\n  _detach(emit = true) {\r\n    const container = this._container,\r\n          parentNode = container.parentNode;\r\n\r\n    if (!parentNode) {\r\n      return;\r\n    }\r\n\r\n    if (emit) {\r\n      this._emit('detach');\r\n    }\r\n\r\n    parentNode.removeChild(container);\r\n  }\r\n\r\n  /**\r\n   * @param {any} property\r\n   * @param {any} value\r\n   */\r\n  setProperty(property, value) {\r\n    const properties = set(this._getState().properties, [ property ], value);\r\n\r\n    this._setState({ properties });\r\n  }\r\n\r\n\r\n  /**\r\n   * @param {string} type\r\n   * @param {Function} handler\r\n   */\r\n  off(type, handler) {\r\n    this.get('eventBus').off(type, handler);\r\n  }\r\n\r\n  /**\r\n   * @internal\r\n   *\r\n   * @param {FormEditorOptions} options\r\n   * @param {Element} container\r\n   *\r\n   * @returns {Injector}\r\n   */\r\n  _createInjector(options, container) {\r\n    const {\r\n      modules = this._getModules(),\r\n      additionalModules = [],\r\n      renderer = {},\r\n      ...config\r\n    } = options;\r\n\r\n    const enrichedConfig = {\r\n      ...config,\r\n      renderer: {\r\n        ...renderer,\r\n        container\r\n      }\r\n    };\r\n\r\n    return createInjector([\r\n      { config: [ 'value', enrichedConfig ] },\r\n      { formEditor: [ 'value', this ] },\r\n      CoreModule,\r\n      ...modules,\r\n      ...additionalModules\r\n    ]);\r\n  }\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  _emit(type, data) {\r\n    this.get('eventBus').fire(type, data);\r\n  }\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  _getState() {\r\n    return this._state;\r\n  }\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  _setState(state) {\r\n    this._state = {\r\n      ...this._state,\r\n      ...state\r\n    };\r\n\r\n    this._emit('changed', this._getState());\r\n  }\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  _getModules() {\r\n    return [\r\n      ModelingModule,\r\n      EditorActionsModule,\r\n      FormEditorKeyboardModule,\r\n      DraggingModule,\r\n      SelectionModule,\r\n      PaletteModule,\r\n      EditorExpressionLanguageModule,\r\n      MarkdownRendererModule,\r\n      PropertiesPanelModule,\r\n      RenderInjectionModule,\r\n      RepeatRenderModule\r\n    ];\r\n  }\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  _onEvent(type, priority, handler) {\r\n    this.get('eventBus').on(type, priority, handler);\r\n  }\r\n\r\n}\r\n\r\n// helpers //////////\r\n\r\nexport function exportSchema(schema, exporter, schemaVersion) {\r\n\r\n  const exportDetails = exporter ? {\r\n    exporter\r\n  } : {};\r\n\r\n  const cleanedSchema = clone(schema, (name, value) => {\r\n    if ([ '_parent', '_path' ].includes(name)) {\r\n      return undefined;\r\n    }\r\n\r\n    return value;\r\n  });\r\n\r\n  return {\r\n    ...cleanedSchema,\r\n    ...exportDetails,\r\n    schemaVersion\r\n  };\r\n}","import { FormEditor } from './FormEditor';\r\n\r\nimport { schemaVersion } from '@bpmn-io/form-js-viewer';\r\n\r\nexport {\r\n  FormEditor,\r\n  schemaVersion\r\n};\r\n\r\nexport {\r\n  useDebounce,\r\n  usePrevious,\r\n  useService\r\n} from './render/hooks';\r\n\r\nexport {\r\n  useService as usePropertiesPanelService,\r\n  useVariables\r\n} from './features/properties-panel/hooks';\r\n\r\n/**\r\n * @typedef { import('./types').CreateFormEditorOptions } CreateFormEditorOptions\r\n */\r\n\r\n/**\r\n * Create a form editor.\r\n *\r\n * @param {CreateFormEditorOptions} options\r\n *\r\n * @return {Promise<FormEditor>}\r\n */\r\nexport function createFormEditor(options) {\r\n  const {\r\n    schema,\r\n    ...rest\r\n  } = options;\r\n\r\n  const formEditor = new FormEditor(rest);\r\n\r\n  return formEditor.importSchema(schema).then(() => {\r\n    return formEditor;\r\n  });\r\n}"],"names":["FN_REF","DEFAULT_PRIORITY","slice","Array","prototype","EventBus","_listeners","on","_destroy","events","priority","callback","that","isArray","isFunction","isNumber","Error","actualCallback","bind","self","forEach","e","_addListener","next","once","wrappedCallback","__isTomb","result","apply","arguments","off","event","_removeListener","createEvent","data","InternalEvent","init","fire","type","firstListener","returnValue","args","call","originalType","_invokeListeners","undefined","defaultPrevented","handleError","error","listener","cancelBubble","_invokeListener","invokeFunction","stopPropagation","preventDefault","console","newListener","_getListeners","previousListener","_setListeners","name","nextListener","listenerCallback","assign","fn","DebounceFactory","config","timeout","debounce","$inject","FormFieldRegistry","BaseFieldRegistry","updateId","formField","newId","_validateId","_eventBus","remove","id","add","component","components","_parent","get","MAX_COLUMNS_PER_ROW","MAX_COLUMNS","MIN_COLUMNS","MAX_FIELDS_PER_ROW","FormLayoutValidator","constructor","formLayouter","formFieldRegistry","_formLayouter","_formFieldRegistry","validateField","field","columns","row","Number","isInteger","getRowForField","sumColumns","parseInt","sumFields","sumAutoCols","cols","layout","calculateMaxColumnsWithAuto","autoCols","emptyImage","createEmptyImage","editorFormFieldClasses","disabled","classNames","createDragger","startX","startY","onDragStart","clientX","clientY","dataTransfer","setDragImage","document","addEventListener","onDrag","onEnd","delta","x","y","removeEventListener","throttle","active","lastArgs","lastThis","window","requestAnimationFrame","img","Image","src","EditorIFrame","props","domId","label","Icon","iconsByType","_jsxs","class","children","_jsx","Label","width","height","viewBox","IFrame","DragAndDropContext","createContext","drake","getService","strict","FormEditorContext","useService","useContext","usePrevious","value","defaultValue","ref","useRef","useEffect","current","useDebounce","useMemo","flush","_path","_extends","React","_path2","EditorText","text","templating","expressionLanguage","trim","isExpression","isTemplate","Text","disableLinks","EditorHtml","content","Html","EditorTable","columnsExpression","shouldUseMockColumns","length","editorColumns","key","prefixId","map","Table","EditorExpressionField","expression","placeholderContent","ExpressionField","escapeGridRender","editorFormFields","EditorFormFields","FormFields","register","ModularSection","rootClass","RootElement","section","eventBus","sectionConfig","parent","setParent","useState","shouldRender","setShouldRender","ParentElement","element","querySelector","Element","onAttach","container","onDetach","onReset","Root","useCallback","className","createPortal","FillContext","addFill","uid","removeFill","Fill","Symbol","fillContext","SlotContext","fills","Slot","fillRoot","FillFragment","groupFn","_groupByGroupName","separatorFn","limit","filtered","filter","fill","slot","cropped","groups","fillsAndSeparators","buildFills","Fragment","fillRenderer","separatorRenderer","array","idx","separator","push","groupsById","group","groupName","sort","_comparePriority","Object","keys","a","b","noop","SlotFillRoot","setFills","onSetFill","onRemoveFill","f","slotContext","Provider","PaletteEntry","icon","iconUrl","getPaletteIcon","modeling","formEditor","onKeyDown","code","fieldType","target","dataset","schema","_getState","addFormField","title","PALETTE_GROUPS","Palette","formFields","initialPaletteEntries","collectPaletteEntries","paletteEntries","setPaletteEntries","searchTerm","setSearchTerm","inputRef","groupEntries","simplifyString","str","toLowerCase","replace","entry","simplifiedSearchTerm","simplifiedEntryLabel","simplifiedEntryType","includes","entries","handleInput","handleClear","focus","SearchIcon","placeholder","onInput","onClick","CloseIcon","FillRoot","getGroup","find","g","_formFields","fieldConfig","style","margin","alt","sanitizeImageSource","InjectedRendersRoot","renderInjector","injectedRenderers","fetchRenderers","injectedProps","Renderer","CURSOR_CLS_PATTERN","set","mode","classes","domClasses","body","removeMatching","unset","DRAG_CONTAINER_CLS","DROP_CONTAINER_VERTICAL_CLS","DROP_CONTAINER_HORIZONTAL_CLS","DRAG_MOVE_CLS","DRAG_ROW_MOVE_CLS","DRAG_COPY_CLS","DRAG_NO_DROP_CLS","DRAG_NO_MOVE_CLS","ERROR_DROP_CLS","Dragging","formLayoutValidator","pathRegistry","_formLayoutValidator","_modeling","_pathRegistry","getTargetIndex","targetRow","targetFormField","sibling","siblingFormFieldNode","siblingFormField","getFormFieldIndex","validateDrop","formFieldNode","getRow","rowId","targetParentId","isRow","getFormParent","rowError","targetParentFormField","currentParentFormField","targetParentPath","getValuePath","currentParentPath","join","isDropAllowedByPathRegistry","executeRecursivelyOnFields","isClosed","isRepeatable","options","cutoffNode","fieldPath","canClaimPath","knownAncestorIds","getAncestryList","moveField","source","targetIndex","sourceParent","sourceFormField","sourceIndex","sourceRow","moveFormField","createNewField","attrs","nextRowId","handleRowDrop","el","rowNode","index","siblingRowNode","siblingRow","handleElementDrop","validationError","cancel","isPalette","createDragulaInstance","mirrorContainer","dragulaOptions","direction","isContainer","some","cls","classList","contains","moves","handle","copy","accepts","unsetDropNotAllowed","setDropNotAllowed","slideFactorX","slideFactorY","dragulaInstance","dragula","emit","isDragRow","context","fieldFormIndex","node","closest","setCursor","FieldDragPreview","COLUMNS_REGEX","ELEMENT_RESIZING_CLS","GRID_OFFSET_PX","FieldResizer","position","startColumns","newColumns","onResize","_","dx","calculateNewColumns","errorMessage","columnNode","onResizeStart","getElementNode","getParent","getColumnNode","startWidth","getBoundingClientRect","asColumns","setResizing","onResizeEnd","editFormField","unsetResizing","draggable","onDragEnd","totalWidth","oneColumn","Math","round","currentColumns","deltaX","deltaColumns","regex","domQuery","ContextPad","EmptyGroup","EmptyForm","EmptyFormIcon","Empty","selection","hoverInfo","FormRenderContext","showOutline","hovered","setHovered","scrollIntoView","scrollContainer","getScrollContainer","elementBounds","scrollContainerBounds","isElementLarger","isNotFullyVisible","bottom","top","behavior","block","useLayoutEffect","isSelected","toggle","classString","split","grouplike","onRemove","parentField","removeFormField","onKeyPress","tabIndex","onMouseOver","cleanup","DebugColumns","getRemoveButtonTitle","DeleteIcon","debugColumnsConfig","Children","Row","DraggableIcon","Column","FormEditor","dragging","injector","propertiesPanel","propertiesPanelConfig","properties","ariaLabel","formContainerRef","propertiesPanelRef","setSelection","hasInitialized","setHasInitialized","handleSelectionChanged","setDrake","dragAndDropContext","destroy","onCreate","unsetCursor","formRenderContext","formContext","errors","formId","_id","onSubmit","hasDefaultPropertiesPanel","defaultPropertiesPanel","attachTo","FormContext","FormComponent","CreatePreview","handleCloned","clone","original","paletteEntry","findPaletteEntry","innerHTML","render","cloneNode","querySelectorAll","renderConfig","compact","App","state","setState","formEditorContext","newState","RenderModule","__init__","renderer","CoreModule","__depends__","importer","Importer","PathRegistry","FormLayouter","fieldFactory","FieldFactory","NOT_REGISTERED_ERROR","IS_REGISTERED_ERROR","EditorActions","_actions","_registerDefaultActions","editorActions","commandStack","zoomScroll","copyPaste","canvas","rules","keyboardMove","keyboardMoveSelection","undo","redo","selectedElements","paste","opts","stepZoom","zoom","allowed","elements","removableElements","removeElements","moveCanvas","moveSelection","accelerated","trigger","action","actions","_registerAction","isRegistered","unregister","getActions","message","FormEditorActions","EditorActionsModule","BaseEditorActionsModule","EditorTemplating","isString","startsWith","test","evaluate","template","EditorExpressionLanguageModule","FeelExpressionLanguage","KEYS_COPY","KEYS_PASTE","KEYS_REDO","KEYS_UNDO","hasModifier","ctrlKey","metaKey","shiftKey","altKey","isCmd","isKey","indexOf","isShift","isCopy","isPaste","isUndo","isRedo","KEYDOWN_EVENT","KEYUP_EVENT","HANDLE_MODIFIER_ATTRIBUTE","Keyboard","_config","_keydownHandler","_keyupHandler","_fire","unbind","bindTo","_keyHandler","eventBusResult","_isEventIgnored","keyEvent","isInput","isButton","_isModifiedKeyIgnored","allowedModifiers","_getAllowedModifiers","modifierContainer","domClosest","_node","getAttribute","domEvent","getBinding","addListener","removeListener","domMatches","contentEditable","LOW_PRIORITY","KeyboardBindings","keyboard","registerBindings","keyboardBindings","FormEditorKeyboardBindings","FormEditorKeyboardModule","KeyboardModule","DraggingModule","CommandStack","_handlerMap","_stack","_stackIdx","_currentExecution","dirty","_injector","_uid","clear","execute","command","_pushAction","_internalExecute","_popAction","canExecute","handler","_getHandler","_getUndoAction","_internalUndo","_getRedoAction","_setHandler","registerHandler","handlerCls","instantiate","canUndo","canRedo","_atomicDo","revert","_markDirty","_revertedAction","qualifier","names","_createId","execution","atomic","preExecute","_executedAction","postExecute","baseAction","pop","uniqueBy","reverse","concat","stackIdx","splice","CommandInterceptor","unwrapEvent","hook","handlerFn","unwrap","isObject","fullEvent","createHook","preExecuted","executed","postExecuted","reverted","hookFn","IdBehavior","unclaimId","claimId","KeyBehavior","keyed","unclaimKey","claimKey","PathBehavior","path","pathed","unclaimPath","claimPath","ValidateBehavior","validate","validationType","newValidate","minLength","maxLength","pattern","OptionsSourceBehavior","newProperties","isValuesSourceUpdate","values","OPTIONS_SOURCES","OPTIONS_SOURCES_PATHS","EXPRESSION","INPUT","COLUMNS_SOURCE_PROPERTIES","ColumnsSourceBehavior","oldProperties","isColumnSourceUpdate","oldColumns","oldColumnsExpression","isDefined","TableDataSourceBehavior","dataSource","BehaviorModule","idBehavior","keyBehavior","pathBehavior","validateBehavior","optionsSourceBehavior","columnsSourceBehavior","tableDataSourceBehavior","arrayAdd","item","arrayRemove","updatePath","refreshPathsRecursively","updateRow","FormLayoutUpdater","_formEditor","updateRowIds","updateLayout","calculateLayout","setRowIds","AddFormFieldHandler","targetPath","_setState","EditFormFieldHandler","property","MoveFormFieldHandler","sourcePath","arrayMove","claimerId","RemoveFormFieldHandler","runRecursively","UpdateIdClaimHandler","claiming","_ids","claim","unclaim","UpdateKeyClaimHandler","replacements","valuePath","UpdatePathClaimHandler","valuePaths","Modeling","_commandStack","_fieldFactory","registerHandlers","getHandlers","create","ModelingModule","commandModule","formLayoutUpdater","Selection","_selection","newSelection","SelectionBehavior","SelectionModule","selectionBehavior","SectionModuleBase","sectionKey","_sectionKey","isSectionRendered","_onceSectionRendered","detach","reset","PaletteRenderer","PaletteModule","palette","Header","headerProvider","getElementIcon","getDocumentationRef","getElementLabel","getTypeLabel","documentationRef","ElementIcon","jsxs","jsx","rel","href","ExternalLinkIcon","FormPropertiesPanelContext","countDecimals","number","num","Big","toString","toFixed","isValidNumber","isNaN","textToLabel","line","displayLine","isValidDotPath","isProhibitedPath","prohibitedSegments","segment","LABELED_NON_INPUTS","INPUTS","OPTIONS_INPUTS","hasEntryConfigured","formFieldDefinition","entryId","propertiesPanelEntries","hasOptionsGroupsConfigured","hasIntegerPathSegment","useVariables","form","getSchema","getSchemaVariables","headerlessTypes","PropertiesPanelHeaderProvider","fieldDefinition","PropertiesPanelPlaceholderProvider","getEmpty","getMultiple","PropertiesPanel","getProviders","selectionModule","feelPopupContainer","selectedFormField","refresh","propertiesPanelContext","onFocus","onBlur","editField","providers","reduce","provider","updater","getGroups","onFocusCapture","onBlurCapture","BasePropertiesPanel","placeholderProvider","PropertiesPanelRenderer","_container","domify","_render","appendChild","parentNode","removeChild","_getProviders","registerProvider","ActionEntry","Action","isEdited","isSelectEntryEdited","isDefaultVisible","getValue","setValue","getOptions","SelectEntry","AltTextEntry","AltText","isFeelEntryEdited","variables","FeelTemplatingEntry","feel","tooltip","singleLine","AUTO_OPTION_VALUE","ColumnsEntry","Columns","newValue","asArray","i","asOption","from","DescriptionEntry","Description","EMPTY_OPTION","DefaultValueEntry","matchers","defaulValueBase","DefaultValueCheckbox","DefaultValueNumber","isTextFieldEntryEdited","DefaultValueSingleSelect","DefaultValueTextfield","DefaultValueTextarea","isTextAreaEntryEdited","parseStringToBoolean","parseBooleanToString","decimalDigits","serializeToString","decimalDigitsSet","TextFieldEntry","TextAreaEntry","DisabledEntry","Disabled","isToggleSwitchEntryEdited","ToggleSwitchEntry","inline","IdEntry","Id","assigned","validateId","SPACE_REGEX","QNAME_REGEX","ID_REGEX","idValue","containsSpace","KeyEntry","Key","oldPath","newPath","canClaim","description","PathEntry","Path","isRepeating","repeatable","msg","simpleBoolEntryFactory","SimpleBoolComponent","simpleSelectEntryFactory","optionsArray","SimpleSelectComponent","simpleRangeIntegerEntryFactory","min","max","SimpleRangeIntegerEntry","MIN_SAFE_INTEGER","MAX_SAFE_INTEGER","isValid","cmp","GroupAppearanceEntry","LabelEntry","DateLabel","subtype","DATETIME_SUBTYPES","DATE","DATETIME","TimeLabel","TIME","isSimplyLabled","input","getLabelText","DATE_LABEL_PATH","TIME_LABEL_PATH","HeightEntry","Height","isNumberFieldEntryEdited","NumberFieldEntry","IFrameHeightEntry","HTTPS_PATTERN","IFrameUrlEntry","Url","getTooltip","_Fragment","ImageSourceEntry","Source","TextEntry","hostLanguage","HtmlEntry","Content","NumberEntries","NumberDecimalDigits","NumberArrowStep","step","validateNumberEntries","clearLeadingZeroes","trimmed","minimumValue","ExpressionFieldEntries","ExpressionFieldExpression","ExpressionFieldComputeOn","FeelEntry","computeOn","NumberSerializationEntry","SerializeToString","isCheckboxEntryEdited","CheckboxEntry","DateTimeEntry","DateTimeSubtypeSelect","Use24h","DATETIME_SUBTYPE_PATH","clearTimeConfig","timeConfigPaths","TIME_USE24H_PATH","TIME_INTERVAL_PATH","TIME_SERIALISING_FORMAT_PATH","initTimeConfig","TIME_SERIALISING_FORMATS","UTC_OFFSET","clearDateConfig","dateConfigPaths","DATE_DISALLOW_PAST_PATH","initDateConfig","oldValue","getDatetimeSubtypes","DATETIME_SUBTYPES_LABELS","DateTimeConstraintsEntry","subtypes","TimeIntervalSelect","DisallowPassedDates","timeIntervals","getTimeIntervals","timeInterval","DateTimeFormatEntry","TimeFormatSelect","getTimeSerialisingFormats","format","TIME_SERIALISINGFORMAT_LABELS","SelectEntries","ValueEntry","idPrefix","validateFactory","Value","CustomValueEntry","updateKey","updateValue","oldKey","newKey","AutoFocusSelectEntry","autoFocusEntry","prevValue","setTimeout","OptionsSourceSelectEntry","ValuesSourceSelect","getOptionsSource","newField","OPTIONS_SOURCES_DEFAULTS","getOptionsSourceOptions","valueSource","OPTIONS_SOURCES_LABELS","getAutoFocusEntryId","valuesSource","STATIC","InputKeyOptionsSourceEntry","InputValuesKey","StaticOptionsSourceEntry","addEntry","getIndexedEntry","removeEntry","without","isValueAssigned","items","shouldSort","labelOrValueIsAlreadyAssignedForIndex","existingEntry","AdornerEntry","onChange","appearance","PrefixAdorner","SuffixAdorner","ReadonlyEntry","Readonly","FeelToggleSwitchEntry","LayouterAppearanceEntry","RepeatableEntry","disableCollapse","nonCollapseItemsEntry","ConditionEntry","Condition","hide","OptionsExpressionEntry","OptionsExpression","TableDataSourceEntry","PaginationEntry","Pagination","defaultRowCount","RowCountEntry","RowCount","isNil","OPTIONS","static","SELECT_OPTIONS","COLUMNS_PATH","COLUMNS_EXPRESSION_PATH","HeadersSourceSelectEntry","HeadersSourceSelect","getValuesSourceOptions","PATH","ColumnsExpressionEntry","ColumnsExpression","labelPath","keyPath","ColumnEntry","StaticColumnsSourceEntry","GeneralGroup","SerializationGroup","ConstraintsGroup","VALIDATION_TYPE_OPTIONS","custom","email","phone","ValidationGroup","isCustomValidation","Required","ValidationType","MinLength","MaxLength","Pattern","Min","Max","FeelNumberEntry","OptionsGroups","getValuesTooltip","Group","ListGroup","CustomPropertiesGroup","has","removeKey","AppearanceGroup","LayoutGroup","SecurityAttributesGroup","createEntries","securityEntries","SECURITY_ATTRIBUTES_DEFINITIONS","definition","security","Advisory","ConditionGroup","TableHeaderGroups","fieldId","areStaticColumnsEnabled","TOOLTIP_TEXT","PropertiesProvider","_filterVisibleEntries","PropertiesPanelModule","FeelPopupModule","propertiesProvider","RenderInjector","registeredRenderers","attachRenderer","identifier","detachRenderer","r","RenderInjectionModule","EditorRepeatRenderManager","RepeatFooter","isFieldRepeating","RepeatSvg","RepeatRenderModule","repeatRenderManager","ids","Ids","_onEvent","createFormContainer","setAttribute","exporter","_createInjector","_state","invoke","_emit","_detach","importSchema","Promise","resolve","reject","importedSchema","warnings","saveSchema","exportSchema","schemaVersion","setProperty","modules","_getModules","additionalModules","enrichedConfig","createInjector","MarkdownRendererModule","exportDetails","cleanedSchema","createFormEditor","rest","then"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQA,IAAIA,MAAM,GAAG,MAAM,CAAA;AAEnB,IAAIC,kBAAgB,GAAG,IAAI,CAAA;AAE3B,IAAIC,KAAK,GAAGC,KAAK,CAACC,SAAS,CAACF,KAAK,CAAA;;AAEjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,SAASG,QAAQA,GAAG;AAEjC;AACF;AACA;AACE,EAAA,IAAI,CAACC,UAAU,GAAG,EAAE,CAAA;;AAEpB;AACA;AACA,EAAA,IAAI,CAACC,EAAE,CAAC,iBAAiB,EAAE,CAAC,EAAE,IAAI,CAACC,QAAQ,EAAE,IAAI,CAAC,CAAA;AACpD,CAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAH,QAAQ,CAACD,SAAS,CAACG,EAAE,GAAG,UAASE,MAAM,EAAEC,QAAQ,EAAEC,QAAQ,EAAEC,IAAI,EAAE;EAEjEH,MAAM,GAAGI,eAAO,CAAC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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","x_google_ignoreList":[0,39,40,45,46,47,48,52,53,54,80]}