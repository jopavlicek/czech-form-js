{"version":3,"file":"index.es.js","sources":["../src/features/expressionLanguage/variableExtractionHelpers.js","../src/features/expressionLanguage/FeelExpressionLanguage.js","../src/features/expressionLanguage/FeelersTemplating.js","../src/util/constants/DatetimeConstants.js","../src/util/constants/OptionsSourceConstants.js","../src/util/constants/IFrameConstants.js","../src/util/injector.js","../src/util/form.js","../src/render/components/Util.js","../src/render/components/form-fields/Button.js","../src/render/context/FormRenderContext.js","../src/render/context/LocalExpressionContext.js","../src/render/context/FormContext.js","../src/render/hooks/useService.js","../src/util/simple.js","../src/render/hooks/useCondition.js","../src/render/components/util/optionsUtil.js","../src/render/hooks/useExpressionEvaluation.js","../src/render/hooks/useDeepCompareMemoize.js","../src/render/hooks/useOptionsAsync.js","../src/render/hooks/useDangerousHTMLWrapper.js","../src/render/hooks/useSecurityAttributesMap.js","../src/render/hooks/useGetLabelCorrelation.js","../src/render/components/util/domUtil.js","../src/render/hooks/useScrollIntoView.js","../src/render/hooks/useFilteredFormData.js","../src/render/hooks/useKeyDownAction.js","../src/render/hooks/useReadonly.js","../src/render/hooks/usePrevious.js","../src/render/hooks/useFlushDebounce.js","../src/render/hooks/useEffectOnChange.js","../src/render/hooks/useTemplateEvaluation.js","../src/render/hooks/useSingleLineTemplateEvaluation.js","../src/render/components/util/dateTimeUtil.js","../src/render/components/util/sanitizerUtil.js","../src/render/hooks/useCleanupSingleSelectValue.js","../src/render/hooks/useCleanupMultiSelectValue.js","../src/render/components/Description.js","../src/render/components/Errors.js","../src/render/components/Label.js","../src/render/components/form-fields/Checkbox.js","../src/render/components/form-fields/Checklist.js","../src/render/components/FormField.js","../src/render/components/form-fields/parts/ChildrenRenderer.js","../src/render/components/form-fields/Default.js","../src/render/components/form-fields/icons/Calendar.svg","../src/render/components/util/localisationUtil.js","../src/render/components/form-fields/parts/InputAdorner.js","../src/render/components/form-fields/parts/Datepicker.js","../src/render/components/form-fields/icons/Clock.svg","../src/render/components/form-fields/parts/DropdownList.js","../src/render/components/form-fields/parts/Timepicker.js","../src/render/components/form-fields/Datetime.js","../src/render/components/form-fields/Group.js","../src/render/components/form-fields/IFrame.js","../src/render/components/icons/Button.svg","../src/render/components/icons/Checkbox.svg","../src/render/components/icons/Checklist.svg","../src/render/components/icons/Datetime.svg","../src/render/components/icons/Taglist.svg","../src/render/components/icons/Form.svg","../src/render/components/icons/Group.svg","../src/render/components/icons/Number.svg","../src/render/components/icons/Radio.svg","../src/render/components/icons/Select.svg","../src/render/components/icons/Separator.svg","../src/render/components/icons/Spacer.svg","../src/render/components/icons/DynamicList.svg","../src/render/components/icons/Text.svg","../src/render/components/icons/HTML.svg","../src/render/components/icons/ExpressionField.svg","../src/render/components/icons/Textfield.svg","../src/render/components/icons/Textarea.svg","../src/render/components/icons/IFrame.svg","../src/render/components/icons/Image.svg","../src/render/components/icons/Table.svg","../src/render/components/icons/index.js","../src/render/components/form-fields/Image.js","../src/render/components/form-fields/parts/TemplatedInputAdorner.js","../src/render/components/form-fields/icons/AngelDown.svg","../src/render/components/form-fields/icons/AngelUp.svg","../src/render/components/util/numberFieldUtil.js","../src/render/components/form-fields/Number.js","../src/render/components/form-fields/Radio.js","../src/render/components/form-fields/icons/XMark.svg","../src/render/components/form-fields/parts/SearchableSelect.js","../src/render/components/form-fields/parts/SimpleSelect.js","../src/render/components/form-fields/Select.js","../src/render/components/form-fields/Separator.js","../src/render/components/form-fields/Spacer.js","../src/render/components/form-fields/DynamicList.js","../src/render/components/form-fields/parts/SkipLink.js","../src/render/components/form-fields/Taglist.js","../src/render/components/Sanitizer.js","../src/render/components/form-fields/Text.js","../src/render/components/form-fields/Html.js","../src/render/components/form-fields/ExpressionField.js","../src/render/components/form-fields/Textfield.js","../src/render/components/form-fields/Textarea.js","../src/render/components/form-fields/icons/ArrowDown.svg","../src/render/components/form-fields/icons/ArrowUp.svg","../src/render/components/form-fields/icons/CaretLeft.svg","../src/render/components/form-fields/icons/CaretRight.svg","../src/render/components/form-fields/Table.js","../src/render/components/PoweredBy.js","../src/render/components/FormComponent.js","../src/render/components/index.js","../src/render/FormFields.js","../src/util/getSchemaVariables.js","../src/util/structure.js","../src/features/expressionLanguage/ConditionChecker.js","../src/features/expressionLanguage/index.js","../src/features/markdown/MarkdownRenderer.js","../src/features/markdown/index.js","../../../node_modules/diagram-js/lib/command/CommandStack.js","../../../node_modules/diagram-js/lib/command/index.js","../src/features/viewerCommands/cmd/UpdateFieldValidationHandler.js","../src/features/viewerCommands/ViewerCommands.js","../src/features/viewerCommands/index.js","../src/render/components/form-fields/icons/Expand.svg","../src/render/components/form-fields/icons/Collapse.svg","../src/render/components/form-fields/icons/Add.svg","../src/render/components/form-fields/icons/Delete.svg","../src/features/repeatRender/RepeatRenderManager.js","../src/features/repeatRender/index.js","../../../node_modules/diagram-js/lib/core/EventBus.js","../src/core/Validator.js","../src/core/Importer.js","../src/core/FieldFactory.js","../src/core/PathRegistry.js","../src/core/FormLayouter.js","../src/core/FormFieldRegistry.js","../src/render/Renderer.js","../src/render/index.js","../src/core/index.js","../src/Form.js","../src/index.js"],"sourcesContent":["import { parseExpression, parseUnaryTests } from 'feelin';\r\n\r\nexport const getFlavouredFeelVariableNames = (feelString, feelFlavour = 'expression', options = {}) => {\r\n\r\n  const {\r\n    depth = 0,\r\n    specialDepthAccessors = {}\r\n  } = options;\r\n\r\n  if (![ 'expression', 'unaryTest' ].includes(feelFlavour)) return [];\r\n\r\n  const tree = feelFlavour === 'expression' ? parseExpression(feelString) : parseUnaryTests(feelString);\r\n\r\n  const simpleExpressionTree = _buildSimpleFeelStructureTree(tree, feelString);\r\n\r\n  const variables = (function _unfoldVariables(node) {\r\n\r\n    if (node.name === 'PathExpression') {\r\n\r\n      // if the path is built on top of a context, we process that context and\r\n      // ignore the rest of the path expression, as it is not relevant for variable extraction\r\n      const pathRoot = _linearizePathExpression(node)[0];\r\n      if (pathRoot.name === 'Context') {\r\n        return _unfoldVariables(pathRoot);\r\n      }\r\n\r\n      if (Object.keys(specialDepthAccessors).length === 0) {\r\n        return depth === 0 ? [ _getVariableNameAtPathIndex(node, 0) ] : [ ];\r\n      }\r\n\r\n      // if using special depth accessors, use a more complex extraction\r\n      return Array.from(_smartExtractVariableNames(node, depth, specialDepthAccessors));\r\n    }\r\n\r\n    if (depth === 0 && node.name === 'VariableName') return [ node.variableName ];\r\n\r\n    // for any other kind of node, traverse its children and flatten the result\r\n    if (node.children) {\r\n      const variables = node.children.reduce((acc, child) => {\r\n        return acc.concat(_unfoldVariables(child));\r\n      }, []);\r\n\r\n      // if we are within a filter context, we need to remove the item variable as it is used for iteration there\r\n      return node.name === 'FilterContext' ? variables.filter((name) => name !== 'item') : variables;\r\n    }\r\n\r\n    return [];\r\n  })(simpleExpressionTree);\r\n\r\n  return [ ...new Set(variables) ];\r\n\r\n};\r\n\r\n\r\n/**\r\n * Get the variable name at the specified index in a given path expression.\r\n *\r\n * @param {Object} root - The root node of the path expression tree.\r\n * @param {number} index - The index of the variable name to retrieve.\r\n * @returns {string|null} The variable name at the specified index or null if index is out of bounds.\r\n */\r\nconst _getVariableNameAtPathIndex = (root, index) => {\r\n  const nodes = _linearizePathExpression(root);\r\n  return nodes[index].variableName || null;\r\n};\r\n\r\n\r\n/**\r\n * Extracts the variables which are required of the external context for a given path expression.\r\n * This is done by traversing the path expression tree and keeping track of the current depth relative to the external context.\r\n *\r\n * @param {Object} node - The root node of the path expression tree.\r\n * @param {number} initialDepth - The depth at which the root node is located in the outer context.\r\n * @param {Object} specialDepthAccessors - Definitions of special keywords which represent more complex accesses of the outer context.\r\n * @returns {Set} - A set containing the extracted variable names.\r\n */\r\nconst _smartExtractVariableNames = (node, initialDepth, specialDepthAccessors) => {\r\n\r\n  // depth info represents the previous (initialised as null) and current depth of the current accessor in the path expression\r\n  // we track multiple of these to account for the fact that a path expression may be ambiguous due to special keywords\r\n  let accessorDepthInfos = [ { previous: null, current: initialDepth - 1 } ];\r\n  const extractedVariables = new Set();\r\n  const pathNodes = _linearizePathExpression(node);\r\n\r\n  for (let i = 0; i < pathNodes.length; i++) {\r\n    const currentAccessor = pathNodes[i].variableName;\r\n\r\n    if (currentAccessor in specialDepthAccessors) {\r\n      const depthOffsets = specialDepthAccessors[currentAccessor];\r\n\r\n      // if the current accessor is a special keyword, we need to expand the current depth info set\r\n      // this is done to account for the ambiguity of keywords like parent, which may be used to access\r\n      // the parent of the current node, or a child variable of the same name\r\n      accessorDepthInfos = depthOffsets.reduce((accumulator, offset) => {\r\n        return [\r\n          ...accumulator,\r\n          ...accessorDepthInfos.map(depthInfo => ({ previous: depthInfo.current, current: depthInfo.current + offset })),\r\n        ];\r\n      }, []).filter(depthInfo => depthInfo.current >= -1); // discard all depth infos which are out of bounds\r\n\r\n    } else {\r\n\r\n      // if the current accessor is not a special keyword, we know it's simply accessing a child\r\n      // hence we are now one level deeper in the tree and simply increment\r\n      accessorDepthInfos = accessorDepthInfos.map(depthInfo => ({ previous: depthInfo.current, current: depthInfo.current + 1 }));\r\n    }\r\n\r\n    // finally, we check if for the current accessor, there is a scenario where:\r\n    // previous it was at depth -1 (i.e. the root context), and is now at depth 0 (i.e. a variable)\r\n    // these are the variables we need to request, so we add them to the set\r\n    if (accessorDepthInfos.some(depthInfo => depthInfo.previous === -1 && depthInfo.current === 0)) {\r\n      extractedVariables.add(currentAccessor);\r\n    }\r\n  }\r\n\r\n  // we return a set to avoid duplicates\r\n  return new Set(extractedVariables);\r\n};\r\n\r\n\r\n/**\r\n * Deconstructs a path expression tree into an array of components.\r\n *\r\n * @param {Object} root - The root node of the path expression tree.\r\n * @returns {Array<object>} An array of components in the path expression, in the correct order.\r\n */\r\nconst _linearizePathExpression = (root) => {\r\n\r\n  let node = root;\r\n  let parts = [];\r\n\r\n  // Traverse the tree and collect path components\r\n  while (node.name === 'PathExpression') {\r\n    parts.push(node.children[1]);\r\n    node = node.children[0];\r\n  }\r\n\r\n  // Add the last component to the array\r\n  parts.push(node);\r\n\r\n  // Reverse and return the array to get the correct order\r\n  return parts.reverse();\r\n};\r\n\r\n\r\n/**\r\n * Builds a simplified feel structure tree from the given parse tree and feel string.\r\n * The nodes follow this structure: `{ name: string, children: Array, variableName?: string }`\r\n *\r\n * @param {Object} parseTree - The parse tree generated by a parser.\r\n * @param {string} feelString - The feel string used for parsing.\r\n * @returns {Object} The simplified feel structure tree.\r\n */\r\nconst _buildSimpleFeelStructureTree = (parseTree, feelString) => {\r\n\r\n  const stack = [ { children: [] } ];\r\n  parseTree.iterate({\r\n    enter: (node) => {\r\n\r\n      const nodeRepresentation = {\r\n        name: node.type.name,\r\n        children: [],\r\n      };\r\n\r\n      if (node.type.name === 'VariableName') {\r\n        nodeRepresentation.variableName = feelString.slice(node.from, node.to);\r\n      }\r\n\r\n      stack.push(nodeRepresentation);\r\n    },\r\n    leave: () => {\r\n      const result = stack.pop();\r\n      const parent = stack[stack.length - 1];\r\n      parent.children.push(result);\r\n    }\r\n  });\r\n\r\n  return _extractFilterExpressions(stack[0].children[0]);\r\n};\r\n\r\n/**\r\n * Restructure the tree in such a way to bring filters (which create new contexts) to the root of the tree.\r\n * This is done to simplify the extraction of variables and match the context hierarchy.\r\n */\r\nconst _extractFilterExpressions = (tree) => {\r\n\r\n  const flattenedExpressionTree = {\r\n    name: 'Root',\r\n    children: [ tree ]\r\n  };\r\n\r\n  const iterate = (node) => {\r\n\r\n    if (node.children) {\r\n      for (let x = 0; x < node.children.length; x++) {\r\n\r\n        if (node.children[x].name === 'FilterExpression') {\r\n\r\n          const filterTarget = node.children[x].children[0];\r\n          const filterExpression = node.children[x].children[2];\r\n\r\n          // bypass the filter expression\r\n          node.children[x] = filterTarget;\r\n\r\n          const taggedFilterExpression = {\r\n            name: 'FilterContext',\r\n            children: [ filterExpression ]\r\n          };\r\n\r\n          // append the filter expression to the root\r\n          flattenedExpressionTree.children.push(taggedFilterExpression);\r\n\r\n          // recursively iterate the expression\r\n          iterate(filterExpression);\r\n\r\n        } else {\r\n          iterate(node.children[x]);\r\n        }\r\n      }\r\n\r\n    }\r\n\r\n  };\r\n\r\n  iterate(tree);\r\n\r\n  return flattenedExpressionTree;\r\n};\r\n","import { evaluate } from 'feelin';\r\nimport { isString } from 'min-dash';\r\nimport { getFlavouredFeelVariableNames } from './variableExtractionHelpers';\r\n\r\nexport class FeelExpressionLanguage {\r\n  constructor(eventBus) {\r\n    this._eventBus = eventBus;\r\n  }\r\n\r\n  /**\r\n   * Determines if the given value is a FEEL expression.\r\n   *\r\n   * @param {any} value\r\n   * @returns {boolean}\r\n   *\r\n   */\r\n  isExpression(value) { return isString(value) && value.startsWith('='); }\r\n\r\n  /**\r\n   * Retrieve variable names from a given FEEL expression.\r\n   *\r\n   * @param {string} expression\r\n   * @param {object} [options]\r\n   * @param {string} [options.type]\r\n   *\r\n   * @returns {string[]}\r\n   */\r\n  getVariableNames(expression, options = {}) {\r\n\r\n    const {\r\n      type = 'expression'\r\n    } = options;\r\n\r\n    if (!this.isExpression(expression)) {\r\n      return [];\r\n    }\r\n\r\n    if (![ 'unaryTest', 'expression' ].includes(type)) {\r\n      throw new Error('Unknown expression type: ' + type);\r\n    }\r\n\r\n    return getFlavouredFeelVariableNames(expression, type);\r\n  }\r\n\r\n  /**\r\n   * Evaluate an expression.\r\n   *\r\n   * @param {string} expression\r\n   * @param {import('../../types').Data} [data]\r\n   *\r\n   * @returns {any}\r\n   */\r\n  evaluate(expression, data = {}) {\r\n    if (!expression) {\r\n      return null;\r\n    }\r\n\r\n    if (!isString(expression) || !expression.startsWith('=')) {\r\n      return null;\r\n    }\r\n\r\n    try {\r\n      const result = evaluate(expression.slice(1), data);\r\n\r\n      return result;\r\n    } catch (error) {\r\n      this._eventBus.fire('error', { error });\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nFeelExpressionLanguage.$inject = [\r\n  'eventBus'\r\n];","import { parser as feelersParser, buildSimpleTree, evaluate as evaluateFeelers } from 'feelers';\r\nimport { isString } from 'min-dash';\r\nimport { getFlavouredFeelVariableNames } from './variableExtractionHelpers';\r\n\r\nexport class FeelersTemplating {\r\n\r\n  constructor() { }\r\n\r\n  /**\r\n   * Determines if the given value is a feelers template.\r\n   *\r\n   * @param {any} value\r\n   * @returns {boolean}\r\n   *\r\n   */\r\n  isTemplate(value) { return isString(value) && (value.startsWith('=') || /{{.*?}}/.test(value)); }\r\n\r\n\r\n  /**\r\n   * Retrieve variable names from a given feelers template.\r\n   *\r\n   * @param {string} template\r\n   *\r\n   * @returns {string[]}\r\n   */\r\n  getVariableNames(template) {\r\n\r\n    if (!this.isTemplate(template)) {\r\n      return [];\r\n    }\r\n\r\n    const expressions = this._extractExpressionsWithDepth(template);\r\n\r\n    // defines special accessors, and the change(s) in depth they could imply (e.g. parent can be used to access the parent context (depth - 1) or a child variable named parent (depth + 1)\r\n    const specialDepthAccessors = {\r\n      parent: [ -1, 1 ],\r\n      _parent_: [ -1 ],\r\n      this: [ 0, 1 ],\r\n      _this_: [ 0 ],\r\n    };\r\n\r\n    return expressions.reduce((variables, { expression, depth }) => {\r\n      return variables.concat(getFlavouredFeelVariableNames(expression, 'expression', { depth, specialDepthAccessors }));\r\n    }, []);\r\n  }\r\n\r\n\r\n  /**\r\n   * Evaluate a template.\r\n   *\r\n   * @param {string} template\r\n   * @param {Object<string, any>} context\r\n   * @param {Object} options\r\n   * @param {boolean} [options.debug = false]\r\n   * @param {boolean} [options.strict = false]\r\n   * @param {Function} [options.buildDebugString]\r\n   * @param {Function} [options.sanitizer]\r\n   *\r\n   * @returns\r\n   */\r\n  evaluate(template, context = {}, options = {}) {\r\n\r\n    const {\r\n      debug = false,\r\n      strict = false,\r\n      buildDebugString = (err) => ' {{⚠}} ',\r\n      sanitizer = (value) => value\r\n    } = options;\r\n\r\n    return evaluateFeelers(template, context, { debug, strict, buildDebugString, sanitizer });\r\n  }\r\n\r\n\r\n  /**\r\n * @typedef {Object} ExpressionWithDepth\r\n * @property {number} depth - The depth of the expression in the syntax tree.\r\n * @property {string} expression - The extracted expression\r\n */\r\n\r\n  /**\r\n * Extracts all feel expressions in the template along with their depth in the syntax tree.\r\n * The depth is incremented for child expressions of loops to account for context drilling.\r\n\r\n * @name extractExpressionsWithDepth\r\n * @param {string} template - A feelers template string.\r\n * @returns {Array<ExpressionWithDepth>} An array of objects, each containing the depth and the extracted expression.\r\n *\r\n * @example\r\n * const template = \"Hello {{user}}, you have:{{#loop items}}\\n- {{amount}} {{name}}{{/loop}}.\";\r\n * const extractedExpressions = _extractExpressionsWithDepth(template);\r\n */\r\n  _extractExpressionsWithDepth(template) {\r\n\r\n    // build simplified feelers syntax tree\r\n    const parseTree = feelersParser.parse(template);\r\n    const tree = buildSimpleTree(parseTree, template);\r\n\r\n    return (function _traverse(n, depth = 0) {\r\n\r\n      if ([ 'Feel', 'FeelBlock' ].includes(n.name)) {\r\n        return [ { depth, expression: n.content } ];\r\n      }\r\n\r\n      if (n.name === 'LoopSpanner') {\r\n        const loopExpression = n.children[0].content;\r\n        const childResults = n.children.slice(1).reduce((acc, child) => {\r\n          return acc.concat(_traverse(child, depth + 1));\r\n        }, []);\r\n        return [ { depth, expression: loopExpression }, ...childResults ];\r\n      }\r\n\r\n      return n.children.reduce((acc, child) => {\r\n        return acc.concat(_traverse(child, depth));\r\n      }, []);\r\n\r\n    })(tree);\r\n\r\n  }\r\n}\r\n\r\nFeelersTemplating.$inject = [];","// config  ///////////////////\r\n\r\nexport const MINUTES_IN_DAY = 60 * 24;\r\n\r\nexport const DATETIME_SUBTYPES = {\r\n  DATE: 'date',\r\n  TIME: 'time',\r\n  DATETIME: 'datetime'\r\n};\r\n\r\nexport const TIME_SERIALISING_FORMATS = {\r\n  UTC_OFFSET: 'utc_offset',\r\n  UTC_NORMALIZED: 'utc_normalized',\r\n  NO_TIMEZONE: 'no_timezone'\r\n};\r\n\r\nexport const DATETIME_SUBTYPES_LABELS = {\r\n  [DATETIME_SUBTYPES.DATE]: 'Datum',\r\n  [DATETIME_SUBTYPES.TIME]: 'Čas',\r\n  [DATETIME_SUBTYPES.DATETIME]: 'Datum a čas'\r\n};\r\n\r\nexport const TIME_SERIALISINGFORMAT_LABELS = {\r\n  [TIME_SERIALISING_FORMATS.UTC_OFFSET]: 'Posun UTC',\r\n  [TIME_SERIALISING_FORMATS.UTC_NORMALIZED]: 'Normalizované UTC',\r\n  [TIME_SERIALISING_FORMATS.NO_TIMEZONE]: 'Bez časové zóny'\r\n};\r\n\r\nexport const DATETIME_SUBTYPE_PATH = [ 'subtype' ];\r\nexport const DATE_LABEL_PATH = [ 'dateLabel' ];\r\nexport const DATE_DISALLOW_PAST_PATH = [ 'disallowPassedDates' ];\r\nexport const TIME_LABEL_PATH = [ 'timeLabel' ];\r\nexport const TIME_USE24H_PATH = [ 'use24h' ];\r\nexport const TIME_INTERVAL_PATH = [ 'timeInterval' ];\r\nexport const TIME_SERIALISING_FORMAT_PATH = [ 'timeSerializingFormat' ];\r\n","import { get } from 'min-dash';\r\n\r\n// config  ///////////////////\r\n\r\nexport const OPTIONS_SOURCES = {\r\n  STATIC: 'static',\r\n  INPUT: 'input',\r\n  EXPRESSION: 'expression',\r\n};\r\n\r\nexport const OPTIONS_SOURCE_DEFAULT = OPTIONS_SOURCES.STATIC;\r\n\r\nexport const OPTIONS_SOURCES_LABELS = {\r\n  [OPTIONS_SOURCES.STATIC]: 'Staticky',\r\n  [OPTIONS_SOURCES.INPUT]: 'Dynamicky',\r\n  [OPTIONS_SOURCES.EXPRESSION]: 'Výraz',\r\n};\r\n\r\nexport const OPTIONS_SOURCES_PATHS = {\r\n  [OPTIONS_SOURCES.STATIC]: [ 'values' ],\r\n  [OPTIONS_SOURCES.INPUT]: [ 'valuesKey' ],\r\n  [OPTIONS_SOURCES.EXPRESSION]: [ 'valuesExpression' ],\r\n};\r\n\r\nexport const OPTIONS_SOURCES_DEFAULTS = {\r\n  [OPTIONS_SOURCES.STATIC]: [\r\n    {\r\n      label: 'Možnost',\r\n      value: 'moznost'\r\n    }\r\n  ],\r\n  [OPTIONS_SOURCES.INPUT]: '',\r\n  [OPTIONS_SOURCES.EXPRESSION]: '='\r\n};\r\n\r\n// helpers ///////////////////\r\n\r\nexport function getOptionsSource(field) {\r\n\r\n  for (const source of Object.values(OPTIONS_SOURCES)) {\r\n    if (get(field, OPTIONS_SOURCES_PATHS[source]) !== undefined) {\r\n      return source;\r\n    }\r\n  }\r\n\r\n  return OPTIONS_SOURCE_DEFAULT;\r\n}\r\n","export const SANDBOX_ATTRIBUTE = 'sandbox';\r\nexport const ALLOW_ATTRIBUTE = 'allow';\r\n\r\n// Cf. https://developer.mozilla.org/en-US/docs/Web/HTTP/Permissions_Policy#iframe_syntax\r\nexport const SECURITY_ATTRIBUTES_DEFINITIONS = [\r\n  {\r\n    attribute: SANDBOX_ATTRIBUTE,\r\n    directive: 'allow-scripts',\r\n    property: 'allowScripts',\r\n    label: 'Spouštění skriptů'\r\n  },\r\n  {\r\n    attribute: SANDBOX_ATTRIBUTE,\r\n    directive: 'allow-same-origin',\r\n    property: 'allowSameOrigin',\r\n    label: 'Povolit stejný původ'\r\n  },\r\n  {\r\n    attribute: ALLOW_ATTRIBUTE,\r\n    directive: 'fullscreen',\r\n    property: 'fullscreen',\r\n    label: 'Otevřít na celé obrazovce'\r\n  },\r\n  {\r\n    attribute: ALLOW_ATTRIBUTE,\r\n    directive: 'geolocation',\r\n    property: 'geolocation',\r\n    label: 'Geolokační služby'\r\n  },\r\n  {\r\n    attribute: ALLOW_ATTRIBUTE,\r\n    directive: 'camera',\r\n    property: 'camera',\r\n    label: 'Přístup ke kaměře'\r\n  },\r\n  {\r\n    attribute: ALLOW_ATTRIBUTE,\r\n    directive: 'microphone',\r\n    property: 'microphone',\r\n    label: 'Přístup k mikrofonu'\r\n  },\r\n  {\r\n    attribute: SANDBOX_ATTRIBUTE,\r\n    directive: 'allow-forms',\r\n    property: 'allowForms',\r\n    label: 'Odesílání formulářů'\r\n  },\r\n  {\r\n    attribute: SANDBOX_ATTRIBUTE,\r\n    directive: 'allow-modals',\r\n    property: 'allowModals',\r\n    label: 'Otevírat modální okna'\r\n  },\r\n  {\r\n    attribute: SANDBOX_ATTRIBUTE,\r\n    directive: 'allow-popups',\r\n    property: 'allowPopups',\r\n    label: 'Otevírat vyskakovací okna'\r\n  },\r\n  {\r\n    attribute: SANDBOX_ATTRIBUTE,\r\n    directive: 'allow-top-navigation',\r\n    property: 'allowTopNavigation',\r\n    label: 'Top-level navigace'\r\n  },\r\n  {\r\n    attribute: SANDBOX_ATTRIBUTE,\r\n    directive: 'allow-storage-access-by-user-activation',\r\n    property: 'allowStorageAccessByUserActivation',\r\n    label: 'Přístup k úložišti uživatelem'\r\n  }\r\n];","import { Injector } from 'didi';\r\n\r\nexport function createInjector(bootstrapModules) {\r\n\r\n  const injector = new Injector(bootstrapModules);\r\n\r\n  injector.init();\r\n\r\n  return injector;\r\n}","/**\r\n * @param {string?} prefix\r\n *\r\n * @returns Element\r\n */\r\nexport function createFormContainer(prefix = 'fjs') {\r\n  const container = document.createElement('div');\r\n\r\n  container.classList.add(`${ prefix }-container`);\r\n\r\n  return container;\r\n}","import classNames from 'classnames';\r\n\r\nexport function formFieldClasses(type, { errors = [], disabled = false, readonly = false } = {}) {\r\n  if (!type) {\r\n    throw new Error('type required');\r\n  }\r\n\r\n  return classNames('fjs-form-field', `fjs-form-field-${type}`, {\r\n    'fjs-has-errors': errors.length > 0,\r\n    'fjs-disabled': disabled,\r\n    'fjs-readonly': readonly\r\n  });\r\n}\r\n\r\nexport function gridColumnClasses(formField) {\r\n  const {\r\n    layout = {}\r\n  } = formField;\r\n\r\n  const {\r\n    columns\r\n  } = layout;\r\n\r\n  return classNames(\r\n    'fjs-layout-column',\r\n    `cds--col${columns ? '-lg-' + columns : ''}`,\r\n\r\n    // always fall back to top-down on smallest screens\r\n    'cds--col-sm-16',\r\n    'cds--col-md-16'\r\n  );\r\n}\r\n\r\nexport function prefixId(id, formId, indexes) {\r\n  let result = 'fjs-form';\r\n\r\n  if (formId) {\r\n    result += `-${formId}`;\r\n  }\r\n\r\n  result += `-${id}`;\r\n\r\n  Object.values(indexes || {}).forEach((index) => {\r\n    result += `_${index}`;\r\n  });\r\n\r\n  return result;\r\n}\r\n","import { formFieldClasses } from '../Util';\r\n\r\nconst type = 'button';\r\n\r\nexport function Button(props) {\r\n  const {\r\n    disabled,\r\n    onFocus,\r\n    onBlur,\r\n    field\r\n  } = props;\r\n\r\n  const { action = 'submit' } = field;\r\n\r\n  return <div class={ formFieldClasses(type) }>\r\n    <button\r\n      class=\"fjs-button\"\r\n      type={ action }\r\n      disabled={ disabled }\r\n      onFocus={ () => onFocus && onFocus() }\r\n      onBlur={ () => onBlur && onBlur() }>\r\n      { field.label }\r\n    </button>\r\n  </div>;\r\n}\r\n\r\nButton.config = {\r\n  type,\r\n  keyed: false,\r\n  label: 'Tlačítko',\r\n  group: 'action',\r\n  create: (options = {}) => ({\r\n    action: 'submit',\r\n    ...options\r\n  })\r\n};\r\n","import { createContext } from 'preact';\r\n\r\nexport const FormRenderContext = createContext({\r\n  Empty: (props) => {\r\n    return null;\r\n  },\r\n  Hidden: (props) => {\r\n    return null;\r\n  },\r\n  Children: (props) => {\r\n    return <div class={ props.class } style={ props.style }>{ props.children }</div>;\r\n  },\r\n  Element: (props) => {\r\n    return <div class={ props.class } style={ props.style }>{ props.children }</div>;\r\n  },\r\n  Row: (props) => {\r\n    return <div class={ props.class } style={ props.style }>{ props.children }</div>;\r\n  },\r\n  Column: (props) => {\r\n    if (props.field.type === 'default') {\r\n      return props.children;\r\n    }\r\n\r\n    return <div class={ props.class } style={ props.style }>{ props.children }</div>;\r\n  },\r\n  hoverInfo: {\r\n    cleanup: () => {}\r\n  },\r\n});\r\n","import { createContext } from 'preact';\r\n\r\nexport const LocalExpressionContext = createContext({\r\n  data: null,\r\n  this: null,\r\n  parent: null,\r\n  i: null\r\n});\r\n","import { createContext } from 'preact';\r\n\r\n/**\r\n * @param {string} type\r\n * @param {boolean} [strict]\r\n *\r\n * @returns {any}\r\n */\r\nfunction getService(type, strict) {}\r\n\r\nexport const FormContext = createContext({\r\n  getService,\r\n  formId: null\r\n});\r\n","import {\r\n  useContext\r\n} from 'preact/hooks';\r\n\r\nimport { FormContext } from '../context';\r\n\r\nexport function useService(type, strict) {\r\n  const {\r\n    getService\r\n  } = useContext(FormContext);\r\n\r\n  return getService(type, strict);\r\n}","export function isRequired(field) {\r\n  return field.required;\r\n}\r\n\r\nexport function pathParse(path) {\r\n  if (!path) {\r\n    return [];\r\n  }\r\n\r\n  return path.split('.').map(key => {\r\n    return isNaN(parseInt(key)) ? key : parseInt(key);\r\n  });\r\n}\r\n\r\nexport function pathsEqual(a, b) {\r\n  return (\r\n    a &&\r\n    b &&\r\n    a.length === b.length &&\r\n    a.every((value, index) => value === b[ index ])\r\n  );\r\n}\r\n\r\nconst indices = {};\r\n\r\nexport function generateIndexForType(type) {\r\n  if (type in indices) {\r\n    indices[ type ]++;\r\n  } else {\r\n    indices[ type ] = 1;\r\n  }\r\n\r\n  return indices[ type ];\r\n}\r\n\r\nexport function generateIdForType(type) {\r\n  return `${ type }${ generateIndexForType(type) }`;\r\n}\r\n\r\n/**\r\n * @template T\r\n * @param {T} data\r\n * @param {(this: any, key: string, value: any) => any} [replacer]\r\n * @return {T}\r\n */\r\nexport function clone(data, replacer) {\r\n  return JSON.parse(JSON.stringify(data, replacer));\r\n}\r\n\r\n/**\r\n * Transform a LocalExpressionContext object into a usable FEEL context.\r\n *\r\n * @param {Object} context - The LocalExpressionContext object.\r\n * @returns {Object} The usable FEEL context.\r\n */\r\n\r\nexport function buildExpressionContext(context) {\r\n  const {\r\n    data,\r\n    ...specialContextKeys\r\n  } = context;\r\n\r\n  return {\r\n    ...specialContextKeys,\r\n    ...data,\r\n    ..._wrapObjectKeysWithUnderscores(specialContextKeys)\r\n  };\r\n}\r\n\r\nexport function runRecursively(formField, fn) {\r\n  const components = formField.components || [];\r\n\r\n  components.forEach((component, index) => {\r\n    runRecursively(component, fn);\r\n  });\r\n\r\n  fn(formField);\r\n}\r\n\r\n// helpers //////////////////////\r\n\r\nfunction _wrapObjectKeysWithUnderscores(obj) {\r\n  const newObj = {};\r\n  for (const [ key, value ] of Object.entries(obj)) {\r\n    newObj[`_${key}_`] = value;\r\n  }\r\n  return newObj;\r\n}","import { useService } from './useService.js';\r\nimport { useContext, useMemo } from 'preact/hooks';\r\nimport { LocalExpressionContext } from '../context/LocalExpressionContext.js';\r\nimport { buildExpressionContext } from '../../util/simple';\r\n\r\n/**\r\n * Evaluate if condition is met reactively based on the conditionChecker and form data.\r\n *\r\n * @param {string | undefined} condition\r\n *\r\n * @returns {boolean} true if condition is met or no condition or condition checker exists\r\n */\r\nexport function useCondition(condition) {\r\n  const conditionChecker = useService('conditionChecker', false);\r\n  const expressionContextInfo = useContext(LocalExpressionContext);\r\n\r\n  return useMemo(() => {\r\n    return conditionChecker ? conditionChecker.check(condition, buildExpressionContext(expressionContextInfo)) : null;\r\n  }, [ conditionChecker, condition, expressionContextInfo ]);\r\n}\r\n","import { get, isObject, isString, isNil } from 'min-dash';\r\n\r\n/**\r\n * Returns the options data for the provided if they can be simply determined, ignoring expression defined options.\r\n *\r\n * @param {object} formField\r\n * @param {object} formData\r\n */\r\nfunction getSimpleOptionsData(formField, formData) {\r\n\r\n  const {\r\n    valuesExpression: optionsExpression,\r\n    valuesKey: optionsKey,\r\n    values: staticOptions\r\n  } = formField;\r\n\r\n  if (optionsExpression) {\r\n    return null;\r\n  }\r\n\r\n  return optionsKey ? get(formData, [ optionsKey ]) : staticOptions;\r\n}\r\n\r\n/**\r\n * Normalizes the provided options data to a format that can be used by the select components.\r\n * If the options data is not valid, it is filtered out.\r\n *\r\n * @param {any[]} optionsData\r\n *\r\n * @returns {object[]}\r\n */\r\nfunction normalizeOptionsData(optionsData) {\r\n  return optionsData.filter(_isAllowedValue).map(_normalizeOption).filter(o => !isNil(o));\r\n}\r\n\r\n/**\r\n * Creates an options object with default values if no options are provided.\r\n *\r\n * @param {object} options\r\n *\r\n * @returns {object}\r\n */\r\nfunction createEmptyOptions(options = {}) {\r\n\r\n  const defaults = {};\r\n\r\n  // provide default options if valuesKey and valuesExpression are not set\r\n  if (!options.valuesKey && !options.valuesExpression) {\r\n    defaults.values = [\r\n      {\r\n        label: 'Možnost',\r\n        value: 'moznost'\r\n      }\r\n    ];\r\n  }\r\n\r\n  return {\r\n    ...defaults,\r\n    ...options\r\n  };\r\n}\r\n\r\n/**\r\n * Converts the provided option to a normalized format.\r\n * If the option is not valid, null is returned.\r\n *\r\n * @param {object} option\r\n * @param {string} option.label\r\n * @param {*} option.value\r\n *\r\n * @returns\r\n */\r\nfunction _normalizeOption(option) {\r\n\r\n  // (1) simple primitive case, use it as both label and value\r\n  if (_isAllowedPrimitive(option)) {\r\n    return { value: option, label: `${ option }` };\r\n  }\r\n\r\n  if (isObject(option)) {\r\n\r\n    const isValidLabel = _isValidLabel(option.label);\r\n\r\n    // (2) no label provided, but value is a simple primitive, use it as label and value\r\n    if (!isValidLabel && _isAllowedPrimitive(option.value)) {\r\n      return { value: option.value, label: `${ option.value }` };\r\n    }\r\n\r\n    // (3) both label and value are provided, use them as is\r\n    if (isValidLabel && _isAllowedValue(option.value)) {\r\n      return option;\r\n    }\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\nfunction _isAllowedPrimitive(value) {\r\n  const isAllowedPrimitiveType = [ 'number', 'string', 'boolean' ].includes(typeof(value));\r\n  const isValid = value || value === 0 || value === false;\r\n\r\n  return isAllowedPrimitiveType && isValid;\r\n}\r\n\r\nfunction _isValidLabel(label) {\r\n  return label && isString(label);\r\n}\r\n\r\nfunction _isAllowedValue(value) {\r\n  if (isObject(value)) {\r\n    return Object.keys(value).length > 0;\r\n  }\r\n\r\n  return _isAllowedPrimitive(value);\r\n}\r\n\r\nexport { getSimpleOptionsData, normalizeOptionsData, createEmptyOptions };\r\n","import { useService } from './useService';\r\nimport { LocalExpressionContext } from '../context/LocalExpressionContext';\r\nimport { useContext, useMemo } from 'preact/hooks';\r\nimport { buildExpressionContext } from '../../util/simple';\r\n\r\n/**\r\n * Evaluate a string reactively based on the expressionLanguage and form data.\r\n * If the string is not an expression, it is returned as is.\r\n * The function is memoized to minimize re-renders.\r\n *\r\n * @param {string} value - The string to evaluate.\r\n * @returns {any} - Evaluated value or the original value if not an expression.\r\n */\r\nexport function useExpressionEvaluation(value) {\r\n  const expressionLanguage = useService('expressionLanguage');\r\n  const expressionContextInfo = useContext(LocalExpressionContext);\r\n\r\n  return useMemo(() => {\r\n    if (expressionLanguage && expressionLanguage.isExpression(value)) {\r\n      return expressionLanguage.evaluate(value, buildExpressionContext(expressionContextInfo));\r\n    }\r\n    return value;\r\n  }, [ expressionLanguage, expressionContextInfo, value ]);\r\n}\r\n","import { useRef } from 'preact/hooks';\r\nimport isEqual from 'lodash/isEqual';\r\n\r\n/**\r\n * A custom hook to manage state changes with deep comparison.\r\n *\r\n * @template T\r\n * @param {T} value - The current value to manage.\r\n * @returns {T} - Returns the current state.\r\n */\r\nexport function useDeepCompareMemoize(value) {\r\n  const ref = useRef();\r\n\r\n  if (!isEqual(value, ref.current)) {\r\n    ref.current = value;\r\n  }\r\n\r\n  return ref.current;\r\n}","import { useMemo } from 'preact/hooks';\r\nimport { normalizeOptionsData } from '../components/util/optionsUtil';\r\nimport { useExpressionEvaluation } from './useExpressionEvaluation';\r\nimport { useDeepCompareMemoize } from './useDeepCompareMemoize';\r\nimport { useService } from './useService';\r\n\r\n/**\r\n * @enum { String }\r\n */\r\nexport const LOAD_STATES = {\r\n  LOADING: 'loading',\r\n  LOADED: 'loaded',\r\n  ERROR: 'error'\r\n};\r\n\r\n/**\r\n * @typedef {Object} OptionsGetter\r\n * @property {Object[]} options - The options data\r\n * @property {(LOAD_STATES)} loadState - The options data's loading state, to use for conditional rendering\r\n */\r\n\r\n/**\r\n * A hook to load options for single and multiselect components.\r\n *\r\n * @param {Object} field - The form field to handle options for\r\n * @return {OptionsGetter} optionsGetter - A options getter object providing loading state and options\r\n */\r\nexport function useOptionsAsync(field) {\r\n  const {\r\n    valuesExpression: optionsExpression,\r\n    valuesKey: optionsKey,\r\n    values: staticOptions\r\n  } = field;\r\n\r\n  const initialData = useService('form')._getState().initialData;\r\n  const expressionEvaluation = useExpressionEvaluation(optionsExpression);\r\n  const evaluatedOptions = useDeepCompareMemoize(expressionEvaluation || []);\r\n\r\n  const optionsGetter = useMemo(() => {\r\n    let options = [];\r\n\r\n    // dynamic options\r\n    if (optionsKey !== undefined) {\r\n      const keyedOptions = (initialData || {})[optionsKey];\r\n      if (keyedOptions && Array.isArray(keyedOptions)) {\r\n        options = keyedOptions;\r\n      }\r\n\r\n    // static options\r\n    } else if (staticOptions !== undefined) {\r\n      options = Array.isArray(staticOptions) ? staticOptions : [];\r\n\r\n    // expression\r\n    } else if (optionsExpression && evaluatedOptions && Array.isArray(evaluatedOptions)) {\r\n      options = evaluatedOptions;\r\n\r\n    // error case\r\n    } else {\r\n      return buildErrorState('No options source defined in the form definition');\r\n    }\r\n\r\n    // normalize data to support primitives and partially defined objects\r\n    return buildLoadedState(normalizeOptionsData(options));\r\n  }, [ optionsKey, staticOptions, initialData, optionsExpression, evaluatedOptions ]);\r\n\r\n  return optionsGetter;\r\n}\r\n\r\nconst buildErrorState = (error) => ({ options: [], error, loadState: LOAD_STATES.ERROR });\r\n\r\nconst buildLoadedState = (options) => ({ options, error: undefined, loadState: LOAD_STATES.LOADED });\r\n","import { useMemo } from 'preact/hooks';\r\nimport DOMPurify from 'dompurify';\r\n\r\n\r\n/**\r\n * Wrap HTML content in a configuration object for dangerouslySetInnerHTML\r\n * @param {Object} props\r\n * @param {string} props.html\r\n * @param {Function} [props.transform]\r\n * @param {boolean} [props.sanitize = true]\r\n * @param {boolean} [props.sanitizeStyleTags = true]\r\n */\r\nconst useDangerousHTMLWrapper = (props) => {\r\n\r\n  const {\r\n    html,\r\n    transform = (html) => html,\r\n    sanitize = true,\r\n    sanitizeStyleTags = true\r\n  } = props;\r\n\r\n  const sanitizedHtml = useMemo(() => sanitize ? DOMPurify.sanitize(html, getDOMPurifyConfig(sanitizeStyleTags)) : html, [ html, sanitize, sanitizeStyleTags ]);\r\n  const transformedHtml = useMemo(() => transform(sanitizedHtml), [ sanitizedHtml, transform ]);\r\n\r\n  // Return the configuration object for dangerouslySetInnerHTML\r\n  return { __html: transformedHtml };\r\n};\r\n\r\nconst getDOMPurifyConfig = (sanitizeStyleTags) => {\r\n  return {\r\n    FORCE_BODY: true,\r\n    FORBID_TAGS: (sanitizeStyleTags ? [ 'style' ] : [])\r\n  };\r\n};\r\n\r\nexport { useDangerousHTMLWrapper };\r\n","import { get } from 'min-dash';\r\nimport { SECURITY_ATTRIBUTES_DEFINITIONS, SANDBOX_ATTRIBUTE } from '../../util/constants';\r\nimport { useMemo } from 'preact/hooks';\r\nimport { useDeepCompareMemoize } from './useDeepCompareMemoize';\r\n\r\n/**\r\n * A custom hook to build up security attributes from form configuration.\r\n *\r\n * @param {Object} security - The security configuration.\r\n * @returns {Array} - Returns a tuple with sandbox and allow attributes.\r\n */\r\nexport function useSecurityAttributesMap(security) {\r\n\r\n  const securityMemoized = useDeepCompareMemoize(security);\r\n\r\n  const sandbox = useMemo(() =>\r\n    SECURITY_ATTRIBUTES_DEFINITIONS\r\n      .filter(({ attribute }) => attribute === SANDBOX_ATTRIBUTE)\r\n      .filter(({ property }) => get(securityMemoized, [ property ], false))\r\n      .map(({ directive }) => directive)\r\n      .join(' ')\r\n  , [ securityMemoized ]);\r\n\r\n  const allow = useMemo(() =>\r\n    SECURITY_ATTRIBUTES_DEFINITIONS\r\n      .filter(({ attribute }) => attribute !== SANDBOX_ATTRIBUTE)\r\n      .filter(({ property }) => get(securityMemoized, [ property ], false))\r\n      .map(({ directive }) => directive)\r\n      .join('; ')\r\n  , [ securityMemoized ]);\r\n\r\n  return [ sandbox, allow ];\r\n}\r\n","import { useCallback, useMemo } from 'preact/hooks';\r\nimport { isObject } from 'min-dash';\r\n\r\n/**\r\n * This hook allows us to retrieve the label from a value in linear time by caching it in a map\r\n * @param {Array} options\r\n */\r\nexport function useGetLabelCorrelation(options) {\r\n\r\n  // This allows us to retrieve the label from a value in linear time\r\n  const labelMap = useMemo(() => Object.assign({}, ...options.map((o) => ({ [_getValueHash(o.value)]:  o.label }))), [ options ]);\r\n  return useCallback((value) => labelMap[_getValueHash(value)], [ labelMap ]);\r\n}\r\n\r\nconst _getValueHash = (value) => {\r\n  return isObject(value) ? JSON.stringify(value) : value;\r\n};","/**\r\n * Wrap CSS styles with a given prefix.\r\n *\r\n * @param {HTMLElement} rootNode\r\n * @param {string} prefix\r\n *\r\n * @returns {HTMLElement}\r\n */\r\nfunction wrapCSSStyles(rootNode, prefix) {\r\n  const styleTags = rootNode.querySelectorAll('style');\r\n  styleTags.forEach(styleTag => {\r\n    const topLevelRules = extractTopLevelRules(styleTag.textContent);\r\n    const scopedCss = topLevelRules\r\n      .map(rule => {\r\n        const { selector, styles } = splitRule(rule);\r\n        const scopedSelector = scopeSelector(selector, prefix);\r\n        return `${scopedSelector} ${styles}`;\r\n      })\r\n      .join(' ');\r\n    styleTag.textContent = scopedCss;\r\n  });\r\n\r\n  return rootNode;\r\n}\r\n\r\nfunction extractTopLevelRules(cssString) {\r\n  let cursor = 0;\r\n  let start = 0;\r\n  let level = 0;\r\n  const topLevelRules = [];\r\n\r\n  while (cursor < cssString.length) {\r\n    if (cssString[cursor] === '{') {\r\n      level++;\r\n    }\r\n\r\n    if (cssString[cursor] === '}') {\r\n      level--;\r\n      if (level === 0) {\r\n        topLevelRules.push(cssString.substring(start, cursor + 1));\r\n        start = cursor + 1;\r\n      }\r\n    }\r\n\r\n    cursor++;\r\n  }\r\n\r\n  return topLevelRules.map(rule => rule.trim());\r\n}\r\n\r\nfunction splitRule(rule) {\r\n  const firstBracket = rule.indexOf('{');\r\n  const selector = rule.substring(0, firstBracket);\r\n  const styles = rule.substring(firstBracket);\r\n  return { selector, styles };\r\n}\r\n\r\nfunction scopeSelector(selector, prefix) {\r\n  return selector\r\n    .split(',')\r\n    .map(sel => `${prefix} ${sel.trim()}`)\r\n    .join(', ');\r\n}\r\n\r\nfunction getScrollContainer(el) {\r\n  while (el && el !== document.body && el !== document.documentElement) {\r\n    if (_isElementScrollable(el)) {\r\n      return el;\r\n    }\r\n    el = el.parentElement;\r\n  }\r\n\r\n  if (_isElementScrollable(document.body)) {\r\n    return document.body;\r\n  } else if (_isElementScrollable(document.documentElement)) {\r\n    return document.documentElement;\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\nfunction _isElementScrollable(el) {\r\n  const style = window.getComputedStyle(el);\r\n  const overflowY = style.overflowY || style.overflow;\r\n\r\n  return (overflowY === 'auto' || overflowY === 'scroll') && el.scrollHeight > el.clientHeight;\r\n}\r\n\r\nexport { wrapCSSStyles, getScrollContainer };","import { some } from 'min-dash';\r\nimport { useEffect } from 'preact/hooks';\r\nimport { getScrollContainer } from '../components/util/domUtil';\r\n\r\nconst EMPTY_OBJECT = {};\r\nconst EMPTY_ARRAY = [];\r\n\r\n/**\r\n * Custom hook to scroll an element within a scrollable container.\r\n *\r\n * @param {Object} scrolledElementRef - A ref pointing to the DOM element to scroll into view.\r\n * @param {Array} deps - An array of dependencies that trigger the effect.\r\n * @param {Object} [scrollOptions={}] - Options defining the behavior of the scrolling.\r\n * @param {String} [scrollOptions.align='center'] - The alignment of the element within the viewport.\r\n * @param {String} [scrollOptions.behavior='auto'] - The scrolling behavior.\r\n * @param {Number} [scrollOptions.offset=0] - An offset that is added to the scroll position.\r\n * @param {Boolean} [scrollOptions.scrollIfVisible=false] - Whether to scroll even if the element is visible.\r\n * @param {Array} [flagRefs] - An array of refs that are used as flags to control when to scroll.\r\n */\r\nexport function useScrollIntoView(scrolledElementRef, deps, scrollOptions, flagRefs) {\r\n\r\n  const _scrollOptions = scrollOptions || EMPTY_OBJECT;\r\n  const _flagRefs = flagRefs || EMPTY_ARRAY;\r\n\r\n  useEffect(() => {\r\n\r\n    // return early if flags are not raised, or component is not mounted\r\n    if (some(_flagRefs, ref => !ref.current) || !scrolledElementRef.current) {\r\n      return;\r\n    }\r\n\r\n    for (let i = 0; i < _flagRefs.length; i++) {\r\n      _flagRefs[i].current = false;\r\n    }\r\n\r\n    const itemToBeScrolled = scrolledElementRef.current;\r\n    const scrollContainer = getScrollContainer(itemToBeScrolled);\r\n\r\n    if (!scrollContainer) {\r\n      return;\r\n    }\r\n\r\n    const itemRect = itemToBeScrolled.getBoundingClientRect();\r\n    const containerRect = scrollContainer.getBoundingClientRect();\r\n\r\n    const { align = 'center', offset = 0, behavior = 'auto', scrollIfVisible = false } = _scrollOptions;\r\n\r\n    const shouldScroll = scrollIfVisible || !(itemRect.top >= containerRect.top && itemRect.bottom <= containerRect.bottom);\r\n\r\n    if (!shouldScroll) {\r\n      return;\r\n    }\r\n\r\n    const topOffset = _getTopOffset(itemToBeScrolled, scrollContainer, { align, offset });\r\n    scrollContainer.scroll({ top: topOffset, behavior });\r\n\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, deps);\r\n}\r\n\r\n\r\n// helper //////////////////////\r\n\r\nfunction _getTopOffset(item, scrollContainer, options) {\r\n  const itemRect = item.getBoundingClientRect();\r\n  const containerRect = scrollContainer.getBoundingClientRect();\r\n\r\n  if (options.align === 'top') {\r\n    return itemRect.top - containerRect.top + scrollContainer.scrollTop - options.offset;\r\n  } else if (options.align === 'bottom') {\r\n    return itemRect.bottom - containerRect.top - scrollContainer.clientHeight + scrollContainer.scrollTop + options.offset;\r\n  } else if (options.align === 'center') {\r\n    return itemRect.top - containerRect.top - scrollContainer.clientHeight / 2 + scrollContainer.scrollTop + itemRect.height / 2 + options.offset;\r\n  }\r\n\r\n  return 0;\r\n}\r\n","import { useService } from './useService.js';\r\nimport { useMemo } from 'preact/hooks';\r\n\r\n/**\r\n * Returns the conditionally filtered data of a form reactively.\r\n * Memoised to minimize re-renders\r\n *\r\n * Warning: costly operation, use with care\r\n */\r\nexport function useFilteredFormData() {\r\n  const { initialData, data } = useService('form')._getState();\r\n  const conditionChecker = useService('conditionChecker', false);\r\n\r\n  return useMemo(() => {\r\n    const newData = conditionChecker ? conditionChecker.applyConditions(data, data) : data;\r\n    return { ...initialData, ...newData };\r\n  }, [ conditionChecker, data, initialData ]);\r\n\r\n}\r\n","import { useEffect } from 'preact/hooks';\r\n\r\nexport function useKeyDownAction(targetKey, action, listenerElement = window) {\r\n\r\n  function downHandler({ key }) {\r\n    if (key === targetKey) {\r\n      action();\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    listenerElement.addEventListener('keydown', downHandler);\r\n\r\n    return () => {\r\n      listenerElement.removeEventListener('keydown', downHandler);\r\n    };\r\n  });\r\n}","import { buildExpressionContext } from '../../util/simple';\r\nimport { LocalExpressionContext } from '../context/LocalExpressionContext.js';\r\nimport { useService } from './useService.js';\r\nimport { useContext } from 'preact/hooks';\r\n\r\n/**\r\n * Retrieve readonly value of a form field, given it can be an\r\n * expression optionally or configured globally.\r\n *\r\n * @typedef { import('../../types').FormProperties } FormProperties\r\n *\r\n * @param {any} formField\r\n * @param {FormProperties} properties\r\n *\r\n * @returns {boolean}\r\n */\r\nexport function useReadonly(formField, properties = {}) {\r\n  const expressionLanguage = useService('expressionLanguage');\r\n  const conditionChecker = useService('conditionChecker', false);\r\n  const expressionContextInfo = useContext(LocalExpressionContext);\r\n\r\n  const { readonly } = formField;\r\n\r\n  if (properties.readOnly) {\r\n    return true;\r\n  }\r\n\r\n  if (expressionLanguage && expressionLanguage.isExpression(readonly)) {\r\n    return conditionChecker ? conditionChecker.check(readonly, buildExpressionContext(expressionContextInfo)) : false;\r\n  }\r\n\r\n  return readonly || false;\r\n}\r\n","import {\r\n  useEffect,\r\n  useRef\r\n} from 'preact/hooks';\r\n\r\n\r\nexport function usePrevious(value, defaultValue = null) {\r\n  const ref = useRef(defaultValue);\r\n\r\n  useEffect(() => ref.current = value, [ value ]);\r\n\r\n  return ref.current;\r\n}","import { useCallback, useRef } from 'preact/hooks';\r\nimport { useService } from './useService';\r\n\r\nexport function useFlushDebounce(func) {\r\n\r\n  const timeoutRef = useRef(null);\r\n  const lastArgsRef = useRef(null);\r\n\r\n  const config = useService('config', false);\r\n  const debounce = config && config.debounce;\r\n  const shouldDebounce = debounce !== false && debounce !== 0;\r\n  const delay = typeof debounce === 'number' ? debounce : 300;\r\n\r\n  const debounceFunc = useCallback((...args) => {\r\n\r\n    if (!shouldDebounce) {\r\n      func(...args);\r\n      return;\r\n    }\r\n\r\n    lastArgsRef.current = args;\r\n\r\n    if (timeoutRef.current) {\r\n      clearTimeout(timeoutRef.current);\r\n    }\r\n\r\n    timeoutRef.current = setTimeout(() => {\r\n      func(...lastArgsRef.current);\r\n      lastArgsRef.current = null;\r\n    }, delay);\r\n\r\n  }, [ func, delay, shouldDebounce ]);\r\n\r\n  const flushFunc = useCallback(() => {\r\n\r\n    if (timeoutRef.current) {\r\n      clearTimeout(timeoutRef.current);\r\n      if (lastArgsRef.current !== null) {\r\n        func(...lastArgsRef.current);\r\n        lastArgsRef.current = null;\r\n      }\r\n      timeoutRef.current = null;\r\n    }\r\n\r\n  }, [ func ]);\r\n\r\n  return [ debounceFunc, flushFunc ];\r\n}\r\n","import { useEffect } from 'react';\r\nimport { usePrevious } from './usePrevious';\r\n\r\nfunction useEffectOnChange(value, callback, dependencies = []) {\r\n  const previousValue = usePrevious(value);\r\n\r\n  useEffect(() => {\r\n    if (value !== previousValue) {\r\n      callback();\r\n    }\r\n\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [ value, ...dependencies ]);\r\n}\r\n\r\nexport { useEffectOnChange };\r\n","import { useService } from './useService';\r\nimport { useContext, useMemo } from 'preact/hooks';\r\nimport { LocalExpressionContext } from '../context/LocalExpressionContext';\r\nimport { buildExpressionContext } from '../../util/simple';\r\n\r\n/**\r\n * Template a string reactively based on form data. If the string is not a template, it is returned as is.\r\n * Memoised to minimize re-renders\r\n *\r\n * @param {string} value\r\n * @param {Object} options\r\n * @param {boolean} [options.debug = false]\r\n * @param {boolean} [options.strict = false]\r\n * @param {Function} [options.sanitizer]\r\n * @param {Function} [options.buildDebugString]\r\n *\r\n */\r\nexport function useTemplateEvaluation(value, options = {}) {\r\n  const templating = useService('templating');\r\n  const expressionContextInfo = useContext(LocalExpressionContext);\r\n\r\n  return useMemo(() => {\r\n    if (templating && templating.isTemplate(value)) {\r\n      return templating.evaluate(value, buildExpressionContext(expressionContextInfo), options);\r\n    }\r\n    return value;\r\n  }, [ templating, value, expressionContextInfo, options ]);\r\n}\r\n","import { useTemplateEvaluation } from './useTemplateEvaluation';\r\nimport { useMemo } from 'preact/hooks';\r\n\r\n/**\r\n * Template a string reactively based on form data. If the string is not a template, it is returned as is.\r\n * If the string contains multiple lines, only the first line is returned.\r\n * Memoised to minimize re-renders\r\n *\r\n * @param {string} value\r\n * @param {Object} [options]\r\n * @param {boolean} [options.debug = false]\r\n * @param {boolean} [options.strict = false]\r\n * @param {Function} [options.buildDebugString]\r\n *\r\n */\r\nexport function useSingleLineTemplateEvaluation(value, options = {}) {\r\n  const evaluatedTemplate = useTemplateEvaluation(value, options);\r\n  return useMemo(() => evaluatedTemplate && evaluatedTemplate.split('\\n')[0], [ evaluatedTemplate ]);\r\n}","import { isNumber } from 'min-dash';\r\nimport { MINUTES_IN_DAY, TIME_SERIALISING_FORMATS } from '../../../util/constants/DatetimeConstants';\r\n\r\nexport const ENTER_KEYDOWN_EVENT = new KeyboardEvent('keydown', {\r\n  code: 'Enter',\r\n  key: 'Enter',\r\n  charCode: 13,\r\n  keyCode: 13,\r\n  bubbles: true\r\n});\r\n\r\nexport function focusRelevantFlatpickerDay(flatpickrInstance) {\r\n\r\n  if (!flatpickrInstance) return;\r\n\r\n  !flatpickrInstance.isOpen && flatpickrInstance.open();\r\n\r\n  const container = flatpickrInstance.calendarContainer;\r\n  const dayToFocus =\r\n    container.querySelector('.flatpickr-day.selected') ||\r\n    container.querySelector('.flatpickr-day.today') ||\r\n    container.querySelector('.flatpickr-day');\r\n\r\n  dayToFocus && dayToFocus.focus();\r\n}\r\n\r\nexport function formatTime(use24h, minutes) {\r\n\r\n  if (minutes === null) return null;\r\n\r\n  const wrappedMinutes = minutes % (24 * 60);\r\n\r\n  const minute = minutes % 60;\r\n  let hour = Math.floor(wrappedMinutes / 60);\r\n\r\n  if (use24h) {\r\n    return _getZeroPaddedString(hour) + ':' + _getZeroPaddedString(minute);\r\n  }\r\n\r\n  hour = (hour % 12 || 12);\r\n\r\n  const isPM = (wrappedMinutes >= 12 * 60);\r\n\r\n  return _getZeroPaddedString(hour) + ':' + _getZeroPaddedString(minute) + ' ' + (isPM ? 'PM' : 'AM');\r\n}\r\n\r\nexport function parseInputTime(stringTime) {\r\n\r\n  let workingString = stringTime.toLowerCase();\r\n  const is12h = workingString.includes('am') || workingString.includes('pm');\r\n\r\n  if (is12h) {\r\n    const isPM = workingString.includes('pm');\r\n    const digits = workingString.match(/\\d+/g);\r\n    const displayHour = parseInt(digits && digits[0]);\r\n    const minute = parseInt(digits && digits[1]) || 0;\r\n\r\n    const isValidDisplayHour = isNumber(displayHour) && (displayHour >= 1) && (displayHour <= 12);\r\n    const isValidMinute = (minute >= 0) && (minute <= 59);\r\n\r\n    if (!isValidDisplayHour || !isValidMinute) return null;\r\n\r\n    const hour = (displayHour % 12) + (isPM ? 12 : 0);\r\n\r\n    return hour * 60 + minute;\r\n  }\r\n  else {\r\n    const digits = workingString.match(/\\d+/g);\r\n    const hour = parseInt(digits && digits[0]);\r\n    const minute = parseInt(digits && digits[1]);\r\n\r\n    const isValidHour = isNumber(hour) && (hour >= 0) && (hour <= 23);\r\n    const isValidMinute = isNumber(minute) && (minute >= 0) && (minute <= 59);\r\n\r\n    if (!isValidHour || !isValidMinute) return null;\r\n\r\n    return hour * 60 + minute;\r\n  }\r\n}\r\n\r\nexport function serializeTime(minutes, offset, timeSerializingFormat) {\r\n\r\n  if (timeSerializingFormat === TIME_SERIALISING_FORMATS.UTC_NORMALIZED) {\r\n    const normalizedMinutes = (minutes + offset + MINUTES_IN_DAY) % MINUTES_IN_DAY;\r\n    return _getZeroPaddedString(Math.floor(normalizedMinutes / 60)) + ':' + _getZeroPaddedString(normalizedMinutes % 60) + 'Z';\r\n  }\r\n\r\n  const baseTime = _getZeroPaddedString(Math.floor(minutes / 60)) + ':' + _getZeroPaddedString(minutes % 60);\r\n  const addUTCOffset = timeSerializingFormat === TIME_SERIALISING_FORMATS.UTC_OFFSET;\r\n\r\n  return baseTime + (addUTCOffset ? formatTimezoneOffset(offset) : '');\r\n}\r\n\r\nexport function parseIsoTime(isoTimeString) {\r\n\r\n  if (!isoTimeString) return null;\r\n\r\n  const parseBasicMinutes = (timeString) => {\r\n    const timeSegments = timeString.split(':');\r\n    const hour = parseInt(timeSegments[0]);\r\n    const minute = timeSegments.length > 1 ? parseInt(timeSegments[1]) : 0;\r\n    if (isNaN(hour) || hour < 0 || hour > 24 || isNaN(minute) || minute < 0 || minute > 60) return null;\r\n    return hour * 60 + minute;\r\n  };\r\n\r\n  const localOffset = new Date().getTimezoneOffset();\r\n\r\n  // Parse normalized time\r\n  if (isoTimeString.includes('Z')) {\r\n    isoTimeString = isoTimeString.replace('Z', '');\r\n    const minutes = parseBasicMinutes(isoTimeString);\r\n    if (minutes === null) return null;\r\n    return (minutes - localOffset + MINUTES_IN_DAY) % MINUTES_IN_DAY;\r\n  }\r\n\r\n  // Parse offset positive time\r\n  else if (isoTimeString.includes('+')) {\r\n    const [ timeString, offsetString ] = isoTimeString.split('+');\r\n\r\n    const minutes = parseBasicMinutes(timeString);\r\n    let inboundOffset = parseBasicMinutes(offsetString);\r\n\r\n    if (minutes === null || inboundOffset === null) return null;\r\n\r\n    // The offset is flipped for consistency with javascript\r\n    inboundOffset = -inboundOffset;\r\n\r\n    return (minutes + inboundOffset - localOffset + MINUTES_IN_DAY) % MINUTES_IN_DAY;\r\n  }\r\n\r\n  // Parse offset negative time\r\n  else if (isoTimeString.includes('-')) {\r\n    const [ timeString, offsetString ] = isoTimeString.split('-');\r\n\r\n    const minutes = parseBasicMinutes(timeString);\r\n    let inboundOffset = parseBasicMinutes(offsetString);\r\n\r\n    if (minutes === null || inboundOffset === null) return null;\r\n\r\n    return (minutes + inboundOffset - localOffset + MINUTES_IN_DAY) % MINUTES_IN_DAY;\r\n  }\r\n\r\n  // Default to local parsing\r\n  else {\r\n    return parseBasicMinutes(isoTimeString);\r\n  }\r\n}\r\n\r\nexport function serializeDate(date) {\r\n  var d = new Date(date), month = '' + (d.getMonth() + 1), day = '' + d.getDate(), year = d.getFullYear();\r\n\r\n  if (month.length < 2)\r\n    month = '0' + month;\r\n  if (day.length < 2)\r\n    day = '0' + day;\r\n\r\n  return [ year, month, day ].join('-');\r\n}\r\n\r\n// this method is used to make the `new Date(value)` parsing behavior stricter\r\nexport function isDateTimeInputInformationSufficient(value) {\r\n\r\n  if (!value || typeof value !== 'string') return false;\r\n\r\n  const segments = value.split('T');\r\n  if (segments.length != 2) return false;\r\n\r\n  const dateNumbers = segments[0].split('-');\r\n  if (dateNumbers.length != 3) return false;\r\n\r\n  return true;\r\n\r\n}\r\n\r\n// this method checks if the date isn't a datetime, or a partial date\r\nexport function isDateInputInformationMatching(value) {\r\n\r\n  if (!value || typeof value !== 'string') return false;\r\n\r\n  if (value.includes('T')) return false;\r\n\r\n  const dateNumbers = value.split('-');\r\n  if (dateNumbers.length != 3) return false;\r\n\r\n  return true;\r\n}\r\n\r\nexport function serializeDateTime(date, time, timeSerializingFormat) {\r\n\r\n  const workingDate = new Date();\r\n  workingDate.setFullYear(date.getFullYear(), date.getMonth(), date.getDate());\r\n  workingDate.setHours(Math.floor(time / 60), time % 60, 0, 0);\r\n\r\n  if (timeSerializingFormat === TIME_SERIALISING_FORMATS.UTC_NORMALIZED) {\r\n\r\n    const timezoneOffsetMinutes = workingDate.getTimezoneOffset();\r\n    const dayOffset = (time + timezoneOffsetMinutes < 0) ? -1 : (((time + timezoneOffsetMinutes) > MINUTES_IN_DAY) ? 1 : 0);\r\n\r\n    // Apply the date rollover pre-emptively\r\n    workingDate.setHours(workingDate.getHours() + dayOffset * 24);\r\n  }\r\n\r\n  return serializeDate(workingDate) + 'T' + serializeTime(time, workingDate.getTimezoneOffset(), timeSerializingFormat);\r\n\r\n}\r\n\r\nexport function formatTimezoneOffset(minutes) {\r\n  return _getSignedPaddedHours(minutes) + ':' + _getZeroPaddedString(Math.abs(minutes % 60));\r\n}\r\n\r\nexport function isInvalidDateString(value) {\r\n  return isNaN(new Date(Date.parse(value)).getTime());\r\n}\r\n\r\nfunction _getSignedPaddedHours(minutes) {\r\n  if (minutes > 0) {\r\n    return '-' + _getZeroPaddedString(Math.floor(minutes / 60));\r\n  }\r\n  else {\r\n    return '+' + _getZeroPaddedString(Math.floor((0 - minutes) / 60));\r\n  }\r\n}\r\n\r\nfunction _getZeroPaddedString(time) {\r\n  return time.toString().padStart(2, '0');\r\n}","import isEqual from 'lodash/isEqual';\r\nimport { DATETIME_SUBTYPES } from '../../../util/constants/DatetimeConstants';\r\nimport { isDateInputInformationMatching, isDateTimeInputInformationSufficient, isInvalidDateString, parseIsoTime } from './dateTimeUtil';\r\nimport { getSimpleOptionsData, normalizeOptionsData } from './optionsUtil';\r\n\r\nconst ALLOWED_IMAGE_SRC_PATTERN = /^(https?|data):.*/i; // eslint-disable-line no-useless-escape\r\nconst ALLOWED_IFRAME_SRC_PATTERN = /^(https):\\/\\/*/i; // eslint-disable-line no-useless-escape\r\n\r\nexport function sanitizeDateTimePickerValue(options) {\r\n  const {\r\n    formField,\r\n    value\r\n  } = options;\r\n\r\n  const { subtype } = formField;\r\n\r\n  if (typeof value !== 'string') return null;\r\n\r\n  if (subtype === DATETIME_SUBTYPES.DATE && (isInvalidDateString(value) || !isDateInputInformationMatching(value))) return null;\r\n  if (subtype === DATETIME_SUBTYPES.TIME && parseIsoTime(value) === null) return null;\r\n  if (subtype === DATETIME_SUBTYPES.DATETIME && (isInvalidDateString(value) || !isDateTimeInputInformationSufficient(value))) return null;\r\n\r\n  return value;\r\n}\r\n\r\nexport function hasEqualValue(value, array) {\r\n\r\n  if (!Array.isArray(array)) {\r\n    return false;\r\n  }\r\n\r\n  return array.some(element => isEqual(value, element));\r\n}\r\n\r\nexport function sanitizeSingleSelectValue(options) {\r\n  const {\r\n    formField,\r\n    data,\r\n    value\r\n  } = options;\r\n\r\n  const {\r\n    valuesExpression: optionsExpression\r\n  } = formField;\r\n\r\n  try {\r\n\r\n    // if options are expression evaluated, we don't need to sanitize the value against the options\r\n    // and defer to the field's internal validation\r\n    if (optionsExpression) {\r\n      return value;\r\n    }\r\n\r\n    const validValues = normalizeOptionsData(getSimpleOptionsData(formField, data)).map(v => v.value);\r\n    return hasEqualValue(value, validValues) ? value : null;\r\n  } catch (error) {\r\n\r\n    // use default value in case of formatting error\r\n    // TODO(@Skaiir): log a warning when this happens - https://github.com/bpmn-io/form-js/issues/289\r\n    return null;\r\n  }\r\n}\r\n\r\nexport function sanitizeMultiSelectValue(options) {\r\n  const {\r\n    formField,\r\n    data,\r\n    value\r\n  } = options;\r\n\r\n  const {\r\n    valuesExpression: optionsExpression\r\n  } = formField;\r\n\r\n  try {\r\n\r\n    // if options are expression evaluated, we don't need to sanitize the values against the options\r\n    // and defer to the field's internal validation\r\n    if (optionsExpression) {\r\n      return value;\r\n    }\r\n\r\n    const validValues = normalizeOptionsData(getSimpleOptionsData(formField, data)).map(v => v.value);\r\n    return value.filter(v => hasEqualValue(v, validValues));\r\n  } catch (error) {\r\n\r\n    // use default value in case of formatting error\r\n    // TODO(@Skaiir): log a warning when this happens - https://github.com/bpmn-io/form-js/issues/289\r\n    return [];\r\n  }\r\n}\r\n\r\n/**\r\n * Sanitizes an image source to ensure we only allow for data URI and links\r\n * that start with http(s).\r\n *\r\n * Note: Most browsers anyway do not support script execution in <img> elements.\r\n *\r\n * @param {string} src\r\n * @returns {string}\r\n */\r\nexport function sanitizeImageSource(src) {\r\n  const valid = ALLOWED_IMAGE_SRC_PATTERN.test(src);\r\n\r\n  return valid ? src : '';\r\n}\r\n\r\n/**\r\n * Sanitizes an iframe source to ensure we only allow for links\r\n * that start with http(s).\r\n *\r\n * @param {string} src\r\n * @returns {string}\r\n */\r\nexport function sanitizeIFrameSource(src) {\r\n  const valid = ALLOWED_IFRAME_SRC_PATTERN.test(src);\r\n\r\n  return valid ? src : '';\r\n}\r\n\r\n/**\r\n * Escapes HTML and returns pure text.\r\n * @param {string} html\r\n * @returns {string}\r\n */\r\nexport function escapeHTML(html) {\r\n  const escapeMap = {\r\n    '&': '&amp;',\r\n    '<': '&lt;',\r\n    '>': '&gt;',\r\n    '\"': '&quot;',\r\n    \"'\": '&#039;',\r\n    '{': '&#123;',\r\n    '}': '&#125;',\r\n    ':': '&#58;',\r\n    ';': '&#59;'\r\n  };\r\n\r\n  return html.replace(/[&<>\"'{};:]/g, match => escapeMap[match]);\r\n}","import { useEffect } from 'preact/hooks';\r\nimport { LOAD_STATES } from './useOptionsAsync';\r\nimport { hasEqualValue } from '../components/util/sanitizerUtil';\r\n\r\nexport function useCleanupSingleSelectValue(props) {\r\n\r\n  const {\r\n    field,\r\n    options,\r\n    loadState,\r\n    onChange,\r\n    value\r\n  } = props;\r\n\r\n  // Ensures that the value is always one of the possible options\r\n  useEffect(() => {\r\n\r\n    if (loadState !== LOAD_STATES.LOADED) {\r\n      return;\r\n    }\r\n\r\n    const optionValues = options.map(o => o.value);\r\n    const hasValueNotInOptions = value && !hasEqualValue(value, optionValues);\r\n\r\n    if (hasValueNotInOptions) {\r\n      onChange({\r\n        field,\r\n        value: null\r\n      });\r\n    }\r\n\r\n  }, [ field, options, onChange, value, loadState ]);\r\n\r\n}","import { useEffect } from 'preact/hooks';\r\nimport { LOAD_STATES } from './useOptionsAsync';\r\nimport { hasEqualValue } from '../components/util/sanitizerUtil';\r\nimport { useDeepCompareMemoize } from './useDeepCompareMemoize';\r\n\r\nexport function useCleanupMultiSelectValue(props) {\r\n\r\n  const {\r\n    field,\r\n    options,\r\n    loadState,\r\n    onChange,\r\n    values\r\n  } = props;\r\n\r\n  const memoizedValues = useDeepCompareMemoize(values || []);\r\n\r\n  // ensures that the values are always a subset of the possible options\r\n  useEffect(() => {\r\n\r\n    if (loadState !== LOAD_STATES.LOADED) {\r\n      return;\r\n    }\r\n\r\n    const optionValues = options.map(o => o.value);\r\n    const hasValuesNotInOptions = memoizedValues.some(v => !hasEqualValue(v, optionValues));\r\n\r\n    if (hasValuesNotInOptions) {\r\n      onChange({\r\n        field,\r\n        value: memoizedValues.filter(v => hasEqualValue(v, optionValues))\r\n      });\r\n    }\r\n\r\n  }, [ field, options, onChange, memoizedValues, loadState ]);\r\n\r\n}","import { useSingleLineTemplateEvaluation } from '../hooks';\r\n\r\n\r\nexport function Description(props) {\r\n  const { description, id } = props;\r\n\r\n  const evaluatedDescription = useSingleLineTemplateEvaluation(description || '', { debug: true });\r\n\r\n  if (!evaluatedDescription) {\r\n    return null;\r\n  }\r\n\r\n  return <div id={ id } class=\"fjs-form-field-description\">{ evaluatedDescription }</div>;\r\n}","export function Errors(props) {\r\n  const { errors, id } = props;\r\n\r\n  if (!errors.length) {\r\n    return null;\r\n  }\r\n\r\n  return <div class=\"fjs-form-field-error\" aria-live=\"polite\" id={ id }>\r\n    <ul>\r\n      {\r\n        errors.map(error => {\r\n          return <li>{ error }</li>;\r\n        })\r\n      }\r\n    </ul>\r\n  </div>;\r\n}","import classNames from 'classnames';\r\n\r\nimport { useSingleLineTemplateEvaluation } from '../hooks';\r\n\r\n\r\n/**\r\n * @typedef Props\r\n * @property {string|undefined} [id]\r\n * @property {string|undefined} [htmlFor]\r\n * @property {string|undefined} label\r\n * @property {string} [class]\r\n * @property {boolean} [collapseOnEmpty]\r\n * @property {boolean} [required]\r\n * @property {import(\"preact\").VNode} [children]\r\n *\r\n * @param {Props} props\r\n * @returns {import(\"preact\").JSX.Element}\r\n */\r\nexport function Label(props) {\r\n  const {\r\n    id,\r\n    htmlFor,\r\n    label,\r\n    collapseOnEmpty = true,\r\n    required = false\r\n  } = props;\r\n\r\n  const evaluatedLabel = useSingleLineTemplateEvaluation(label || '', { debug: true });\r\n\r\n  return (\r\n    <label id={ id } for={ htmlFor } class={ classNames('fjs-form-field-label', { 'fjs-incollapsible-label': !collapseOnEmpty }, props['class']) }>\r\n      { props.children }\r\n      { evaluatedLabel }\r\n      {\r\n        required && <span class=\"fjs-asterix\" aria-hidden>*</span>\r\n      }\r\n    </label>\r\n  );\r\n}","import { Description } from '../Description';\r\nimport { Errors } from '../Errors';\r\nimport { Label } from '../Label';\r\n\r\nimport {\r\n  formFieldClasses\r\n} from '../Util';\r\n\r\nimport classNames from 'classnames';\r\n\r\nconst type = 'checkbox';\r\n\r\nexport function Checkbox(props) {\r\n  const {\r\n    disabled,\r\n    errors = [],\r\n    domId,\r\n    onBlur,\r\n    onFocus,\r\n    field,\r\n    readonly,\r\n    value = false\r\n  } = props;\r\n\r\n  const {\r\n    description,\r\n    label,\r\n    validate = {}\r\n  } = field;\r\n\r\n  const { required } = validate;\r\n\r\n  const onChange = ({ target }) => {\r\n    props.onChange({\r\n      field,\r\n      value: target.checked\r\n    });\r\n  };\r\n\r\n  const descriptionId = `${domId}-description`;\r\n  const errorMessageId = `${domId}-error-message`;\r\n\r\n  return <div class={ classNames(formFieldClasses(type, { errors, disabled, readonly }), { 'fjs-checked': value }) }>\r\n    <Label\r\n      htmlFor={ domId }\r\n      label={ label }\r\n      required={ required }>\r\n      <input\r\n        checked={ value }\r\n        class=\"fjs-input\"\r\n        disabled={ disabled }\r\n        readOnly={ readonly }\r\n        id={ domId }\r\n        type=\"checkbox\"\r\n        onChange={ onChange }\r\n        onBlur={ () => onBlur && onBlur() }\r\n        onFocus={ () => onFocus && onFocus() }\r\n        required={ required }\r\n        aria-invalid={ errors.length > 0 }\r\n        aria-describedby={ [ descriptionId, errorMessageId ].join(' ') } />\r\n    </Label>\r\n    <Description id={ descriptionId } description={ description } />\r\n    <Errors id={ errorMessageId } errors={ errors } />\r\n  </div>;\r\n}\r\n\r\nCheckbox.config = {\r\n  type,\r\n  keyed: true,\r\n  label: 'Zaškrtávací pole',\r\n  group: 'selection',\r\n  emptyValue: false,\r\n  sanitizeValue: ({ value }) => value === true,\r\n  create: (options = {}) => ({\r\n    ...options\r\n  })\r\n};\r\n","import { useRef } from 'preact/hooks';\r\nimport { useOptionsAsync, LOAD_STATES } from '../../hooks/useOptionsAsync';\r\nimport { useCleanupMultiSelectValue } from '../../hooks/useCleanupMultiSelectValue';\r\nimport classNames from 'classnames';\r\nimport isEqual from 'lodash/isEqual';\r\n\r\nimport { Description } from '../Description';\r\nimport { Errors } from '../Errors';\r\nimport { Label } from '../Label';\r\n\r\nimport { sanitizeMultiSelectValue, hasEqualValue } from '../util/sanitizerUtil';\r\n\r\nimport { createEmptyOptions } from '../util/optionsUtil';\r\n\r\nimport {\r\n  formFieldClasses\r\n} from '../Util';\r\n\r\nconst type = 'checklist';\r\n\r\n\r\nexport function Checklist(props) {\r\n  const {\r\n    disabled,\r\n    errors = [],\r\n    domId,\r\n    onBlur,\r\n    onFocus,\r\n    field,\r\n    readonly,\r\n    value: values = [],\r\n  } = props;\r\n\r\n  const {\r\n    description,\r\n    label,\r\n    validate = {}\r\n  } = field;\r\n\r\n  const outerDivRef = useRef();\r\n\r\n  const { required } = validate;\r\n\r\n  const toggleCheckbox = (toggledValue) => {\r\n\r\n    const newValues = hasEqualValue(toggledValue, values)\r\n      ? values.filter(value => !isEqual(value, toggledValue))\r\n      : [ ...values, toggledValue ];\r\n\r\n    props.onChange({\r\n      field,\r\n      value: newValues,\r\n    });\r\n  };\r\n\r\n  const onCheckboxBlur = (e) => {\r\n\r\n    if (outerDivRef.current.contains(e.relatedTarget)) {\r\n      return;\r\n    }\r\n\r\n    onBlur && onBlur();\r\n  };\r\n\r\n  const onCheckboxFocus = (e) => {\r\n\r\n    if (outerDivRef.current.contains(e.relatedTarget)) {\r\n      return;\r\n    }\r\n\r\n    onFocus && onFocus();\r\n  };\r\n\r\n  const {\r\n    loadState,\r\n    options\r\n  } = useOptionsAsync(field);\r\n\r\n  useCleanupMultiSelectValue({\r\n    field,\r\n    loadState,\r\n    options,\r\n    values,\r\n    onChange: props.onChange\r\n  });\r\n\r\n  const descriptionId = `${domId}-description`;\r\n  const errorMessageId = `${domId}-error-message`;\r\n\r\n  return <div class={ classNames(formFieldClasses(type, { errors, disabled, readonly })) } ref={ outerDivRef }>\r\n    <Label\r\n      label={ label }\r\n      required={ required } />\r\n    {\r\n      loadState == LOAD_STATES.LOADED && options.map((o, index) => {\r\n\r\n        const itemDomId = `${domId}-${index}`;\r\n        const isChecked = hasEqualValue(o.value, values);\r\n\r\n        return (\r\n          <Label\r\n            htmlFor={ itemDomId }\r\n            label={ o.label }\r\n            class={ classNames({\r\n              'fjs-checked': isChecked\r\n            }) }\r\n            required={ false }>\r\n            <input\r\n              checked={ isChecked }\r\n              class=\"fjs-input\"\r\n              disabled={ disabled }\r\n              readOnly={ readonly }\r\n              id={ itemDomId }\r\n              type=\"checkbox\"\r\n              onClick={ () => toggleCheckbox(o.value) }\r\n              onBlur={ onCheckboxBlur }\r\n              onFocus={ onCheckboxFocus }\r\n              required={ required }\r\n              aria-invalid={ errors.length > 0 }\r\n              aria-describedby={ [ descriptionId, errorMessageId ].join(' ') } />\r\n          </Label>\r\n        );\r\n      })\r\n    }\r\n    <Description id={ descriptionId } description={ description } />\r\n    <Errors id={ errorMessageId } errors={ errors } />\r\n  </div>;\r\n}\r\n\r\nChecklist.config = {\r\n  type,\r\n  keyed: true,\r\n  label: 'Zaškrtávací seznam',\r\n  group: 'selection',\r\n  emptyValue: [],\r\n  sanitizeValue: sanitizeMultiSelectValue,\r\n  create: createEmptyOptions\r\n};\r\n","import { useCallback, useContext, useEffect, useMemo, useState } from 'preact/hooks';\r\n\r\nimport { get } from 'min-dash';\r\n\r\nimport { FormContext, FormRenderContext } from '../context';\r\n\r\nimport {\r\n  useCondition,\r\n  useReadonly,\r\n  useService\r\n} from '../hooks';\r\n\r\nimport { gridColumnClasses, prefixId } from './Util';\r\n\r\nconst noop = () => false;\r\n\r\n\r\nexport function FormField(props) {\r\n  const {\r\n    field,\r\n    indexes,\r\n    onChange\r\n  } = props;\r\n\r\n  const formFields = useService('formFields'),\r\n        viewerCommands = useService('viewerCommands', false),\r\n        pathRegistry = useService('pathRegistry'),\r\n        eventBus = useService('eventBus'),\r\n        form = useService('form');\r\n\r\n  const {\r\n    initialData,\r\n    data,\r\n    errors,\r\n    properties\r\n  } = form._getState();\r\n\r\n  const {\r\n    Element,\r\n    Hidden,\r\n    Column\r\n  } = useContext(FormRenderContext);\r\n\r\n  const { formId } = useContext(FormContext);\r\n\r\n  // track whether we should trigger initial validation on certain actions, e.g. field blur\r\n  // disabled straight away, if viewerCommands are not available\r\n  const [ initialValidationTrigger, setInitialValidationTrigger ] = useState(!!viewerCommands);\r\n\r\n  const FormFieldComponent = formFields.get(field.type);\r\n\r\n  if (!FormFieldComponent) {\r\n    throw new Error(`cannot render field <${field.type}>`);\r\n  }\r\n\r\n  const fieldConfig = FormFieldComponent.config;\r\n\r\n  const valuePath = useMemo(() => pathRegistry.getValuePath(field, { indexes }), [ field, indexes, pathRegistry ]);\r\n\r\n  const initialValue = useMemo(() => get(initialData, valuePath), [ initialData, valuePath ]);\r\n\r\n  const readonly = useReadonly(field, properties);\r\n\r\n  const value = get(data, valuePath);\r\n\r\n  // add precedence: global readonly > form field disabled\r\n  const disabled = !properties.readOnly && (\r\n    properties.disabled || field.disabled || false\r\n  );\r\n\r\n  // ensures the initial validation behavior can be re-triggered upon form reset\r\n  useEffect(() => {\r\n\r\n    if (!viewerCommands) {\r\n      return;\r\n    }\r\n\r\n    const resetValidation = () => {\r\n      setInitialValidationTrigger(true);\r\n    };\r\n\r\n    eventBus.on('import.done', resetValidation);\r\n    eventBus.on('reset', resetValidation);\r\n\r\n    return () => {\r\n      eventBus.off('import.done', resetValidation);\r\n      eventBus.off('reset', resetValidation);\r\n    };\r\n\r\n  }, [ eventBus, viewerCommands ]);\r\n\r\n  useEffect(() => {\r\n\r\n    if (initialValidationTrigger && initialValue) {\r\n      setInitialValidationTrigger(false);\r\n      viewerCommands.updateFieldValidation(field, initialValue, indexes);\r\n    }\r\n\r\n  }, [ viewerCommands, field, initialValue, initialValidationTrigger, indexes ]);\r\n\r\n  const onBlur = useCallback(() => {\r\n\r\n    const value = get(data, valuePath);\r\n\r\n    if (initialValidationTrigger) {\r\n      setInitialValidationTrigger(false);\r\n      viewerCommands.updateFieldValidation(field, value, indexes);\r\n    }\r\n\r\n    eventBus.fire('formField.blur', { formField: field });\r\n\r\n  }, [ eventBus, field, indexes, viewerCommands, initialValidationTrigger, data, valuePath ]);\r\n\r\n  const onFocus = useCallback(() => {\r\n    eventBus.fire('formField.focus', { formField: field });\r\n  }, [ eventBus, field ]);\r\n\r\n  const hidden = useCondition(field.conditional && field.conditional.hide || null);\r\n\r\n  const onChangeIndexed = useCallback((update) => {\r\n\r\n    // any data change will trigger validation\r\n    setInitialValidationTrigger(false);\r\n\r\n    // add indexes of the keyed field to the update, if any\r\n    onChange(fieldConfig.keyed ? { ...update, indexes } : update);\r\n  }, [ onChange, fieldConfig.keyed, indexes ]);\r\n\r\n  if (hidden) {\r\n    return <Hidden field={ field } />;\r\n  }\r\n\r\n  const domId = `${prefixId(field.id, formId, indexes)}`;\r\n  const fieldErrors = get(errors, [ field.id, ...Object.values(indexes || {}) ]) || [];\r\n\r\n  const formFieldElement = (\r\n    <FormFieldComponent\r\n      { ...props }\r\n      disabled={ disabled }\r\n      errors={ fieldErrors }\r\n      domId={ domId }\r\n      onChange={ disabled || readonly ? noop : onChangeIndexed }\r\n      onBlur={ disabled || readonly ? noop : onBlur }\r\n      onFocus={ disabled || readonly ? noop : onFocus }\r\n      readonly={ readonly }\r\n      value={ value }\r\n    />\r\n  );\r\n\r\n  if (fieldConfig.escapeGridRender) {\r\n    return formFieldElement;\r\n  }\r\n\r\n  return (\r\n    <Column field={ field } class={ gridColumnClasses(field) }>\r\n      <Element class=\"fjs-element\" field={ field }>\r\n        { formFieldElement }\r\n      </Element>\r\n    </Column>\r\n  );\r\n}\r\n","import { useContext, useState } from 'preact/hooks';\r\n\r\nimport { useService } from '../../../hooks/useService';\r\n\r\nimport { FormField } from '../../FormField';\r\n\r\nimport { FormRenderContext } from '../../../context';\r\n\r\nexport function ChildrenRenderer(props) {\r\n\r\n  const {\r\n    Children\r\n  } = useContext(FormRenderContext);\r\n\r\n  const { field, Empty } = props;\r\n\r\n  const { id } = field;\r\n\r\n  const repeatRenderManager = useService('repeatRenderManager', false);\r\n\r\n  const isRepeating = repeatRenderManager && repeatRenderManager.isFieldRepeating(id);\r\n\r\n  const Repeater = repeatRenderManager.Repeater;\r\n  const RepeatFooter = repeatRenderManager.RepeatFooter;\r\n\r\n  return (\r\n    isRepeating\r\n      ? <RepeatChildrenRenderer { ...props } { ...{ ChildrenRoot: Children, Empty, Repeater, RepeatFooter, repeatRenderManager } } />\r\n      : <SimpleChildrenRenderer { ...props } { ...{ ChildrenRoot: Children, Empty } } />\r\n  );\r\n}\r\n\r\nfunction SimpleChildrenRenderer(props) {\r\n\r\n  const {\r\n    ChildrenRoot,\r\n    Empty,\r\n    field\r\n  } = props;\r\n\r\n  const { components = [] } = field;\r\n\r\n  const isEmpty = !components.length;\r\n\r\n  return (\r\n    <ChildrenRoot class=\"fjs-vertical-layout fjs-children cds--grid cds--grid--condensed\" field={ field }>\r\n      <RowsRenderer { ...props } />\r\n      { isEmpty ? <Empty field={ field } /> : null }\r\n    </ChildrenRoot>\r\n  );\r\n}\r\n\r\nfunction RepeatChildrenRenderer(props) {\r\n\r\n  const {\r\n    ChildrenRoot,\r\n    repeatRenderManager,\r\n    Empty,\r\n    field,\r\n    ...restProps\r\n  } = props;\r\n\r\n  const { components = [] } = field;\r\n\r\n  const useSharedState = useState({ isCollapsed: true });\r\n\r\n  const Repeater = repeatRenderManager.Repeater;\r\n  const RepeatFooter = repeatRenderManager.RepeatFooter;\r\n\r\n  return <>\r\n    <ChildrenRoot class=\"fjs-vertical-layout fjs-children cds--grid cds--grid--condensed\" field={ field }>\r\n      { Repeater ? <Repeater { ...{ ...restProps, useSharedState, field, RowsRenderer } } /> : <RowsRenderer { ...{ ...restProps, field } } /> }\r\n      { !components.length ? <Empty field={ field } /> : null }\r\n    </ChildrenRoot>\r\n    { RepeatFooter ? <RepeatFooter { ...{ ...restProps, useSharedState, field } } /> : null }\r\n  </>;\r\n}\r\n\r\nfunction RowsRenderer(props) {\r\n\r\n  const { field, indexes } = props;\r\n  const { id: parentId, verticalAlignment = 'start' } = field;\r\n\r\n  const formLayouter = useService('formLayouter');\r\n  const formFieldRegistry = useService('formFieldRegistry');\r\n  const rows = formLayouter.getRows(parentId);\r\n\r\n  const {\r\n    Row\r\n  } = useContext(FormRenderContext);\r\n\r\n  return <> {\r\n    rows.map(row => {\r\n      const {\r\n        components = []\r\n      } = row;\r\n\r\n      if (!components.length) {\r\n        return null;\r\n      }\r\n\r\n      return (\r\n        <Row row={ row } class=\"fjs-layout-row cds--row\" style={ { alignItems: verticalAlignment } }>\r\n          {\r\n            components.map(childId => {\r\n\r\n              const childField = formFieldRegistry.get(childId);\r\n\r\n              if (!childField) {\r\n                return null;\r\n              }\r\n\r\n              return (\r\n                <FormField\r\n                  { ...props }\r\n                  key={ childId }\r\n                  field={ childField }\r\n                  indexes={ indexes } />\r\n              );\r\n            })\r\n          }\r\n        </Row>\r\n      );\r\n    })\r\n  } </>;\r\n}\r\n","import { useContext } from 'preact/hooks';\r\nimport { FormRenderContext } from '../../context';\r\nimport { ChildrenRenderer } from './parts/ChildrenRenderer';\r\n\r\nexport function Default(props) {\r\n\r\n  const {\r\n    Empty,\r\n  } = useContext(FormRenderContext);\r\n\r\n  const fullProps = { ...props, Empty };\r\n\r\n  return <ChildrenRenderer { ...fullProps } />;\r\n}\r\n\r\nDefault.config = {\r\n  type: 'default',\r\n  keyed: false,\r\n  label: null,\r\n  group: null,\r\n  create: (options = {}) => ({\r\n    components: [],\r\n    ...options\r\n  })\r\n};\r\n","<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"15\" fill=\"none\" viewBox=\"0 0 28 30\"><path fill=\"currentColor\" fill-rule=\"evenodd\" d=\"M19 2H9V0H7v2H2a2 2 0 0 0-2 2v24a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2h-5V0h-2v2ZM7 7V4H2v5h24V4h-5v3h-2V4H9v3H7Zm-5 4v17h24V11H2Z\" clip-rule=\"evenodd\"/></svg>","/**\r\n * Returns date format for the provided locale.\r\n * If the locale is not provided, uses the browser's locale.\r\n *\r\n * @param {string} [locale] - The locale to get date format for.\r\n * @returns {string} The date format for the locale.\r\n */\r\nexport function getLocaleDateFormat(locale = 'default') {\r\n  const parts = new Intl.DateTimeFormat(locale).formatToParts(new Date(Date.UTC(2020, 5, 5)));\r\n  return parts.map(part => {\r\n    const len = part.value.length;\r\n    switch (part.type) {\r\n    case 'day': return 'd'.repeat(len);\r\n    case 'month': return 'M'.repeat(len);\r\n    case 'year': return 'y'.repeat(len);\r\n    default: return part.value;\r\n    }\r\n  }).join('');\r\n}\r\n\r\n/**\r\n * Returns readable date format for the provided locale.\r\n * If the locale is not provided, uses the browser's locale.\r\n *\r\n * @param {string} [locale] - The locale to get readable date format for.\r\n * @returns {string} The readable date format for the locale.\r\n */\r\nexport function getLocaleReadableDateFormat(locale) {\r\n  let format = getLocaleDateFormat(locale).toLowerCase();\r\n\r\n  // Ensure month is in 'mm' format\r\n  if (!format.includes('mm')) {\r\n    format = format.replace('m', 'mm');\r\n  }\r\n\r\n  // Ensure day is in 'dd' format\r\n  if (!format.includes('dd')) {\r\n    format = format.replace('d', 'dd');\r\n  }\r\n\r\n  return format;\r\n}\r\n\r\n/**\r\n * Returns flatpickr config for the provided locale.\r\n * If the locale is not provided, uses the browser's locale.\r\n *\r\n * @param {string} [locale] - The locale to get flatpickr config for.\r\n * @returns {object} The flatpickr config for the locale.\r\n */\r\nexport function getLocaleDateFlatpickrConfig(locale) {\r\n  return flatpickerizeDateFormat(getLocaleDateFormat(locale));\r\n}\r\n\r\nfunction flatpickerizeDateFormat(dateFormat) {\r\n\r\n  const useLeadingZero = {\r\n    day: dateFormat.includes('dd'),\r\n    month: dateFormat.includes('MM'),\r\n    year: dateFormat.includes('yyyy')\r\n  };\r\n\r\n  dateFormat = useLeadingZero.day ? dateFormat.replace('dd', 'd') : dateFormat.replace('d', 'j');\r\n  dateFormat = useLeadingZero.month ? dateFormat.replace('MM', 'm') : dateFormat.replace('M', 'n');\r\n  dateFormat = useLeadingZero.year ? dateFormat.replace('yyyy', 'Y') : dateFormat.replace('yy', 'y');\r\n\r\n  return dateFormat;\r\n}\r\n","import classNames from 'classnames';\r\nimport { isString } from 'min-dash';\r\n\r\nexport function InputAdorner(props) {\r\n\r\n  const {\r\n    pre,\r\n    post,\r\n    rootRef,\r\n    inputRef,\r\n    children,\r\n    disabled,\r\n    readonly,\r\n    hasErrors\r\n  } = props;\r\n\r\n  const onAdornmentClick = () => inputRef && inputRef.current && inputRef.current.focus();\r\n\r\n  return <div class={ classNames('fjs-input-group', { 'fjs-disabled': disabled, 'fjs-readonly': readonly }, { 'hasErrors': hasErrors }) } ref={ rootRef }>\r\n    { pre && <span class=\"fjs-input-adornment border-right border-radius-left\" onClick={ onAdornmentClick }> { isString(pre) ? <span class=\"fjs-input-adornment-text\">{ pre }</span> : pre } </span> }\r\n    { children }\r\n    { post && <span class=\"fjs-input-adornment border-left border-radius-right\" onClick={ onAdornmentClick }> { isString(post) ? <span class=\"fjs-input-adornment-text\">{ post }</span> : post } </span> }\r\n  </div>;\r\n\r\n}","import flatpickr from 'flatpickr';\r\nimport CalendarIcon from '../icons/Calendar.svg';\r\n\r\nimport { ENTER_KEYDOWN_EVENT, focusRelevantFlatpickerDay } from '../../util/dateTimeUtil';\r\nimport { getLocaleReadableDateFormat, getLocaleDateFlatpickrConfig } from '../../util/localisationUtil';\r\nimport { useCallback, useEffect, useRef, useState } from 'preact/hooks';\r\nimport { useDeepCompareMemoize } from '../../../hooks';\r\n\r\nimport { InputAdorner } from './InputAdorner';\r\nimport { Label } from '../../Label';\r\n\r\nexport function Datepicker(props) {\r\n\r\n  const {\r\n    label,\r\n    domId,\r\n    collapseLabelOnEmpty,\r\n    onDateTimeBlur,\r\n    onDateTimeFocus,\r\n    required,\r\n    disabled,\r\n    disallowPassedDates,\r\n    date: dateObject,\r\n    readonly,\r\n    setDate\r\n  } = props;\r\n\r\n  const dateInputRef = useRef();\r\n  const focusScopeRef = useRef();\r\n\r\n  const [ flatpickrInstance, setFlatpickrInstance ] = useState(null);\r\n  const [ isInputDirty, setIsInputDirty ] = useState(false);\r\n  const [ forceFocusCalendar, setForceFocusCalendar ] = useState(false);\r\n\r\n  // ensures we render based on date value instead of reference\r\n  const date = useDeepCompareMemoize(dateObject);\r\n\r\n  // shorts the date value back to the source\r\n  useEffect(() => {\r\n\r\n    if (!flatpickrInstance || !flatpickrInstance.config) return;\r\n\r\n    flatpickrInstance.setDate(date, true);\r\n    setIsInputDirty(false);\r\n\r\n  }, [ flatpickrInstance, date ]);\r\n\r\n  useEffect(() => {\r\n\r\n    if (!forceFocusCalendar) return;\r\n\r\n    focusRelevantFlatpickerDay(flatpickrInstance);\r\n    setForceFocusCalendar(false);\r\n\r\n  }, [ flatpickrInstance, forceFocusCalendar ]);\r\n\r\n  // setup flatpickr instance\r\n  useEffect(() => {\r\n\r\n    let config = {\r\n      allowInput: true,\r\n      dateFormat: getLocaleDateFlatpickrConfig(),\r\n      static: true,\r\n      clickOpens: false,\r\n\r\n      // TODO: support dates prior to 1900 (https://github.com/bpmn-io/form-js/issues/533)\r\n      minDate: disallowPassedDates ? 'today' : '01/01/1900',\r\n      errorHandler: () => { /* do nothing, we expect the values to sometimes be erronous and we don't want warnings polluting the console */ }\r\n    };\r\n\r\n    const instance = flatpickr(dateInputRef.current, config);\r\n\r\n    setFlatpickrInstance(instance);\r\n\r\n    const onCalendarFocusOut = (e) => {\r\n      if (!instance.calendarContainer.contains(e.relatedTarget) && e.relatedTarget != dateInputRef.current) {\r\n        instance.close();\r\n      }\r\n    };\r\n\r\n    // remove dirty tag to have mouse day selection prioritize input blur\r\n    const onCalendarMouseDown = (e) => {\r\n      if (e.target.classList.contains('flatpickr-day')) {\r\n        setIsInputDirty(false);\r\n      }\r\n    };\r\n\r\n    // when the dropdown of the datepickr opens, we register a few event handlers to re-implement some of the\r\n    // flatpicker logic that was lost when setting allowInput to true\r\n    instance.config.onOpen = [\r\n      () => instance.calendarContainer.addEventListener('focusout', onCalendarFocusOut),\r\n      () => instance.calendarContainer.addEventListener('mousedown', onCalendarMouseDown),\r\n    ];\r\n\r\n    instance.config.onClose = [\r\n      () => instance.calendarContainer.removeEventListener('focusout', onCalendarFocusOut),\r\n      () => instance.calendarContainer.removeEventListener('mousedown', onCalendarMouseDown),\r\n    ];\r\n\r\n  }, [ disallowPassedDates ]);\r\n\r\n  // onChange is updated dynamically, so not to re-render the flatpicker every time it changes\r\n  useEffect(() => {\r\n\r\n    if (!flatpickrInstance || !flatpickrInstance.config) return;\r\n\r\n    flatpickrInstance.config.onChange = [ (date) => setDate(new Date(date)), () => setIsInputDirty(false) ];\r\n\r\n  }, [ flatpickrInstance, setDate ]);\r\n\r\n  const onInputKeyDown = useCallback(\r\n    (e) => {\r\n\r\n      if (!flatpickrInstance) return;\r\n\r\n      if (e.code === 'Escape') {\r\n        flatpickrInstance.close();\r\n      }\r\n\r\n      if (e.code === 'ArrowDown') {\r\n\r\n        if (isInputDirty) {\r\n\r\n          // trigger an enter keypress to submit the new input, then focus calendar day on the next render cycle\r\n          dateInputRef.current.dispatchEvent(ENTER_KEYDOWN_EVENT);\r\n          setIsInputDirty(false);\r\n          setForceFocusCalendar(true);\r\n        }\r\n        else {\r\n\r\n          // focus calendar day immediately\r\n          focusRelevantFlatpickerDay(flatpickrInstance);\r\n        }\r\n\r\n        e.preventDefault();\r\n      }\r\n\r\n      if (e.code === 'Enter') {\r\n        setIsInputDirty(false);\r\n      }\r\n    },\r\n    [ flatpickrInstance, isInputDirty ],\r\n  );\r\n\r\n  const onInputFocus = useCallback(\r\n    (e) => {\r\n\r\n      if (!flatpickrInstance || focusScopeRef.current.contains(e.relatedTarget) || readonly) return;\r\n      flatpickrInstance.open();\r\n      onDateTimeFocus(e);\r\n\r\n    }, [ flatpickrInstance, readonly, onDateTimeFocus ]\r\n  );\r\n\r\n  // simulate an enter press on blur to make sure the date value is submitted in all scenarios\r\n  const onInputBlur = useCallback(\r\n    (e) => {\r\n\r\n      const isFalseBlur = e.relatedTarget && e.relatedTarget.classList.contains('flatpickr-day');\r\n      if (isFalseBlur) return;\r\n      if (isInputDirty) {\r\n        dateInputRef.current.dispatchEvent(ENTER_KEYDOWN_EVENT);\r\n        setIsInputDirty(false);\r\n      }\r\n\r\n      onDateTimeBlur(e);\r\n\r\n    }, [ isInputDirty, onDateTimeBlur ]\r\n  );\r\n\r\n  return <div class=\"fjs-datetime-subsection\">\r\n    <Label\r\n      htmlFor={ domId }\r\n      label={ label }\r\n      collapseOnEmpty={ collapseLabelOnEmpty }\r\n      required={ required } />\r\n    <InputAdorner\r\n      pre={ <CalendarIcon /> }\r\n      disabled={ disabled }\r\n      readonly={ readonly }\r\n      rootRef={ focusScopeRef }\r\n      inputRef={ dateInputRef }>\r\n      <div class=\"fjs-datepicker\" style={ { width: '100%' } }>\r\n        <input ref={ dateInputRef }\r\n          type=\"text\"\r\n          id={ domId }\r\n          class=\"fjs-input\"\r\n          disabled={ disabled }\r\n          readOnly={ readonly }\r\n          placeholder={ getLocaleReadableDateFormat() }\r\n          autoComplete=\"off\"\r\n          onFocus={ onInputFocus }\r\n          onBlur={ onInputBlur }\r\n          onKeyDown={ onInputKeyDown }\r\n          onMouseDown={ () => !flatpickrInstance.isOpen && !readonly && flatpickrInstance.open() }\r\n          onInput={ () => setIsInputDirty(true) }\r\n          data-input\r\n          aria-describedby={ props['aria-describedby'] } />\r\n      </div>\r\n    </InputAdorner>\r\n  </div>\r\n  ;\r\n}\r\n","<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"none\" viewBox=\"0 0 28 29\"><path fill=\"currentColor\" d=\"M13 14.41 18.59 20 20 18.59l-5-5.01V5h-2v9.41Z\"/><path fill=\"currentColor\" fill-rule=\"evenodd\" d=\"M6.222 25.64A14 14 0 1 0 21.778 2.36 14 14 0 0 0 6.222 25.64ZM7.333 4.023a12 12 0 1 1 13.334 19.955A12 12 0 0 1 7.333 4.022Z\" clip-rule=\"evenodd\"/></svg>","import classNames from 'classnames';\r\nimport { useState, useEffect, useCallback, useRef, useMemo } from 'preact/hooks';\r\nimport { useKeyDownAction } from '../../../hooks/useKeyDownAction';\r\n\r\nconst DEFAULT_LABEL_GETTER = (value) => value;\r\nconst NOOP = () => {};\r\n\r\nexport function DropdownList(props) {\r\n\r\n  const {\r\n    listenerElement = window,\r\n    values = [],\r\n    getLabel = DEFAULT_LABEL_GETTER,\r\n    onValueSelected = NOOP,\r\n    height = 235,\r\n    emptyListMessage = 'No results',\r\n    initialFocusIndex = 0\r\n  } = props;\r\n\r\n  const [ mouseControl, setMouseControl ] = useState(false);\r\n  const [ focusedValueIndex, setFocusedValueIndex ] = useState(initialFocusIndex);\r\n  const [ smoothScrolling, setSmoothScrolling ] = useState(false);\r\n  const dropdownContainer = useRef();\r\n  const mouseScreenPos = useRef();\r\n\r\n  const focusedItem = useMemo(() => values.length ? values[focusedValueIndex] : null, [ focusedValueIndex, values ]);\r\n\r\n  const changeFocusedValueIndex = useCallback((delta) => {\r\n    setFocusedValueIndex(x => Math.min(Math.max(0, x + delta), values.length - 1));\r\n  }, [ values.length ]);\r\n\r\n  useEffect(() => {\r\n    if (focusedValueIndex === 0) return;\r\n\r\n    if (!focusedValueIndex || !values.length) {\r\n      setFocusedValueIndex(0);\r\n    }\r\n    else if (focusedValueIndex >= values.length) {\r\n      setFocusedValueIndex(values.length - 1);\r\n    }\r\n  }, [ focusedValueIndex, values.length ]);\r\n\r\n  useKeyDownAction('ArrowUp', () => {\r\n    if (values.length) {\r\n      changeFocusedValueIndex(-1);\r\n      setMouseControl(false);\r\n    }\r\n  }, listenerElement);\r\n\r\n  useKeyDownAction('ArrowDown', () => {\r\n    if (values.length) {\r\n      changeFocusedValueIndex(1);\r\n      setMouseControl(false);\r\n    }\r\n  }, listenerElement);\r\n\r\n  useKeyDownAction('Enter', () => {\r\n    if (focusedItem) {\r\n      onValueSelected(focusedItem);\r\n    }\r\n  }, listenerElement);\r\n\r\n  useEffect(() => {\r\n    const individualEntries = dropdownContainer.current.children;\r\n    if (individualEntries.length && !mouseControl) {\r\n      const focusedEntry = individualEntries[focusedValueIndex];\r\n      focusedEntry && focusedEntry.scrollIntoView({ block: 'nearest', inline: 'nearest' });\r\n    }\r\n  }, [ focusedValueIndex, mouseControl ]);\r\n\r\n  useEffect(() => {\r\n    setSmoothScrolling(true);\r\n  }, []);\r\n\r\n  const onMouseMovedInKeyboardMode = (event, valueIndex) => {\r\n\r\n    const userMovedCursor = !mouseScreenPos.current || mouseScreenPos.current.x !== event.screenX && mouseScreenPos.current.y !== event.screenY;\r\n\r\n    if (userMovedCursor) {\r\n      mouseScreenPos.current = { x: event.screenX, y: event.screenY };\r\n      setMouseControl(true);\r\n      setFocusedValueIndex(valueIndex);\r\n    }\r\n\r\n  };\r\n\r\n  return <div\r\n    ref={ dropdownContainer }\r\n    tabIndex={ -1 }\r\n    class=\"fjs-dropdownlist\"\r\n    onMouseDown={ (e) => e.preventDefault() }\r\n    style={ { maxHeight: height, scrollBehavior: smoothScrolling ? 'smooth' : 'auto' } }>\r\n    {\r\n      values.length > 0 && values.map((v, i) => {\r\n        return (\r\n          <div\r\n            class={ classNames('fjs-dropdownlist-item', { 'focused': focusedValueIndex === i }) }\r\n            onMouseMove={ mouseControl ? undefined : (e) => onMouseMovedInKeyboardMode(e, i) }\r\n            onMouseEnter={ mouseControl ? () => setFocusedValueIndex(i) : undefined }\r\n            onMouseDown={ (e) => onValueSelected(v) }>\r\n            {getLabel(v)}\r\n          </div>\r\n        );\r\n      })\r\n    }\r\n    {\r\n      !values.length && <div class=\"fjs-dropdownlist-empty\">{ emptyListMessage }</div>\r\n    }\r\n  </div>;\r\n}","import { useCallback, useEffect, useMemo, useRef, useState } from 'preact/hooks';\r\nimport { formatTime, parseInputTime } from '../../util/dateTimeUtil';\r\nimport { isNumber } from 'min-dash';\r\n\r\nimport ClockIcon from '../icons/Clock.svg';\r\nimport { DropdownList } from './DropdownList';\r\nimport { InputAdorner } from './InputAdorner';\r\nimport { Label } from '../../Label';\r\n\r\nexport function Timepicker(props) {\r\n\r\n  const {\r\n    label,\r\n    collapseLabelOnEmpty,\r\n    onDateTimeBlur,\r\n    onDateTimeFocus,\r\n    domId,\r\n    required,\r\n    disabled,\r\n    readonly,\r\n    use24h = false,\r\n    timeInterval,\r\n    time,\r\n    setTime\r\n  } = props;\r\n\r\n  const safeTimeInterval = useMemo(() => {\r\n\r\n    const allowedIntervals = [ 1, 5, 10, 15, 30, 60 ];\r\n\r\n    if (allowedIntervals.includes(timeInterval)) {\r\n      return timeInterval;\r\n    }\r\n\r\n    return 15;\r\n\r\n  }, [ timeInterval ]);\r\n\r\n  const timeInputRef = useRef();\r\n  const [ dropdownIsOpen, setDropdownIsOpen ] = useState(false);\r\n  const useDropdown = useMemo(() => safeTimeInterval !== 1, [ safeTimeInterval ]);\r\n\r\n  const [ rawValue, setRawValue ] = useState('');\r\n\r\n  // populates values from source\r\n  useEffect(() => {\r\n    if (time === null) {\r\n      setRawValue('');\r\n      return;\r\n    }\r\n\r\n    const intervalAdjustedTime = time - (time % safeTimeInterval);\r\n    setRawValue(formatTime(use24h, intervalAdjustedTime));\r\n\r\n    if (intervalAdjustedTime != time) {\r\n      setTime(intervalAdjustedTime);\r\n    }\r\n\r\n  }, [ time, setTime, use24h, safeTimeInterval ]);\r\n\r\n  const propagateRawToMinute = useCallback((newRawValue) => {\r\n\r\n    const localRawValue = newRawValue || rawValue;\r\n\r\n    // If no raw value exists, set the minute to null\r\n    if (!localRawValue) {\r\n      setTime(null);\r\n      return;\r\n    }\r\n\r\n    const minutes = parseInputTime(localRawValue);\r\n\r\n    // If raw string couldn't be parsed, clean everything up\r\n    if (!isNumber(minutes)) {\r\n      setRawValue('');\r\n      setTime(null);\r\n      return;\r\n    }\r\n\r\n    // Enforce the minutes to match the timeInterval\r\n    const correctedMinutes = minutes - (minutes % safeTimeInterval);\r\n\r\n    // Enforce the raw text to be formatted properly\r\n    setRawValue(formatTime(use24h, correctedMinutes));\r\n    setTime(correctedMinutes);\r\n\r\n  }, [ rawValue, safeTimeInterval, use24h, setTime ]);\r\n\r\n  const timeOptions = useMemo(() => {\r\n\r\n    const minutesInDay = 24 * 60;\r\n    const intervalCount = Math.floor(minutesInDay / safeTimeInterval);\r\n    return [ ...Array(intervalCount).keys() ].map(intervalIndex => formatTime(use24h, intervalIndex * safeTimeInterval));\r\n\r\n  }, [ safeTimeInterval, use24h ]);\r\n\r\n  const initialFocusIndex = useMemo(() => {\r\n\r\n    // if there are no options, there will not be any focusing\r\n    if (!timeOptions || !safeTimeInterval) return null;\r\n\r\n    // if there is a set minute value, we focus it in the dropdown\r\n    if (time) return time / safeTimeInterval;\r\n\r\n    const cacheTime = parseInputTime(rawValue);\r\n\r\n    // if there is a valid value in the input cache, we try and focus close to it\r\n    if (cacheTime) {\r\n      const flooredCacheTime = cacheTime - cacheTime % safeTimeInterval;\r\n      return flooredCacheTime / safeTimeInterval;\r\n    }\r\n\r\n    // If there is no set value, simply focus the middle of the dropdown (12:00)\r\n    return Math.floor(timeOptions.length / 2);\r\n\r\n  }, [ rawValue, time, safeTimeInterval, timeOptions ]);\r\n\r\n  const onInputKeyDown = (e) => {\r\n    switch (e.key) {\r\n    case 'ArrowUp':\r\n      e.preventDefault();\r\n      break;\r\n    case 'ArrowDown':\r\n      useDropdown && setDropdownIsOpen(true);\r\n      e.preventDefault();\r\n      break;\r\n    case 'Escape':\r\n      useDropdown && setDropdownIsOpen(false);\r\n      break;\r\n    case 'Enter':\r\n      !dropdownIsOpen && propagateRawToMinute();\r\n      break;\r\n    }\r\n  };\r\n\r\n  const onInputBlur = (e) => {\r\n    setDropdownIsOpen(false);\r\n    propagateRawToMinute();\r\n    onDateTimeBlur(e);\r\n  };\r\n\r\n  const onInputFocus = (e) => {\r\n    onDateTimeFocus(e);\r\n    !readonly && useDropdown && setDropdownIsOpen(true);\r\n  };\r\n\r\n  const onDropdownValueSelected = (value) => {\r\n    setDropdownIsOpen(false);\r\n    propagateRawToMinute(value);\r\n  };\r\n\r\n  return <div class=\"fjs-datetime-subsection\">\r\n    <Label\r\n      htmlFor={ domId }\r\n      label={ label }\r\n      collapseOnEmpty={ collapseLabelOnEmpty }\r\n      required={ required } />\r\n    <InputAdorner\r\n      pre={ <ClockIcon /> }\r\n      inputRef={ timeInputRef }\r\n      disabled={ disabled }\r\n      readonly={ readonly }>\r\n      <div class=\"fjs-timepicker fjs-timepicker-anchor\">\r\n        <input ref={ timeInputRef }\r\n          type=\"text\"\r\n          id={ domId }\r\n          class=\"fjs-input\"\r\n          value={ rawValue }\r\n          disabled={ disabled }\r\n          readOnly={ readonly }\r\n          placeholder={ use24h ? 'hh:mm' : 'hh:mm ?m' }\r\n          autoComplete=\"off\"\r\n\r\n          // @ts-ignore\r\n          onInput={ (e) => { setRawValue(e.target.value); useDropdown && setDropdownIsOpen(false); } }\r\n          onBlur={ onInputBlur }\r\n          onFocus={ onInputFocus }\r\n          onClick={ () => !readonly && useDropdown && setDropdownIsOpen(true) }\r\n          onKeyDown={ onInputKeyDown }\r\n          data-input\r\n          aria-describedby={ props['aria-describedby'] } />\r\n\r\n        { dropdownIsOpen && <DropdownList\r\n          values={ timeOptions }\r\n          height={ 150 }\r\n          onValueSelected={ onDropdownValueSelected }\r\n          listenerElement={ timeInputRef.current }\r\n          initialFocusIndex={ initialFocusIndex } /> }\r\n\r\n      </div>\r\n    </InputAdorner>\r\n  </div>;\r\n}\r\n","import { useCallback, useContext, useMemo, useState, useEffect, useRef } from 'preact/hooks';\r\n\r\nimport classNames from 'classnames';\r\n\r\nimport { set } from 'min-dash';\r\n\r\nimport { FormContext } from '../../context';\r\n\r\nimport { DATETIME_SUBTYPES, DATETIME_SUBTYPE_PATH, DATE_LABEL_PATH } from '../../../util/constants/DatetimeConstants';\r\n\r\nimport { Description } from '../Description';\r\nimport { Errors } from '../Errors';\r\nimport { Datepicker } from './parts/Datepicker';\r\nimport { Timepicker } from './parts/Timepicker';\r\n\r\nimport { formFieldClasses, prefixId } from '../Util';\r\nimport { sanitizeDateTimePickerValue } from '../util/sanitizerUtil';\r\nimport { parseIsoTime, serializeDate, serializeDateTime, serializeTime } from '../util/dateTimeUtil';\r\n\r\nconst type = 'datetime';\r\n\r\nexport function Datetime(props) {\r\n  const {\r\n    disabled,\r\n    errors = [],\r\n    domId,\r\n    onBlur,\r\n    onFocus,\r\n    field,\r\n    onChange,\r\n    readonly,\r\n    value = ''\r\n  } = props;\r\n\r\n  const {\r\n    description,\r\n    id,\r\n    dateLabel,\r\n    timeLabel,\r\n    validate = {},\r\n    subtype,\r\n    use24h,\r\n    disallowPassedDates,\r\n    timeInterval,\r\n    timeSerializingFormat\r\n  } = field;\r\n\r\n  const { required } = validate;\r\n  const { formId } = useContext(FormContext);\r\n  const dateTimeGroupRef = useRef();\r\n\r\n  const getNullDateTime = () => ({ date: new Date(Date.parse(null)), time: null });\r\n\r\n  const [ dateTime, setDateTime ] = useState(getNullDateTime());\r\n  const [ dateTimeUpdateRequest, setDateTimeUpdateRequest ] = useState(null);\r\n\r\n  const isValidDate = (date) => date && !isNaN(date.getTime());\r\n  const isValidTime = (time) => !isNaN(parseInt(time));\r\n\r\n  const useDatePicker = useMemo(() => subtype === DATETIME_SUBTYPES.DATE || subtype === DATETIME_SUBTYPES.DATETIME, [ subtype ]);\r\n  const useTimePicker = useMemo(() => subtype === DATETIME_SUBTYPES.TIME || subtype === DATETIME_SUBTYPES.DATETIME, [ subtype ]);\r\n\r\n  const onDateTimeBlur = useCallback((e) => {\r\n    if (e.relatedTarget && dateTimeGroupRef.current.contains(e.relatedTarget)) {\r\n      return;\r\n    }\r\n\r\n    onBlur && onBlur();\r\n  }, [ onBlur ]);\r\n\r\n  const onDateTimeFocus = useCallback((e) => {\r\n    if (e.relatedTarget && dateTimeGroupRef.current.contains(e.relatedTarget)) {\r\n      return;\r\n    }\r\n\r\n    onFocus && onFocus();\r\n  }, [ onFocus ]);\r\n\r\n  useEffect(() => {\r\n\r\n    let { date, time } = getNullDateTime();\r\n\r\n    switch (subtype) {\r\n    case DATETIME_SUBTYPES.DATE: {\r\n      date = new Date(Date.parse(value));\r\n      break;\r\n    }\r\n    case DATETIME_SUBTYPES.TIME: {\r\n      time = parseIsoTime(value);\r\n      break;\r\n    }\r\n    case DATETIME_SUBTYPES.DATETIME: {\r\n      date = new Date(Date.parse(value));\r\n      time = isValidDate(date) ? 60 * date.getHours() + date.getMinutes() : null;\r\n      break;\r\n    }}\r\n\r\n    setDateTime({ date, time });\r\n\r\n  }, [ subtype, value ]);\r\n\r\n  const computeAndSetState = useCallback(({ date, time }) => {\r\n\r\n    let newDateTimeValue = null;\r\n\r\n    if (subtype === DATETIME_SUBTYPES.DATE && isValidDate(date)) {\r\n      newDateTimeValue = serializeDate(date);\r\n    }\r\n    else if (subtype === DATETIME_SUBTYPES.TIME && isValidTime(time)) {\r\n      newDateTimeValue = serializeTime(time, new Date().getTimezoneOffset(), timeSerializingFormat);\r\n    }\r\n    else if (subtype === DATETIME_SUBTYPES.DATETIME && isValidDate(date) && isValidTime(time)) {\r\n      newDateTimeValue = serializeDateTime(date, time, timeSerializingFormat);\r\n    }\r\n\r\n    onChange({ value: newDateTimeValue, field });\r\n\r\n  }, [ field, onChange, subtype, timeSerializingFormat ]);\r\n\r\n  useEffect(() => {\r\n    if (dateTimeUpdateRequest) {\r\n      if (dateTimeUpdateRequest.refreshOnly) {\r\n        computeAndSetState(dateTime);\r\n      }\r\n      else {\r\n        const newDateTime = { ...dateTime, ...dateTimeUpdateRequest };\r\n        setDateTime(newDateTime);\r\n        computeAndSetState(newDateTime);\r\n      }\r\n      setDateTimeUpdateRequest(null);\r\n    }\r\n  }, [ computeAndSetState, dateTime, dateTimeUpdateRequest ]);\r\n\r\n  useEffect(() => {\r\n    setDateTimeUpdateRequest({ refreshOnly: true });\r\n  }, [ timeSerializingFormat ]);\r\n\r\n  const allErrors = useMemo(() => {\r\n    if (required || subtype !== DATETIME_SUBTYPES.DATETIME) return errors;\r\n    const isOnlyOneFieldSet = (isValidDate(dateTime.date) && !isValidTime(dateTime.time)) || (!isValidDate(dateTime.date) && isValidTime(dateTime.time));\r\n    return isOnlyOneFieldSet ? [ 'Pole pro datum i čas musí být vyplněné.', ...errors ] : errors;\r\n  }, [ required, subtype, dateTime, errors ]);\r\n\r\n  const setDate = useCallback((date) => {\r\n    setDateTimeUpdateRequest((prev) => (prev ? { ...prev, date } : { date }));\r\n  }, []);\r\n\r\n  const setTime = useCallback((time) => {\r\n    setDateTimeUpdateRequest((prev) => (prev ? { ...prev, time } : { time }));\r\n  }, []);\r\n\r\n  const errorMessageId = allErrors.length === 0 ? undefined : `${prefixId(id, formId)}-error-message`;\r\n  const descriptionId = `${prefixId(id, formId)}-description`;\r\n\r\n  const datePickerProps = {\r\n    label: dateLabel,\r\n    collapseLabelOnEmpty: !timeLabel,\r\n    onDateTimeBlur,\r\n    onDateTimeFocus,\r\n    domId: `${domId}-date`,\r\n    required,\r\n    disabled,\r\n    disallowPassedDates,\r\n    date: dateTime.date,\r\n    readonly,\r\n    setDate,\r\n    'aria-describedby': [ descriptionId, errorMessageId ].join(' ')\r\n  };\r\n\r\n  const timePickerProps = {\r\n    label: timeLabel,\r\n    collapseLabelOnEmpty: !dateLabel,\r\n    onDateTimeBlur,\r\n    onDateTimeFocus,\r\n    domId: `${domId}-time`,\r\n    required,\r\n    disabled,\r\n    readonly,\r\n    use24h,\r\n    timeInterval,\r\n    time: dateTime.time,\r\n    setTime,\r\n    'aria-describedby': [ descriptionId, errorMessageId ].join(' ')\r\n  };\r\n\r\n  return <div class={ formFieldClasses(type, { errors: allErrors, disabled, readonly }) }>\r\n    <div class={ classNames('fjs-vertical-group') } ref={ dateTimeGroupRef }>\r\n      { useDatePicker && <Datepicker { ...datePickerProps } /> }\r\n      { useTimePicker && useDatePicker && <div class=\"fjs-datetime-separator\" /> }\r\n      { useTimePicker && <Timepicker { ...timePickerProps } /> }\r\n    </div>\r\n    <Description id={ descriptionId } description={ description } />\r\n    <Errors errors={ allErrors } id={ errorMessageId } />\r\n  </div>;\r\n}\r\n\r\nDatetime.config = {\r\n  type,\r\n  keyed: true,\r\n  label: 'Datum a čas',\r\n  group: 'basic-input',\r\n  emptyValue: null,\r\n  sanitizeValue: sanitizeDateTimePickerValue,\r\n  create: (options = {}) => {\r\n    const defaults = {};\r\n    set(defaults, DATETIME_SUBTYPE_PATH, DATETIME_SUBTYPES.DATE);\r\n    set(defaults, DATE_LABEL_PATH, 'Datum');\r\n\r\n    return { ...defaults, ...options };\r\n  }\r\n};\r\n","import classNames from 'classnames';\r\nimport { useContext } from 'preact/hooks';\r\nimport { FormRenderContext } from '../../context';\r\nimport { formFieldClasses } from '../Util';\r\nimport { Label } from '../Label';\r\nimport { ChildrenRenderer } from './parts/ChildrenRenderer';\r\n\r\nexport function Group(props) {\r\n\r\n  const { field, domId } = props;\r\n  const { label, type, showOutline } = field;\r\n  const { Empty } = useContext(FormRenderContext);\r\n\r\n  const fullProps = { ...props, Empty };\r\n\r\n  return (\r\n    <div className={ classNames(formFieldClasses(type), 'fjs-form-field-grouplike' , { 'fjs-outlined' : showOutline }) } role=\"group\" aria-labelledby={ domId }>\r\n      <Label\r\n        id={ domId }\r\n        label={ label } />\r\n      <ChildrenRenderer { ...fullProps } />\r\n    </div>\r\n  );\r\n}\r\n\r\nGroup.config = {\r\n  type: 'group',\r\n  pathed: true,\r\n  label: 'Skupina',\r\n  group: 'container',\r\n  create: (options = {}) => ({\r\n    components: [],\r\n    showOutline: true,\r\n    ...options\r\n  })\r\n};\r\n","import { useEffect, useMemo, useState } from 'preact/hooks';\r\n\r\nimport { useSingleLineTemplateEvaluation, useSecurityAttributesMap } from '../../hooks';\r\nimport { sanitizeIFrameSource } from '../util/sanitizerUtil';\r\n\r\nimport { Label } from '../Label';\r\n\r\nimport { formFieldClasses } from '../Util';\r\n\r\n\r\nconst type = 'iframe';\r\n\r\nconst DEFAULT_HEIGHT = 300;\r\n\r\n\r\nexport function IFrame(props) {\r\n  const {\r\n    field,\r\n    disabled,\r\n    readonly,\r\n    domId\r\n  } = props;\r\n\r\n  const {\r\n    height = DEFAULT_HEIGHT,\r\n    label,\r\n    url,\r\n    security = {}\r\n  } = field;\r\n\r\n  const evaluatedUrl = useSingleLineTemplateEvaluation(url, { debug: true });\r\n\r\n  const safeUrl = useMemo(() => sanitizeIFrameSource(evaluatedUrl), [ evaluatedUrl ]);\r\n\r\n  const evaluatedLabel = useSingleLineTemplateEvaluation(label, { debug: true });\r\n\r\n  const [ sandbox, allow ] = useSecurityAttributesMap(security);\r\n  const [ iframeRefresh, setIframeRefresh ] = useState(0);\r\n\r\n  // forces re-render of iframe when sandbox or allow attributes change, as browsers do not do it automatically\r\n  useEffect(() => {\r\n    setIframeRefresh(count => count + 1);\r\n  }, [ sandbox, allow ]);\r\n\r\n  return <div class={ formFieldClasses(type, { disabled, readonly }) }>\r\n    <Label htmlFor={ domId } label={ evaluatedLabel } />\r\n    {\r\n      !evaluatedUrl && <IFramePlaceholder text=\"Žádný dostupný obsah.\" />\r\n    }\r\n    {\r\n      evaluatedUrl && safeUrl &&\r\n        <iframe\r\n          src={ safeUrl }\r\n          title={ evaluatedLabel }\r\n          height={ height }\r\n          class=\"fjs-iframe\"\r\n          id={ domId }\r\n          sandbox={ sandbox }\r\n          key={ 'iframe-' + iframeRefresh }\r\n\r\n          /* @Note: JSX HTML attributes do not include <allow> */\r\n          { ...{ allow } }\r\n        />\r\n    }\r\n    {\r\n      evaluatedUrl && !safeUrl && <IFramePlaceholder text=\"External content couldn't be loaded.\" />\r\n    }\r\n  </div>;\r\n}\r\n\r\nfunction IFramePlaceholder(props) {\r\n  const { text = 'iFrame' } = props;\r\n\r\n  return <div class=\"fjs-iframe-placeholder\">\r\n    <p class=\"fjs-iframe-placeholder-text\">{ text }</p>\r\n  </div>;\r\n}\r\n\r\nIFrame.config = {\r\n  type,\r\n  keyed: false,\r\n  label: 'iFrame',\r\n  group: 'container',\r\n  create: (options = {}) => ({\r\n    security: {\r\n      allowScripts: true\r\n    },\r\n    ...options\r\n  })\r\n};\r\n","<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"54\" height=\"54\" fill=\"currentcolor\"><path fill-rule=\"evenodd\" d=\"M45 17a3 3 0 0 1 3 3v14a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V20a3 3 0 0 1 3-3h36zm-9 8.889H18v2.222h18v-2.222z\"/></svg>","<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"54\" height=\"54\" fill=\"currentcolor\"><path d=\"M34 18H20a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V20a2 2 0 0 0-2-2zm-9 14-5-5 1.41-1.41L25 29.17l7.59-7.59L34 23l-9 9z\"/></svg>","<svg width=\"54\" height=\"54\" viewBox=\"0 0 54 54\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M14.35 24.75H19V29.4H14.35V24.75ZM12.9358 23.3358C13.3109 22.9607 13.8196 22.75 14.35 22.75H19C19.5304 22.75 20.0391 22.9607 20.4142 23.3358C20.7893 23.7109 21 24.2196 21 24.75V29.4C21 29.9304 20.7893 30.4391 20.4142 30.8142C20.0391 31.1893 19.5304 31.4 19 31.4H14.35C13.8196 31.4 13.3109 31.1893 12.9358 30.8142C12.5607 30.4391 12.35 29.9304 12.35 29.4V24.75C12.35 24.2196 12.5607 23.7109 12.9358 23.3358ZM14.35 37.05H19V41.7H14.35V37.05ZM12.9358 35.6358C13.3109 35.2607 13.8196 35.05 14.35 35.05H19C19.5304 35.05 20.0391 35.2607 20.4142 35.6358C20.7893 36.0109 21 36.5196 21 37.05V41.7C21 42.2304 20.7893 42.7391 20.4142 43.1142C20.0391 43.4893 19.5304 43.7 19 43.7H14.35C13.8196 43.7 13.3109 43.4893 12.9358 43.1142C12.5607 42.7391 12.35 42.2304 12.35 41.7V37.05C12.35 36.5196 12.5607 36.0109 12.9358 35.6358ZM14.35 12.45H19V17.1H14.35V12.45ZM12.9358 11.0358C13.3109 10.6607 13.8196 10.45 14.35 10.45H19C19.5304 10.45 20.0391 10.6607 20.4142 11.0358C20.7893 11.4109 21 11.9196 21 12.45V17.1C21 17.6304 20.7893 18.1391 20.4142 18.5142C20.0391 18.8893 19.5304 19.1 19 19.1H14.35C13.8196 19.1 13.3109 18.8893 12.9358 18.5142C12.5607 18.1391 12.35 17.6304 12.35 17.1V12.45C12.35 11.9196 12.5607 11.4109 12.9358 11.0358ZM24.9429 26.0128C24.7554 26.2004 24.65 26.4547 24.65 26.7199V27.3699C24.65 27.6352 24.7554 27.8895 24.9429 28.077C25.1304 28.2646 25.3848 28.3699 25.65 28.3699H40.65C40.9152 28.3699 41.1696 28.2646 41.3571 28.077C41.5446 27.8895 41.65 27.6352 41.65 27.3699V26.7199C41.65 26.4547 41.5446 26.2004 41.3571 26.0128C41.1696 25.8253 40.9152 25.7199 40.65 25.7199H25.65C25.3848 25.7199 25.1304 25.8253 24.9429 26.0128ZM24.9429 38.3128C24.7554 38.5004 24.65 38.7547 24.65 39.0199V39.6699C24.65 39.9352 24.7554 40.1895 24.9429 40.377C25.1304 40.5646 25.3848 40.6699 25.65 40.6699H40.65C40.9152 40.6699 41.1696 40.5646 41.3571 40.377C41.5446 40.1895 41.65 39.9352 41.65 39.6699V39.0199C41.65 38.7547 41.5446 38.5004 41.3571 38.3128C41.1696 38.1253 40.9152 38.0199 40.65 38.0199H25.65C25.3848 38.0199 25.1304 38.1253 24.9429 38.3128ZM24.9429 13.7128C24.7554 13.9004 24.65 14.1547 24.65 14.4199V15.0699C24.65 15.3352 24.7554 15.5895 24.9429 15.777C25.1304 15.9646 25.3848 16.0699 25.65 16.0699H40.65C40.9152 16.0699 41.1696 15.9646 41.3571 15.777C41.5446 15.5895 41.65 15.3352 41.65 15.0699V14.4199C41.65 14.1547 41.5446 13.9004 41.3571 13.7128C41.1696 13.5253 40.9152 13.4199 40.65 13.4199H25.65C25.3848 13.4199 25.1304 13.5253 24.9429 13.7128Z\" fill=\"currentColor\"/>\r\n</svg>","<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"54\" height=\"54\" fill=\"currentcolor\"><path fill-rule=\"evenodd\" d=\"M37.908 13.418h-5.004v-2.354h-1.766v2.354H21.13v-2.354h-1.766v2.354H14.36a2.07 2.07 0 0 0-2.06 2.06v23.549a2.07 2.07 0 0 0 2.06 2.06h6.77v-1.766h-6.358a.707.707 0 0 1-.706-.706V15.89c0-.39.316-.707.706-.707h4.592v2.355h1.766v-2.355h10.008v2.355h1.766v-2.355h4.592a.71.71 0 0 1 .707.707v6.358h1.765v-6.77c0-1.133-.927-2.06-2.06-2.06z\"/><path d=\"m35.13 37.603 1.237-1.237-3.468-3.475v-5.926h-1.754v6.654l3.984 3.984Z\"/><path fill-rule=\"evenodd\" d=\"M23.08 36.962a9.678 9.678 0 1 0 17.883-7.408 9.678 9.678 0 0 0-17.882 7.408Zm4.54-10.292a7.924 7.924 0 1 1 8.805 13.177A7.924 7.924 0 0 1 27.62 26.67Z\"/></svg>","<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"54\" height=\"54\" fill=\"currentcolor\"><path fill-rule=\"evenodd\" d=\"M45 16a3 3 0 0 1 3 3v16a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V19a3 3 0 0 1 3-3h36Zm0 2H9a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h36a1 1 0 0 0 1-1V19a1 1 0 0 0-1-1Z\"/><path d=\"M11 22a1 1 0 0 1 1-1h19a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H12a1 1 0 0 1-1-1V22Z\"/></svg>","<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"54\" height=\"54\"><rect width=\"24\" height=\"4\" x=\"15\" y=\"17\" rx=\"1\"/><rect width=\"24\" height=\"4\" x=\"15\" y=\"25\" rx=\"1\"/><rect width=\"13\" height=\"4\" x=\"15\" y=\"33\" rx=\"1\"/></svg>","<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"54\" height=\"54\" fill=\"currentcolor\"><path fill-rule=\"evenodd\" d=\"M8 33v5a1 1 0 0 0 1 1h4v2H9a3 3 0 0 1-3-3v-5h2Zm18 6v2H15v-2h11Zm13 0v2H28v-2h11Zm9-6v5a3 3 0 0 1-3 3h-4v-2h4a1 1 0 0 0 .993-.883L46 38v-5h2ZM8 22v9H6v-9h2Zm40 0v9h-2v-9h2Zm-35-9v2H9a1 1 0 0 0-.993.883L8 16v4H6v-4a3 3 0 0 1 3-3h4Zm32 0a3 3 0 0 1 3 3v4h-2v-4a1 1 0 0 0-.883-.993L45 15h-4v-2h4Zm-6 0v2H28v-2h11Zm-13 0v2H15v-2h11Z\"/></svg>","<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"54\" height=\"54\" fill=\"currentcolor\"><path fill-rule=\"evenodd\" d=\"M45 16a3 3 0 0 1 3 3v16a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V19a3 3 0 0 1 3-3h36zm0 2H9a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h36a1 1 0 0 0 1-1V19a1 1 0 0 0-1-1zM35 28.444h7l-3.5 4-3.5-4zM35 26h7l-3.5-4-3.5 4z\"/></svg>","<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"54\" height=\"54\" fill=\"currentcolor\"><path d=\"M27 22c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5c-5.52 0-10 4.48-10 10s4.48 10 10 10 10-4.48 10-10-4.48-10-10-10zm0 18a8 8 0 1 1 0-16 8 8 0 1 1 0 16z\"/></svg>","<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"54\" height=\"54\" fill=\"currentcolor\"><path fill-rule=\"evenodd\" d=\"M45 16a3 3 0 0 1 3 3v16a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V19a3 3 0 0 1 3-3h36zm0 2H9a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h36a1 1 0 0 0 1-1V19a1 1 0 0 0-1-1zm-12 7h9l-4.5 6-4.5-6z\"/></svg>","<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"54\" height=\"54\" fill=\"none\"><path fill=\"currentColor\" d=\"M26.293 16.293a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1-1.414 1.414L27 18.414l-3.293 3.293a1 1 0 0 1-1.414-1.414l4-4ZM9 26h36v2H9v-2ZM22.293 33.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0-1.414-1.414L27 35.586l-3.293-3.293a1 1 0 0 0-1.414 1.414Z\"/></svg>","<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"54\" height=\"54\" fill=\"none\"><path fill=\"currentColor\" d=\"M9 15v2h36v-2H9ZM9 37v2h36v-2H9ZM26.293 19.293a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1-1.414 1.414L27 21.414l-3.293 3.293a1 1 0 0 1-1.414-1.414l4-4ZM22.293 30.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0-1.414-1.414L27 32.586l-3.293-3.293a1 1 0 0 0-1.414 1.414Z\"/></svg>","<svg width=\"54\" height=\"54\" viewBox=\"0 0 54 54\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M2.70001 43.2964V44.55C2.70001 45.2956 3.30443 45.9 4.05001 45.9H5.32501V44.1052C5.3736 44.2444 5.40001 44.3941 5.40001 44.55V43.2964H5.32501V43.2H4.05001C4.22743 43.2 4.39685 43.2342 4.55204 43.2964H2.70001ZM5.40001 40.7893V38.2821H2.70001V40.7893H5.40001ZM5.40001 35.775V33.2679H2.70001V35.775H5.40001ZM5.40001 30.7607V28.2536H2.70001V30.7607H5.40001ZM5.40001 25.7464V23.2393H2.70001V25.7464H5.40001ZM5.40001 20.7321V18.225H2.70001V20.7321H5.40001ZM5.40001 15.7179V13.2107H2.70001V15.7179H5.40001ZM2.70001 10.7036H4.55204C4.39685 10.7658 4.22743 10.8 4.05001 10.8H5.32501V10.7036H5.40001V9.45C5.40001 9.60585 5.3736 9.75554 5.32501 9.89482V8.1H4.05001C3.30443 8.1 2.70001 8.70441 2.70001 9.45V10.7036ZM7.87501 10.8H10.425V8.1H7.87501V10.8ZM12.975 10.8H15.525V8.1H12.975V10.8ZM18.075 10.8H20.625V8.1H18.075V10.8ZM23.175 10.8H25.725V8.1H23.175V10.8ZM28.275 10.8H30.825V8.1H28.275V10.8ZM33.375 10.8H35.925V8.1H33.375V10.8ZM38.475 10.8H41.025V8.1H38.475V10.8ZM43.575 10.8H46.125V8.1H43.575V10.8ZM48.675 8.1V9.89484C48.6264 9.75555 48.6 9.60586 48.6 9.45V10.7036H48.675V10.8H49.95C49.7726 10.8 49.6032 10.7658 49.448 10.7036H51.3V9.45C51.3 8.70441 50.6956 8.1 49.95 8.1H48.675ZM48.6 13.2107V15.7179H51.3V13.2107H48.6ZM48.6 18.225V20.7321H51.3V18.225H48.6ZM48.6 23.2393V25.7464H51.3V23.2393H48.6ZM48.6 28.2536V30.7607H51.3V28.2536H48.6ZM48.6 33.2679V35.775H51.3V33.2679H48.6ZM48.6 38.2821V40.7893H51.3V38.2821H48.6ZM51.3 43.2964H49.448C49.6032 43.2342 49.7726 43.2 49.95 43.2H48.675V43.2964H48.6V44.55C48.6 44.3941 48.6264 44.2445 48.675 44.1052V45.9H49.95C50.6956 45.9 51.3 45.2956 51.3 44.55V43.2964ZM46.125 43.2H43.575V45.9H46.125V43.2ZM41.025 43.2H38.475V45.9H41.025V43.2ZM35.925 43.2H33.375V45.9H35.925V43.2ZM30.825 43.2H28.275V45.9H30.825V43.2ZM25.725 43.2H23.175V45.9H25.725V43.2ZM20.625 43.2H18.075V45.9H20.625V43.2ZM15.525 43.2H12.975V45.9H15.525V43.2ZM10.425 43.2H7.87501V45.9H10.425V43.2ZM16.2 17.55C18.4368 17.55 20.25 19.3632 20.25 21.6V22.95C20.25 25.1868 18.4368 27 16.2 27H14.85C12.6133 27 10.8 25.1868 10.8 22.95V21.6C10.8 19.3632 12.6133 17.55 14.85 17.55H16.2ZM16.2 20.25H14.85C14.1044 20.25 13.5 20.8544 13.5 21.6V22.95C13.5 23.6956 14.1044 24.3 14.85 24.3H16.2C16.9456 24.3 17.55 23.6956 17.55 22.95V21.6C17.55 20.8544 16.9456 20.25 16.2 20.25ZM43.2 21.6C43.2 19.3632 41.3868 17.55 39.15 17.55H29.7C27.4633 17.55 25.65 19.3632 25.65 21.6V22.95C25.65 25.1868 27.4633 27 29.7 27H39.15C41.3868 27 43.2 25.1868 43.2 22.95V21.6ZM29.7 20.25H39.15C39.8956 20.25 40.5 20.8544 40.5 21.6V22.95C40.5 23.6956 39.8956 24.3 39.15 24.3H29.7C28.9544 24.3 28.35 23.6956 28.35 22.95V21.6C28.35 20.8544 28.9544 20.25 29.7 20.25ZM43.2 37.8C43.2 35.5632 41.3868 33.75 39.15 33.75H29.7C27.4633 33.75 25.65 35.5632 25.65 37.8V39.15H28.35V37.8C28.35 37.0544 28.9544 36.45 29.7 36.45H39.15C39.8956 36.45 40.5 37.0544 40.5 37.8V39.15H43.2V37.8ZM16.2 33.75C18.4368 33.75 20.25 35.5632 20.25 37.8V39.15H17.55V37.8C17.55 37.0544 16.9456 36.45 16.2 36.45H14.85C14.1044 36.45 13.5 37.0544 13.5 37.8V39.15H10.8V37.8C10.8 35.5632 12.6133 33.75 14.85 33.75H16.2Z\" fill=\"currentColor\"/>\r\n</svg>\r\n","<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"54\" height=\"54\" fill=\"currentcolor\"><path d=\"M20.58 33.77h-3l-1.18-3.08H11l-1.1 3.08H7l5.27-13.54h2.89zm-5-5.36-1.86-5-1.83 5zM22 20.23h5.41a15.47 15.47 0 0 1 2.4.14 3.42 3.42 0 0 1 1.41.55 3.47 3.47 0 0 1 1 1.14 3 3 0 0 1 .42 1.58 3.26 3.26 0 0 1-1.91 2.94 3.63 3.63 0 0 1 1.91 1.22 3.28 3.28 0 0 1 .66 2 4 4 0 0 1-.43 1.8 3.63 3.63 0 0 1-1.09 1.4 3.89 3.89 0 0 1-1.83.65q-.69.07-3.3.09H22zm2.73 2.25v3.13h3.8a1.79 1.79 0 0 0 1.1-.49 1.41 1.41 0 0 0 .41-1 1.49 1.49 0 0 0-.35-1 1.54 1.54 0 0 0-1-.48c-.27 0-1.05-.05-2.34-.05zm0 5.39v3.62h2.57a11.52 11.52 0 0 0 1.88-.09 1.65 1.65 0 0 0 1-.54 1.6 1.6 0 0 0 .38-1.14 1.75 1.75 0 0 0-.29-1 1.69 1.69 0 0 0-.86-.62 9.28 9.28 0 0 0-2.41-.23zm19.62.92 2.65.84a5.94 5.94 0 0 1-2 3.29A5.74 5.74 0 0 1 41.38 34a5.87 5.87 0 0 1-4.44-1.84 7.09 7.09 0 0 1-1.73-5A7.43 7.43 0 0 1 37 21.87 6 6 0 0 1 41.54 20a5.64 5.64 0 0 1 4 1.47A5.33 5.33 0 0 1 47 24l-2.7.65a2.8 2.8 0 0 0-2.86-2.27A3.09 3.09 0 0 0 39 23.42a5.31 5.31 0 0 0-.93 3.5 5.62 5.62 0 0 0 .93 3.65 3 3 0 0 0 2.4 1.09 2.72 2.72 0 0 0 1.82-.66 4 4 0 0 0 1.13-2.21z\"/></svg>","<svg width=\"54\" height=\"54\" viewBox=\"0 0 54 54\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M47.0082 12.15C48.6329 12.15 49.95 13.5106 49.95 15.189V38.811C49.95 40.4894 48.6329 41.85 47.0082 41.85H6.99194C5.36718 41.85 4.05005 40.4894 4.05005 38.811V15.189C4.05005 13.5106 5.36718 12.15 6.99194 12.15H47.0082ZM47.0082 14.176H6.99194C6.45035 14.176 6.01131 14.6295 6.01131 15.189V16.2H6.00755V18.9H6.01131V38.811C6.01131 39.3705 6.45035 39.824 6.99194 39.824H47.0082C47.5498 39.824 47.9888 39.3705 47.9888 38.811V18.9H47.9925V16.2H47.9888V15.189C47.9888 14.6295 47.5498 14.176 47.0082 14.176ZM14.9344 26.055V22.275H17.1282V31.725H14.9344V27.945H11.6438V31.725H9.45005V22.275H11.6438V26.055H14.9344ZM19.3219 24.165H21.5157V31.725H23.7094V24.165H25.9032V22.275H19.3219V24.165ZM33.5813 22.275H35.775V31.725H33.5813V25.11L31.936 28.89L30.2907 25.11V31.725H28.0969V22.275H30.2907L31.936 26.055L33.5813 22.275ZM37.9688 22.275H40.1625V29.835H44.55V31.725H37.9688V22.275Z\" fill=\"currentColor\"/>\r\n</svg>\r\n","<svg width=\"54\" height=\"54\" viewBox=\"0 0 54 54\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M12.78 16.2V22.95C12.78 24.5689 12.1447 26.0086 11.1621 27C12.1447 27.9914 12.78 29.4311 12.78 31.05V37.8H16.29V40.5H12.78C11.4912 40.5 10.44 39.2871 10.44 37.8V31.05C10.44 29.5629 9.38883 28.35 8.10001 28.35V25.65C9.38883 25.65 10.44 24.4371 10.44 22.95V16.2C10.44 14.7129 11.4912 13.5 12.78 13.5H16.29V16.2H12.78ZM43.56 16.2V22.95C43.56 24.4371 44.6112 25.65 45.9 25.65V28.35C44.6112 28.35 43.56 29.5629 43.56 31.05V37.8C43.56 39.2871 42.5088 40.5 41.22 40.5H37.71V37.8H41.22V31.05C41.22 29.4311 41.8553 27.9914 42.8379 27C41.8553 26.0086 41.22 24.5689 41.22 22.95V16.2H37.71V13.5H41.22C42.5088 13.5 43.56 14.7129 43.56 16.2ZM21.8005 34.5313C22.2674 34.1521 22.5869 33.5662 22.7589 32.7734L24.5467 24.4321H26.1317L26.5187 22.6053H24.9337L25.3392 20.7268H26.9242L27.3113 18.9H25.6894C24.8416 18.9 24.1842 19.0896 23.7173 19.4687C23.2627 19.8479 22.9494 20.4338 22.7774 21.2266L22.4825 22.6053H21.3398L20.9527 24.4321H22.0954L20.1971 33.2732H18.612L18.225 35.1H19.8469C20.6947 35.1 21.3459 34.9104 21.8005 34.5313ZM29.0479 26.8449L25.2512 31.6532H27.8499L29.9694 28.6372H30.1906L31.0752 31.6532H33.6739L31.9967 27.293L35.775 22.6053H33.1763L31.0568 25.5523H30.8356L29.951 22.6053H27.3523L29.0479 26.8449Z\" fill=\"currentcolor\"/>\r\n</svg>\r\n","<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"54\" height=\"54\" fill=\"currentcolor\"><path fill-rule=\"evenodd\" d=\"M45 16a3 3 0 0 1 3 3v16a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V19a3 3 0 0 1 3-3h36zm0 2H9a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h36a1 1 0 0 0 1-1V19a1 1 0 0 0-1-1zm-32 4v10h-2V22h2z\"/></svg>","<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"54\" height=\"54\" fill=\"currentcolor\"><path fill-rule=\"evenodd\" d=\"M45 13a3 3 0 0 1 3 3v22a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V16a3 3 0 0 1 3-3h36zm0 2H9a1 1 0 0 0-1 1v22a1 1 0 0 0 1 1h36a1 1 0 0 0 1-1V16a1 1 0 0 0-1-1zm-1.136 15.5.849.849-6.364 6.364-.849-.849 6.364-6.364zm.264 3.5.849.849-2.828 2.828-.849-.849L44.128 34zM13 19v10h-2V19h2z\"/></svg>","<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"54\" height=\"54\" fill=\"none\"><path fill=\"currentcolor\" d=\"M34.467 37.3 41 31l-6.533-6.3-1.32 1.273L38.36 31l-5.213 5.027 1.32 1.273ZM19.533 24.7 13 31l6.533 6.3 1.32-1.273L15.64 31l5.214-5.027-1.32-1.273ZM23.66 39.532l1.805.468 4.875-17.532L28.535 22 23.66 39.532Z\"/><path fill=\"currentcolor\" fill-rule=\"evenodd\" d=\"M46 9a3 3 0 0 1 3 3v30a3 3 0 0 1-3 3H8a3 3 0 0 1-3-3V12a3 3 0 0 1 3-3h38Zm0 2H8a1 1 0 0 0-1 1v4h40v-4a1 1 0 0 0-1-1ZM7 42V18h40v24a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1Z\" clip-rule=\"evenodd\"/></svg>","<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"54\" height=\"54\" fill=\"currentcolor\"><path fill-rule=\"evenodd\" d=\"M34.636 21.91A3.818 3.818 0 1 1 27 21.908a3.818 3.818 0 0 1 7.636 0Zm-2 0A1.818 1.818 0 1 1 29 21.908a1.818 1.818 0 0 1 3.636 0Z\" clip-rule=\"evenodd\"/><path fill-rule=\"evenodd\" d=\"M15 13a2 2 0 0 0-2 2v24a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V15a2 2 0 0 0-2-2H15Zm24 2H15v12.45l4.71-4.709a1.91 1.91 0 0 1 2.702 0l6.695 6.695 2.656-1.77a1.91 1.91 0 0 1 2.411.239L39 32.73V15ZM15 39v-8.754c.06-.038.116-.083.168-.135l5.893-5.893 6.684 6.685a1.911 1.911 0 0 0 2.41.238l2.657-1.77 6.02 6.02c.052.051.108.097.168.135V39H15Z\" clip-rule=\"evenodd\"/></svg>","<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 54 54\"><path fill=\"currentcolor\" fill-rule=\"evenodd\" d=\"M42.545479 12.272741C43.901087 12.272741 45 13.371687 45 14.727295v24.545443c0 1.355609-1.098913 2.454521-2.454521 2.454521H11.454554C10.098946 41.727259 9 40.628347 9 39.272738V14.727295c0-1.355608 1.098946-2.454554 2.454554-2.454554zM27.818242 40.090875h14.727237c.451869 0 .818137-.366267.818137-.818137v-4.909042H27.818242Zm-1.636385-5.727179v5.727179H11.454554c-.451869 0-.818192-.366267-.818192-.818137v-4.909042zm1.636385-1.636385h15.545374v-5.727289H27.818242Zm-1.636385-5.727289v5.727289H10.636362v-5.727289zm1.636385-1.636384h15.545374v-5.72729H27.818242Zm-1.636385-5.72729v5.72729H10.636362v-5.72729z\" clip-rule=\"evenodd\"/></svg>\r\n","import ButtonIcon from './Button.svg';\r\nimport CheckboxIcon from './Checkbox.svg';\r\nimport ChecklistIcon from './Checklist.svg';\r\nimport DatetimeIcon from './Datetime.svg';\r\nimport TaglistIcon from './Taglist.svg';\r\nimport FormIcon from './Form.svg';\r\nimport ColumnsIcon from './Group.svg';\r\nimport NumberIcon from './Number.svg';\r\nimport RadioIcon from './Radio.svg';\r\nimport SelectIcon from './Select.svg';\r\nimport SeparatorIcon from './Separator.svg';\r\nimport SpacerIcon from './Spacer.svg';\r\nimport DynamicListIcon from './DynamicList.svg';\r\nimport TextIcon from './Text.svg';\r\nimport HTMLIcon from './HTML.svg';\r\nimport ExpressionFieldIcon from './ExpressionField.svg';\r\nimport TextfieldIcon from './Textfield.svg';\r\nimport TextareaIcon from './Textarea.svg';\r\nimport IFrameIcon from './IFrame.svg';\r\nimport ImageIcon from './Image.svg';\r\nimport GroupIcon from './Group.svg';\r\nimport TableIcon from './Table.svg';\r\n\r\nexport const iconsByType = (type) => {\r\n  return {\r\n    button: ButtonIcon,\r\n    checkbox: CheckboxIcon,\r\n    checklist: ChecklistIcon,\r\n    columns: ColumnsIcon,\r\n    datetime: DatetimeIcon,\r\n    group: GroupIcon,\r\n    iframe: IFrameIcon,\r\n    image: ImageIcon,\r\n    number: NumberIcon,\r\n    expression: ExpressionFieldIcon,\r\n    radio: RadioIcon,\r\n    select: SelectIcon,\r\n    separator: SeparatorIcon,\r\n    spacer: SpacerIcon,\r\n    dynamiclist: DynamicListIcon,\r\n    taglist: TaglistIcon,\r\n    text: TextIcon,\r\n    html: HTMLIcon,\r\n    textfield: TextfieldIcon,\r\n    textarea: TextareaIcon,\r\n    table: TableIcon,\r\n    default: FormIcon\r\n  }[type];\r\n};\r\n","import { useContext, useMemo } from 'preact/hooks';\r\n\r\nimport { FormContext } from '../../context';\r\n\r\nimport { iconsByType } from '../icons';\r\n\r\nimport { useSingleLineTemplateEvaluation } from '../../hooks';\r\nimport { sanitizeImageSource } from '../util/sanitizerUtil';\r\n\r\nimport {\r\n  formFieldClasses,\r\n  prefixId\r\n} from '../Util';\r\n\r\nconst type = 'image';\r\n\r\n\r\nexport function Image(props) {\r\n  const {\r\n    field\r\n  } = props;\r\n\r\n  const {\r\n    alt,\r\n    id,\r\n    source\r\n  } = field;\r\n\r\n  const Icon = iconsByType(field.type);\r\n\r\n  const evaluatedImageSource = useSingleLineTemplateEvaluation(source, { debug: true });\r\n\r\n  const safeSource = useMemo(() => sanitizeImageSource(evaluatedImageSource), [ evaluatedImageSource ]);\r\n\r\n  const altText = useSingleLineTemplateEvaluation(alt, { debug: true });\r\n\r\n  const { formId } = useContext(FormContext);\r\n\r\n  return <div class={ formFieldClasses(type) }>\r\n    {\r\n      safeSource && <div class=\"fjs-image-container\">\r\n        <img\r\n          alt={ altText }\r\n          src={ safeSource }\r\n          class=\"fjs-image\"\r\n          id={ prefixId(id, formId) } />\r\n      </div>\r\n    }\r\n    {\r\n      !safeSource && <div class=\"fjs-image-placeholder\">\r\n        <span class=\"fjs-image-placeholder-inner\">\r\n          <Icon alt=\"This is an image placeholder\" width=\"32\" height=\"32\" viewBox=\"0 0 56 56\" />\r\n        </span>\r\n      </div>\r\n    }\r\n  </div>;\r\n}\r\n\r\nImage.config = {\r\n  type,\r\n  keyed: false,\r\n  label: 'Obrázek',\r\n  group: 'presentation',\r\n  create: (options = {}) => ({\r\n    ...options\r\n  })\r\n};\r\n","import { InputAdorner } from './InputAdorner';\r\n\r\nimport { useSingleLineTemplateEvaluation } from '../../../hooks';\r\n\r\nexport function TemplatedInputAdorner(props) {\r\n\r\n  const {\r\n    pre,\r\n    post\r\n  } = props;\r\n\r\n  const evaluatedPre = useSingleLineTemplateEvaluation(pre, { debug: true });\r\n  const evaluatedPost = useSingleLineTemplateEvaluation(post, { debug: true });\r\n\r\n  return <InputAdorner { ...props } pre={ evaluatedPre } post={ evaluatedPost } />;\r\n\r\n}","<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"8\" height=\"8\"><path fill=\"currentColor\" fill-rule=\"evenodd\" stroke=\"currentColor\" stroke-width=\".5\" d=\"M7.75 1.336 4 6.125.258 1.335 0 1.54l4 5.125L8 1.54Zm0 0\" clip-rule=\"evenodd\"/></svg>","<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"8\" height=\"8\"><path fill=\"currentColor\" fill-rule=\"evenodd\" stroke=\"currentColor\" stroke-width=\".5\" d=\"M7.75 6.664 4 1.875.258 6.665 0 6.46l4-5.125L8 6.46Zm0 0\" clip-rule=\"evenodd\"/></svg>","import Big from 'big.js';\r\n\r\nexport function countDecimals(number) {\r\n  const num = Big(number);\r\n  if (num.toString() === num.toFixed(0)) return 0;\r\n  return num.toFixed().split('.')[1].length || 0;\r\n}\r\n\r\nexport function isValidNumber(value) {\r\n  return (typeof value === 'number' || typeof value === 'string') && value !== '' && !isNaN(Number(value));\r\n}\r\n\r\nexport function willKeyProduceValidNumber(key, previousValue, caretIndex, selectionWidth, decimalDigits) {\r\n\r\n  if (previousValue === 'NaN') {\r\n    return false;\r\n  }\r\n\r\n  // Dot and comma are both treated as dot\r\n  previousValue = previousValue.replace(',', '.');\r\n  const isFirstDot = !previousValue.includes('.') && (key === '.' || key === ',');\r\n  const isFirstMinus = !previousValue.includes('-') && key === '-' && caretIndex === 0;\r\n\r\n  const keypressIsNumeric = /^[0-9]$/i.test(key);\r\n  const dotIndex = previousValue === undefined ? -1 : previousValue.indexOf('.');\r\n\r\n  // If the caret is positioned after a dot, and the current decimal digits count is equal or greater to the maximum, disallow the key press\r\n  const overflowsDecimalSpace = typeof(decimalDigits) === 'number'\r\n    && selectionWidth === 0\r\n    && dotIndex !== -1\r\n    && previousValue.includes('.')\r\n    && previousValue.split('.')[1].length >= decimalDigits\r\n    && caretIndex > dotIndex;\r\n\r\n  const keypressIsAllowedChar = keypressIsNumeric || ((decimalDigits !== 0) && isFirstDot) || isFirstMinus;\r\n\r\n  return keypressIsAllowedChar && !overflowsDecimalSpace;\r\n\r\n}\r\n\r\nexport function isNullEquivalentValue(value) {\r\n  return value === undefined || value === null || value === '';\r\n}\r\n","import Big from 'big.js';\r\nimport classNames from 'classnames';\r\nimport { useCallback, useMemo, useRef, useState } from 'preact/hooks';\r\nimport { useFlushDebounce, usePrevious } from '../../hooks';\r\n\r\nimport { Description } from '../Description';\r\nimport { Errors } from '../Errors';\r\nimport { Label } from '../Label';\r\nimport { TemplatedInputAdorner } from './parts/TemplatedInputAdorner';\r\n\r\nimport AngelDownIcon from './icons/AngelDown.svg';\r\nimport AngelUpIcon from './icons/AngelUp.svg';\r\n\r\nimport {\r\n  formFieldClasses\r\n} from '../Util';\r\n\r\nimport {\r\n  isNullEquivalentValue,\r\n  isValidNumber,\r\n  willKeyProduceValidNumber\r\n} from '../util/numberFieldUtil';\r\n\r\nconst type = 'number';\r\n\r\nexport function Numberfield(props) {\r\n  const {\r\n    disabled,\r\n    errors = [],\r\n    domId,\r\n    onBlur,\r\n    onFocus,\r\n    field,\r\n    value,\r\n    readonly\r\n  } = props;\r\n\r\n  const {\r\n    description,\r\n    label,\r\n    appearance = {},\r\n    validate = {},\r\n    decimalDigits,\r\n    increment: incrementValue\r\n  } = field;\r\n\r\n  const {\r\n    prefixAdorner,\r\n    suffixAdorner\r\n  } = appearance;\r\n\r\n  const { required } = validate;\r\n\r\n  const inputRef = useRef();\r\n\r\n  const [ cachedValue, setCachedValue ] = useState(value);\r\n  const [ displayValue, setDisplayValue ] = useState(value);\r\n\r\n  const sanitize = useCallback((value) => Numberfield.config.sanitizeValue({ value, formField: field }), [ field ]);\r\n\r\n  const [ debouncedOnChange, flushOnChange ] = useFlushDebounce(props.onChange);\r\n\r\n  const previousCachedValue = usePrevious(value);\r\n\r\n  if (previousCachedValue !== cachedValue) {\r\n    debouncedOnChange({ field, value: cachedValue });\r\n  }\r\n\r\n  const onInputBlur = () => {\r\n    flushOnChange && flushOnChange();\r\n    onBlur && onBlur();\r\n  };\r\n\r\n  const onInputFocus = () => {\r\n    onFocus && onFocus();\r\n  };\r\n\r\n  // all value changes must go through this function\r\n  const setValue = useCallback((stringValue) => {\r\n\r\n    if (isNullEquivalentValue(stringValue)) {\r\n      setDisplayValue('');\r\n      setCachedValue(null);\r\n      return;\r\n    }\r\n\r\n    // converts automatically for countries where the comma is used as a decimal separator\r\n    stringValue = stringValue.replaceAll(',', '.');\r\n\r\n    if (stringValue === '-') {\r\n      setDisplayValue('-');\r\n      return;\r\n    }\r\n\r\n    // provides feedback for invalid numbers entered via pasting as opposed to just ignoring the paste\r\n    if (isNaN(Number(stringValue))) {\r\n      setDisplayValue('NaN');\r\n      setCachedValue(null);\r\n      return;\r\n    }\r\n\r\n    setDisplayValue(stringValue);\r\n    setCachedValue(sanitize(stringValue));\r\n\r\n  }, [ sanitize ]);\r\n\r\n  // when external changes occur independently of the input, we update the display and cache values of the component\r\n  const previousValue = usePrevious(value);\r\n  const outerValueChanged = previousValue != value;\r\n  const outerValueEqualsCache = sanitize(value) === sanitize(cachedValue);\r\n\r\n  if (outerValueChanged && !outerValueEqualsCache) {\r\n    setValue(value && value.toString() || '');\r\n  }\r\n\r\n  // caches the value an increment/decrement operation will be based on\r\n  const incrementAmount = useMemo(() => {\r\n\r\n    if (incrementValue) return Big(incrementValue);\r\n    if (decimalDigits) return Big(`1e-${decimalDigits}`);\r\n    return Big('1');\r\n\r\n  }, [ decimalDigits, incrementValue ]);\r\n\r\n  const increment = () => {\r\n    if (readonly) {\r\n      return;\r\n    }\r\n\r\n    const base = isValidNumber(cachedValue) ? Big(cachedValue) : Big(0);\r\n    const stepFlooredValue = base.minus(base.mod(incrementAmount));\r\n\r\n    // note: toFixed() behaves differently in big.js\r\n    setValue(stepFlooredValue.plus(incrementAmount).toFixed());\r\n  };\r\n\r\n  const decrement = () => {\r\n    if (readonly) {\r\n      return;\r\n    }\r\n\r\n    const base = isValidNumber(cachedValue) ? Big(cachedValue) : Big(0);\r\n    const offset = base.mod(incrementAmount);\r\n\r\n    if (offset.cmp(0) === 0) {\r\n\r\n      // if we're already on a valid step, decrement\r\n      setValue(base.minus(incrementAmount).toFixed());\r\n    }\r\n    else {\r\n\r\n      // otherwise floor to the step\r\n      const stepFlooredValue = base.minus(base.mod(incrementAmount));\r\n      setValue(stepFlooredValue.toFixed());\r\n    }\r\n  };\r\n\r\n  const onKeyDown = (e) => {\r\n\r\n    // delete the NaN state all at once on backspace or delete\r\n    if (displayValue === 'NaN' && (e.code === 'Backspace' || e.code === 'Delete')) {\r\n      setValue('');\r\n      e.preventDefault();\r\n      return;\r\n    }\r\n\r\n    if (e.code === 'ArrowUp') {\r\n      increment();\r\n      e.preventDefault();\r\n      return;\r\n    }\r\n\r\n    if (e.code === 'ArrowDown') {\r\n      decrement();\r\n      e.preventDefault();\r\n      return;\r\n    }\r\n\r\n  };\r\n\r\n  // intercept key presses which would lead to an invalid number\r\n  const onKeyPress = (e) => {\r\n    const caretIndex = inputRef.current.selectionStart;\r\n    const selectionWidth = inputRef.current.selectionStart - inputRef.current.selectionEnd;\r\n    const previousValue = inputRef.current.value;\r\n\r\n    if (!willKeyProduceValidNumber(e.key, previousValue, caretIndex, selectionWidth, decimalDigits)) {\r\n      e.preventDefault();\r\n    }\r\n  };\r\n\r\n  const descriptionId = `${domId}-description`;\r\n  const errorMessageId = `${domId}-error-message`;\r\n\r\n  return <div class={ formFieldClasses(type, { errors, disabled, readonly }) }>\r\n    <Label\r\n      htmlFor={ domId }\r\n      label={ label }\r\n      required={ required } />\r\n    <TemplatedInputAdorner disabled={ disabled } readonly={ readonly } pre={ prefixAdorner } post={ suffixAdorner }>\r\n      <div class={ classNames('fjs-vertical-group', { 'fjs-disabled': disabled, 'fjs-readonly': readonly }, { 'hasErrors': errors.length }) }>\r\n        <input\r\n          ref={ inputRef }\r\n          class=\"fjs-input\"\r\n          disabled={ disabled }\r\n          readOnly={ readonly }\r\n          id={ domId }\r\n          onKeyDown={ onKeyDown }\r\n          onKeyPress={ onKeyPress }\r\n          onBlur={ onInputBlur }\r\n          onFocus={ onInputFocus }\r\n\r\n          // @ts-ignore\r\n          onInput={ (e) => setValue(e.target.value, true) }\r\n          onPaste={ (e) => displayValue === 'NaN' && e.preventDefault() }\r\n          type=\"text\"\r\n          autoComplete=\"off\"\r\n          step={ incrementAmount }\r\n          value={ displayValue }\r\n          aria-describedby={ [ descriptionId, errorMessageId ].join(' ') }\r\n          required={ required }\r\n          aria-invalid={ errors.length > 0 } />\r\n        <div class={ classNames('fjs-number-arrow-container', { 'fjs-disabled': disabled, 'fjs-readonly': readonly }) }>\r\n          { /* we're disabling tab navigation on both buttons to imitate the native browser behavior of input[type='number'] increment arrows */ }\r\n          <button\r\n            type=\"button\"\r\n            class=\"fjs-number-arrow-up\"\r\n            aria-label=\"Increment\"\r\n            onClick={ () => increment() }\r\n            tabIndex={ -1 }><AngelUpIcon /></button>\r\n          <div class=\"fjs-number-arrow-separator\" />\r\n          <button\r\n            type=\"button\"\r\n            class=\"fjs-number-arrow-down\"\r\n            aria-label=\"Decrement\"\r\n            onClick={ () => decrement() }\r\n            tabIndex={ -1 }><AngelDownIcon /></button>\r\n        </div>\r\n      </div>\r\n    </TemplatedInputAdorner>\r\n    <Description id={ descriptionId } description={ description } />\r\n    <Errors id={ errorMessageId } errors={ errors } />\r\n  </div>;\r\n}\r\n\r\nNumberfield.config = {\r\n  type,\r\n  keyed: true,\r\n  label: 'Číslo',\r\n  group: 'basic-input',\r\n  emptyValue: null,\r\n  sanitizeValue: ({ value, formField }) => {\r\n\r\n    // invalid value types are sanitized to null\r\n    if (isNullEquivalentValue(value) || !isValidNumber(value)) return null;\r\n\r\n    // otherwise, we return a string or a number depending on the form field configuration\r\n    return formField.serializeToString ? value.toString() : Number(value);\r\n  },\r\n  create: (options = {}) => ({\r\n    ...options\r\n  })\r\n};","import { useRef } from 'preact/hooks';\r\nimport isEqual from 'lodash/isEqual';\r\nimport { useOptionsAsync, LOAD_STATES } from '../../hooks/useOptionsAsync';\r\nimport { useCleanupSingleSelectValue } from '../../hooks/useCleanupSingleSelectValue';\r\nimport classNames from 'classnames';\r\n\r\nimport { Description } from '../Description';\r\nimport { Errors } from '../Errors';\r\nimport { Label } from '../Label';\r\n\r\nimport { sanitizeSingleSelectValue } from '../util/sanitizerUtil';\r\n\r\nimport { createEmptyOptions } from '../util/optionsUtil';\r\n\r\nimport {\r\n  formFieldClasses\r\n} from '../Util';\r\n\r\nconst type = 'radio';\r\n\r\n\r\nexport function Radio(props) {\r\n  const {\r\n    disabled,\r\n    errors = [],\r\n    domId,\r\n    onBlur,\r\n    onFocus,\r\n    field,\r\n    readonly,\r\n    value\r\n  } = props;\r\n\r\n  const {\r\n    description,\r\n    label,\r\n    validate = {}\r\n  } = field;\r\n\r\n  const outerDivRef = useRef();\r\n\r\n  const { required } = validate;\r\n\r\n  const onChange = (v) => {\r\n    props.onChange({\r\n      field,\r\n      value: v\r\n    });\r\n  };\r\n\r\n  const onRadioBlur = (e) => {\r\n    if (outerDivRef.current.contains(e.relatedTarget)) {\r\n      return;\r\n    }\r\n\r\n    onBlur && onBlur();\r\n  };\r\n\r\n  const onRadioFocus = (e) => {\r\n    if (outerDivRef.current.contains(e.relatedTarget)) {\r\n      return;\r\n    }\r\n\r\n    onFocus && onFocus();\r\n  };\r\n\r\n  const {\r\n    loadState,\r\n    options\r\n  } = useOptionsAsync(field);\r\n\r\n  useCleanupSingleSelectValue({\r\n    field,\r\n    loadState,\r\n    options,\r\n    value,\r\n    onChange: props.onChange\r\n  });\r\n\r\n  const descriptionId = `${domId}-description`;\r\n  const errorMessageId = `${domId}-error-message`;\r\n\r\n  return <div class={ formFieldClasses(type, { errors, disabled, readonly }) } ref={ outerDivRef }>\r\n    <Label\r\n      label={ label }\r\n      required={ required } />\r\n    {\r\n      loadState == LOAD_STATES.LOADED && options.map((option, index) => {\r\n\r\n        const itemDomId = `${domId}-${index}`;\r\n        const isChecked = isEqual(option.value, value);\r\n\r\n        return (\r\n          <Label\r\n            htmlFor={ itemDomId }\r\n            key={ index }\r\n            label={ option.label }\r\n            class={ classNames({ 'fjs-checked': isChecked }) }\r\n            required={ false }>\r\n            <input\r\n              checked={ isChecked }\r\n              class=\"fjs-input\"\r\n              disabled={ disabled }\r\n              readOnly={ readonly }\r\n              id={ itemDomId }\r\n              type=\"radio\"\r\n              onClick={ () => onChange(option.value) }\r\n              onBlur={ onRadioBlur }\r\n              onFocus={ onRadioFocus }\r\n              aria-describedby={ [ descriptionId, errorMessageId ].join(' ') }\r\n              required={ required }\r\n              aria-invalid={ errors.length > 0 } />\r\n          </Label>\r\n        );\r\n      })\r\n    }\r\n    <Description id={ descriptionId } description={ description } />\r\n    <Errors id={ errorMessageId } errors={ errors } />\r\n  </div>;\r\n}\r\n\r\nRadio.config = {\r\n  type,\r\n  keyed: true,\r\n  label: 'Výběr z možností',\r\n  group: 'selection',\r\n  emptyValue: null,\r\n  sanitizeValue: sanitizeSingleSelectValue,\r\n  create: createEmptyOptions\r\n};\r\n","<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"8\" height=\"8\"><path fill=\"currentColor\" fill-rule=\"evenodd\" stroke=\"currentColor\" stroke-width=\".5\" d=\"M4 3.766 7.43.336l.234.234L4.234 4l3.43 3.43-.234.234L4 4.234.57 7.664.336 7.43 3.766 4 .336.57.57.336Zm0 0\" clip-rule=\"evenodd\"/></svg>","import { useCallback, useEffect, useMemo, useRef, useState } from 'preact/hooks';\r\nimport { useOptionsAsync, LOAD_STATES } from '../../../hooks/useOptionsAsync';\r\nimport { useGetLabelCorrelation } from '../../../hooks/useGetLabelCorrelation';\r\nimport { useService, useCleanupSingleSelectValue } from '../../../hooks';\r\n\r\nimport classNames from 'classnames';\r\n\r\nimport XMarkIcon from '../icons/XMark.svg';\r\nimport AngelDownIcon from '../icons/AngelDown.svg';\r\nimport AngelUpIcon from '../icons/AngelUp.svg';\r\nimport { DropdownList } from './DropdownList';\r\n\r\nexport function SearchableSelect(props) {\r\n  const {\r\n    domId,\r\n    disabled,\r\n    errors,\r\n    onBlur,\r\n    onFocus,\r\n    field,\r\n    readonly,\r\n    value\r\n  } = props;\r\n\r\n  const [ filter, setFilter ] = useState('');\r\n  const [ isDropdownExpanded, setIsDropdownExpanded ] = useState(false);\r\n  const [ isFilterActive, setIsFilterActive ] = useState(true);\r\n  const [ isEscapeClosed, setIsEscapeClose ] = useState(false);\r\n  const searchbarRef = useRef();\r\n  const eventBus = useService('eventBus');\r\n\r\n  const {\r\n    loadState,\r\n    options\r\n  } = useOptionsAsync(field);\r\n\r\n  useCleanupSingleSelectValue({\r\n    field,\r\n    loadState,\r\n    options,\r\n    value,\r\n    onChange: props.onChange\r\n  });\r\n\r\n  const getLabelCorrelation = useGetLabelCorrelation(options);\r\n\r\n  const label = useMemo(() => value && getLabelCorrelation(value), [ value, getLabelCorrelation ]);\r\n\r\n  // whenever we change the underlying value, set the label to it\r\n  useEffect(() => { setFilter(label || ''); }, [ label ]);\r\n\r\n  const filteredOptions = useMemo(() => {\r\n\r\n    if (loadState !== LOAD_STATES.LOADED) {\r\n      return [];\r\n    }\r\n\r\n    if (!filter || !isFilterActive) {\r\n      return options;\r\n    }\r\n\r\n    return options.filter((o) => o.label && o.value && (o.label.toLowerCase().includes(filter.toLowerCase())));\r\n\r\n  }, [ filter, loadState, options, isFilterActive ]);\r\n\r\n  const setValue = useCallback((option) => {\r\n    setFilter(option && option.label || '');\r\n    props.onChange({ value: option && option.value || null, field });\r\n  }, [ field, props ]);\r\n\r\n  const displayState = useMemo(() => {\r\n    const ds = {};\r\n    ds.componentReady = !disabled && !readonly && loadState === LOAD_STATES.LOADED;\r\n    ds.displayCross = ds.componentReady && value !== null && value !== undefined;\r\n    ds.displayDropdown = !disabled && !readonly && isDropdownExpanded && !isEscapeClosed;\r\n    return ds;\r\n  }, [ disabled, isDropdownExpanded, isEscapeClosed, loadState, readonly, value ]);\r\n\r\n  const onAngelMouseDown = useCallback((e) => {\r\n    setIsEscapeClose(false);\r\n    setIsDropdownExpanded(!isDropdownExpanded);\r\n\r\n    const searchbar = searchbarRef.current;\r\n    isDropdownExpanded ? searchbar.blur() : searchbar.focus();\r\n\r\n    e.preventDefault();\r\n\r\n  }, [ isDropdownExpanded ]);\r\n\r\n  const onInputChange = ({ target }) => {\r\n    setIsEscapeClose(false);\r\n    setIsDropdownExpanded(true);\r\n    setIsFilterActive(true);\r\n    setFilter(target.value || '');\r\n    eventBus.fire('formField.search', { formField: field, value: target.value || '' });\r\n  };\r\n\r\n  const onInputKeyDown = useCallback((keyDownEvent) => {\r\n\r\n    switch (keyDownEvent.key) {\r\n    case 'ArrowUp':\r\n      keyDownEvent.preventDefault();\r\n      break;\r\n    case 'ArrowDown': {\r\n      if (!isDropdownExpanded) {\r\n        setIsDropdownExpanded(true);\r\n        setIsFilterActive(false);\r\n      }\r\n\r\n      keyDownEvent.preventDefault();\r\n      break;\r\n    }\r\n    case 'Escape':\r\n      setIsEscapeClose(true);\r\n      break;\r\n    case 'Enter':\r\n      if (isEscapeClosed) {\r\n        setIsEscapeClose(false);\r\n      }\r\n      break;\r\n    }\r\n  }, [ isDropdownExpanded, isEscapeClosed ]);\r\n\r\n  const onInputMouseDown = useCallback(() => {\r\n    setIsEscapeClose(false);\r\n    setIsDropdownExpanded(true);\r\n    setIsFilterActive(false);\r\n  }, []);\r\n\r\n  const onInputFocus = useCallback(() => {\r\n    setIsEscapeClose(false);\r\n    setIsDropdownExpanded(true);\r\n    onFocus && onFocus();\r\n  }, [ onFocus ]);\r\n\r\n  const onInputBlur = useCallback(() => {\r\n    setIsDropdownExpanded(false);\r\n    setFilter(label || '');\r\n    onBlur && onBlur();\r\n  }, [ onBlur, label ]);\r\n\r\n  return <>\r\n    <div\r\n      class={ classNames('fjs-input-group', { 'disabled': disabled, 'readonly': readonly }, { 'hasErrors': errors.length }) }>\r\n      <input\r\n        disabled={ disabled }\r\n        readOnly={ readonly }\r\n        class=\"fjs-input\"\r\n        ref={ searchbarRef }\r\n        id={ domId }\r\n        onChange={ onInputChange }\r\n        type=\"text\"\r\n        value={ filter }\r\n        placeholder={ 'Search' }\r\n        autoComplete=\"off\"\r\n        onKeyDown={ onInputKeyDown }\r\n        onMouseDown={ onInputMouseDown }\r\n        onFocus={ onInputFocus }\r\n        onBlur={ onInputBlur }\r\n        aria-describedby={ props['aria-describedby'] } />\r\n      { displayState.displayCross && <span class=\"fjs-select-cross\" onMouseDown={ (e) => { setValue(null); e.preventDefault(); } }><XMarkIcon /> </span> }\r\n      <span class=\"fjs-select-arrow\" onMouseDown={ (e) => onAngelMouseDown(e) }>{ displayState.displayDropdown ? <AngelUpIcon /> : <AngelDownIcon /> }</span>\r\n    </div>\r\n    <div class=\"fjs-select-anchor\">\r\n      { displayState.displayDropdown && <DropdownList\r\n        values={ filteredOptions }\r\n        getLabel={ (o) => o.label }\r\n        onValueSelected={ (o) => { setValue(o); setIsDropdownExpanded(false); } }\r\n        listenerElement={ searchbarRef.current } />}\r\n    </div>\r\n  </>;\r\n}\r\n","import { useCallback, useMemo, useRef, useState } from 'preact/hooks';\r\nimport classNames from 'classnames';\r\nimport { findIndex } from 'min-dash';\r\nimport { useOptionsAsync, LOAD_STATES } from '../../../hooks/useOptionsAsync';\r\nimport { useCleanupSingleSelectValue } from '../../../hooks/useCleanupSingleSelectValue';\r\nimport { useGetLabelCorrelation } from '../../../hooks/useGetLabelCorrelation';\r\n\r\nimport XMarkIcon from '../icons/XMark.svg';\r\nimport AngelDownIcon from '../icons/AngelDown.svg';\r\nimport AngelUpIcon from '../icons/AngelUp.svg';\r\nimport { DropdownList } from './DropdownList';\r\n\r\nexport function SimpleSelect(props) {\r\n  const {\r\n    domId,\r\n    disabled,\r\n    errors,\r\n    onBlur,\r\n    onFocus,\r\n    field,\r\n    readonly,\r\n    value\r\n  } = props;\r\n\r\n  const [ isDropdownExpanded, setIsDropdownExpanded ] = useState(false);\r\n  const selectRef = useRef();\r\n  const inputRef = useRef();\r\n\r\n  const {\r\n    loadState,\r\n    options\r\n  } = useOptionsAsync(field);\r\n\r\n  useCleanupSingleSelectValue({\r\n    field,\r\n    loadState,\r\n    options,\r\n    value,\r\n    onChange: props.onChange\r\n  });\r\n\r\n  const getLabelCorrelation = useGetLabelCorrelation(options);\r\n\r\n  const valueLabel = useMemo(() => value && getLabelCorrelation(value), [ value, getLabelCorrelation ]);\r\n\r\n  const setValue = useCallback((option) => {\r\n    props.onChange({ value: option && option.value || null, field });\r\n  }, [ field, props ]);\r\n\r\n  const displayState = useMemo(() => {\r\n    const ds = {};\r\n    ds.componentReady = !disabled && !readonly && loadState === LOAD_STATES.LOADED;\r\n    ds.displayCross = ds.componentReady && value !== null && value !== undefined;\r\n    ds.displayDropdown = !disabled && !readonly && isDropdownExpanded;\r\n    return ds;\r\n  }, [ disabled, isDropdownExpanded, loadState, readonly, value ]);\r\n\r\n  const onMouseDown = useCallback((e) => {\r\n\r\n    const input = inputRef.current;\r\n\r\n    if (disabled || !input) {\r\n      return;\r\n    }\r\n\r\n    setIsDropdownExpanded(!isDropdownExpanded);\r\n\r\n    if (isDropdownExpanded) {\r\n      input.blur();\r\n    } else {\r\n      input.focus();\r\n    }\r\n\r\n    e.preventDefault();\r\n  }, [ disabled, isDropdownExpanded ]);\r\n\r\n  const initialFocusIndex = useMemo(() => value && findIndex(options, (o) => o.value === value) || 0, [ options, value ]);\r\n\r\n  const onInputFocus = useCallback(() => {\r\n    if (!readonly) {\r\n      setIsDropdownExpanded(true);\r\n      onFocus && onFocus();\r\n    }\r\n  }, [ onFocus, readonly ]);\r\n\r\n  const onInputBlur = useCallback(() => {\r\n    if (!readonly) {\r\n      setIsDropdownExpanded(false);\r\n      onBlur && onBlur();\r\n    }\r\n  }, [ onBlur, readonly ]);\r\n\r\n  return <>\r\n    <div ref={ selectRef }\r\n      class={ classNames('fjs-input-group', { disabled, readonly }, { 'hasErrors': errors.length }) }\r\n      onFocus={ onInputFocus }\r\n      onBlur={ onInputBlur }\r\n      onMouseDown={ onMouseDown }>\r\n      <div class={ classNames('fjs-select-display', { 'fjs-select-placeholder' : !value }) } id={ `${domId}-display` }>{ valueLabel || 'Výběr' }</div>\r\n      { !disabled && <input\r\n        ref={ inputRef }\r\n        id={ domId }\r\n        class=\"fjs-select-hidden-input\"\r\n        value={ valueLabel }\r\n        onFocus={ onInputFocus }\r\n        onBlur={ onInputBlur }\r\n        aria-describedby={ props['aria-describedby'] } />\r\n      }\r\n      { displayState.displayCross && <span class=\"fjs-select-cross\" onMouseDown={ (e) => { setValue(null); e.stopPropagation(); } }><XMarkIcon /></span> }\r\n      <span class=\"fjs-select-arrow\">{ displayState.displayDropdown ? <AngelUpIcon /> : <AngelDownIcon /> }</span>\r\n    </div>\r\n    <div class=\"fjs-select-anchor\">\r\n      {displayState.displayDropdown && <DropdownList\r\n        values={ options }\r\n        getLabel={ (o) => o.label }\r\n        initialFocusIndex={ initialFocusIndex }\r\n        onValueSelected={ (o) => { setValue(o); setIsDropdownExpanded(false); } }\r\n        listenerElement={ selectRef.current } />}\r\n    </div>\r\n  </>;\r\n}\r\n","import { Description } from '../Description';\r\nimport { Errors } from '../Errors';\r\nimport { Label } from '../Label';\r\nimport { SearchableSelect } from './parts/SearchableSelect';\r\nimport { SimpleSelect } from './parts/SimpleSelect';\r\n\r\nimport { sanitizeSingleSelectValue } from '../util/sanitizerUtil';\r\nimport { createEmptyOptions } from '../util/optionsUtil';\r\nimport { formFieldClasses } from '../Util';\r\n\r\nconst type = 'select';\r\n\r\nexport function Select(props) {\r\n  const {\r\n    disabled,\r\n    errors = [],\r\n    domId,\r\n    onBlur,\r\n    onFocus,\r\n    field,\r\n    onChange,\r\n    readonly,\r\n    value\r\n  } = props;\r\n\r\n  const {\r\n    description,\r\n    label,\r\n    searchable = false,\r\n    validate = {}\r\n  } = field;\r\n\r\n  const { required } = validate;\r\n\r\n  const descriptionId = `${domId}-description`;\r\n  const errorMessageId = `${domId}-error-message`;\r\n\r\n  const selectProps = {\r\n    domId,\r\n    disabled,\r\n    errors,\r\n    onBlur,\r\n    onFocus,\r\n    field,\r\n    value,\r\n    onChange,\r\n    readonly,\r\n    required,\r\n    'aria-invalid': errors.length > 0,\r\n    'aria-describedby': [ descriptionId, errorMessageId ].join(' '),\r\n  };\r\n\r\n  return <div\r\n    class={ formFieldClasses(type, { errors, disabled, readonly }) }\r\n    onKeyDown={\r\n      (event) => {\r\n        if (event.key === 'Enter') {\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n        }\r\n      }\r\n    }\r\n  >\r\n    <Label\r\n      htmlFor={ domId }\r\n      label={ label }\r\n      required={ required } />\r\n    { searchable ? <SearchableSelect { ...selectProps } /> : <SimpleSelect { ...selectProps } /> }\r\n    <Description id={ descriptionId } description={ description } />\r\n    <Errors id={ errorMessageId } errors={ errors } />\r\n  </div>;\r\n}\r\n\r\nSelect.config = {\r\n  type,\r\n  keyed: true,\r\n  label: 'Rozbalovací nabídka',\r\n  group: 'selection',\r\n  emptyValue: null,\r\n  sanitizeValue: sanitizeSingleSelectValue,\r\n  create: createEmptyOptions\r\n};\r\n","import { formFieldClasses } from '../Util';\r\n\r\nconst type = 'separator';\r\n\r\nexport function Separator() {\r\n\r\n  return (\r\n    <div class={ formFieldClasses(type) }>\r\n      <hr />\r\n    </div>\r\n  );\r\n}\r\n\r\nSeparator.config = {\r\n  type,\r\n  keyed: false,\r\n  label: 'Oddělovač',\r\n  group: 'presentation',\r\n  create: (options = {}) => ({\r\n    ...options\r\n  })\r\n};\r\n","import { formFieldClasses } from '../Util';\r\n\r\nconst type = 'spacer';\r\n\r\nexport function Spacer(props) {\r\n  const { field } = props;\r\n  const { height = 60 } = field;\r\n\r\n  return (\r\n    <div class={ formFieldClasses(type) } style={ { height: height } } />\r\n  );\r\n}\r\n\r\nSpacer.config = {\r\n  type,\r\n  keyed: false,\r\n  label: 'Mezera',\r\n  group: 'presentation',\r\n  create: (options = {}) => ({\r\n    height: 60,\r\n    ...options\r\n  })\r\n};\r\n","import { useContext } from 'preact/hooks';\r\nimport { FormRenderContext } from '../../context';\r\nimport { formFieldClasses } from '../Util';\r\nimport classNames from 'classnames';\r\n\r\nimport { Label } from '../Label';\r\nimport { ChildrenRenderer } from './parts/ChildrenRenderer';\r\n\r\nexport function DynamicList(props) {\r\n\r\n  const { field, domId, readonly } = props;\r\n  const { label, type, showOutline } = field;\r\n\r\n  const {\r\n    Empty,\r\n  } = useContext(FormRenderContext);\r\n\r\n  const fullProps = { ...props, Empty };\r\n\r\n  return (\r\n    <div\r\n      className={\r\n        classNames(\r\n          formFieldClasses(type, { readonly }),\r\n          'fjs-form-field-grouplike',\r\n          {\r\n            'fjs-outlined' : showOutline\r\n          }\r\n        )\r\n      }\r\n      role=\"group\"\r\n      aria-labelledby={ domId }\r\n    >\r\n      <Label\r\n        id={ domId }\r\n        label={ label } />\r\n      <ChildrenRenderer { ...fullProps } />\r\n    </div>\r\n  );\r\n}\r\n\r\nDynamicList.config = {\r\n  type: 'dynamiclist',\r\n  pathed: true,\r\n  repeatable: true,\r\n  label: 'Dynamický seznam',\r\n  group: 'container',\r\n  create: (options = {}) => ({\r\n    components: [],\r\n    showOutline: true,\r\n    isRepeating: true,\r\n    allowAddRemove: true,\r\n    defaultRepetitions: 1,\r\n    ...options\r\n  })\r\n};\r\n","import classNames from 'classnames';\r\n\r\nimport { useCallback } from 'preact/hooks';\r\n\r\nexport function SkipLink(props) {\r\n\r\n  const {\r\n    className,\r\n    label,\r\n    onSkip\r\n  } = props;\r\n\r\n  const onKeyDown = useCallback(event => {\r\n    if (event.key === 'Enter') {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n      onSkip();\r\n    }\r\n  }, [ onSkip ]);\r\n\r\n\r\n  return (\r\n    <a\r\n      href=\"#\"\r\n      class={ classNames('fjs-skip-link', className) }\r\n      onKeyDown={ onKeyDown }\r\n    >{ label }</a>\r\n  );\r\n}","import { useMemo, useRef, useState } from 'preact/hooks';\r\n\r\nimport {\r\n  useDeepCompareMemoize,\r\n  useService,\r\n  useOptionsAsync,\r\n  useCleanupMultiSelectValue,\r\n  useGetLabelCorrelation,\r\n  LOAD_STATES\r\n} from '../../hooks';\r\n\r\nimport XMarkIcon from './icons/XMark.svg';\r\nimport { DropdownList } from './parts/DropdownList';\r\nimport { Description } from '../Description';\r\nimport { Errors } from '../Errors';\r\nimport { Label } from '../Label';\r\nimport { SkipLink } from './parts/SkipLink';\r\n\r\nimport classNames from 'classnames';\r\nimport isEqual from 'lodash/isEqual';\r\nimport { sanitizeMultiSelectValue, hasEqualValue } from '../util/sanitizerUtil';\r\nimport { createEmptyOptions } from '../util/optionsUtil';\r\nimport { formFieldClasses } from '../Util';\r\n\r\nconst type = 'taglist';\r\n\r\nexport function Taglist(props) {\r\n  const {\r\n    disabled,\r\n    errors = [],\r\n    onFocus,\r\n    domId,\r\n    onBlur,\r\n    field,\r\n    readonly,\r\n    value\r\n  } = props;\r\n\r\n  const {\r\n    description,\r\n    label,\r\n    validate = {}\r\n  } = field;\r\n\r\n  const { required } = validate;\r\n\r\n  const [ filter, setFilter ] = useState('');\r\n  const [ isDropdownExpanded, setIsDropdownExpanded ] = useState(false);\r\n  const [ isEscapeClosed, setIsEscapeClose ] = useState(false);\r\n  const focusScopeRef = useRef();\r\n  const inputRef = useRef();\r\n  const eventBus = useService('eventBus');\r\n\r\n  const {\r\n    loadState,\r\n    options\r\n  } = useOptionsAsync(field);\r\n\r\n  // ensures we render based on array content instead of reference\r\n  const values = useDeepCompareMemoize(value || []);\r\n\r\n  useCleanupMultiSelectValue({\r\n    field,\r\n    loadState,\r\n    options,\r\n    values,\r\n    onChange: props.onChange\r\n  });\r\n\r\n  const getLabelCorrelation = useGetLabelCorrelation(options);\r\n\r\n  const hasOptionsLeft = useMemo(() => options.length > values.length, [ options.length, values.length ]);\r\n\r\n  const filteredOptions = useMemo(() => {\r\n    if (loadState !== LOAD_STATES.LOADED) {\r\n      return [];\r\n    }\r\n\r\n    const isValidFilteredOption = (option) => {\r\n      const filterMatches = option.label.toLowerCase().includes(filter.toLowerCase());\r\n      return filterMatches && !hasEqualValue(option.value, values);\r\n    };\r\n\r\n    return options.filter(isValidFilteredOption);\r\n  }, [ filter, options, values, loadState ]);\r\n\r\n\r\n  const selectValue = (value) => {\r\n\r\n    setFilter('');\r\n\r\n    // Ensure values cannot be double selected due to latency\r\n    if (values.at(-1) === value) {\r\n      return;\r\n    }\r\n\r\n    props.onChange({ value: [ ...values, value ], field });\r\n  };\r\n\r\n  const deselectValue = (value) => {\r\n    const newValues = values.filter((v) => !isEqual(v, value));\r\n    props.onChange({ value: newValues, field });\r\n  };\r\n\r\n  const onInputChange = ({ target }) => {\r\n    setIsEscapeClose(false);\r\n    setFilter(target.value || '');\r\n    eventBus.fire('formField.search', { formField: field, value: target.value || '' });\r\n  };\r\n\r\n  const onInputKeyDown = (e) => {\r\n\r\n    switch (e.key) {\r\n    case 'ArrowUp':\r\n    case 'ArrowDown':\r\n\r\n      // We do not want the cursor to seek in the search field when we press up and down\r\n      e.preventDefault();\r\n      break;\r\n    case 'Backspace':\r\n      if (!filter && values.length) {\r\n        deselectValue(values[values.length - 1]);\r\n      }\r\n      break;\r\n    case 'Escape':\r\n      setIsEscapeClose(true);\r\n      break;\r\n    case 'Enter':\r\n      if (isEscapeClosed) {\r\n        setIsEscapeClose(false);\r\n      }\r\n      break;\r\n    }\r\n  };\r\n\r\n  const onElementBlur = (e) => {\r\n    if (focusScopeRef.current.contains(e.relatedTarget)) return;\r\n    onBlur && onBlur();\r\n  };\r\n\r\n  const onElementFocus = (e) => {\r\n    if (focusScopeRef.current.contains(e.relatedTarget)) return;\r\n    onFocus && onFocus();\r\n  };\r\n\r\n  const onInputBlur = (e) => {\r\n    if (!readonly) {\r\n      setIsDropdownExpanded(false);\r\n      setFilter('');\r\n    }\r\n    onElementBlur(e);\r\n  };\r\n\r\n  const onInputFocus = (e) => {\r\n    if (!readonly) {\r\n      setIsDropdownExpanded(true);\r\n    }\r\n    onElementFocus(e);\r\n  };\r\n\r\n  const onTagRemoveClick = (event, value) => {\r\n    const { target } = event;\r\n\r\n    deselectValue(value);\r\n\r\n    // restore focus if there is no next sibling to focus\r\n    const nextTag = target.closest('.fjs-taglist-tag').nextSibling;\r\n    if (!nextTag) {\r\n      inputRef.current.focus();\r\n    }\r\n  };\r\n\r\n  const onSkipToSearch = () => {\r\n    inputRef.current.focus();\r\n  };\r\n\r\n  const shouldDisplayDropdown = useMemo(() => !disabled && loadState === LOAD_STATES.LOADED && isDropdownExpanded && !isEscapeClosed, [ disabled, isDropdownExpanded, isEscapeClosed, loadState ]);\r\n\r\n  const descriptionId = `${domId}-description`;\r\n  const errorMessageId = `${domId}-error-message`;\r\n\r\n  return <div\r\n    ref={ focusScopeRef }\r\n    class={ formFieldClasses(type, { errors, disabled, readonly }) }\r\n    onKeyDown={\r\n      (event) => {\r\n        if (event.key === 'Enter') {\r\n          event.stopPropagation();\r\n          event.preventDefault();\r\n        }\r\n      }\r\n    }\r\n  >\r\n    <Label\r\n      label={ label }\r\n      required={ required }\r\n      htmlFor={ domId } />\r\n    { (!disabled && !readonly && !!values.length) && <SkipLink className=\"fjs-taglist-skip-link\" label=\"Skip to search\" onSkip={ onSkipToSearch } /> }\r\n    <div class={ classNames('fjs-taglist', { 'fjs-disabled': disabled, 'fjs-readonly': readonly }) }>\r\n      { loadState === LOAD_STATES.LOADED &&\r\n        <div class=\"fjs-taglist-tags\">\r\n          {\r\n            values.map((v) => {\r\n              return (\r\n                <div class={ classNames('fjs-taglist-tag', { 'fjs-disabled': disabled, 'fjs-readonly': readonly }) } onMouseDown={ (e) => e.preventDefault() }>\r\n                  <span class=\"fjs-taglist-tag-label\">\r\n                    { getLabelCorrelation(v) }\r\n                  </span>\r\n                  { (!disabled && !readonly) && <button\r\n                    type=\"button\"\r\n                    title=\"Remove tag\"\r\n                    class=\"fjs-taglist-tag-remove\"\r\n                    onFocus={ onElementFocus }\r\n                    onBlur={ onElementBlur }\r\n                    onClick={ (event) => onTagRemoveClick(event, v) }>\r\n\r\n                    <XMarkIcon />\r\n                  </button> }\r\n                </div>\r\n              );\r\n            })\r\n          }\r\n        </div>\r\n      }\r\n      <input\r\n        disabled={ disabled }\r\n        readOnly={ readonly }\r\n        class=\"fjs-taglist-input\"\r\n        ref={ inputRef }\r\n        id={ domId }\r\n        onChange={ onInputChange }\r\n        type=\"text\"\r\n        value={ filter }\r\n        placeholder={ (disabled || readonly) ? undefined : 'Search' }\r\n        autoComplete=\"off\"\r\n        onKeyDown={ onInputKeyDown }\r\n        onMouseDown={ () => setIsEscapeClose(false) }\r\n        onFocus={ onInputFocus }\r\n        onBlur={ onInputBlur }\r\n        aria-describedby={ [ descriptionId, errorMessageId ].join(' ') }\r\n        required={ required }\r\n        aria-invalid={ errors.length > 0 } />\r\n    </div>\r\n    <div class=\"fjs-taglist-anchor\">\r\n      { shouldDisplayDropdown && <DropdownList\r\n        values={ filteredOptions }\r\n        getLabel={ (o) => o.label }\r\n        onValueSelected={ (o) => selectValue(o.value) }\r\n        emptyListMessage={ hasOptionsLeft ? 'No results' : 'All values selected' }\r\n        listenerElement={ inputRef.current } /> }\r\n    </div>\r\n    <Description id={ descriptionId } description={ description } />\r\n    <Errors id={ errorMessageId } errors={ errors } />\r\n  </div>;\r\n}\r\n\r\nTaglist.config = {\r\n  type,\r\n  keyed: true,\r\n  label: 'Seznam štítků',\r\n  group: 'selection',\r\n  emptyValue: [],\r\n  sanitizeValue: sanitizeMultiSelectValue,\r\n  create: createEmptyOptions\r\n};\r\n","const NODE_TYPE_TEXT = 3,\r\n      NODE_TYPE_ELEMENT = 1;\r\n\r\nconst ALLOWED_NODES = [\r\n  'h1',\r\n  'h2',\r\n  'h3',\r\n  'h4',\r\n  'h5',\r\n  'h6',\r\n  'span',\r\n  'em',\r\n  'a',\r\n  'p',\r\n  'div',\r\n  'ul',\r\n  'ol',\r\n  'li',\r\n  'hr',\r\n  'blockquote',\r\n  'img',\r\n  'pre',\r\n  'code',\r\n  'br',\r\n  'strong',\r\n  'table',\r\n  'thead',\r\n  'tbody',\r\n  'tr',\r\n  'th',\r\n  'td'\r\n];\r\n\r\nconst ALLOWED_ATTRIBUTES = [\r\n  'align',\r\n  'alt',\r\n  'class',\r\n  'href',\r\n  'id',\r\n  'name',\r\n  'rel',\r\n  'target',\r\n  'src'\r\n];\r\n\r\nconst ALLOWED_URI_PATTERN = /^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i; // eslint-disable-line no-useless-escape\r\nconst ATTR_WHITESPACE_PATTERN = /[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g; // eslint-disable-line no-control-regex\r\n\r\nconst FORM_ELEMENT = document.createElement('form');\r\n\r\n/**\r\n * Sanitize a HTML string and return the cleaned, safe version.\r\n *\r\n * @param {string} html\r\n * @return {string}\r\n */\r\n\r\n// see https://github.com/developit/snarkdown/issues/70\r\nexport function sanitizeHTML(html) {\r\n\r\n  const doc = new DOMParser().parseFromString(\r\n    `<!DOCTYPE html>\\n<html><body><div>${ html }`,\r\n    'text/html'\r\n  );\r\n\r\n  doc.normalize();\r\n\r\n  const element = doc.body.firstChild;\r\n\r\n  if (element) {\r\n\r\n    sanitizeNode(/** @type Element */ (element));\r\n    return /** @type Element */ (element).innerHTML;\r\n\r\n  } else {\r\n\r\n    // handle the case that document parsing\r\n    // does not work at all, due to HTML gibberish\r\n    return '';\r\n  }\r\n}\r\n\r\n/**\r\n * Recursively sanitize a HTML node, potentially\r\n * removing it, its children or attributes.\r\n *\r\n * Inspired by https://github.com/developit/snarkdown/issues/70\r\n * and https://github.com/cure53/DOMPurify. Simplified\r\n * for our use-case.\r\n *\r\n * @param {Element} node\r\n */\r\nfunction sanitizeNode(node) {\r\n\r\n  // allow text nodes\r\n  if (node.nodeType === NODE_TYPE_TEXT) {\r\n    return;\r\n  }\r\n\r\n  // disallow all other nodes but Element\r\n  if (node.nodeType !== NODE_TYPE_ELEMENT) {\r\n    return node.remove();\r\n  }\r\n\r\n  const lcTag = node.tagName.toLowerCase();\r\n\r\n  // disallow non-whitelisted tags\r\n  if (!ALLOWED_NODES.includes(lcTag)) {\r\n    return node.remove();\r\n  }\r\n\r\n  const attributes = node.attributes;\r\n\r\n  // clean attributes\r\n  for (let i = attributes.length; i--;) {\r\n    const attribute = attributes[i];\r\n\r\n    const name = attribute.name;\r\n    const lcName = name.toLowerCase();\r\n\r\n    // normalize node value\r\n    const value = attribute.value.trim();\r\n\r\n    node.removeAttribute(name);\r\n\r\n    const valid = isValidAttribute(lcTag, lcName, value);\r\n\r\n    if (valid) {\r\n      node.setAttribute(name, value);\r\n    }\r\n\r\n  }\r\n\r\n  // force noopener on target=\"_blank\" links\r\n  if (lcTag === 'a' && node.getAttribute('target') === '_blank' && node.getAttribute('rel') !== 'noopener') {\r\n    node.setAttribute('rel', 'noopener');\r\n  }\r\n\r\n  for (let i = node.childNodes.length; i--;) {\r\n    sanitizeNode(/** @type Element */ (node.childNodes[i]));\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * Validates attributes for validity.\r\n *\r\n * @param {string} lcTag\r\n * @param {string} lcName\r\n * @param {string} value\r\n * @return {boolean}\r\n */\r\nfunction isValidAttribute(lcTag, lcName, value) {\r\n\r\n  // disallow most attributes based on whitelist\r\n  if (!ALLOWED_ATTRIBUTES.includes(lcName)) {\r\n    return false;\r\n  }\r\n\r\n  // disallow \"DOM clobbering\" / polution of document and wrapping form elements\r\n  if ((lcName === 'id' || lcName === 'name') && (value in document || value in FORM_ELEMENT)) {\r\n    return false;\r\n  }\r\n\r\n  if (lcName === 'target' && value !== '_blank') {\r\n    return false;\r\n  }\r\n\r\n  // allow valid url links only\r\n  if (lcName === 'href' && !ALLOWED_URI_PATTERN.test(value.replace(ATTR_WHITESPACE_PATTERN, ''))) {\r\n    return false;\r\n  }\r\n\r\n  return true;\r\n}","import { useCallback, useMemo } from 'preact/hooks';\r\nimport { useDangerousHTMLWrapper, useService, useTemplateEvaluation } from '../../hooks';\r\nimport { sanitizeHTML } from '../Sanitizer';\r\n\r\nimport {\r\n  formFieldClasses\r\n} from '../Util';\r\n\r\nconst type = 'text';\r\n\r\nexport function Text(props) {\r\n\r\n  const form = useService('form');\r\n  const { textLinkTarget } = form._getState().properties;\r\n\r\n  const { field, disableLinks } = props;\r\n\r\n  const { text = '', strict = false } = field;\r\n\r\n  const markdownRenderer = useService('markdownRenderer');\r\n\r\n  // feelers => pure markdown\r\n  const markdown = useTemplateEvaluation(text, { debug: true, strict });\r\n\r\n  // markdown => html\r\n  const html = useMemo(() => markdownRenderer.render(markdown), [ markdownRenderer, markdown ]);\r\n\r\n  const sanitizeAndTransformLinks = useCallback((unsafeHtml) => {\r\n\r\n    const html = sanitizeHTML(unsafeHtml);\r\n\r\n    const tempDiv = document.createElement('div');\r\n    tempDiv.innerHTML = html;\r\n\r\n    const links = tempDiv.querySelectorAll('a');\r\n\r\n    links.forEach(link => {\r\n\r\n      if (disableLinks) {\r\n        link.setAttribute('class', 'fjs-disabled-link');\r\n        link.setAttribute('tabIndex', '-1');\r\n      }\r\n\r\n      if (textLinkTarget) {\r\n        link.setAttribute('target', textLinkTarget);\r\n      }\r\n\r\n    });\r\n\r\n    return tempDiv.innerHTML;\r\n\r\n  }, [ disableLinks, textLinkTarget ]);\r\n\r\n  const dangerouslySetInnerHTML = useDangerousHTMLWrapper({\r\n    html,\r\n    transform: sanitizeAndTransformLinks,\r\n    sanitize: false,\r\n    sanitizeStyleTags: false\r\n  });\r\n\r\n  return <div class={ formFieldClasses(type) } dangerouslySetInnerHTML={ dangerouslySetInnerHTML }></div>;\r\n}\r\n\r\nText.config = {\r\n  type,\r\n  keyed: false,\r\n  label: 'Textový popis',\r\n  group: 'presentation',\r\n  create: (options = {}) => ({\r\n    text: '# Text',\r\n    ...options\r\n  })\r\n};\r\n","import { useCallback } from 'preact/hooks';\r\nimport { useService, useTemplateEvaluation, useDangerousHTMLWrapper } from '../../hooks';\r\nimport { escapeHTML } from '../util/sanitizerUtil';\r\nimport { wrapCSSStyles } from '../util/domUtil';\r\n\r\nimport {\r\n  formFieldClasses\r\n} from '../Util';\r\nimport classNames from 'classnames';\r\n\r\nconst type = 'html';\r\n\r\nexport function Html(props) {\r\n\r\n  const form = useService('form');\r\n  const { textLinkTarget } = form._getState().properties;\r\n\r\n  const { field, disableLinks, domId } = props;\r\n\r\n  const { content = '', strict = false } = field;\r\n\r\n  const styleScope = `${domId}-style-scope`;\r\n\r\n  // we escape HTML within the template evaluation to prevent clickjacking attacks\r\n  const html = useTemplateEvaluation(content, { debug: true, strict, sanitizer: escapeHTML });\r\n\r\n  const transform = useCallback((html) => {\r\n\r\n    const tempDiv = document.createElement('div');\r\n    tempDiv.innerHTML = html;\r\n\r\n    // (1) apply modifications to links\r\n\r\n    const links = tempDiv.querySelectorAll('a');\r\n\r\n    links.forEach(link => {\r\n\r\n      if (disableLinks) {\r\n        link.setAttribute('class', 'fjs-disabled-link');\r\n        link.setAttribute('tabIndex', '-1');\r\n      }\r\n\r\n      if (textLinkTarget) {\r\n        link.setAttribute('target', textLinkTarget);\r\n      }\r\n\r\n    });\r\n\r\n    // (2) scope styles to the root div\r\n    wrapCSSStyles(tempDiv, `.${styleScope}`);\r\n\r\n    return tempDiv.innerHTML;\r\n\r\n  }, [ disableLinks, styleScope, textLinkTarget ]);\r\n\r\n  const dangerouslySetInnerHTML = useDangerousHTMLWrapper({\r\n    html,\r\n    transform,\r\n    sanitize: true,\r\n    sanitizeStyleTags: false\r\n  });\r\n\r\n  return <div class={ classNames(formFieldClasses(type), styleScope) } dangerouslySetInnerHTML={ dangerouslySetInnerHTML }></div>;\r\n}\r\n\r\nHtml.config = {\r\n  type,\r\n  keyed: false,\r\n  label: 'HTML',\r\n  group: 'presentation',\r\n  create: (options = {}) => ({\r\n    content: '',\r\n    ...options\r\n  })\r\n};\r\n","import { useCallback, useEffect } from 'preact/hooks';\r\nimport { useExpressionEvaluation, useDeepCompareMemoize, useService, useEffectOnChange } from '../../hooks';\r\n\r\nconst type = 'expression';\r\n\r\nexport function ExpressionField(props) {\r\n  const {\r\n    field,\r\n    onChange,\r\n  } = props;\r\n\r\n  const {\r\n    computeOn,\r\n    expression\r\n  } = field;\r\n\r\n  const evaluation = useExpressionEvaluation(expression);\r\n  const evaluationMemo = useDeepCompareMemoize(evaluation);\r\n  const eventBus = useService('eventBus');\r\n\r\n  const sendValue = useCallback(() => {\r\n    onChange && onChange({ field, value: evaluationMemo });\r\n  }, [ field, evaluationMemo, onChange ]);\r\n\r\n  useEffectOnChange(evaluationMemo, () => {\r\n    if (computeOn !== 'change') { return; }\r\n    sendValue();\r\n  }, [ computeOn, sendValue ]);\r\n\r\n  useEffect(() => {\r\n    if (computeOn === 'presubmit') {\r\n      eventBus.on('presubmit', sendValue);\r\n      return () => eventBus.off('presubmit', sendValue);\r\n    }\r\n  }, [ computeOn, sendValue, eventBus ]);\r\n\r\n  return null;\r\n}\r\n\r\nExpressionField.config = {\r\n  type,\r\n  label: 'Výraz',\r\n  group: 'basic-input',\r\n  keyed: true,\r\n  escapeGridRender: true,\r\n  create: (options = {}) => ({\r\n    computeOn: 'change',\r\n    ...options,\r\n  })\r\n};","import { isArray, isObject, isNil } from 'min-dash';\r\nimport { formFieldClasses } from '../Util';\r\n\r\nimport { Description } from '../Description';\r\nimport { Errors } from '../Errors';\r\nimport { Label } from '../Label';\r\nimport { TemplatedInputAdorner } from './parts/TemplatedInputAdorner';\r\n\r\nimport { useFlushDebounce } from '../../hooks/useFlushDebounce';\r\n\r\nconst type = 'textfield';\r\n\r\nexport function Textfield(props) {\r\n  const {\r\n    disabled,\r\n    errors = [],\r\n    domId,\r\n    onBlur,\r\n    onFocus,\r\n    field,\r\n    readonly,\r\n    value = ''\r\n  } = props;\r\n\r\n  const {\r\n    description,\r\n    label,\r\n    appearance = {},\r\n    validate = {}\r\n  } = field;\r\n\r\n  const {\r\n    prefixAdorner,\r\n    suffixAdorner\r\n  } = appearance;\r\n\r\n  const { required } = validate;\r\n\r\n  const [ onInputChange, flushOnChange ] = useFlushDebounce(({ target }) => {\r\n    props.onChange({\r\n      field,\r\n      value: target.value\r\n    });\r\n  });\r\n\r\n  const onInputBlur = () => {\r\n    flushOnChange && flushOnChange();\r\n    onBlur && onBlur();\r\n  };\r\n\r\n  const onInputFocus = () => {\r\n    onFocus && onFocus();\r\n  };\r\n\r\n  const descriptionId = `${domId}-description`;\r\n  const errorMessageId = `${domId}-error-message`;\r\n\r\n  return <div class={ formFieldClasses(type, { errors, disabled, readonly }) }>\r\n    <Label\r\n      htmlFor={ domId }\r\n      label={ label }\r\n      required={ required } />\r\n    <TemplatedInputAdorner disabled={ disabled } readonly={ readonly } pre={ prefixAdorner } post={ suffixAdorner }>\r\n      <input\r\n        class=\"fjs-input\"\r\n        disabled={ disabled }\r\n        readOnly={ readonly }\r\n        id={ domId }\r\n        onInput={ onInputChange }\r\n        onBlur={ onInputBlur }\r\n        onFocus={ onInputFocus }\r\n        type=\"text\"\r\n        value={ value }\r\n        aria-describedby={ [ descriptionId, errorMessageId ].join(' ') }\r\n        required={ required }\r\n        aria-invalid={ errors.length > 0 } />\r\n    </TemplatedInputAdorner>\r\n    <Description id={ descriptionId } description={ description } />\r\n    <Errors id={ errorMessageId } errors={ errors } />\r\n  </div>;\r\n}\r\n\r\nTextfield.config = {\r\n  type,\r\n  keyed: true,\r\n  label: 'Text',\r\n  group: 'basic-input',\r\n  emptyValue: '',\r\n  sanitizeValue: ({ value }) => {\r\n    if (isArray(value) || isObject(value) || isNil(value)) {\r\n      return '';\r\n    }\r\n\r\n    // sanitize newlines to spaces\r\n    if (typeof value === 'string') {\r\n      return value.replace(/[\\r\\n\\t]/g, ' ');\r\n    }\r\n\r\n    return String(value);\r\n  },\r\n  create: (options = {}) => ({ ...options })\r\n};\r\n","import { isArray, isObject, isNil } from 'min-dash';\r\n\r\nimport { useEffect, useLayoutEffect, useRef } from 'preact/hooks';\r\nimport { useFlushDebounce } from '../../hooks/useFlushDebounce';\r\n\r\nimport { formFieldClasses } from '../Util';\r\n\r\nimport { Description } from '../Description';\r\nimport { Errors } from '../Errors';\r\nimport { Label } from '../Label';\r\n\r\nconst type = 'textarea';\r\n\r\nexport function Textarea(props) {\r\n  const {\r\n    disabled,\r\n    errors = [],\r\n    domId,\r\n    onBlur,\r\n    onFocus,\r\n    field,\r\n    readonly,\r\n    value = ''\r\n  } = props;\r\n\r\n  const {\r\n    description,\r\n    label,\r\n    validate = {}\r\n  } = field;\r\n\r\n  const { required } = validate;\r\n  const textareaRef = useRef();\r\n\r\n  const [ onChange, flushOnChange ] = useFlushDebounce(({ target }) => {\r\n    props.onChange({\r\n      field,\r\n      value: target.value\r\n    });\r\n  });\r\n\r\n  const onInputBlur = () => {\r\n    flushOnChange && flushOnChange();\r\n    onBlur && onBlur();\r\n  };\r\n\r\n  const onInputFocus = () => {\r\n    onFocus && onFocus();\r\n  };\r\n\r\n  const onInputChange = (event) => {\r\n    onChange({ target: event.target });\r\n    autoSizeTextarea(textareaRef.current);\r\n  };\r\n\r\n  useLayoutEffect(() => {\r\n    autoSizeTextarea(textareaRef.current);\r\n  }, [ value ]);\r\n\r\n  useEffect(() => {\r\n    autoSizeTextarea(textareaRef.current);\r\n  }, []);\r\n\r\n  const descriptionId = `${domId}-description`;\r\n  const errorMessageId = `${domId}-error-message`;\r\n\r\n  return <div class={ formFieldClasses(type, { errors, disabled, readonly }) }>\r\n    <Label\r\n      htmlFor={ domId }\r\n      label={ label }\r\n      required={ required } />\r\n    <textarea class=\"fjs-textarea\"\r\n      disabled={ disabled }\r\n      readonly={ readonly }\r\n      id={ domId }\r\n      onInput={ onInputChange }\r\n      onBlur={ onInputBlur }\r\n      onFocus={ onInputFocus }\r\n      value={ value }\r\n      ref={ textareaRef }\r\n      aria-describedby={ [ descriptionId, errorMessageId ].join(' ') }\r\n      required={ required }\r\n      aria-invalid={ errors.length > 0 } />\r\n    <Description id={ descriptionId } description={ description } />\r\n    <Errors id={ errorMessageId } errors={ errors } />\r\n  </div>;\r\n}\r\n\r\nTextarea.config = {\r\n  type,\r\n  keyed: true,\r\n  label: 'Dlouhý text',\r\n  group: 'basic-input',\r\n  emptyValue: '',\r\n  sanitizeValue: ({ value }) => (isArray(value) || isObject(value) || isNil(value)) ? '' : String(value),\r\n  create: (options = {}) => ({ ...options })\r\n};\r\n\r\nconst autoSizeTextarea = (textarea) => {\r\n\r\n  // Ensures the textarea shrinks back, and improves resizing behavior consistency\r\n  textarea.style.height = '0px';\r\n\r\n  const computed = window.getComputedStyle(textarea);\r\n\r\n  const heightFromLines = () => {\r\n    const lineHeight = parseInt(computed.getPropertyValue('line-height').replace('px', '')) || 0;\r\n    const lines = textarea.value ? textarea.value.toString().split('\\n').length : 0;\r\n    return lines * lineHeight;\r\n  };\r\n\r\n  const calculatedHeight = parseInt(computed.getPropertyValue('border-top-width'))\r\n    + parseInt(computed.getPropertyValue('padding-top'))\r\n    + (textarea.scrollHeight || heightFromLines())\r\n    + parseInt(computed.getPropertyValue('padding-bottom'))\r\n    + parseInt(computed.getPropertyValue('border-bottom-width'));\r\n\r\n  const minHeight = 75;\r\n  const maxHeight = 350;\r\n  const displayHeight = Math.max(Math.min(calculatedHeight || 0, maxHeight), minHeight);\r\n\r\n  textarea.style.height = `${displayHeight}px`;\r\n\r\n  // Overflow is hidden by default to hide scrollbar flickering\r\n  textarea.style.overflow = calculatedHeight > maxHeight ? 'visible' : 'hidden';\r\n\r\n};\r\n","<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 32\"><path fill=\"currentcolor\" d=\"M24.59 16.59 17 24.17V4h-2v20.17l-7.59-7.58L6 18l10 10 10-10-1.41-1.41z\"/></svg>","<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 32\"><path fill=\"currentcolor\" d=\"M16 4 6 14l1.41 1.41L15 7.83V28h2V7.83l7.59 7.58L26 14 16 4z\"/></svg>","<svg xmlns=\"http://www.w3.org/2000/svg\" xml:space=\"preserve\" viewBox=\"0 0 32 32\"><path fill=\"currentcolor\" d=\"m20 24-10-8 10-8z\"/></svg>","<svg xmlns=\"http://www.w3.org/2000/svg\" xml:space=\"preserve\" viewBox=\"0 0 32 32\"><path fill=\"currentcolor\" d=\"m12 8 10 8-10 8z\"/></svg>","import { isDefined, isNumber, isObject, isString } from 'min-dash';\r\nimport { useExpressionEvaluation } from '../../hooks';\r\nimport { useEffect, useState } from 'preact/hooks';\r\nimport { formFieldClasses, prefixId } from '../Util';\r\nimport classNames from 'classnames';\r\n\r\nimport { Label } from '../Label';\r\nimport ArrowDownIcon from './icons/ArrowDown.svg';\r\nimport ArrowUpIcon from './icons/ArrowUp.svg';\r\nimport CaretLeftIcon from './icons/CaretLeft.svg';\r\nimport CaretRightIcon from './icons/CaretRight.svg';\r\n\r\nconst type = 'table';\r\n\r\n/**\r\n * @typedef {('asc'|'desc')} Direction\r\n *\r\n * @typedef Sorting\r\n * @property {string} key\r\n * @property {Direction} direction\r\n *\r\n * @typedef Column\r\n * @property {string} label\r\n * @property {string} key\r\n *\r\n * @typedef Field\r\n * @property {string} id\r\n * @property {Array<Column>} [columns]\r\n * @property {string} [columnsExpression]\r\n * @property {string} [label]\r\n * @property {number} [rowCount]\r\n * @property {string} [dataSource]\r\n *\r\n * @typedef Props\r\n * @property {Field} field\r\n *\r\n * @param {Props} props\r\n * @returns {import(\"preact\").JSX.Element}\r\n */\r\nexport function Table(props) {\r\n  const { field } = props;\r\n  const {\r\n    columns = [],\r\n    columnsExpression,\r\n    dataSource = '',\r\n    rowCount,\r\n    id,\r\n    label,\r\n  } = field;\r\n\r\n  /** @type {[(null|Sorting), import(\"preact/hooks\").StateUpdater<null|Sorting>]} */\r\n  const [ sortBy, setSortBy ] = useState(null);\r\n  const evaluatedColumns = useEvaluatedColumns(\r\n    columnsExpression || '',\r\n    columns,\r\n  );\r\n  const columnKeys = evaluatedColumns.map(({ key }) => key);\r\n  const evaluatedDataSource = useExpressionEvaluation(dataSource);\r\n  const data = Array.isArray(evaluatedDataSource) ? evaluatedDataSource.filter(i => i !== undefined) : [];\r\n  const sortedData =\r\n    sortBy === null\r\n      ? data\r\n      : sortByColumn(data, sortBy.key, sortBy.direction);\r\n\r\n  /** @type {unknown[][]} */\r\n  const chunkedData = isNumber(rowCount) ? chunk(sortedData, rowCount) : [ sortedData ];\r\n  const [ currentPage, setCurrentPage ] = useState(0);\r\n  const currentChunk = chunkedData[currentPage] || [];\r\n\r\n\r\n  useEffect(() => {\r\n    setCurrentPage(0);\r\n  }, [ rowCount, sortBy ]);\r\n\r\n\r\n  /** @param {string} key */\r\n  function toggleSortBy(key) {\r\n    setSortBy((current) => {\r\n      if (current === null || current.key !== key) {\r\n        return {\r\n          key,\r\n          direction: 'asc',\r\n        };\r\n      }\r\n\r\n      if (current.direction === 'desc') {\r\n        return null;\r\n      }\r\n\r\n      return {\r\n        key,\r\n        direction: 'desc',\r\n      };\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div class={ formFieldClasses(type) }>\r\n      <Label htmlFor={ prefixId(id) } label={ label } />\r\n      <div\r\n        class={ classNames('fjs-table-middle-container', {\r\n          'fjs-table-empty': evaluatedColumns.length === 0,\r\n        }) }\r\n      >\r\n        {evaluatedColumns.length === 0 ? (\r\n          'Nothing to show.'\r\n        ) : (\r\n          <div class=\"fjs-table-inner-container\">\r\n            <table class=\"fjs-table\" id={ prefixId(id) }>\r\n              <thead class=\"fjs-table-head\">\r\n                <tr class=\"fjs-table-tr\">\r\n                  {evaluatedColumns.map(({ key, label }) => {\r\n                    const displayLabel = label || key;\r\n\r\n                    return (\r\n                      <th\r\n                        key={ key }\r\n                        tabIndex={ 0 }\r\n                        class=\"fjs-table-th\"\r\n                        onClick={ () => {\r\n                          toggleSortBy(key);\r\n                        } }\r\n                        onKeyDown={ (event) => {\r\n                          if ([ 'Enter', 'Space' ].includes(event.code)) {\r\n                            toggleSortBy(key);\r\n                          }\r\n                        } }\r\n                        aria-label={ getHeaderAriaLabel(\r\n                          sortBy,\r\n                          key,\r\n                          displayLabel,\r\n                        ) }\r\n                      >\r\n                        <span\r\n                          class=\"fjs-table-th-label\"\r\n                        >\r\n                          {displayLabel}\r\n                          {sortBy !== null && sortBy.key === key ? (\r\n                            <>\r\n                              {sortBy.direction === 'asc' ? (\r\n                                <ArrowUpIcon class=\"fjs-table-sort-icon-asc\" />\r\n                              ) : (\r\n                                <ArrowDownIcon class=\"fjs-table-sort-icon-desc\" />\r\n                              )}\r\n                            </>\r\n                          ) : null}\r\n                        </span>\r\n                      </th>\r\n                    );\r\n                  })}\r\n                </tr>\r\n              </thead>\r\n              {currentChunk.length === 0 ? (\r\n                <tbody class=\"fjs-table-body\">\r\n                  <tr class=\"fjs-table-tr\">\r\n                    <td class=\"fjs-table-td\" colSpan={ evaluatedColumns.length }>\r\n                      Nothing to show.\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              ) : (\r\n                <tbody class=\"fjs-table-body\">\r\n                  {currentChunk.map((row, index) => (\r\n                    <tr key={ index } class=\"fjs-table-tr\">\r\n                      {columnKeys.map((key) => (\r\n                        <td key={ key } class=\"fjs-table-td\">\r\n                          {row[key]}\r\n                        </td>\r\n                      ))}\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              )}\r\n            </table>\r\n          </div>\r\n        )}\r\n\r\n        {(isNumber(rowCount) && chunkedData.length > 1 && evaluatedColumns.length > 0) ?\r\n          (\r\n            <nav class=\"fjs-table-nav\">\r\n              <span class=\"fjs-table-nav-label\">\r\n                {currentPage + 1} of {chunkedData.length}\r\n              </span>\r\n              <button\r\n                type=\"button\"\r\n                class=\"fjs-table-nav-button\"\r\n                onClick={ () => {\r\n                  setCurrentPage((page) => Math.max(page - 1, 0));\r\n                } }\r\n                disabled={ currentPage === 0 }\r\n                aria-label=\"Previous page\"\r\n              >\r\n                <CaretLeftIcon />\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                class=\"fjs-table-nav-button\"\r\n                onClick={ () => {\r\n                  setCurrentPage((page) =>\r\n                    Math.min(page + 1, chunkedData.length - 1),\r\n                  );\r\n                } }\r\n                disabled={ currentPage >= chunkedData.length - 1 }\r\n                aria-label=\"Next page\"\r\n              >\r\n                <CaretRightIcon />\r\n              </button>\r\n            </nav>\r\n          ) : null}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nTable.config = {\r\n  type,\r\n  keyed: false,\r\n  label: 'Tabulka',\r\n  group: 'presentation',\r\n  create: (options = {}) => {\r\n    const {\r\n      id,\r\n      columnsExpression,\r\n      columns,\r\n      rowCount,\r\n      ...remainingOptions\r\n    } = options;\r\n\r\n    if (isDefined(id) && isNumber(rowCount)) {\r\n      remainingOptions['rowCount'] = rowCount;\r\n    }\r\n\r\n    if (isString(columnsExpression)) {\r\n      return {\r\n        ...remainingOptions,\r\n        id,\r\n        columnsExpression,\r\n      };\r\n    }\r\n\r\n    if (Array.isArray(columns) && columns.every(isColumn)) {\r\n      return {\r\n        ...remainingOptions,\r\n        id,\r\n        columns,\r\n      };\r\n    }\r\n\r\n    return {\r\n      ...remainingOptions,\r\n      rowCount: 10,\r\n      columns: [\r\n        {\r\n          label: 'ID',\r\n          key: 'id',\r\n        },\r\n        {\r\n          label: 'Name',\r\n          key: 'name',\r\n        },\r\n        {\r\n          label: 'Date',\r\n          key: 'date',\r\n        },\r\n      ],\r\n    };\r\n  },\r\n\r\n  /**\r\n   * @experimental\r\n   *\r\n   * A function that generates demo data for a new field on the form playground.\r\n   * @param {Field} field\r\n   */\r\n  generateInitialDemoData: (field) => {\r\n    const demoData = [\r\n      { id: 1, name: 'John Doe', date: '31.01.2023' },\r\n      { id: 2, name: 'Erika Muller', date: '20.02.2023' },\r\n      { id: 3, name: 'Dominic Leaf', date: '11.03.2023' }\r\n    ];\r\n    const demoDataKeys = Object.keys(demoData[0]);\r\n    const { columns, id, dataSource } = field;\r\n\r\n    if (!Array.isArray(columns) || columns.length === 0 || dataSource !== `=${id}`) {\r\n      return;\r\n    }\r\n\r\n    if (!columns.map(({ key })=>key).every(key => demoDataKeys.includes(key))) {\r\n      return;\r\n    }\r\n\r\n    return demoData;\r\n  }\r\n};\r\n\r\n// helpers /////////////////////////////\r\n\r\n/**\r\n * @param {string|void} columnsExpression\r\n * @param {Column[]} fallbackColumns\r\n * @returns {Column[]}\r\n */\r\nfunction useEvaluatedColumns(columnsExpression, fallbackColumns) {\r\n\r\n  /** @type {Column[]|null} */\r\n  const evaluation = useExpressionEvaluation(columnsExpression || '');\r\n\r\n  return Array.isArray(evaluation) && evaluation.every(isColumn)\r\n    ? evaluation\r\n    : fallbackColumns;\r\n}\r\n\r\n/**\r\n * @param {any} column\r\n * @returns {column is Column}\r\n */\r\nfunction isColumn(column) {\r\n  return (\r\n    isObject(column) && isString(column['label']) && isString(column['key'])\r\n  );\r\n}\r\n\r\n/**\r\n * @param {Array} array\r\n * @param {number} size\r\n * @returns {Array}\r\n */\r\nfunction chunk(array, size) {\r\n  return array.reduce((chunks, item, index) => {\r\n    if (index % size === 0) {\r\n      chunks.push([ item ]);\r\n    } else {\r\n      chunks[chunks.length - 1].push(item);\r\n    }\r\n\r\n    return chunks;\r\n  }, []);\r\n}\r\n\r\n/**\r\n * @param {unknown[]} array\r\n * @param {string} key\r\n * @param {Direction} direction\r\n * @returns {unknown[]}\r\n */\r\nfunction sortByColumn(array, key, direction) {\r\n  return [ ...array ].sort((a, b) => {\r\n    if (!isObject(a) || !isObject(b)) {\r\n      return 0;\r\n    }\r\n\r\n    if (direction === 'asc') {\r\n      return a[key] > b[key] ? 1 : -1;\r\n    }\r\n\r\n    return a[key] < b[key] ? 1 : -1;\r\n  });\r\n}\r\n\r\n/**\r\n * @param {null|Sorting} sortBy\r\n * @param {string} key\r\n * @param {string} label\r\n */\r\nfunction getHeaderAriaLabel(sortBy, key, label) {\r\n  if (sortBy === null || sortBy.key !== key) {\r\n    return `Click to sort by ${label} descending`;\r\n  }\r\n\r\n  if (sortBy.direction === 'asc') {\r\n    return 'Click to remove sorting';\r\n  }\r\n\r\n  return `Click to sort by ${label} ascending`;\r\n}\r\n","/**\r\n * This file must not be changed or exchanged.\r\n *\r\n * @see http://bpmn.io/license for more information.\r\n */\r\nimport { Fragment } from 'preact';\r\nimport { useState } from 'preact/hooks';\r\nimport { createPortal } from 'preact/compat';\r\n\r\nfunction Logo() {\r\n  return <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 14.02 5.57\" width=\"53\" height=\"21\" style=\"vertical-align:middle\"><path fill=\"currentColor\" d=\"M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z\" /><path fill=\"currentColor\" d=\"M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z\" /></svg>;\r\n}\r\n\r\nfunction Lightbox(props) {\r\n  const { open } = props;\r\n\r\n  if (!open) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div class=\"fjs-powered-by-lightbox\" style=\"z-index: 100; position: fixed; top: 0; left: 0;right: 0; bottom: 0\">\r\n      <div class=\"backdrop\" style=\"width: 100%; height: 100%; background: rgba(40 40 40 / 20%)\" onClick={ props.onBackdropClick }></div>\r\n      <div class=\"notice\" style=\"position: absolute; left: 50%; top: 40%; transform: translate(-50%); width: 260px; padding: 10px; background: white; box-shadow: 0  1px 4px rgba(0 0 0 / 30%); font-family: Helvetica, Arial, sans-serif; font-size: 14px; display: flex; line-height: 1.3\">\r\n        <a href=\"https://bpmn.io\" target=\"_blank\" rel=\"noopener\" style=\"margin: 15px 20px 15px 10px; align-self: center; color: var(--cds-icon-primary, #404040)\">\r\n          <Logo />\r\n        </a>\r\n        <span>\r\n          Web-based tooling for BPMN, DMN, and forms\r\n          powered by <a href=\"https://bpmn.io\" target=\"_blank\" rel=\"noopener\">bpmn.io</a>.\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Link(props) {\r\n  return (\r\n    <div class=\"fjs-powered-by fjs-form-field\" style=\"text-align: right\">\r\n      <a href=\"https://bpmn.io\" target=\"_blank\" rel=\"noopener\" class=\"fjs-powered-by-link\" title=\"Powered by bpmn.io\" style=\"color: var(--cds-text-primary, #404040)\" onClick={ props.onClick }><Logo /></a>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function PoweredBy(props) {\r\n\r\n  const [ open, setOpen ] = useState(false);\r\n\r\n  function toggleOpen(open) {\r\n    return (event) => {\r\n      event.preventDefault();\r\n\r\n      setOpen(open);\r\n    };\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      {\r\n        createPortal(\r\n          <Lightbox open={ open } onBackdropClick={ toggleOpen(false) } />,\r\n          document.body\r\n        )\r\n      }\r\n      <Link onClick={ toggleOpen(true) } />\r\n    </Fragment>\r\n  );\r\n}","import { FormField } from './FormField';\r\nimport { PoweredBy } from './PoweredBy';\r\nimport { LocalExpressionContext } from '../context/LocalExpressionContext';\r\n\r\nimport { useMemo } from 'preact/hooks';\r\nimport { useFilteredFormData, useService } from '../hooks';\r\n\r\nconst noop = () => {};\r\n\r\nexport function FormComponent(props) {\r\n  const form = useService('form');\r\n\r\n  const { schema, properties } = form._getState();\r\n\r\n  const { ariaLabel } = properties;\r\n\r\n  const {\r\n    onSubmit = noop,\r\n    onReset = noop,\r\n    onChange = noop,\r\n  } = props;\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n\r\n    onSubmit();\r\n  };\r\n\r\n  const handleReset = (event) => {\r\n    event.preventDefault();\r\n\r\n    onReset();\r\n  };\r\n\r\n  const filteredFormData = useFilteredFormData();\r\n\r\n  const localExpressionContext = useMemo(() => ({\r\n    data: filteredFormData,\r\n    parent: null,\r\n    this: filteredFormData,\r\n    i: []\r\n  }), [ filteredFormData ]);\r\n\r\n  return (\r\n    <form\r\n      class=\"fjs-form\"\r\n      onSubmit={ handleSubmit }\r\n      onReset={ handleReset }\r\n      aria-label={ ariaLabel }\r\n      noValidate\r\n    >\r\n      <LocalExpressionContext.Provider value={ localExpressionContext }>\r\n        <FormField\r\n          field={ schema }\r\n          onChange={ onChange }\r\n        />\r\n      </LocalExpressionContext.Provider>\r\n      <PoweredBy />\r\n    </form>\r\n  );\r\n}","import { Button } from './form-fields/Button';\r\nimport { Checkbox } from './form-fields/Checkbox';\r\nimport { Checklist } from './form-fields/Checklist';\r\nimport { Default } from './form-fields/Default';\r\nimport { Datetime } from './form-fields/Datetime';\r\nimport { Group } from './form-fields/Group';\r\nimport { IFrame } from './form-fields/IFrame';\r\nimport { Image } from './form-fields/Image';\r\nimport { Numberfield } from './form-fields/Number';\r\nimport { Radio } from './form-fields/Radio';\r\nimport { Select } from './form-fields/Select';\r\nimport { Separator } from './form-fields/Separator';\r\nimport { Spacer } from './form-fields/Spacer';\r\nimport { DynamicList } from './form-fields/DynamicList';\r\nimport { Taglist } from './form-fields/Taglist';\r\nimport { Text } from './form-fields/Text';\r\nimport { Html } from './form-fields/Html';\r\nimport { ExpressionField } from './form-fields/ExpressionField';\r\nimport { Textfield } from './form-fields/Textfield';\r\nimport { Textarea } from './form-fields/Textarea';\r\nimport { Table } from './form-fields/Table';\r\n\r\nimport { Label } from './Label';\r\nimport { Description } from './Description';\r\nimport { Errors } from './Errors';\r\nimport { FormComponent } from './FormComponent';\r\nimport { FormField } from './FormField';\r\n\r\nexport {\r\n  Label,\r\n  Description,\r\n  Errors\r\n};\r\n\r\nexport {\r\n  Button,\r\n  Checkbox,\r\n  Checklist,\r\n  Default,\r\n  Datetime,\r\n  FormComponent,\r\n  FormField,\r\n  Group,\r\n  IFrame,\r\n  DynamicList,\r\n  Image,\r\n  Numberfield,\r\n  ExpressionField,\r\n  Radio,\r\n  Select,\r\n  Separator,\r\n  Spacer,\r\n  Taglist,\r\n  Text,\r\n  Html,\r\n  Textfield,\r\n  Textarea,\r\n  Table\r\n};\r\n\r\nexport const formFields = [\r\n  Button,\r\n  Checkbox,\r\n  Checklist,\r\n  Default,\r\n  DynamicList,\r\n  Numberfield,\r\n  Datetime,\r\n  Radio,\r\n  Select,\r\n  Taglist,\r\n  Textfield,\r\n  Textarea,\r\n  ExpressionField,\r\n  Text,\r\n  Image,\r\n  Table,\r\n  Html,\r\n  Spacer,\r\n  Separator,\r\n  Group,\r\n  DynamicList,\r\n  IFrame\r\n];\r\n\r\nexport * from './icons';\r\nexport * from './Sanitizer';\r\nexport * from './util/domUtil';\r\nexport * from './util/sanitizerUtil';","import { formFields } from './components';\r\n\r\nexport class FormFields {\r\n  constructor() {\r\n    this._formFields = {};\r\n\r\n    formFields.forEach((formField) => {\r\n      this.register(formField.config.type, formField);\r\n    });\r\n  }\r\n\r\n  register(type, formField) {\r\n    this._formFields[ type ] = formField;\r\n  }\r\n\r\n  get(type) {\r\n    return this._formFields[ type ];\r\n  }\r\n}","import { FeelExpressionLanguage } from '../features/expressionLanguage/FeelExpressionLanguage.js';\r\nimport { FeelersTemplating } from '../features/expressionLanguage/FeelersTemplating.js';\r\nimport { FormFields } from '../render/FormFields.js';\r\n\r\nimport { get } from 'min-dash';\r\n\r\nconst EXPRESSION_PROPERTIES = [\r\n  'alt',\r\n  'appearance.prefixAdorner',\r\n  'appearance.suffixAdorner',\r\n  'conditional.hide',\r\n  'description',\r\n  'label',\r\n  'source',\r\n  'readonly',\r\n  'text',\r\n  'validate.min',\r\n  'validate.max',\r\n  'validate.minLength',\r\n  'validate.maxLength',\r\n  'valuesExpression',\r\n  'url',\r\n  'dataSource',\r\n  'columnsExpression'\r\n];\r\n\r\nconst TEMPLATE_PROPERTIES = [\r\n  'alt',\r\n  'appearance.prefixAdorner',\r\n  'appearance.suffixAdorner',\r\n  'description',\r\n  'label',\r\n  'source',\r\n  'text',\r\n  'content',\r\n  'url'\r\n];\r\n\r\n/**\r\n * @typedef { import('../types').Schema } Schema\r\n */\r\n\r\n/**\r\n * Parse the schema for variables a form might make use of.\r\n *\r\n * @example\r\n *\r\n * // retrieve variables from schema\r\n * const variables = getSchemaVariables(schema);\r\n *\r\n * @example\r\n *\r\n * // retrieve input variables from schema\r\n * const inputVariables = getSchemaVariables(schema, { outputs: false });\r\n *\r\n * @example\r\n *\r\n * // retrieve output variables from schema\r\n * const outputVariables = getSchemaVariables(schema, { inputs: false });\r\n *\r\n * @param {Schema} schema\r\n * @param {object} [options]\r\n * @param {any} [options.expressionLanguage]\r\n * @param {any} [options.templating]\r\n * @param {any} [options.formFields]\r\n * @param {boolean} [options.inputs=true]\r\n * @param {boolean} [options.outputs=true]\r\n *\r\n * @return {string[]}\r\n */\r\nexport function getSchemaVariables(schema, options = {}) {\r\n\r\n  const {\r\n    formFields = new FormFields(),\r\n    expressionLanguage = new FeelExpressionLanguage(null),\r\n    templating = new FeelersTemplating(),\r\n    inputs = true,\r\n    outputs = true\r\n  } = options;\r\n\r\n  if (!schema.components) {\r\n    return [];\r\n  }\r\n\r\n  const getAllComponents = (node) => {\r\n    const components = [];\r\n\r\n    if (node.components) {\r\n      node.components.forEach(component => {\r\n        components.push(component);\r\n        components.push(...getAllComponents(component));\r\n      });\r\n    }\r\n\r\n    return components;\r\n  };\r\n\r\n  const variables = getAllComponents(schema).reduce((variables, component) => {\r\n\r\n    const {\r\n      valuesKey\r\n    } = component;\r\n\r\n    // collect input-only variables\r\n    if (inputs) {\r\n\r\n      if (valuesKey) {\r\n        variables = [ ...variables, valuesKey ];\r\n      }\r\n\r\n      EXPRESSION_PROPERTIES.forEach((prop) => {\r\n        const property = get(component, prop.split('.'));\r\n\r\n        if (property && expressionLanguage.isExpression(property)) {\r\n\r\n          const expressionVariables = expressionLanguage.getVariableNames(property, { type: 'expression' });\r\n\r\n          variables = [ ...variables, ...expressionVariables ];\r\n        }\r\n      });\r\n\r\n      TEMPLATE_PROPERTIES.forEach((prop) => {\r\n        const property = get(component, prop.split('.'));\r\n\r\n        if (property && !expressionLanguage.isExpression(property) && templating.isTemplate(property)) {\r\n          const templateVariables = templating.getVariableNames(property);\r\n          variables = [ ...variables, ...templateVariables ];\r\n        }\r\n      });\r\n\r\n    }\r\n\r\n    return variables.filter(variable => typeof variable === 'string');\r\n  }, []);\r\n\r\n  const getBindingVariables = (node)=> {\r\n    const bindingVariable = [];\r\n    const formField = formFields.get(node.type);\r\n\r\n    if (formField && formField.config.keyed && node.key) {\r\n      return [ node.key.split('.')[0] ];\r\n    } else if (formField && formField.config.pathed && node.path) {\r\n      return [ node.path.split('.')[0] ];\r\n    } else if (node.components) {\r\n      node.components.forEach(component => {\r\n        bindingVariable.push(...getBindingVariables(component));\r\n      });\r\n    }\r\n\r\n    return bindingVariable;\r\n  };\r\n\r\n  // collect binding variables\r\n  if (inputs || outputs) {\r\n    variables.push(...getBindingVariables(schema));\r\n  }\r\n\r\n  // remove duplicates\r\n  return Array.from(new Set(variables));\r\n}","/**\r\n * Get the ancestry list of a form field.\r\n *\r\n * @param {string} formFieldId\r\n * @param {import('../core/FormFieldRegistry').FormFieldRegistry} formFieldRegistry\r\n *\r\n * @return {Array<string>} ancestry list\r\n */\r\nexport const getAncestryList = (formFieldId, formFieldRegistry) => {\r\n  const ids = [];\r\n\r\n  let currentFormField = formFieldRegistry.get(formFieldId);\r\n\r\n  while (currentFormField) {\r\n    ids.push(currentFormField.id);\r\n\r\n    currentFormField = formFieldRegistry.get(currentFormField._parent);\r\n  }\r\n\r\n  return ids;\r\n};","import { unaryTest } from 'feelin';\r\nimport { get, isString, set, values, isObject } from 'min-dash';\r\nimport { buildExpressionContext, clone } from '../../util';\r\n\r\n/**\r\n * @typedef {object} Condition\r\n * @property {string} [hide]\r\n */\r\n\r\nexport class ConditionChecker {\r\n  constructor(formFieldRegistry, pathRegistry, eventBus) {\r\n    this._formFieldRegistry = formFieldRegistry;\r\n    this._pathRegistry = pathRegistry;\r\n    this._eventBus = eventBus;\r\n  }\r\n\r\n  /**\r\n   * For given data, remove properties based on condition.\r\n   *\r\n   * @param {Object<string, any>} data\r\n   * @param {Object<string, any>} contextData\r\n   * @param {Object} [options]\r\n   * @param {Function} [options.getFilterPath]\r\n   * @param {boolean} [options.leafNodeDeletionOnly]\r\n   */\r\n  applyConditions(data, contextData = {}, options = {}) {\r\n\r\n    const workingData = clone(data);\r\n\r\n    const {\r\n      getFilterPath = (field, indexes) => this._pathRegistry.getValuePath(field, { indexes }),\r\n      leafNodeDeletionOnly = false\r\n    } = options;\r\n\r\n    const _applyConditionsWithinScope = (rootField, scopeContext, startHidden = false) => {\r\n\r\n      const {\r\n        indexes = {},\r\n        expressionIndexes = [],\r\n        scopeData = contextData,\r\n        parentScopeData = null\r\n      } = scopeContext;\r\n\r\n      this._pathRegistry.executeRecursivelyOnFields(rootField, ({ field, isClosed, isRepeatable, context }) => {\r\n\r\n        const {\r\n          conditional,\r\n          components,\r\n          id\r\n        } = field;\r\n\r\n        // build the expression context in the right format\r\n        const localExpressionContext = buildExpressionContext({\r\n          this: scopeData,\r\n          data: contextData,\r\n          i: expressionIndexes,\r\n          parent: parentScopeData\r\n        });\r\n\r\n        context.isHidden = startHidden || context.isHidden || (conditional && this._checkHideCondition(conditional, localExpressionContext));\r\n\r\n        // if a field is repeatable and visible, we need to implement custom recursion on its children\r\n        if (isRepeatable && (!context.isHidden || leafNodeDeletionOnly)) {\r\n\r\n          // prevent the regular recursion behavior of executeRecursivelyOnFields\r\n          context.preventRecursion = true;\r\n\r\n          const repeaterValuePath = this._pathRegistry.getValuePath(field, { indexes });\r\n          const repeaterValue = get(contextData, repeaterValuePath);\r\n\r\n          // quit early if there are no children or data associated with the repeater\r\n          if (!Array.isArray(repeaterValue) || !repeaterValue.length || !Array.isArray(components) || !components.length) {\r\n            return;\r\n          }\r\n\r\n          for (let i = 0; i < repeaterValue.length; i++) {\r\n\r\n            // create a new scope context for each index\r\n            const newScopeContext = {\r\n              indexes: { ...indexes, [id]: i },\r\n              expressionIndexes: [ ...expressionIndexes, i + 1 ],\r\n              scopeData: repeaterValue[i],\r\n              parentScopeData: scopeData\r\n            };\r\n\r\n            // for each child component, apply conditions within the new repetition scope\r\n            components.forEach(component => {\r\n              _applyConditionsWithinScope(component, newScopeContext, context.isHidden);\r\n            });\r\n\r\n          }\r\n\r\n        }\r\n\r\n        // if we have a hidden repeatable field, and the data structure allows, we clear it directly at the root and stop recursion\r\n        if (context.isHidden && !leafNodeDeletionOnly && isRepeatable) {\r\n          context.preventRecursion = true;\r\n          this._cleanlyClearDataAtPath(getFilterPath(field, indexes), workingData);\r\n        }\r\n\r\n        // for simple leaf fields, we always clear\r\n        if (context.isHidden && isClosed) {\r\n          this._cleanlyClearDataAtPath(getFilterPath(field, indexes), workingData);\r\n        }\r\n\r\n      });\r\n\r\n    };\r\n\r\n    // apply conditions starting with the root of the form\r\n    const form = this._formFieldRegistry.getForm();\r\n\r\n    if (!form) {\r\n      throw new Error('form field registry has no form');\r\n    }\r\n\r\n    _applyConditionsWithinScope(form, {\r\n      scopeData: contextData\r\n    });\r\n\r\n    return workingData;\r\n  }\r\n\r\n  /**\r\n   * Check if given condition is met. Returns null for invalid/missing conditions.\r\n   *\r\n   * @param {string} condition\r\n   * @param {import('../../types').Data} [data]\r\n   *\r\n   * @returns {boolean|null}\r\n   */\r\n  check(condition, data = {}) {\r\n    if (!condition) {\r\n      return null;\r\n    }\r\n\r\n    if (!isString(condition) || !condition.startsWith('=')) {\r\n      return null;\r\n    }\r\n\r\n    try {\r\n\r\n      // cut off initial '='\r\n      const result = unaryTest(condition.slice(1), data);\r\n\r\n      return result;\r\n    } catch (error) {\r\n      this._eventBus.fire('error', { error });\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if hide condition is met.\r\n   *\r\n   * @param {Condition} condition\r\n   * @param {Object<string, any>} data\r\n   * @returns {boolean}\r\n   */\r\n  _checkHideCondition(condition, data) {\r\n    if (!condition.hide) {\r\n      return false;\r\n    }\r\n\r\n    const result = this.check(condition.hide, data);\r\n\r\n    return result === true;\r\n  }\r\n\r\n  _cleanlyClearDataAtPath(valuePath, obj) {\r\n    const workingValuePath = [ ...valuePath ];\r\n    let recurse = false;\r\n\r\n    do {\r\n      set(obj, workingValuePath, undefined);\r\n      workingValuePath.pop();\r\n      const parentObject = get(obj, workingValuePath);\r\n      recurse = !!workingValuePath.length && (this._isEmptyObject(parentObject) || this._isEmptyArray(parentObject));\r\n    } while (recurse);\r\n  }\r\n\r\n  _isEmptyObject(parentObject) {\r\n    return isObject(parentObject) && !values(parentObject).length;\r\n  }\r\n\r\n  _isEmptyArray(parentObject) {\r\n    return Array.isArray(parentObject) && (!parentObject.length || parentObject.every(item => item === undefined));\r\n  }\r\n}\r\n\r\nConditionChecker.$inject = [\r\n  'formFieldRegistry',\r\n  'pathRegistry',\r\n  'eventBus'\r\n];\r\n","import { FeelExpressionLanguage } from './FeelExpressionLanguage';\r\nimport { FeelersTemplating } from './FeelersTemplating';\r\nimport { ConditionChecker } from './ConditionChecker';\r\n\r\nexport const ExpressionLanguageModule = {\r\n  __init__: [ 'expressionLanguage', 'templating', 'conditionChecker' ],\r\n  expressionLanguage: [ 'type', FeelExpressionLanguage ],\r\n  templating: [ 'type', FeelersTemplating ],\r\n  conditionChecker: [ 'type', ConditionChecker ]\r\n};\r\n\r\nexport { FeelExpressionLanguage, FeelersTemplating, ConditionChecker };","import { marked } from 'marked';\r\n\r\nexport class MarkdownRenderer {\r\n\r\n  /**\r\n   * Render markdown to HTML.\r\n   *\r\n   * @param {string} markdown - The markdown to render\r\n   *\r\n   * @returns {string} HTML\r\n   */\r\n  render(markdown) {\r\n\r\n    // @ts-expect-error\r\n    return marked.parse(markdown, {\r\n      gfm: true,\r\n      breaks: true\r\n    });\r\n  }\r\n}\r\n\r\nMarkdownRenderer.$inject = [];","import { MarkdownRenderer } from './MarkdownRenderer';\r\n\r\nexport const MarkdownRendererModule = {\r\n  __init__: [ 'markdownRenderer' ],\r\n  markdownRenderer: [ 'type', MarkdownRenderer ],\r\n};\r\n\r\nexport { MarkdownRenderer };","import {\n  uniqueBy,\n  isArray\n} from 'min-dash';\n\n/**\n * @typedef {import('didi').Injector} Injector\n *\n * @typedef {import('../core/Types').ElementLike} ElementLike\n *\n * @typedef {import('../core/EventBus').default} EventBus\n * @typedef {import('./CommandHandler').default} CommandHandler\n *\n * @typedef { any } CommandContext\n * @typedef { {\n *   new (...args: any[]) : CommandHandler\n * } } CommandHandlerConstructor\n * @typedef { {\n *   [key: string]: CommandHandler;\n * } } CommandHandlerMap\n * @typedef { {\n *   command: string;\n *   context: any;\n *   id?: any;\n * } } CommandStackAction\n * @typedef { {\n *   actions: CommandStackAction[];\n *   dirty: ElementLike[];\n *   trigger: 'execute' | 'undo' | 'redo' | 'clear' | null;\n *   atomic?: boolean;\n * } } CurrentExecution\n */\n\n/**\n * A service that offers un- and redoable execution of commands.\n *\n * The command stack is responsible for executing modeling actions\n * in a un- and redoable manner. To do this it delegates the actual\n * command execution to {@link CommandHandler}s.\n *\n * Command handlers provide {@link CommandHandler#execute(ctx)} and\n * {@link CommandHandler#revert(ctx)} methods to un- and redo a command\n * identified by a command context.\n *\n *\n * ## Life-Cycle events\n *\n * In the process the command stack fires a number of life-cycle events\n * that other components to participate in the command execution.\n *\n *    * preExecute\n *    * preExecuted\n *    * execute\n *    * executed\n *    * postExecute\n *    * postExecuted\n *    * revert\n *    * reverted\n *\n * A special event is used for validating, whether a command can be\n * performed prior to its execution.\n *\n *    * canExecute\n *\n * Each of the events is fired as `commandStack.{eventName}` and\n * `commandStack.{commandName}.{eventName}`, respectively. This gives\n * components fine grained control on where to hook into.\n *\n * The event object fired transports `command`, the name of the\n * command and `context`, the command context.\n *\n *\n * ## Creating Command Handlers\n *\n * Command handlers should provide the {@link CommandHandler#execute(ctx)}\n * and {@link CommandHandler#revert(ctx)} methods to implement\n * redoing and undoing of a command.\n *\n * A command handler _must_ ensure undo is performed properly in order\n * not to break the undo chain. It must also return the shapes that\n * got changed during the `execute` and `revert` operations.\n *\n * Command handlers may execute other modeling operations (and thus\n * commands) in their `preExecute(d)` and `postExecute(d)` phases. The command\n * stack will properly group all commands together into a logical unit\n * that may be re- and undone atomically.\n *\n * Command handlers must not execute other commands from within their\n * core implementation (`execute`, `revert`).\n *\n *\n * ## Change Tracking\n *\n * During the execution of the CommandStack it will keep track of all\n * elements that have been touched during the command's execution.\n *\n * At the end of the CommandStack execution it will notify interested\n * components via an 'elements.changed' event with all the dirty\n * elements.\n *\n * The event can be picked up by components that are interested in the fact\n * that elements have been changed. One use case for this is updating\n * their graphical representation after moving / resizing or deletion.\n *\n * @see CommandHandler\n *\n * @param {EventBus} eventBus\n * @param {Injector} injector\n */\nexport default function CommandStack(eventBus, injector) {\n\n  /**\n   * A map of all registered command handlers.\n   *\n   * @type {CommandHandlerMap}\n   */\n  this._handlerMap = {};\n\n  /**\n   * A stack containing all re/undoable actions on the diagram\n   *\n   * @type {CommandStackAction[]}\n   */\n  this._stack = [];\n\n  /**\n   * The current index on the stack\n   *\n   * @type {number}\n   */\n  this._stackIdx = -1;\n\n  /**\n   * Current active commandStack execution\n   *\n   * @type {CurrentExecution}\n   */\n  this._currentExecution = {\n    actions: [],\n    dirty: [],\n    trigger: null\n  };\n\n  /**\n   * @type {Injector}\n   */\n  this._injector = injector;\n\n  /**\n   * @type EventBus\n   */\n  this._eventBus = eventBus;\n\n  /**\n   * @type { number }\n   */\n  this._uid = 1;\n\n  eventBus.on([\n    'diagram.destroy',\n    'diagram.clear'\n  ], function() {\n    this.clear(false);\n  }, this);\n}\n\nCommandStack.$inject = [ 'eventBus', 'injector' ];\n\n\n/**\n * Execute a command.\n *\n * @param {string} command The command to execute.\n * @param {CommandContext} context The context with which to execute the command.\n */\nCommandStack.prototype.execute = function(command, context) {\n  if (!command) {\n    throw new Error('command required');\n  }\n\n  this._currentExecution.trigger = 'execute';\n\n  const action = { command: command, context: context };\n\n  this._pushAction(action);\n  this._internalExecute(action);\n  this._popAction();\n};\n\n\n/**\n * Check whether a command can be executed.\n *\n * Implementors may hook into the mechanism on two ways:\n *\n *   * in event listeners:\n *\n *     Users may prevent the execution via an event listener.\n *     It must prevent the default action for `commandStack.(<command>.)canExecute` events.\n *\n *   * in command handlers:\n *\n *     If the method {@link CommandHandler#canExecute} is implemented in a handler\n *     it will be called to figure out whether the execution is allowed.\n *\n * @param {string} command The command to execute.\n * @param {CommandContext} context The context with which to execute the command.\n *\n * @return {boolean} Whether the command can be executed with the given context.\n */\nCommandStack.prototype.canExecute = function(command, context) {\n\n  const action = { command: command, context: context };\n\n  const handler = this._getHandler(command);\n\n  let result = this._fire(command, 'canExecute', action);\n\n  // handler#canExecute will only be called if no listener\n  // decided on a result already\n  if (result === undefined) {\n    if (!handler) {\n      return false;\n    }\n\n    if (handler.canExecute) {\n      result = handler.canExecute(context);\n    }\n  }\n\n  return result;\n};\n\n\n/**\n * Clear the command stack, erasing all undo / redo history.\n *\n * @param {boolean} [emit=true] Whether to fire an event. Defaults to `true`.\n */\nCommandStack.prototype.clear = function(emit) {\n  this._stack.length = 0;\n  this._stackIdx = -1;\n\n  if (emit !== false) {\n    this._fire('changed', { trigger: 'clear' });\n  }\n};\n\n\n/**\n * Undo last command(s)\n */\nCommandStack.prototype.undo = function() {\n  let action = this._getUndoAction(),\n      next;\n\n  if (action) {\n    this._currentExecution.trigger = 'undo';\n\n    this._pushAction(action);\n\n    while (action) {\n      this._internalUndo(action);\n      next = this._getUndoAction();\n\n      if (!next || next.id !== action.id) {\n        break;\n      }\n\n      action = next;\n    }\n\n    this._popAction();\n  }\n};\n\n\n/**\n * Redo last command(s)\n */\nCommandStack.prototype.redo = function() {\n  let action = this._getRedoAction(),\n      next;\n\n  if (action) {\n    this._currentExecution.trigger = 'redo';\n\n    this._pushAction(action);\n\n    while (action) {\n      this._internalExecute(action, true);\n      next = this._getRedoAction();\n\n      if (!next || next.id !== action.id) {\n        break;\n      }\n\n      action = next;\n    }\n\n    this._popAction();\n  }\n};\n\n\n/**\n * Register a handler instance with the command stack.\n *\n * @param {string} command Command to be executed.\n * @param {CommandHandler} handler Handler to execute the command.\n */\nCommandStack.prototype.register = function(command, handler) {\n  this._setHandler(command, handler);\n};\n\n\n/**\n * Register a handler type with the command stack  by instantiating it and\n * injecting its dependencies.\n *\n * @param {string} command Command to be executed.\n * @param {CommandHandlerConstructor} handlerCls Constructor to instantiate a {@link CommandHandler}.\n */\nCommandStack.prototype.registerHandler = function(command, handlerCls) {\n\n  if (!command || !handlerCls) {\n    throw new Error('command and handlerCls must be defined');\n  }\n\n  const handler = this._injector.instantiate(handlerCls);\n  this.register(command, handler);\n};\n\n/**\n * @return {boolean}\n */\nCommandStack.prototype.canUndo = function() {\n  return !!this._getUndoAction();\n};\n\n/**\n * @return {boolean}\n */\nCommandStack.prototype.canRedo = function() {\n  return !!this._getRedoAction();\n};\n\n// stack access  //////////////////////\n\nCommandStack.prototype._getRedoAction = function() {\n  return this._stack[this._stackIdx + 1];\n};\n\n\nCommandStack.prototype._getUndoAction = function() {\n  return this._stack[this._stackIdx];\n};\n\n\n// internal functionality //////////////////////\n\nCommandStack.prototype._internalUndo = function(action) {\n  const command = action.command,\n        context = action.context;\n\n  const handler = this._getHandler(command);\n\n  // guard against illegal nested command stack invocations\n  this._atomicDo(() => {\n    this._fire(command, 'revert', action);\n\n    if (handler.revert) {\n      this._markDirty(handler.revert(context));\n    }\n\n    this._revertedAction(action);\n\n    this._fire(command, 'reverted', action);\n  });\n};\n\n\nCommandStack.prototype._fire = function(command, qualifier, event) {\n  if (arguments.length < 3) {\n    event = qualifier;\n    qualifier = null;\n  }\n\n  const names = qualifier ? [ command + '.' + qualifier, qualifier ] : [ command ];\n  let result;\n\n  event = this._eventBus.createEvent(event);\n\n  for (const name of names) {\n    result = this._eventBus.fire('commandStack.' + name, event);\n\n    if (event.cancelBubble) {\n      break;\n    }\n  }\n\n  return result;\n};\n\nCommandStack.prototype._createId = function() {\n  return this._uid++;\n};\n\nCommandStack.prototype._atomicDo = function(fn) {\n\n  const execution = this._currentExecution;\n\n  execution.atomic = true;\n\n  try {\n    fn();\n  } finally {\n    execution.atomic = false;\n  }\n};\n\nCommandStack.prototype._internalExecute = function(action, redo) {\n  const command = action.command,\n        context = action.context;\n\n  const handler = this._getHandler(command);\n\n  if (!handler) {\n    throw new Error('no command handler registered for <' + command + '>');\n  }\n\n  this._pushAction(action);\n\n  if (!redo) {\n    this._fire(command, 'preExecute', action);\n\n    if (handler.preExecute) {\n      handler.preExecute(context);\n    }\n\n    this._fire(command, 'preExecuted', action);\n  }\n\n  // guard against illegal nested command stack invocations\n  this._atomicDo(() => {\n\n    this._fire(command, 'execute', action);\n\n    if (handler.execute) {\n\n      // actual execute + mark return results as dirty\n      this._markDirty(handler.execute(context));\n    }\n\n    // log to stack\n    this._executedAction(action, redo);\n\n    this._fire(command, 'executed', action);\n  });\n\n  if (!redo) {\n    this._fire(command, 'postExecute', action);\n\n    if (handler.postExecute) {\n      handler.postExecute(context);\n    }\n\n    this._fire(command, 'postExecuted', action);\n  }\n\n  this._popAction();\n};\n\n\nCommandStack.prototype._pushAction = function(action) {\n\n  const execution = this._currentExecution,\n        actions = execution.actions;\n\n  const baseAction = actions[0];\n\n  if (execution.atomic) {\n    throw new Error('illegal invocation in <execute> or <revert> phase (action: ' + action.command + ')');\n  }\n\n  if (!action.id) {\n    action.id = (baseAction && baseAction.id) || this._createId();\n  }\n\n  actions.push(action);\n};\n\n\nCommandStack.prototype._popAction = function() {\n  const execution = this._currentExecution,\n        trigger = execution.trigger,\n        actions = execution.actions,\n        dirty = execution.dirty;\n\n  actions.pop();\n\n  if (!actions.length) {\n    this._eventBus.fire('elements.changed', { elements: uniqueBy('id', dirty.reverse()) });\n\n    dirty.length = 0;\n\n    this._fire('changed', { trigger: trigger });\n\n    execution.trigger = null;\n  }\n};\n\n\nCommandStack.prototype._markDirty = function(elements) {\n  const execution = this._currentExecution;\n\n  if (!elements) {\n    return;\n  }\n\n  elements = isArray(elements) ? elements : [ elements ];\n\n  execution.dirty = execution.dirty.concat(elements);\n};\n\n\nCommandStack.prototype._executedAction = function(action, redo) {\n  const stackIdx = ++this._stackIdx;\n\n  if (!redo) {\n    this._stack.splice(stackIdx, this._stack.length, action);\n  }\n};\n\n\nCommandStack.prototype._revertedAction = function(action) {\n  this._stackIdx--;\n};\n\n\nCommandStack.prototype._getHandler = function(command) {\n  return this._handlerMap[command];\n};\n\nCommandStack.prototype._setHandler = function(command, handler) {\n  if (!command || !handler) {\n    throw new Error('command and handler required');\n  }\n\n  if (this._handlerMap[command]) {\n    throw new Error('overriding handler for command <' + command + '>');\n  }\n\n  this._handlerMap[command] = handler;\n};\n","import CommandStack from './CommandStack';\n\n/**\n * @type { import('didi').ModuleDeclaration }\n */\nexport default {\n  commandStack: [ 'type', CommandStack ]\n};\n","import { set } from 'min-dash';\r\nimport { clone } from '../../../util';\r\n\r\nexport class UpdateFieldValidationHandler {\r\n\r\n  constructor(form, validator) {\r\n    this._form = form;\r\n    this._validator = validator;\r\n  }\r\n\r\n  execute(context) {\r\n    const { field, value, indexes } = context;\r\n    const { errors } = this._form._getState();\r\n\r\n    context.oldErrors = clone(errors);\r\n\r\n    const fieldErrors = this._validator.validateField(field, value);\r\n    const updatedErrors = set(errors, [ field.id, ...Object.values(indexes || {}) ], fieldErrors.length ? fieldErrors : undefined);\r\n    this._form._setState({ errors: updatedErrors });\r\n  }\r\n\r\n  revert(context) {\r\n    this._form._setState({ errors: context.oldErrors });\r\n  }\r\n}\r\n\r\nUpdateFieldValidationHandler.$inject = [ 'form', 'validator' ];","import { UpdateFieldValidationHandler } from './cmd/UpdateFieldValidationHandler';\r\n\r\nexport class ViewerCommands {\r\n  constructor(commandStack, eventBus) {\r\n    this._commandStack = commandStack;\r\n\r\n    eventBus.on('form.init', () => {\r\n      this.registerHandlers();\r\n    });\r\n  }\r\n\r\n  registerHandlers() {\r\n    Object.entries(this.getHandlers()).forEach(([ id, handler ]) => {\r\n      this._commandStack.registerHandler(id, handler);\r\n    });\r\n  }\r\n\r\n  getHandlers() {\r\n    return {\r\n      'formField.validation.update': UpdateFieldValidationHandler\r\n    };\r\n  }\r\n\r\n  updateFieldValidation(field, value, indexes) {\r\n    const context = {\r\n      field,\r\n      value,\r\n      indexes\r\n    };\r\n\r\n    this._commandStack.execute('formField.validation.update', context);\r\n  }\r\n\r\n}\r\n\r\nViewerCommands.$inject = [\r\n  'commandStack',\r\n  'eventBus'\r\n];","import commandModule from 'diagram-js/lib/command';\r\n\r\nimport { ViewerCommands } from './ViewerCommands';\r\n\r\nexport const ViewerCommandsModule = {\r\n  __depends__: [\r\n    commandModule\r\n  ],\r\n  __init__: [ 'viewerCommands' ],\r\n  viewerCommands: [ 'type', ViewerCommands ]\r\n};\r\n\r\nexport { ViewerCommands };","<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"none\"><path fill=\"currentColor\" d=\"M2 9h5.5v3.086l-1.293-1.293-.707.707L8 14l2.5-2.5-.707-.707L8.5 12.086V9H14V8H2v1ZM13 2H3a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1Zm0 3H3V3h10v2Z\"/></svg>","<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"none\"><path fill=\"currentColor\" d=\"M13 10H3a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1Zm0 3H3v-2h10v2ZM8.5 3.914l1.293 1.293.707-.707L8 2 5.5 4.5l.707.707L7.5 3.914V7H2v1h12V7H8.5V3.914Z\"/></svg>","<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"none\"><path fill=\"currentColor\" d=\"M8 2c3.3 0 6 2.7 6 6s-2.7 6-6 6-6-2.7-6-6 2.7-6 6-6Zm0-1C4.15 1 1 4.15 1 8s3.15 7 7 7 7-3.15 7-7-3.15-7-7-7Z\"/><path fill=\"currentColor\" d=\"M12 7.5H8.5V4h-1v3.5H4v1h3.5V12h1V8.5H12v-1Z\"/></svg>","<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"none\"><path fill=\"currentColor\" d=\"m12 4.7-.7-.7L8 7.3 4.7 4l-.7.7L7.3 8 4 11.3l.7.7L8 8.7l3.3 3.3.7-.7L8.7 8 12 4.7Z\"/></svg>","// disable react hook rules as the linter is confusing the functional components within a class as class components\r\n/* eslint-disable react-hooks/rules-of-hooks */\r\n\r\nimport { get } from 'min-dash';\r\nimport { useContext, useMemo, useRef } from 'preact/hooks';\r\nimport { LocalExpressionContext } from '../../render/context/LocalExpressionContext';\r\n\r\nimport ExpandSvg from '../../render/components/form-fields/icons/Expand.svg';\r\nimport CollapseSvg from '../../render/components/form-fields/icons/Collapse.svg';\r\nimport AddSvg from '../../render/components/form-fields/icons/Add.svg';\r\nimport DeleteSvg from '../../render/components/form-fields/icons/Delete.svg';\r\n\r\nimport { buildExpressionContext } from '../../util';\r\nimport { useScrollIntoView } from '../../render/hooks';\r\nimport classNames from 'classnames';\r\n\r\nexport class RepeatRenderManager {\r\n\r\n  constructor(form, formFields, formFieldRegistry, pathRegistry) {\r\n    this._form = form;\r\n    this._formFields = formFields;\r\n    this._formFieldRegistry = formFieldRegistry;\r\n    this._pathRegistry = pathRegistry;\r\n    this.Repeater = this.Repeater.bind(this);\r\n    this.RepeatFooter = this.RepeatFooter.bind(this);\r\n  }\r\n\r\n  /**\r\n   * Checks whether a field is currently repeating its children.\r\n   *\r\n   * @param {string} id - The id of the field to check\r\n   * @returns {boolean} - True if repeatable, false otherwise\r\n   */\r\n  isFieldRepeating(id) {\r\n\r\n    if (!id) {\r\n      return false;\r\n    }\r\n\r\n    const formField = this._formFieldRegistry.get(id);\r\n    const formFieldDefinition = this._formFields.get(formField.type);\r\n    return formFieldDefinition.config.repeatable && formField.isRepeating;\r\n  }\r\n\r\n  Repeater(props) {\r\n\r\n    const { RowsRenderer, indexes, useSharedState, ...restProps } = props;\r\n\r\n    const [ sharedRepeatState ] = useSharedState;\r\n\r\n    const { data } = this._form._getState();\r\n\r\n    const repeaterField = props.field;\r\n    const dataPath = this._pathRegistry.getValuePath(repeaterField, { indexes });\r\n    const values = get(data, dataPath) || [];\r\n\r\n    const nonCollapsedItems = this._getNonCollapsedItems(repeaterField);\r\n    const collapseEnabled = !repeaterField.disableCollapse && (values.length > nonCollapsedItems);\r\n    const isCollapsed = collapseEnabled && sharedRepeatState.isCollapsed;\r\n\r\n    const hasChildren = repeaterField.components && repeaterField.components.length > 0;\r\n    const showRemove = repeaterField.allowAddRemove && hasChildren;\r\n\r\n    const displayValues = isCollapsed ? values.slice(0, nonCollapsedItems) : values;\r\n\r\n    const onDeleteItem = (index) => {\r\n\r\n      const updatedValues = values.slice();\r\n      updatedValues.splice(index, 1);\r\n\r\n      props.onChange({\r\n        field: repeaterField,\r\n        value: updatedValues,\r\n        indexes\r\n      });\r\n    };\r\n\r\n    const parentExpressionContextInfo = useContext(LocalExpressionContext);\r\n\r\n    return (\r\n      <>\r\n        {displayValues.map((itemValue, itemIndex) =>\r\n          <RepetitionScaffold\r\n            key={ itemIndex }\r\n            itemIndex={ itemIndex }\r\n            itemValue={ itemValue }\r\n            parentExpressionContextInfo={ parentExpressionContextInfo }\r\n            repeaterField={ repeaterField }\r\n            RowsRenderer={ RowsRenderer }\r\n            indexes={ indexes }\r\n            onDeleteItem={ onDeleteItem }\r\n            showRemove={ showRemove }\r\n            { ...restProps } />\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n\r\n  RepeatFooter(props) {\r\n\r\n    const addButtonRef = useRef(null);\r\n    const { useSharedState, indexes, field: repeaterField, readonly, disabled } = props;\r\n    const [ sharedRepeatState, setSharedRepeatState ] = useSharedState;\r\n\r\n    const { data } = this._form._getState();\r\n\r\n    const dataPath = this._pathRegistry.getValuePath(repeaterField, { indexes });\r\n    const values = get(data, dataPath) || [];\r\n\r\n    const nonCollapsedItems = this._getNonCollapsedItems(repeaterField);\r\n    const collapseEnabled = !repeaterField.disableCollapse && (values.length > nonCollapsedItems);\r\n    const isCollapsed = collapseEnabled && sharedRepeatState.isCollapsed;\r\n\r\n    const hasChildren = repeaterField.components && repeaterField.components.length > 0;\r\n    const showAdd = repeaterField.allowAddRemove && hasChildren;\r\n\r\n    const toggle = () => {\r\n      setSharedRepeatState(state => ({ ...state, isCollapsed: !isCollapsed }));\r\n    };\r\n\r\n    const shouldScroll = useRef(false);\r\n\r\n    const onAddItem = () => {\r\n      const updatedValues = values.slice();\r\n      const newItem = this._form._getInitializedFieldData(this._form._getState().data, {\r\n        container: repeaterField,\r\n        indexes: { ...indexes, [ repeaterField.id ]: updatedValues.length }\r\n      });\r\n\r\n      updatedValues.push(newItem);\r\n\r\n      shouldScroll.current = true;\r\n\r\n      props.onChange({\r\n        field: repeaterField,\r\n        value: updatedValues,\r\n        indexes\r\n      });\r\n\r\n      setSharedRepeatState(state => ({ ...state, isCollapsed: false }));\r\n    };\r\n\r\n    useScrollIntoView(addButtonRef, [ values.length ], {\r\n      align: 'bottom',\r\n      behavior: 'auto',\r\n      offset: 20\r\n    }, [ shouldScroll ]);\r\n\r\n    return <div\r\n      className={\r\n        classNames('fjs-repeat-render-footer', {\r\n          'fjs-remove-allowed':repeaterField.allowAddRemove\r\n        }) }\r\n    >\r\n      {\r\n        showAdd ? <button type=\"button\" readOnly={ readonly } disabled={ disabled || readonly } class=\"fjs-repeat-render-add\" ref={ addButtonRef } onClick={ onAddItem }>\r\n          <><AddSvg /> { 'Přidat' }</>\r\n        </button> : null\r\n      }\r\n      {\r\n        collapseEnabled ? <button type=\"button\" class=\"fjs-repeat-render-collapse\" onClick={ toggle }>\r\n          {\r\n            isCollapsed\r\n              ? <><ExpandSvg /> { `Rozbalit vše (${values.length})` }</>\r\n              : <><CollapseSvg /> { 'Sbalit' }</>\r\n          }\r\n        </button> : null\r\n      }\r\n    </div>;\r\n  }\r\n\r\n  _getNonCollapsedItems(field) {\r\n    const DEFAULT_NON_COLLAPSED_ITEMS = 5;\r\n\r\n    const { nonCollapsedItems } = field;\r\n\r\n    return nonCollapsedItems ? nonCollapsedItems : DEFAULT_NON_COLLAPSED_ITEMS;\r\n  }\r\n\r\n}\r\n\r\n/**\r\n * Individual repetition of a repeated field and context scaffolding.\r\n *\r\n * @param {Object} props\r\n * @param {number} props.itemIndex\r\n * @param {Object} props.itemValue\r\n * @param {Object} props.parentExpressionContextInfo\r\n * @param {Object} props.repeaterField\r\n * @param {Function} props.RowsRenderer\r\n * @param {Object} props.indexes\r\n * @param {Function} props.onDeleteItem\r\n * @param {boolean} props.showRemove\r\n */\r\n\r\nconst RepetitionScaffold = (props) => {\r\n\r\n  const {\r\n    itemIndex,\r\n    itemValue,\r\n    parentExpressionContextInfo,\r\n    repeaterField,\r\n    RowsRenderer,\r\n    indexes,\r\n    onDeleteItem,\r\n    showRemove,\r\n    ...restProps\r\n  } = props;\r\n\r\n  const elementProps = useMemo(() => ({\r\n    ...restProps,\r\n    indexes: { ...(indexes || {}), [ repeaterField.id ]: itemIndex }\r\n  }), [ itemIndex, indexes, repeaterField.id, restProps ]);\r\n\r\n  const localExpressionContextInfo = useMemo(() => ({\r\n    data: parentExpressionContextInfo.data,\r\n    this: itemValue,\r\n    parent: buildExpressionContext(parentExpressionContextInfo),\r\n    i: [ ...parentExpressionContextInfo.i , itemIndex + 1 ]\r\n  }), [ itemIndex, parentExpressionContextInfo, itemValue ]);\r\n\r\n  return !showRemove ?\r\n    <LocalExpressionContext.Provider value={ localExpressionContextInfo }>\r\n      <RowsRenderer { ...elementProps } />\r\n    </LocalExpressionContext.Provider> :\r\n    <div class=\"fjs-repeat-row-container\">\r\n      <div class=\"fjs-repeat-row-rows\">\r\n        <LocalExpressionContext.Provider value={ localExpressionContextInfo }>\r\n          <RowsRenderer { ...elementProps } />\r\n        </LocalExpressionContext.Provider>\r\n      </div>\r\n      <button type=\"button\" class=\"fjs-repeat-row-remove\" aria-label={ `Remove list item ${itemIndex + 1}` } onClick={ () => onDeleteItem(itemIndex) }>\r\n        <div class=\"fjs-repeat-row-remove-icon-container\">\r\n          <DeleteSvg />\r\n        </div>\r\n      </button>\r\n    </div>;\r\n\r\n};\r\n\r\nRepeatRenderManager.$inject = [ 'form', 'formFields', 'formFieldRegistry', 'pathRegistry' ];","import { RepeatRenderManager } from './RepeatRenderManager';\r\n\r\nexport const RepeatRenderModule = {\r\n  __init__: [ 'repeatRenderManager' ],\r\n  repeatRenderManager: [ 'type', RepeatRenderManager ],\r\n};\r\n\r\nexport { RepeatRenderManager };","import {\n  isFunction,\n  isArray,\n  isNumber,\n  bind,\n  assign\n} from 'min-dash';\n\nvar FN_REF = '__fn';\n\nvar DEFAULT_PRIORITY = 1000;\n\nvar slice = Array.prototype.slice;\n\n/**\n * @typedef { {\n *   stopPropagation(): void;\n *   preventDefault(): void;\n *   cancelBubble: boolean;\n *   defaultPrevented: boolean;\n *   returnValue: any;\n * } } Event\n */\n\n/**\n * @template E\n *\n * @typedef { (event: E & Event, ...any) => any } EventBusEventCallback\n */\n\n/**\n * @typedef { {\n *  priority: number;\n *  next: EventBusListener | null;\n *  callback: EventBusEventCallback<any>;\n * } } EventBusListener\n */\n\n/**\n * A general purpose event bus.\n *\n * This component is used to communicate across a diagram instance.\n * Other parts of a diagram can use it to listen to and broadcast events.\n *\n *\n * ## Registering for Events\n *\n * The event bus provides the {@link EventBus#on} and {@link EventBus#once}\n * methods to register for events. {@link EventBus#off} can be used to\n * remove event registrations. Listeners receive an instance of {@link Event}\n * as the first argument. It allows them to hook into the event execution.\n *\n * ```javascript\n *\n * // listen for event\n * eventBus.on('foo', function(event) {\n *\n *   // access event type\n *   event.type; // 'foo'\n *\n *   // stop propagation to other listeners\n *   event.stopPropagation();\n *\n *   // prevent event default\n *   event.preventDefault();\n * });\n *\n * // listen for event with custom payload\n * eventBus.on('bar', function(event, payload) {\n *   console.log(payload);\n * });\n *\n * // listen for event returning value\n * eventBus.on('foobar', function(event) {\n *\n *   // stop event propagation + prevent default\n *   return false;\n *\n *   // stop event propagation + return custom result\n *   return {\n *     complex: 'listening result'\n *   };\n * });\n *\n *\n * // listen with custom priority (default=1000, higher is better)\n * eventBus.on('priorityfoo', 1500, function(event) {\n *   console.log('invoked first!');\n * });\n *\n *\n * // listen for event and pass the context (`this`)\n * eventBus.on('foobar', function(event) {\n *   this.foo();\n * }, this);\n * ```\n *\n *\n * ## Emitting Events\n *\n * Events can be emitted via the event bus using {@link EventBus#fire}.\n *\n * ```javascript\n *\n * // false indicates that the default action\n * // was prevented by listeners\n * if (eventBus.fire('foo') === false) {\n *   console.log('default has been prevented!');\n * };\n *\n *\n * // custom args + return value listener\n * eventBus.on('sum', function(event, a, b) {\n *   return a + b;\n * });\n *\n * // you can pass custom arguments + retrieve result values.\n * var sum = eventBus.fire('sum', 1, 2);\n * console.log(sum); // 3\n * ```\n *\n * @template [EventMap=null]\n */\nexport default function EventBus() {\n\n  /**\n   * @type { Record<string, EventBusListener> }\n   */\n  this._listeners = {};\n\n  // cleanup on destroy on lowest priority to allow\n  // message passing until the bitter end\n  this.on('diagram.destroy', 1, this._destroy, this);\n}\n\n/**\n * @overlord\n *\n * Register an event listener for events with the given name.\n *\n * The callback will be invoked with `event, ...additionalArguments`\n * that have been passed to {@link EventBus#fire}.\n *\n * Returning false from a listener will prevent the events default action\n * (if any is specified). To stop an event from being processed further in\n * other listeners execute {@link Event#stopPropagation}.\n *\n * Returning anything but `undefined` from a listener will stop the listener propagation.\n *\n * @template T\n *\n * @param {string|string[]} events to subscribe to\n * @param {number} [priority=1000] listen priority\n * @param {EventBusEventCallback<T>} callback\n * @param {any} [that] callback context\n */\n/**\n * Register an event listener for events with the given name.\n *\n * The callback will be invoked with `event, ...additionalArguments`\n * that have been passed to {@link EventBus#fire}.\n *\n * Returning false from a listener will prevent the events default action\n * (if any is specified). To stop an event from being processed further in\n * other listeners execute {@link Event#stopPropagation}.\n *\n * Returning anything but `undefined` from a listener will stop the listener propagation.\n *\n * @template {keyof EventMap} EventName\n *\n * @param {EventName} events to subscribe to\n * @param {number} [priority=1000] listen priority\n * @param {EventBusEventCallback<EventMap[EventName]>} callback\n * @param {any} [that] callback context\n */\nEventBus.prototype.on = function(events, priority, callback, that) {\n\n  events = isArray(events) ? events : [ events ];\n\n  if (isFunction(priority)) {\n    that = callback;\n    callback = priority;\n    priority = DEFAULT_PRIORITY;\n  }\n\n  if (!isNumber(priority)) {\n    throw new Error('priority must be a number');\n  }\n\n  var actualCallback = callback;\n\n  if (that) {\n    actualCallback = bind(callback, that);\n\n    // make sure we remember and are able to remove\n    // bound callbacks via {@link #off} using the original\n    // callback\n    actualCallback[FN_REF] = callback[FN_REF] || callback;\n  }\n\n  var self = this;\n\n  events.forEach(function(e) {\n    self._addListener(e, {\n      priority: priority,\n      callback: actualCallback,\n      next: null\n    });\n  });\n};\n\n/**\n * @overlord\n *\n * Register an event listener that is called only once.\n *\n * @template T\n *\n * @param {string|string[]} events to subscribe to\n * @param {number} [priority=1000] the listen priority\n * @param {EventBusEventCallback<T>} callback\n * @param {any} [that] callback context\n */\n/**\n * Register an event listener that is called only once.\n *\n * @template {keyof EventMap} EventName\n *\n * @param {EventName} events to subscribe to\n * @param {number} [priority=1000] listen priority\n * @param {EventBusEventCallback<EventMap[EventName]>} callback\n * @param {any} [that] callback context\n */\nEventBus.prototype.once = function(events, priority, callback, that) {\n  var self = this;\n\n  if (isFunction(priority)) {\n    that = callback;\n    callback = priority;\n    priority = DEFAULT_PRIORITY;\n  }\n\n  if (!isNumber(priority)) {\n    throw new Error('priority must be a number');\n  }\n\n  function wrappedCallback() {\n    wrappedCallback.__isTomb = true;\n\n    var result = callback.apply(that, arguments);\n\n    self.off(events, wrappedCallback);\n\n    return result;\n  }\n\n  // make sure we remember and are able to remove\n  // bound callbacks via {@link #off} using the original\n  // callback\n  wrappedCallback[FN_REF] = callback;\n\n  this.on(events, priority, wrappedCallback);\n};\n\n\n/**\n * Removes event listeners by event and callback.\n *\n * If no callback is given, all listeners for a given event name are being removed.\n *\n * @param {string|string[]} events\n * @param {EventBusEventCallback} [callback]\n */\nEventBus.prototype.off = function(events, callback) {\n\n  events = isArray(events) ? events : [ events ];\n\n  var self = this;\n\n  events.forEach(function(event) {\n    self._removeListener(event, callback);\n  });\n\n};\n\n\n/**\n * Create an event recognized be the event bus.\n *\n * @param {Object} data Event data.\n *\n * @return {Event} An event that will be recognized by the event bus.\n */\nEventBus.prototype.createEvent = function(data) {\n  var event = new InternalEvent();\n\n  event.init(data);\n\n  return event;\n};\n\n\n/**\n * Fires an event.\n *\n * @example\n *\n * ```javascript\n * // fire event by name\n * events.fire('foo');\n *\n * // fire event object with nested type\n * var event = { type: 'foo' };\n * events.fire(event);\n *\n * // fire event with explicit type\n * var event = { x: 10, y: 20 };\n * events.fire('element.moved', event);\n *\n * // pass additional arguments to the event\n * events.on('foo', function(event, bar) {\n *   alert(bar);\n * });\n *\n * events.fire({ type: 'foo' }, 'I am bar!');\n * ```\n *\n * @param {string} [type] event type\n * @param {Object} [data] event or event data\n * @param {...any} [args] additional arguments the callback will be called with.\n *\n * @return {any} The return value. Will be set to `false` if the default was prevented.\n */\nEventBus.prototype.fire = function(type, data) {\n  var event,\n      firstListener,\n      returnValue,\n      args;\n\n  args = slice.call(arguments);\n\n  if (typeof type === 'object') {\n    data = type;\n    type = data.type;\n  }\n\n  if (!type) {\n    throw new Error('no event type specified');\n  }\n\n  firstListener = this._listeners[type];\n\n  if (!firstListener) {\n    return;\n  }\n\n  // we make sure we fire instances of our home made\n  // events here. We wrap them only once, though\n  if (data instanceof InternalEvent) {\n\n    // we are fine, we alread have an event\n    event = data;\n  } else {\n    event = this.createEvent(data);\n  }\n\n  // ensure we pass the event as the first parameter\n  args[0] = event;\n\n  // original event type (in case we delegate)\n  var originalType = event.type;\n\n  // update event type before delegation\n  if (type !== originalType) {\n    event.type = type;\n  }\n\n  try {\n    returnValue = this._invokeListeners(event, args, firstListener);\n  } finally {\n\n    // reset event type after delegation\n    if (type !== originalType) {\n      event.type = originalType;\n    }\n  }\n\n  // set the return value to false if the event default\n  // got prevented and no other return value exists\n  if (returnValue === undefined && event.defaultPrevented) {\n    returnValue = false;\n  }\n\n  return returnValue;\n};\n\n/**\n * Handle an error by firing an event.\n *\n * @param {Error} error The error to be handled.\n *\n * @return {boolean} Whether the error was handled.\n */\nEventBus.prototype.handleError = function(error) {\n  return this.fire('error', { error: error }) === false;\n};\n\n\nEventBus.prototype._destroy = function() {\n  this._listeners = {};\n};\n\n/**\n * @param {Event} event\n * @param {any[]} args\n * @param {EventBusListener} listener\n *\n * @return {any}\n */\nEventBus.prototype._invokeListeners = function(event, args, listener) {\n\n  var returnValue;\n\n  while (listener) {\n\n    // handle stopped propagation\n    if (event.cancelBubble) {\n      break;\n    }\n\n    returnValue = this._invokeListener(event, args, listener);\n\n    listener = listener.next;\n  }\n\n  return returnValue;\n};\n\n/**\n * @param {Event} event\n * @param {any[]} args\n * @param {EventBusListener} listener\n *\n * @return {any}\n */\nEventBus.prototype._invokeListener = function(event, args, listener) {\n\n  var returnValue;\n\n  if (listener.callback.__isTomb) {\n    return returnValue;\n  }\n\n  try {\n\n    // returning false prevents the default action\n    returnValue = invokeFunction(listener.callback, args);\n\n    // stop propagation on return value\n    if (returnValue !== undefined) {\n      event.returnValue = returnValue;\n      event.stopPropagation();\n    }\n\n    // prevent default on return false\n    if (returnValue === false) {\n      event.preventDefault();\n    }\n  } catch (error) {\n    if (!this.handleError(error)) {\n      console.error('unhandled error in event listener', error);\n\n      throw error;\n    }\n  }\n\n  return returnValue;\n};\n\n/**\n * Add new listener with a certain priority to the list\n * of listeners (for the given event).\n *\n * The semantics of listener registration / listener execution are\n * first register, first serve: New listeners will always be inserted\n * after existing listeners with the same priority.\n *\n * Example: Inserting two listeners with priority 1000 and 1300\n *\n *    * before: [ 1500, 1500, 1000, 1000 ]\n *    * after: [ 1500, 1500, (new=1300), 1000, 1000, (new=1000) ]\n *\n * @param {string} event\n * @param {EventBusListener} newListener\n */\nEventBus.prototype._addListener = function(event, newListener) {\n\n  var listener = this._getListeners(event),\n      previousListener;\n\n  // no prior listeners\n  if (!listener) {\n    this._setListeners(event, newListener);\n\n    return;\n  }\n\n  // ensure we order listeners by priority from\n  // 0 (high) to n > 0 (low)\n  while (listener) {\n\n    if (listener.priority < newListener.priority) {\n\n      newListener.next = listener;\n\n      if (previousListener) {\n        previousListener.next = newListener;\n      } else {\n        this._setListeners(event, newListener);\n      }\n\n      return;\n    }\n\n    previousListener = listener;\n    listener = listener.next;\n  }\n\n  // add new listener to back\n  previousListener.next = newListener;\n};\n\n\n/**\n * @param {string} name\n *\n * @return {EventBusListener}\n */\nEventBus.prototype._getListeners = function(name) {\n  return this._listeners[name];\n};\n\n/**\n * @param {string} name\n * @param {EventBusListener} listener\n */\nEventBus.prototype._setListeners = function(name, listener) {\n  this._listeners[name] = listener;\n};\n\nEventBus.prototype._removeListener = function(event, callback) {\n\n  var listener = this._getListeners(event),\n      nextListener,\n      previousListener,\n      listenerCallback;\n\n  if (!callback) {\n\n    // clear listeners\n    this._setListeners(event, null);\n\n    return;\n  }\n\n  while (listener) {\n\n    nextListener = listener.next;\n\n    listenerCallback = listener.callback;\n\n    if (listenerCallback === callback || listenerCallback[FN_REF] === callback) {\n      if (previousListener) {\n        previousListener.next = nextListener;\n      } else {\n\n        // new first listener\n        this._setListeners(event, nextListener);\n      }\n    }\n\n    previousListener = listener;\n    listener = nextListener;\n  }\n};\n\n/**\n * A event that is emitted via the event bus.\n */\nfunction InternalEvent() { }\n\nInternalEvent.prototype.stopPropagation = function() {\n  this.cancelBubble = true;\n};\n\nInternalEvent.prototype.preventDefault = function() {\n  this.defaultPrevented = true;\n};\n\nInternalEvent.prototype.init = function(data) {\n  assign(this, data || {});\n};\n\n\n/**\n * Invoke function. Be fast...\n *\n * @param {Function} fn\n * @param {any[]} args\n *\n * @return {any}\n */\nfunction invokeFunction(fn, args) {\n  return fn.apply(null, args);\n}\n","import { isNil, get, set } from 'min-dash';\r\nimport { countDecimals } from '../render/components/util/numberFieldUtil';\r\nimport Big from 'big.js';\r\n\r\nconst EMAIL_PATTERN = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\r\nconst PHONE_PATTERN = /(\\+|00)(297|93|244|1264|358|355|376|971|54|374|1684|1268|61|43|994|257|32|229|226|880|359|973|1242|387|590|375|501|1441|591|55|1246|673|975|267|236|1|61|41|56|86|225|237|243|242|682|57|269|238|506|53|5999|61|1345|357|420|49|253|1767|45|1809|1829|1849|213|593|20|291|212|34|372|251|358|679|500|33|298|691|241|44|995|44|233|350|224|590|220|245|240|30|1473|299|502|594|1671|592|852|504|385|509|36|62|44|91|246|353|98|964|354|972|39|1876|44|962|81|76|77|254|996|855|686|1869|82|383|965|856|961|231|218|1758|423|94|266|370|352|371|853|590|212|377|373|261|960|52|692|389|223|356|95|382|976|1670|258|222|1664|596|230|265|60|262|264|687|227|672|234|505|683|31|47|977|674|64|968|92|507|64|51|63|680|675|48|1787|1939|850|351|595|970|689|974|262|40|7|250|966|249|221|65|500|4779|677|232|503|378|252|508|381|211|239|597|421|386|46|268|1721|248|963|1649|235|228|66|992|690|993|670|676|1868|216|90|688|886|255|256|380|598|1|998|3906698|379|1784|58|1284|1340|84|678|681|685|967|27|260|263)(9[976]\\d|8[987530]\\d|6[987]\\d|5[90]\\d|42\\d|3[875]\\d|2[98654321]\\d|9[8543210]|8[6421]|6[6543210]|5[87654321]|4[987654310]|3[9643210]|2[70]|7|1)\\d{4,20}$/;\r\n\r\nconst VALIDATE_FEEL_PROPERTIES = [\r\n  'min',\r\n  'max',\r\n  'minLength',\r\n  'maxLength'\r\n];\r\n\r\nexport class Validator {\r\n\r\n  constructor(expressionLanguage, conditionChecker, form) {\r\n    this._expressionLanguage = expressionLanguage;\r\n    this._conditionChecker = conditionChecker;\r\n    this._form = form;\r\n  }\r\n\r\n  validateField(field, value) {\r\n\r\n    const { type, validate } = field;\r\n\r\n    let errors = [];\r\n\r\n    if (type === 'number') {\r\n\r\n      const { decimalDigits, increment } = field;\r\n\r\n      if (value === 'NaN') {\r\n\r\n        errors = [\r\n          ...errors,\r\n          'Hodnota musí být platné číslo.'\r\n        ];\r\n\r\n      }\r\n      else if (value) {\r\n\r\n        if (decimalDigits >= 0 && countDecimals(value) > decimalDigits) {\r\n          errors = [\r\n            ...errors,\r\n            'Hodnota musí ' +\r\n            (decimalDigits === 0\r\n              ? 'být platné celé číslo'\r\n              : `obsahovat maximálně ${decimalDigits} desetinných míst`\r\n            ) + '.'\r\n          ];\r\n        }\r\n\r\n        if (increment) {\r\n\r\n          const bigValue = Big(value);\r\n          const bigIncrement = Big(increment);\r\n\r\n          const offset = bigValue.mod(bigIncrement);\r\n\r\n          if (offset.cmp(0) !== 0) {\r\n            const previousValue = bigValue.minus(offset);\r\n            const nextValue = previousValue.plus(bigIncrement);\r\n\r\n            errors = [\r\n              ...errors,\r\n              `Prosím, zvolte platnou hodnotu. Dvě nejbližší hodnoty jsou ${previousValue} a ${nextValue}.`\r\n            ];\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    if (!validate) {\r\n      return errors;\r\n    }\r\n\r\n    const evaluatedValidation = evaluateFEELValues(\r\n      validate,\r\n      this._expressionLanguage,\r\n      this._conditionChecker,\r\n      this._form\r\n    );\r\n\r\n    if (evaluatedValidation.pattern && value && !new RegExp(evaluatedValidation.pattern).test(value)) {\r\n      errors = [\r\n        ...errors,\r\n        `Hodnota splňovat regulární výraz ${ evaluatedValidation.pattern }.`\r\n      ];\r\n    }\r\n\r\n    if (evaluatedValidation.required) {\r\n      const isUncheckedCheckbox = type === 'checkbox' && value === false;\r\n      const isUnsetValue = isNil(value) || value === '';\r\n      const isEmptyMultiselect = Array.isArray(value) && value.length === 0;\r\n\r\n      if (isUncheckedCheckbox || isUnsetValue || isEmptyMultiselect) {\r\n        errors = [\r\n          ...errors,\r\n          'Povinné pole.'\r\n        ];\r\n      }\r\n    }\r\n\r\n    if ('min' in evaluatedValidation && (value || value === 0) && value < evaluatedValidation.min) {\r\n      errors = [\r\n        ...errors,\r\n        `Hodnota musí být větší nebo rovna ${ evaluatedValidation.min }.`\r\n      ];\r\n    }\r\n\r\n    if ('max' in evaluatedValidation && (value || value === 0) && value > evaluatedValidation.max) {\r\n      errors = [\r\n        ...errors,\r\n        `Hodnota musí být menší nebo rovna ${ evaluatedValidation.max }.`\r\n      ];\r\n    }\r\n\r\n    if ('minLength' in evaluatedValidation && value && value.trim().length < evaluatedValidation.minLength) {\r\n      errors = [\r\n        ...errors,\r\n        `Hodnota musí být dlouhá alespoň ${ evaluatedValidation.minLength } znaků.`\r\n      ];\r\n    }\r\n\r\n    if ('maxLength' in evaluatedValidation && value && value.trim().length > evaluatedValidation.maxLength) {\r\n      errors = [\r\n        ...errors,\r\n        `Hodnota nesmí být delší než ${ evaluatedValidation.maxLength } znaků.`\r\n      ];\r\n    }\r\n\r\n    if ('validationType' in evaluatedValidation && value && evaluatedValidation.validationType === 'phone' && !PHONE_PATTERN.test(value)) {\r\n      errors = [\r\n        ...errors,\r\n        'Hodnota musí být platné mezinárodní telefonní číslo. (např. +4930664040900)'\r\n      ];\r\n    }\r\n\r\n    if ('validationType' in evaluatedValidation && value && evaluatedValidation.validationType === 'email' && !EMAIL_PATTERN.test(value)) {\r\n      errors = [\r\n        ...errors,\r\n        'Hodnota musí být platný email.'\r\n      ];\r\n    }\r\n\r\n    return errors;\r\n  }\r\n}\r\n\r\nValidator.$inject = [ 'expressionLanguage', 'conditionChecker', 'form' ];\r\n\r\n\r\n// helpers //////////\r\n\r\n/**\r\n * Helper function to evaluate optional FEEL validation values.\r\n */\r\nfunction evaluateFEELValues(validate, expressionLanguage, conditionChecker, form) {\r\n\r\n  const evaluatedValidate = { ...validate };\r\n\r\n  VALIDATE_FEEL_PROPERTIES.forEach(property => {\r\n    const path = property.split('.');\r\n\r\n    const value = get(evaluatedValidate, path);\r\n\r\n    // mirroring FEEL evaluation of our hooks\r\n    if (!expressionLanguage || !expressionLanguage.isExpression(value)) {\r\n      return value;\r\n    }\r\n\r\n    const { initialData, data } = form._getState();\r\n\r\n    const newData = conditionChecker ? conditionChecker.applyConditions(data, data) : data;\r\n    const filteredData = { ...initialData, ...newData };\r\n\r\n    const evaluatedValue = expressionLanguage.evaluate(value, filteredData);\r\n\r\n    // replace validate property with evaluated value\r\n    if (evaluatedValue) {\r\n      set(evaluatedValidate, path, evaluatedValue);\r\n    }\r\n  });\r\n\r\n  return evaluatedValidate;\r\n}","import { clone } from '../util';\r\n\r\nexport class Importer {\r\n\r\n  /**\r\n   * @constructor\r\n   * @param { import('./FormFieldRegistry').FormFieldRegistry } formFieldRegistry\r\n   * @param { import('./PathRegistry').PathRegistry } pathRegistry\r\n   * @param { import('./FieldFactory').FieldFactory } fieldFactory\r\n   * @param { import('./FormLayouter').FormLayouter } formLayouter\r\n   */\r\n  constructor(formFieldRegistry, pathRegistry, fieldFactory, formLayouter) {\r\n    this._formFieldRegistry = formFieldRegistry;\r\n    this._pathRegistry = pathRegistry;\r\n    this._fieldFactory = fieldFactory;\r\n    this._formLayouter = formLayouter;\r\n  }\r\n\r\n  /**\r\n   * Import schema creating rows, fields, attaching additional\r\n   * information to each field and adding fields to the\r\n   * field registry.\r\n   *\r\n   * Additional information attached:\r\n   *\r\n   *   * `id` (unless present)\r\n   *   * `_parent`\r\n   *   * `_path`\r\n   *\r\n   * @param {any} schema\r\n   *\r\n   * @typedef {{ warnings: Error[], schema: any }} ImportResult\r\n   * @returns {ImportResult}\r\n   */\r\n  importSchema(schema) {\r\n\r\n    // TODO: Add warnings\r\n    const warnings = [];\r\n\r\n    try {\r\n      this._cleanup();\r\n      const importedSchema = this.importFormField(clone(schema));\r\n      this._formLayouter.calculateLayout(clone(importedSchema));\r\n\r\n      return {\r\n        schema: importedSchema,\r\n        warnings\r\n      };\r\n    } catch (err) {\r\n      this._cleanup();\r\n      err.warnings = warnings;\r\n      throw err;\r\n    }\r\n  }\r\n\r\n  _cleanup() {\r\n    this._formLayouter.clear();\r\n    this._formFieldRegistry.clear();\r\n    this._pathRegistry.clear();\r\n  }\r\n\r\n  /**\r\n   * @param {{[x: string]: any}} fieldAttrs\r\n   * @param {String} [parentId]\r\n   * @param {number} [index]\r\n   *\r\n   * @return {any} field\r\n   */\r\n  importFormField(fieldAttrs, parentId, index) {\r\n    const {\r\n      components\r\n    } = fieldAttrs;\r\n\r\n    let parent, path;\r\n\r\n    if (parentId) {\r\n      parent = this._formFieldRegistry.get(parentId);\r\n    }\r\n\r\n    // set form field path\r\n    path = parent ? [ ...parent._path, 'components', index ] : [];\r\n\r\n    const field = this._fieldFactory.create({\r\n      ...fieldAttrs,\r\n      _path: path,\r\n      _parent: parentId\r\n    }, false);\r\n\r\n    this._formFieldRegistry.add(field);\r\n\r\n    if (components) {\r\n      field.components = this.importFormFields(components, field.id);\r\n    }\r\n\r\n    return field;\r\n  }\r\n\r\n  /**\r\n   * @param {Array<any>} components\r\n   * @param {string} parentId\r\n   *\r\n   * @return {Array<any>} imported components\r\n   */\r\n  importFormFields(components, parentId) {\r\n    return components.map((component, index) => {\r\n      return this.importFormField(component, parentId, index);\r\n    });\r\n  }\r\n\r\n}\r\n\r\nImporter.$inject = [ 'formFieldRegistry', 'pathRegistry', 'fieldFactory', 'formLayouter' ];","import { getAncestryList } from '../util';\r\n\r\nexport class FieldFactory {\r\n\r\n  /**\r\n   * @constructor\r\n   *\r\n   * @param  formFieldRegistry\r\n   * @param  formFields\r\n   */\r\n  constructor(formFieldRegistry, pathRegistry, formFields) {\r\n    this._formFieldRegistry = formFieldRegistry;\r\n    this._pathRegistry = pathRegistry;\r\n    this._formFields = formFields;\r\n  }\r\n\r\n  create(attrs, applyDefaults = true) {\r\n\r\n    const {\r\n      id,\r\n      type,\r\n      key,\r\n      path,\r\n      _parent\r\n    } = attrs;\r\n\r\n    const fieldDefinition = this._formFields.get(type);\r\n\r\n    if (!fieldDefinition) {\r\n      throw new Error(`form field of type <${ type }> not supported`);\r\n    }\r\n\r\n    const { config } = fieldDefinition;\r\n\r\n    if (!config) {\r\n      throw new Error(`form field of type <${ type }> has no config`);\r\n    }\r\n\r\n    if (id && this._formFieldRegistry._ids.assigned(id)) {\r\n      throw new Error(`form field with id <${ id }> already exists`);\r\n    }\r\n\r\n    // ensure that we can claim the path\r\n\r\n    const parent = _parent && this._formFieldRegistry.get(_parent);\r\n    const parentPath = parent && this._pathRegistry.getValuePath(parent) || [];\r\n    const knownAncestorIds = getAncestryList(_parent, this._formFieldRegistry);\r\n\r\n    if (config.keyed && key && !this._pathRegistry.canClaimPath([ ...parentPath, ...key.split('.') ],\r\n      {\r\n        isClosed: true,\r\n        knownAncestorIds\r\n      })\r\n    ) {\r\n      throw new Error(`binding path '${ [ ...parentPath, key ].join('.') }' is already claimed`);\r\n    }\r\n\r\n    if (config.pathed && path && !this._pathRegistry.canClaimPath([ ...parentPath, ...path.split('.') ],\r\n      {\r\n        isRepeatable: config.repeatable,\r\n        knownAncestorIds\r\n      })\r\n    ) {\r\n      throw new Error(`binding path '${ [ ...parentPath, ...path.split('.') ].join('.') }' is already claimed`);\r\n    }\r\n\r\n    const labelAttrs = applyDefaults && config.label ? {\r\n      label: config.label\r\n    } : {};\r\n\r\n    const field = config.create({\r\n      ...labelAttrs,\r\n      ...attrs\r\n    });\r\n\r\n    this._ensureId(field);\r\n\r\n    if (config.keyed) {\r\n      this._ensureKey(field);\r\n      this._pathRegistry.claimPath(this._pathRegistry.getValuePath(field), { isClosed: true, claimerId: field.id, knownAncestorIds: getAncestryList(_parent, this._formFieldRegistry) });\r\n    }\r\n\r\n    if (config.pathed) {\r\n      if (config.repeatable) {\r\n        this._enforceDefaultPath(field);\r\n      }\r\n\r\n      if (field.path) {\r\n        this._pathRegistry.claimPath(this._pathRegistry.getValuePath(field), { isRepeatable: config.repeatable, claimerId: field.id, knownAncestorIds: getAncestryList(_parent, this._formFieldRegistry) });\r\n      }\r\n    }\r\n\r\n    return field;\r\n  }\r\n\r\n  _ensureId(field) {\r\n\r\n    if (field.id) {\r\n      this._formFieldRegistry._ids.claim(field.id, field);\r\n\r\n      return;\r\n    }\r\n\r\n    let prefix = 'Field';\r\n\r\n    if (field.type === 'default') {\r\n      prefix = 'Form';\r\n    }\r\n\r\n    field.id = this._formFieldRegistry._ids.nextPrefixed(`${prefix}_`, field);\r\n  }\r\n\r\n  _ensureKey(field) {\r\n    if (!field.key) {\r\n      field.key = this._getUniqueKeyPath(field);\r\n    }\r\n  }\r\n\r\n  _enforceDefaultPath(field) {\r\n    if (!field.path) {\r\n      field.path = this._getUniqueKeyPath(field);\r\n    }\r\n  }\r\n\r\n  _getUniqueKeyPath(field) {\r\n\r\n    let random;\r\n    const parent = this._formFieldRegistry.get(field._parent);\r\n\r\n    // ensure key uniqueness at level\r\n    do {\r\n      random = Math.random().toString(36).substring(7);\r\n    } while (parent && parent.components.some(child => child.key === random));\r\n\r\n    return `${field.type}_${random}`;\r\n  }\r\n\r\n}\r\n\r\n\r\nFieldFactory.$inject = [\r\n  'formFieldRegistry',\r\n  'pathRegistry',\r\n  'formFields'\r\n];","import { isArray } from 'min-dash';\r\nimport { clone, getAncestryList } from '../util';\r\n\r\n/**\r\n * The PathRegistry class manages a hierarchical structure of paths associated with form fields.\r\n * It enables claiming, unclaiming, and validating paths within this structure.\r\n *\r\n * Example Tree Structure:\r\n *\r\n *   [\r\n *     {\r\n *       segment: 'root',\r\n *       claimCount: 1,\r\n *       children: [\r\n *         {\r\n *           segment: 'child1',\r\n *           claimCount: 2,\r\n *           children: null  // A leaf node (closed path)\r\n *         },\r\n *         {\r\n *           segment: 'child2',\r\n *           claimCount: 1,\r\n *           children: [\r\n *             {\r\n *               segment: 'subChild1',\r\n *               claimCount: 1,\r\n *               children: []  // An open node (open path)\r\n *             }\r\n *           ]\r\n *         }\r\n *       ]\r\n *     }\r\n *   ]\r\n */\r\nexport class PathRegistry {\r\n  constructor(formFieldRegistry, formFields, injector) {\r\n    this._formFieldRegistry = formFieldRegistry;\r\n    this._formFields = formFields;\r\n    this._injector = injector;\r\n    this._dataPaths = [];\r\n  }\r\n\r\n  canClaimPath(path, options = {}) {\r\n\r\n    const {\r\n      isClosed = false,\r\n      isRepeatable = false,\r\n      skipAncestryCheck = false,\r\n      claimerId = null,\r\n      knownAncestorIds = []\r\n    } = options;\r\n\r\n    let node = { children: this._dataPaths };\r\n\r\n    // (1) if we reach a leaf node, we cannot claim it, if we reach an open node, we can\r\n    // if we reach a repeatable node, we need to ensure that the claimer is (or will be) an ancestor of the repeater\r\n    for (const segment of path) {\r\n\r\n      node = _getNextSegment(node, segment);\r\n\r\n      if (!node) {\r\n        return true;\r\n      }\r\n\r\n      if (node.isRepeatable && !skipAncestryCheck) {\r\n\r\n        if (!(claimerId || knownAncestorIds.length)) {\r\n          throw new Error('cannot claim a path that contains a repeater without specifying a claimerId or knownAncestorIds');\r\n        }\r\n\r\n        const isValidRepeatClaim =\r\n          knownAncestorIds.includes(node.repeaterId) ||\r\n          claimerId && getAncestryList(claimerId, this._formFieldRegistry).includes(node.repeaterId);\r\n\r\n        if (!isValidRepeatClaim) {\r\n          return false;\r\n        }\r\n      }\r\n\r\n      if (node.children === null) {\r\n        return false;\r\n      }\r\n\r\n    }\r\n\r\n    // (2) if the path lands in the middle of the tree, we can only claim an open, non-repeatable path\r\n    return !(isClosed || isRepeatable);\r\n  }\r\n\r\n  claimPath(path, options = {}) {\r\n\r\n    const {\r\n      isClosed = false,\r\n      isRepeatable = false,\r\n      claimerId = null,\r\n      knownAncestorIds = []\r\n    } = options;\r\n\r\n    if (!this.canClaimPath(path, { isClosed, isRepeatable, claimerId, knownAncestorIds })) {\r\n      throw new Error(`cannot claim path '${ path.join('.') }'`);\r\n    }\r\n\r\n    let node = { children: this._dataPaths };\r\n\r\n    for (const segment of path) {\r\n\r\n      let child = _getNextSegment(node, segment);\r\n\r\n      if (!child) {\r\n        child = { segment, claimCount: 1, children: [] };\r\n        node.children.push(child);\r\n      }\r\n      else {\r\n        child.claimCount++;\r\n      }\r\n\r\n      node = child;\r\n    }\r\n\r\n    if (isClosed) {\r\n      node.children = null;\r\n    }\r\n\r\n    // add some additional info when we make a repeatable path claim\r\n    if (isRepeatable) {\r\n      node.isRepeatable = true;\r\n      node.repeaterId = claimerId;\r\n    }\r\n\r\n  }\r\n\r\n  unclaimPath(path) {\r\n\r\n    // verification Pass\r\n    let node = { children: this._dataPaths };\r\n    for (const segment of path) {\r\n      const child = _getNextSegment(node, segment);\r\n      if (!child) {\r\n        throw new Error(`no open path found for '${ path.join('.') }'`);\r\n      }\r\n      node = child;\r\n    }\r\n\r\n    // mutation Pass\r\n    node = { children: this._dataPaths };\r\n    for (const segment of path) {\r\n      const child = _getNextSegment(node, segment);\r\n\r\n      child.claimCount--;\r\n\r\n      if (child.claimCount === 0) {\r\n        node.children.splice(node.children.indexOf(child), 1);\r\n        break; // Abort early if claimCount reaches zero\r\n      }\r\n\r\n      node = child;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Applies a function (fn) recursively on a given field and its children.\r\n   *\r\n   * - `field`: Starting field object.\r\n   * - `fn`: Function to apply.\r\n   * - `context`: Optional object for passing data between calls.\r\n   *\r\n   * Stops early if `fn` returns `false`. Useful for traversing the form field tree.\r\n   *\r\n   * @returns {boolean} Success status based on function execution.\r\n   */\r\n  executeRecursivelyOnFields(field, fn, context = {}) {\r\n\r\n    let result = true;\r\n\r\n    const formFieldConfig = this._formFields.get(field.type).config;\r\n\r\n    if (formFieldConfig.keyed) {\r\n      const callResult = fn({ field, isClosed: true, isRepeatable: false, context });\r\n      return result && callResult;\r\n    }\r\n    else if (formFieldConfig.pathed) {\r\n      const callResult = fn({ field, isClosed: false, isRepeatable: formFieldConfig.repeatable, context });\r\n      result = result && callResult;\r\n    }\r\n\r\n    // stop executing if false is specifically returned or if preventing recursion\r\n    if (result === false || context.preventRecursion) {\r\n      return result;\r\n    }\r\n\r\n    if (Array.isArray(field.components)) {\r\n      for (const child of field.components) {\r\n        const callResult = this.executeRecursivelyOnFields(child, fn, clone(context));\r\n        result = result && callResult;\r\n\r\n        // stop executing if false is specifically returned\r\n        if (result === false) {\r\n          return result;\r\n        }\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Generates an array representing the binding path to an underlying data object for a form field.\r\n   *\r\n   * @param {Object} field - The field object with properties: `key`, `path`, `id`, and optionally `_parent`.\r\n   * @param {Object} [options={}] - Configuration options.\r\n   * @param {Object} [options.replacements={}] - A map of field IDs to alternative path arrays.\r\n   * @param {Object} [options.indexes=null] - A map of parent IDs to the index of the field within said parent, leave null to get an unindexed path.\r\n   * @param {Object} [options.cutoffNode] - The ID of the parent field at which to stop generating the path.\r\n   *\r\n   * @returns {(Array<string>|undefined)} An array of strings representing the binding path, or undefined if not determinable.\r\n   */\r\n  getValuePath(field, options = {}) {\r\n    const {\r\n      replacements = {},\r\n      indexes = null,\r\n      cutoffNode = null\r\n    } = options;\r\n\r\n    let localValuePath = [];\r\n\r\n    const hasReplacement = Object.prototype.hasOwnProperty.call(replacements, field.id);\r\n    const formFieldConfig = this._formFields.get(field.type).config;\r\n\r\n    // uses path overrides instead of true path to calculate a potential value path\r\n    if (hasReplacement) {\r\n      const replacement = replacements[field.id];\r\n\r\n      if (replacement === null || replacement === undefined || replacement === '') {\r\n        localValuePath = [];\r\n      } else if (typeof replacement === 'string') {\r\n        localValuePath = replacement.split('.');\r\n      } else if (Array.isArray(replacement)) {\r\n        localValuePath = replacement;\r\n      } else {\r\n        throw new Error(`replacements for field ${ field.id } must be a string, array or null/undefined`);\r\n      }\r\n\r\n    } else if (formFieldConfig.keyed) {\r\n      localValuePath = field.key.split('.');\r\n    } else if (formFieldConfig.pathed && field.path) {\r\n      localValuePath = field.path.split('.');\r\n    }\r\n\r\n    // add potential indexes of repeated fields\r\n    if (indexes) {\r\n      localValuePath = this._addIndexes(localValuePath, field, indexes);\r\n    }\r\n\r\n    // if parent exists and isn't cutoff node, add parent's value path\r\n    if (field._parent && field._parent !== cutoffNode) {\r\n      const parent = this._formFieldRegistry.get(field._parent);\r\n      return [ ...(this.getValuePath(parent, options) || []), ...localValuePath ];\r\n    }\r\n\r\n    return localValuePath;\r\n  }\r\n\r\n  clear() {\r\n    this._dataPaths = [];\r\n  }\r\n\r\n  _addIndexes(localValuePath, field, indexes) {\r\n\r\n    const repeatRenderManager = this._injector.get('repeatRenderManager', false);\r\n\r\n    if (repeatRenderManager && repeatRenderManager.isFieldRepeating(field._parent)) {\r\n      return [ indexes[field._parent], ...localValuePath ];\r\n    }\r\n\r\n    return localValuePath;\r\n  }\r\n}\r\n\r\nconst _getNextSegment = (node, segment) => {\r\n  if (isArray(node.children)) { return node.children.find((node) => node.segment === segment) || null; }\r\n  return null;\r\n};\r\n\r\nPathRegistry.$inject = [ 'formFieldRegistry', 'formFields', 'injector' ];","import Ids from 'ids';\r\n\r\nimport { groupBy } from 'min-dash';\r\n\r\n\r\n/**\r\n * @typedef { { id: String, components: Array<String> } } FormRow\r\n * @typedef { { formFieldId: String, rows: Array<FormRow> } } FormRows\r\n */\r\n\r\n/**\r\n * Maintains the Form layout in a given structure, for example\r\n *\r\n *  [\r\n *    {\r\n *      formFieldId: 'FormField_1',\r\n *      rows: [\r\n *        { id: 'Row_1', components: [ 'Text_1', 'Textdield_1', ... ]  }\r\n *      ]\r\n *    }\r\n *  ]\r\n *\r\n */\r\nexport class FormLayouter {\r\n\r\n  constructor(eventBus) {\r\n\r\n    /** @type Array<FormRows>  */\r\n    this._rows = [];\r\n    this._ids = new Ids([ 32, 36, 1 ]);\r\n\r\n    this._eventBus = eventBus;\r\n  }\r\n\r\n  /**\r\n   * @param {FormRow} row\r\n   */\r\n  addRow(formFieldId, row) {\r\n    let rowsPerComponent = this._rows.find(r => r.formFieldId === formFieldId);\r\n\r\n    if (!rowsPerComponent) {\r\n      rowsPerComponent = {\r\n        formFieldId,\r\n        rows: []\r\n      };\r\n\r\n      this._rows.push(rowsPerComponent);\r\n    }\r\n\r\n    rowsPerComponent.rows.push(row);\r\n  }\r\n\r\n  /**\r\n   * @param {String} id\r\n   * @returns {FormRow}\r\n   */\r\n  getRow(id) {\r\n    const rows = allRows(this._rows);\r\n    return rows.find(r => r.id === id);\r\n  }\r\n\r\n  /**\r\n   * @param {any} formField\r\n   * @returns {FormRow}\r\n   */\r\n  getRowForField(formField) {\r\n    return allRows(this._rows).find(r => {\r\n      const { components } = r;\r\n\r\n      return components.includes(formField.id);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @param {String} formFieldId\r\n   * @returns { Array<FormRow> }\r\n   */\r\n  getRows(formFieldId) {\r\n    const rowsForField = this._rows.find(r => formFieldId === r.formFieldId);\r\n\r\n    if (!rowsForField) {\r\n      return [];\r\n    }\r\n\r\n    return rowsForField.rows;\r\n  }\r\n\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  nextRowId() {\r\n    return this._ids.nextPrefixed('Row_');\r\n  }\r\n\r\n  /**\r\n   * @param {any} formField\r\n   */\r\n  calculateLayout(formField) {\r\n\r\n    const {\r\n      type,\r\n      components\r\n    } = formField;\r\n\r\n    if (![ 'default', 'group', 'dynamiclist' ].includes(type) || !components) {\r\n      return;\r\n    }\r\n\r\n    // (1) calculate rows order (by component order)\r\n    const rowsInOrder = groupByRow(components, this._ids);\r\n\r\n    Object.entries(rowsInOrder).forEach(([ id, components ]) => {\r\n\r\n      // (2) add fields to rows\r\n      this.addRow(formField.id, {\r\n        id: id,\r\n        components: components.map(c => c.id)\r\n      });\r\n    });\r\n\r\n    // (3) traverse through nested components\r\n    components.forEach(field => this.calculateLayout(field));\r\n\r\n    // (4) fire event to notify interested parties\r\n    this._eventBus.fire('form.layoutCalculated', { rows: this._rows });\r\n  }\r\n\r\n  clear() {\r\n    this._rows = [];\r\n    this._ids.clear();\r\n\r\n    // fire event to notify interested parties\r\n    this._eventBus.fire('form.layoutCleared');\r\n  }\r\n}\r\n\r\nFormLayouter.$inject = [ 'eventBus' ];\r\n\r\n\r\n// helpers //////\r\n\r\nfunction groupByRow(components, ids) {\r\n  return groupBy(components, c => {\r\n\r\n    // mitigate missing row by creating new (handle legacy)\r\n    const { layout } = c;\r\n\r\n    if (!layout || !layout.row) {\r\n      return ids.nextPrefixed('Row_');\r\n    }\r\n\r\n    return layout.row;\r\n  });\r\n}\r\n\r\n/**\r\n * @param {Array<FormRows>} formRows\r\n * @returns {Array<FormRow>}\r\n */\r\nfunction allRows(formRows) {\r\n  return formRows.map(r => r.rows).flat();\r\n}","import Ids from 'ids';\r\n\r\nexport class FormFieldRegistry {\r\n  constructor(eventBus) {\r\n    this._eventBus = eventBus;\r\n\r\n    this._formFields = {};\r\n\r\n    eventBus.on('form.clear', () => this.clear());\r\n\r\n    this._ids = new Ids([ 32, 36, 1 ]);\r\n  }\r\n\r\n  add(formField) {\r\n    const { id } = formField;\r\n\r\n    if (this._formFields[ id ]) {\r\n      throw new Error(`form field with ID ${ id } already exists`);\r\n    }\r\n\r\n    this._eventBus.fire('formField.add', { formField });\r\n\r\n    this._formFields[ id ] = formField;\r\n  }\r\n\r\n  remove(formField) {\r\n    const { id } = formField;\r\n\r\n    if (!this._formFields[ id ]) {\r\n      return;\r\n    }\r\n\r\n    this._eventBus.fire('formField.remove', { formField });\r\n\r\n    delete this._formFields[ id ];\r\n  }\r\n\r\n  get(id) {\r\n    return this._formFields[ id ];\r\n  }\r\n\r\n  getAll() {\r\n    return Object.values(this._formFields);\r\n  }\r\n\r\n  getForm() {\r\n    return this.getAll().find((formField) => formField.type === 'default');\r\n  }\r\n\r\n  forEach(callback) {\r\n    this.getAll().forEach((formField) => callback(formField));\r\n  }\r\n\r\n  clear() {\r\n    this._formFields = {};\r\n\r\n    this._ids.clear();\r\n  }\r\n\r\n}\r\n\r\nFormFieldRegistry.$inject = [ 'eventBus' ];","import { render } from 'preact';\r\nimport { useCallback, useState } from 'preact/hooks';\r\n\r\nimport { FormComponent } from './components/FormComponent';\r\nimport { FormContext } from './context';\r\n\r\n/**\r\n * @typedef { { container } } Config\r\n * @typedef { import('didi').Injector } Injector\r\n * @typedef { import('../core/EventBus').EventBus } EventBus\r\n * @typedef { import('../Form').Form } Form\r\n */\r\n\r\n/**\r\n * @param {Config} config\r\n * @param {EventBus} eventBus\r\n * @param {Form} form\r\n * @param {Injector} injector\r\n */\r\nexport function Renderer(config, eventBus, form, injector) {\r\n\r\n  const App = () => {\r\n    const [ state, setState ] = useState(form._getState());\r\n\r\n    const formContext = {\r\n      getService(type, strict = true) {\r\n        return injector.get(type, strict);\r\n      },\r\n      formId: form._id\r\n    };\r\n\r\n    eventBus.on('changed', (newState) => {\r\n      setState(newState);\r\n    });\r\n\r\n    const onChange = useCallback((update) => form._update(update), []);\r\n\r\n    const { properties } = state;\r\n\r\n    const { readOnly } = properties;\r\n\r\n    const onSubmit = useCallback(() => {\r\n      if (!readOnly) {\r\n        form.submit();\r\n      }\r\n    }, [ readOnly ]);\r\n\r\n    const onReset = useCallback(() => form.reset(), []);\r\n\r\n    const { schema } = state;\r\n\r\n    if (!schema) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <FormContext.Provider value={ formContext }>\r\n        <FormComponent\r\n          onChange={ onChange }\r\n          onSubmit={ onSubmit }\r\n          onReset={ onReset } />\r\n      </FormContext.Provider>\r\n    );\r\n  };\r\n\r\n  const { container } = config;\r\n\r\n  eventBus.on('form.init', () => {\r\n    render(<App />, container);\r\n  });\r\n\r\n  eventBus.on('form.destroy', () => {\r\n    render(null, container);\r\n  });\r\n}\r\n\r\nRenderer.$inject = [ 'config.renderer', 'eventBus', 'form', 'injector' ];","import { FormFields } from './FormFields';\r\nimport { Renderer } from './Renderer';\r\n\r\nexport { FormFields };\r\n\r\nexport * from './components';\r\nexport * from './context';\r\nexport {\r\n  useExpressionEvaluation,\r\n  useSingleLineTemplateEvaluation,\r\n  useTemplateEvaluation\r\n} from './hooks';\r\n\r\nexport const RenderModule = {\r\n  __init__: [ 'formFields', 'renderer' ],\r\n  formFields: [ 'type', FormFields ],\r\n  renderer: [ 'type', Renderer ]\r\n};","import { EventBus } from './EventBus';\r\nimport { Validator } from './Validator';\r\nimport { Importer } from './Importer';\r\nimport { FieldFactory } from './FieldFactory';\r\nimport { PathRegistry } from './PathRegistry';\r\nimport { FormLayouter } from './FormLayouter';\r\nimport { FormFieldRegistry } from './FormFieldRegistry';\r\n\r\nimport { RenderModule } from '../render';\r\n\r\nexport { Importer, FieldFactory, FormFieldRegistry, PathRegistry, FormLayouter };\r\n\r\nexport const CoreModule = {\r\n  __depends__: [ RenderModule ],\r\n  eventBus: [ 'type', EventBus ],\r\n  importer: [ 'type', Importer ],\r\n  fieldFactory: [ 'type', FieldFactory ],\r\n  formFieldRegistry: [ 'type', FormFieldRegistry ],\r\n  pathRegistry: [ 'type', PathRegistry ],\r\n  formLayouter: [ 'type', FormLayouter ],\r\n  validator: [ 'type', Validator ]\r\n};","import Ids from 'ids';\r\nimport { get, isObject, isString, isUndefined, set } from 'min-dash';\r\n\r\nimport {\r\n  ExpressionLanguageModule,\r\n  MarkdownRendererModule,\r\n  ViewerCommandsModule,\r\n  RepeatRenderModule\r\n} from './features';\r\n\r\nimport { CoreModule } from './core';\r\n\r\nimport { clone, createFormContainer, createInjector } from './util';\r\n\r\n/**\r\n * @typedef { import('./types').Injector } Injector\r\n * @typedef { import('./types').Data } Data\r\n * @typedef { import('./types').Errors } Errors\r\n * @typedef { import('./types').Schema } Schema\r\n * @typedef { import('./types').FormProperties } FormProperties\r\n * @typedef { import('./types').FormProperty } FormProperty\r\n * @typedef { import('./types').FormEvent } FormEvent\r\n * @typedef { import('./types').FormOptions } FormOptions\r\n *\r\n * @typedef { {\r\n *   data: Data,\r\n *   initialData: Data,\r\n *   errors: Errors,\r\n *   properties: FormProperties,\r\n *   schema: Schema\r\n * } } State\r\n *\r\n * @typedef { (type:FormEvent, priority:number, handler:Function) => void } OnEventWithPriority\r\n * @typedef { (type:FormEvent, handler:Function) => void } OnEventWithOutPriority\r\n * @typedef { OnEventWithPriority & OnEventWithOutPriority } OnEventType\r\n */\r\n\r\nconst ids = new Ids([ 32, 36, 1 ]);\r\n\r\n/**\r\n * The form.\r\n */\r\nexport class Form {\r\n\r\n  /**\r\n   * @constructor\r\n   * @param {FormOptions} options\r\n   */\r\n  constructor(options = {}) {\r\n\r\n    /**\r\n     * @public\r\n     * @type {OnEventType}\r\n     */\r\n    this.on = this._onEvent;\r\n\r\n    /**\r\n     * @public\r\n     * @type {String}\r\n     */\r\n    this._id = ids.next();\r\n\r\n    /**\r\n     * @private\r\n     * @type {Element}\r\n     */\r\n    this._container = createFormContainer();\r\n\r\n    const {\r\n      container,\r\n      injector = this._createInjector(options, this._container),\r\n      properties = {}\r\n    } = options;\r\n\r\n    /**\r\n     * @private\r\n     * @type {State}\r\n     */\r\n    this._state = {\r\n      initialData: null,\r\n      data: null,\r\n      properties,\r\n      errors: {},\r\n      schema: null\r\n    };\r\n\r\n    this.get = injector.get;\r\n\r\n    this.invoke = injector.invoke;\r\n\r\n    this.get('eventBus').fire('form.init');\r\n\r\n    if (container) {\r\n      this.attachTo(container);\r\n    }\r\n  }\r\n\r\n  clear() {\r\n\r\n    // clear diagram services (e.g. EventBus)\r\n    this._emit('diagram.clear');\r\n\r\n    // clear form services\r\n    this._emit('form.clear');\r\n  }\r\n\r\n  /**\r\n   * Destroy the form, removing it from DOM,\r\n   * if attached.\r\n   */\r\n  destroy() {\r\n\r\n    // destroy form services\r\n    this.get('eventBus').fire('form.destroy');\r\n\r\n    // destroy diagram services (e.g. EventBus)\r\n    this.get('eventBus').fire('diagram.destroy');\r\n\r\n    this._detach(false);\r\n  }\r\n\r\n  /**\r\n   * Open a form schema with the given initial data.\r\n   *\r\n   * @param {Schema} schema\r\n   * @param {Data} [data]\r\n   *\r\n   * @return Promise<{ warnings: Array<any> }>\r\n   */\r\n  importSchema(schema, data = {}) {\r\n    return new Promise((resolve, reject) => {\r\n      try {\r\n        this.clear();\r\n\r\n        const {\r\n          schema: importedSchema,\r\n          warnings\r\n        } = this.get('importer').importSchema(schema);\r\n\r\n        const initializedData = this._getInitializedFieldData(clone(data));\r\n\r\n        this._setState({\r\n          data: initializedData,\r\n          errors: {},\r\n          schema: importedSchema,\r\n          initialData: clone(initializedData)\r\n        });\r\n\r\n        this._emit('import.done', { warnings });\r\n\r\n        return resolve({ warnings });\r\n      } catch (error) {\r\n        this._emit('import.done', {\r\n          error,\r\n          warnings: error.warnings || []\r\n        });\r\n\r\n        return reject(error);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Submit the form, triggering all field validations.\r\n   *\r\n   * @returns { { data: Data, errors: Errors } }\r\n   */\r\n  submit() {\r\n\r\n    const {\r\n      properties\r\n    } = this._getState();\r\n\r\n    if (properties.readOnly || properties.disabled) {\r\n      throw new Error('form is read-only');\r\n    }\r\n\r\n    this._emit('presubmit');\r\n\r\n    const data = this._getSubmitData();\r\n\r\n    const errors = this.validate();\r\n\r\n    const result = {\r\n      data,\r\n      errors\r\n    };\r\n\r\n    this._emit('submit', result);\r\n\r\n    return result;\r\n  }\r\n\r\n  reset() {\r\n    this._emit('reset');\r\n\r\n    this._setState({\r\n      data: clone(this._state.initialData),\r\n      errors: {}\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @returns {Errors}\r\n   */\r\n  validate() {\r\n    const formFields = this.get('formFields'),\r\n          formFieldRegistry = this.get('formFieldRegistry'),\r\n          pathRegistry = this.get('pathRegistry'),\r\n          validator = this.get('validator');\r\n\r\n    const { data } = this._getState();\r\n\r\n    const getErrorPath = (field, indexes) => [ field.id, ...Object.values(indexes || {}) ];\r\n\r\n    function validateFieldRecursively(errors, field, indexes) {\r\n      const { disabled, type, isRepeating } = field;\r\n      const { config: fieldConfig } = formFields.get(type);\r\n\r\n      // (1) Skip disabled fields\r\n      if (disabled) {\r\n        return;\r\n      }\r\n\r\n      // (2) Validate the field\r\n      const valuePath = pathRegistry.getValuePath(field, { indexes });\r\n      const valueData = get(data, valuePath);\r\n      const fieldErrors = validator.validateField(field, valueData);\r\n\r\n      if (fieldErrors.length) {\r\n        set(errors, getErrorPath(field, indexes), fieldErrors);\r\n      }\r\n\r\n      // (3) Process parents\r\n      if (!Array.isArray(field.components)) {\r\n        return;\r\n      }\r\n\r\n      // (4a) Recurse repeatable parents both across the indexes of repetition and the children\r\n      if (fieldConfig.repeatable && isRepeating) {\r\n\r\n        if (!Array.isArray(valueData)) {\r\n          return;\r\n        }\r\n\r\n        valueData.forEach((_, index) => {\r\n          field.components.forEach((component) => {\r\n            validateFieldRecursively(errors, component, { ...indexes, [field.id]: index });\r\n          });\r\n        });\r\n\r\n        return;\r\n      }\r\n\r\n      // (4b) Recurse non-repeatable parents only across the children\r\n      field.components.forEach((component) => validateFieldRecursively(errors, component, indexes));\r\n    }\r\n\r\n    const workingErrors = {};\r\n    validateFieldRecursively(workingErrors, formFieldRegistry.getForm());\r\n    const filteredErrors = this._applyConditions(workingErrors, data, { getFilterPath: getErrorPath, leafNodeDeletionOnly: true });\r\n    this._setState({ errors: filteredErrors });\r\n\r\n    return filteredErrors;\r\n  }\r\n\r\n  /**\r\n   * @param {Element|string} parentNode\r\n   */\r\n  attachTo(parentNode) {\r\n    if (!parentNode) {\r\n      throw new Error('parentNode required');\r\n    }\r\n\r\n    this.detach();\r\n\r\n    if (isString(parentNode)) {\r\n      parentNode = document.querySelector(parentNode);\r\n    }\r\n\r\n    const container = this._container;\r\n\r\n    parentNode.appendChild(container);\r\n\r\n    this._emit('attach');\r\n  }\r\n\r\n  detach() {\r\n    this._detach();\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   *\r\n   * @param {boolean} [emit]\r\n   */\r\n  _detach(emit = true) {\r\n    const container = this._container,\r\n          parentNode = container.parentNode;\r\n\r\n    if (!parentNode) {\r\n      return;\r\n    }\r\n\r\n    if (emit) {\r\n      this._emit('detach');\r\n    }\r\n\r\n    parentNode.removeChild(container);\r\n  }\r\n\r\n  /**\r\n   * @param {FormProperty} property\r\n   * @param {any} value\r\n   */\r\n  setProperty(property, value) {\r\n    const properties = set(this._getState().properties, [ property ], value);\r\n\r\n    this._setState({ properties });\r\n  }\r\n\r\n  /**\r\n   * @param {FormEvent} type\r\n   * @param {Function} handler\r\n   */\r\n  off(type, handler) {\r\n    this.get('eventBus').off(type, handler);\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   *\r\n   * @param {FormOptions} options\r\n   * @param {Element} container\r\n   *\r\n   * @returns {Injector}\r\n   */\r\n  _createInjector(options, container) {\r\n    const {\r\n      modules = this._getModules(),\r\n      additionalModules = [],\r\n      ...config\r\n    } = options;\r\n\r\n    const enrichedConfig = {\r\n      ...config,\r\n      renderer: {\r\n        container\r\n      }\r\n    };\r\n\r\n    return createInjector([\r\n      { config: [ 'value', enrichedConfig ] },\r\n      { form: [ 'value', this ] },\r\n      CoreModule,\r\n      ...modules,\r\n      ...additionalModules\r\n    ]);\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  _emit(type, data) {\r\n    this.get('eventBus').fire(type, data);\r\n  }\r\n\r\n  /**\r\n   * @internal\r\n   *\r\n   * @param { { add?: boolean, field: any, indexes: object, remove?: number, value?: any } } update\r\n   */\r\n  _update(update) {\r\n    const {\r\n      field,\r\n      indexes,\r\n      value\r\n    } = update;\r\n\r\n    const {\r\n      data,\r\n      errors\r\n    } = this._getState();\r\n\r\n    const validator = this.get('validator'),\r\n          pathRegistry = this.get('pathRegistry');\r\n\r\n    const fieldErrors = validator.validateField(field, value);\r\n\r\n    const valuePath = pathRegistry.getValuePath(field, { indexes });\r\n\r\n    set(data, valuePath, value);\r\n\r\n    set(errors, [ field.id, ...Object.values(indexes || {}) ], fieldErrors.length ? fieldErrors : undefined);\r\n\r\n    this._setState({\r\n      data: clone(data),\r\n      errors: clone(errors)\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  _getState() {\r\n    return this._state;\r\n  }\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  _setState(state) {\r\n    this._state = {\r\n      ...this._state,\r\n      ...state\r\n    };\r\n\r\n    this._emit('changed', this._getState());\r\n  }\r\n\r\n  /**\r\n * @internal\r\n */\r\n  _getModules() {\r\n    return [\r\n      ExpressionLanguageModule,\r\n      MarkdownRendererModule,\r\n      ViewerCommandsModule,\r\n      RepeatRenderModule\r\n    ];\r\n  }\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  _onEvent(type, priority, handler) {\r\n    this.get('eventBus').on(type, priority, handler);\r\n  }\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  _getSubmitData() {\r\n    const formFieldRegistry = this.get('formFieldRegistry');\r\n    const formFields = this.get('formFields');\r\n    const pathRegistry = this.get('pathRegistry');\r\n    const formData = this._getState().data;\r\n\r\n    function collectSubmitDataRecursively(submitData, formField, indexes) {\r\n      const { disabled, type } = formField;\r\n      const { config: fieldConfig } = formFields.get(type);\r\n\r\n      // (1) Process keyed fields\r\n      if (!disabled && fieldConfig.keyed) {\r\n        const valuePath = pathRegistry.getValuePath(formField, { indexes });\r\n        const value = get(formData, valuePath);\r\n        set(submitData, valuePath, value);\r\n      }\r\n\r\n      // (2) Process parents\r\n      if (!Array.isArray(formField.components)) {\r\n        return;\r\n      }\r\n\r\n      // (3a) Recurse repeatable parents both across the indexes of repetition and the children\r\n      if (fieldConfig.repeatable && formField.isRepeating) {\r\n\r\n        const valueData = get(formData, pathRegistry.getValuePath(formField, { indexes }));\r\n\r\n        if (!Array.isArray(valueData)) {\r\n          return;\r\n        }\r\n\r\n        valueData.forEach((_, index) => {\r\n          formField.components.forEach((component) => {\r\n            collectSubmitDataRecursively(submitData, component, { ...indexes, [formField.id]: index });\r\n          });\r\n        });\r\n\r\n        return;\r\n      }\r\n\r\n      // (3b) Recurse non-repeatable parents only across the children\r\n      formField.components.forEach((component) => collectSubmitDataRecursively(submitData, component, indexes));\r\n    }\r\n\r\n    const workingSubmitData = {};\r\n    collectSubmitDataRecursively(workingSubmitData, formFieldRegistry.getForm(), {});\r\n    return this._applyConditions(workingSubmitData, formData);\r\n  }\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  _applyConditions(toFilter, data, options = {}) {\r\n    const conditionChecker = this.get('conditionChecker');\r\n    return conditionChecker.applyConditions(toFilter, data, options);\r\n  }\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  _getInitializedFieldData(data, options = {}) {\r\n    const formFieldRegistry = this.get('formFieldRegistry');\r\n    const formFields = this.get('formFields');\r\n    const pathRegistry = this.get('pathRegistry');\r\n\r\n    function initializeFieldDataRecursively(initializedData, formField, indexes) {\r\n      const { defaultValue, type, isRepeating } = formField;\r\n      const { config: fieldConfig } = formFields.get(type);\r\n\r\n      const valuePath = pathRegistry.getValuePath(formField, { indexes });\r\n      let valueData = get(data, valuePath);\r\n\r\n      // (1) Process keyed fields\r\n      if (fieldConfig.keyed) {\r\n\r\n        // (a) Retrieve and sanitize data from input\r\n        if (!isUndefined(valueData) && fieldConfig.sanitizeValue) {\r\n          valueData = fieldConfig.sanitizeValue({ formField, data, value: valueData });\r\n        }\r\n\r\n        // (b) Initialize field value in output data\r\n        const initializedFieldValue = !isUndefined(valueData) ? valueData : (!isUndefined(defaultValue) ? defaultValue : fieldConfig.emptyValue);\r\n        set(initializedData, valuePath, initializedFieldValue);\r\n      }\r\n\r\n      // (2) Process parents\r\n      if (!Array.isArray(formField.components)) {\r\n        return;\r\n      }\r\n\r\n      if (fieldConfig.repeatable && isRepeating) {\r\n\r\n        // (a) Sanitize repeatable parents data if it is not an array\r\n        if (!valueData || !Array.isArray(valueData)) {\r\n          valueData = new Array(isUndefined(formField.defaultRepetitions) ? 1 : formField.defaultRepetitions).fill().map(_ => ({})) || [];\r\n        }\r\n\r\n        // (b) Ensure all elements of the array are objects\r\n        valueData = valueData.map((val) => isObject(val) ? val : {});\r\n\r\n        // (c) Initialize field value in output data\r\n        set(initializedData, valuePath, valueData);\r\n\r\n        // (d) If indexed ahead of time, recurse repeatable simply across the children\r\n        if (!isUndefined(indexes[formField.id])) {\r\n          formField.components.forEach(\r\n            (component) => initializeFieldDataRecursively(initializedData, component, { ...indexes })\r\n          );\r\n\r\n          return;\r\n        }\r\n\r\n        // (e1) Recurse repeatable parents both across the indexes of repetition and the children\r\n        valueData.forEach((_, index) => {\r\n          formField.components.forEach(\r\n            (component) => initializeFieldDataRecursively(initializedData, component, { ...indexes, [formField.id]: index })\r\n          );\r\n        });\r\n\r\n        return;\r\n      }\r\n\r\n      // (e2) Recurse non-repeatable parents only across the children\r\n      formField.components.forEach((component) => initializeFieldDataRecursively(initializedData, component, indexes));\r\n    }\r\n\r\n    // allows definition of a specific subfield to generate the data for\r\n    const container = options.container || formFieldRegistry.getForm();\r\n    const indexes = options.indexes || {};\r\n    const basePath = pathRegistry.getValuePath(container, { indexes }) || [];\r\n\r\n    // if indexing ahead of time, we must add this index to the data path at the end\r\n    const path = !isUndefined(indexes[container.id]) ? [ ...basePath, indexes[container.id] ] : basePath;\r\n\r\n    const workingData = clone(data);\r\n    initializeFieldDataRecursively(workingData, container, indexes);\r\n    return get(workingData, path, {});\r\n  }\r\n\r\n}\r\n","import { Form } from './Form';\r\n\r\nexport { FormFieldRegistry, FormLayouter, Importer, FieldFactory, PathRegistry } from './core';\r\nexport * from './render';\r\nexport * from './util';\r\nexport * from './features';\r\n\r\nconst schemaVersion = 16;\r\n\r\nexport {\r\n  Form,\r\n  schemaVersion\r\n};\r\n\r\n/**\r\n * @typedef { import('./types').CreateFormOptions } CreateFormOptions\r\n */\r\n\r\n/**\r\n * Create a form.\r\n *\r\n * @param {CreateFormOptions} options\r\n *\r\n * @return {Promise<Form>}\r\n */\r\nexport function createForm(options) {\r\n  const {\r\n    data,\r\n    schema,\r\n    ...formOptions\r\n  } = options;\r\n\r\n  const form = new Form(formOptions);\r\n\r\n  return form.importSchema(schema, data).then(function() {\r\n    return form;\r\n  });\r\n}"],"names":["getFlavouredFeelVariableNames","feelString","feelFlavour","options","depth","specialDepthAccessors","includes","tree","parseExpression","parseUnaryTests","simpleExpressionTree","_buildSimpleFeelStructureTree","variables","_unfoldVariables","node","name","pathRoot","_linearizePathExpression","Object","keys","length","_getVariableNameAtPathIndex","Array","from","_smartExtractVariableNames","variableName","children","reduce","acc","child","concat","filter","Set","root","index","nodes","initialDepth","accessorDepthInfos","previous","current","extractedVariables","pathNodes","i","currentAccessor","depthOffsets","accumulator","offset","map","depthInfo","some","add","parts","push","reverse","parseTree","stack","iterate","enter","nodeRepresentation","type","slice","to","leave","result","pop","parent","_extractFilterExpressions","flattenedExpressionTree","x","filterTarget","filterExpression","taggedFilterExpression","FeelExpressionLanguage","constructor","eventBus","_eventBus","isExpression","value","isString","startsWith","getVariableNames","expression","Error","evaluate","data","error","fire","$inject","FeelersTemplating","isTemplate","test","template","expressions","_extractExpressionsWithDepth","_parent_","this","_this_","context","debug","strict","buildDebugString","err","sanitizer","evaluateFeelers","feelersParser","parse","buildSimpleTree","_traverse","n","content","loopExpression","childResults","MINUTES_IN_DAY","DATETIME_SUBTYPES","DATE","TIME","DATETIME","TIME_SERIALISING_FORMATS","UTC_OFFSET","UTC_NORMALIZED","NO_TIMEZONE","DATETIME_SUBTYPES_LABELS","TIME_SERIALISINGFORMAT_LABELS","DATETIME_SUBTYPE_PATH","DATE_LABEL_PATH","DATE_DISALLOW_PAST_PATH","TIME_LABEL_PATH","TIME_USE24H_PATH","TIME_INTERVAL_PATH","TIME_SERIALISING_FORMAT_PATH","OPTIONS_SOURCES","STATIC","INPUT","EXPRESSION","OPTIONS_SOURCE_DEFAULT","OPTIONS_SOURCES_LABELS","OPTIONS_SOURCES_PATHS","OPTIONS_SOURCES_DEFAULTS","label","getOptionsSource","field","source","values","get","undefined","SANDBOX_ATTRIBUTE","ALLOW_ATTRIBUTE","SECURITY_ATTRIBUTES_DEFINITIONS","attribute","directive","property","createInjector","bootstrapModules","injector","Injector","init","createFormContainer","prefix","container","document","createElement","classList","formFieldClasses","errors","disabled","readonly","classNames","gridColumnClasses","formField","layout","columns","prefixId","id","formId","indexes","forEach","Button","props","onFocus","onBlur","action","_jsx","class","config","keyed","group","create","FormRenderContext","createContext","Empty","Hidden","Children","style","Element","Row","Column","hoverInfo","cleanup","LocalExpressionContext","getService","FormContext","useService","useContext","isRequired","required","pathParse","path","split","key","isNaN","parseInt","pathsEqual","a","b","every","indices","generateIndexForType","generateIdForType","clone","replacer","JSON","stringify","buildExpressionContext","specialContextKeys","_wrapObjectKeysWithUnderscores","runRecursively","fn","components","component","obj","newObj","entries","useCondition","condition","conditionChecker","expressionContextInfo","useMemo","check","getSimpleOptionsData","formData","valuesExpression","optionsExpression","valuesKey","optionsKey","staticOptions","normalizeOptionsData","optionsData","_isAllowedValue","_normalizeOption","o","isNil","createEmptyOptions","defaults","option","_isAllowedPrimitive","isObject","isValidLabel","_isValidLabel","isAllowedPrimitiveType","isValid","useExpressionEvaluation","expressionLanguage","useDeepCompareMemoize","ref","useRef","isEqual","LOAD_STATES","LOADING","LOADED","ERROR","useOptionsAsync","initialData","_getState","expressionEvaluation","evaluatedOptions","optionsGetter","keyedOptions","isArray","buildErrorState","buildLoadedState","loadState","useDangerousHTMLWrapper","html","transform","sanitize","sanitizeStyleTags","sanitizedHtml","DOMPurify","getDOMPurifyConfig","transformedHtml","__html","FORCE_BODY","FORBID_TAGS","useSecurityAttributesMap","security","securityMemoized","sandbox","join","allow","useGetLabelCorrelation","labelMap","assign","_getValueHash","useCallback","wrapCSSStyles","rootNode","styleTags","querySelectorAll","styleTag","topLevelRules","extractTopLevelRules","textContent","scopedCss","rule","selector","styles","splitRule","scopedSelector","scopeSelector","cssString","cursor","start","level","substring","trim","firstBracket","indexOf","sel","getScrollContainer","el","body","documentElement","_isElementScrollable","parentElement","window","getComputedStyle","overflowY","overflow","scrollHeight","clientHeight","EMPTY_OBJECT","EMPTY_ARRAY","useScrollIntoView","scrolledElementRef","deps","scrollOptions","flagRefs","_scrollOptions","_flagRefs","useEffect","itemToBeScrolled","scrollContainer","itemRect","getBoundingClientRect","containerRect","align","behavior","scrollIfVisible","shouldScroll","top","bottom","topOffset","_getTopOffset","scroll","item","scrollTop","height","useFilteredFormData","newData","applyConditions","useKeyDownAction","targetKey","listenerElement","downHandler","addEventListener","removeEventListener","useReadonly","properties","readOnly","usePrevious","defaultValue","useFlushDebounce","func","timeoutRef","lastArgsRef","debounce","shouldDebounce","delay","debounceFunc","args","clearTimeout","setTimeout","flushFunc","useEffectOnChange","callback","dependencies","previousValue","useTemplateEvaluation","templating","useSingleLineTemplateEvaluation","evaluatedTemplate","ENTER_KEYDOWN_EVENT","KeyboardEvent","code","charCode","keyCode","bubbles","focusRelevantFlatpickerDay","flatpickrInstance","isOpen","open","calendarContainer","dayToFocus","querySelector","focus","formatTime","use24h","minutes","wrappedMinutes","minute","hour","Math","floor","_getZeroPaddedString","isPM","parseInputTime","stringTime","workingString","toLowerCase","is12h","digits","match","displayHour","isValidDisplayHour","isNumber","isValidMinute","isValidHour","serializeTime","timeSerializingFormat","normalizedMinutes","baseTime","addUTCOffset","formatTimezoneOffset","parseIsoTime","isoTimeString","parseBasicMinutes","timeString","timeSegments","localOffset","Date","getTimezoneOffset","replace","offsetString","inboundOffset","serializeDate","date","d","month","getMonth","day","getDate","year","getFullYear","isDateTimeInputInformationSufficient","segments","dateNumbers","isDateInputInformationMatching","serializeDateTime","time","workingDate","setFullYear","setHours","timezoneOffsetMinutes","dayOffset","getHours","_getSignedPaddedHours","abs","isInvalidDateString","getTime","toString","padStart","ALLOWED_IMAGE_SRC_PATTERN","ALLOWED_IFRAME_SRC_PATTERN","sanitizeDateTimePickerValue","subtype","hasEqualValue","array","element","sanitizeSingleSelectValue","validValues","v","sanitizeMultiSelectValue","sanitizeImageSource","src","valid","sanitizeIFrameSource","escapeHTML","escapeMap","useCleanupSingleSelectValue","onChange","optionValues","hasValueNotInOptions","useCleanupMultiSelectValue","memoizedValues","hasValuesNotInOptions","Description","description","evaluatedDescription","Errors","Label","htmlFor","collapseOnEmpty","evaluatedLabel","_jsxs","for","Checkbox","domId","validate","target","checked","descriptionId","errorMessageId","emptyValue","sanitizeValue","Checklist","outerDivRef","toggleCheckbox","toggledValue","newValues","onCheckboxBlur","e","contains","relatedTarget","onCheckboxFocus","itemDomId","isChecked","onClick","noop","FormField","formFields","viewerCommands","pathRegistry","form","initialValidationTrigger","setInitialValidationTrigger","useState","FormFieldComponent","fieldConfig","valuePath","getValuePath","initialValue","resetValidation","on","off","updateFieldValidation","hidden","conditional","hide","onChangeIndexed","update","fieldErrors","formFieldElement","escapeGridRender","ChildrenRenderer","repeatRenderManager","isRepeating","isFieldRepeating","Repeater","RepeatFooter","RepeatChildrenRenderer","ChildrenRoot","SimpleChildrenRenderer","isEmpty","RowsRenderer","restProps","useSharedState","isCollapsed","_Fragment","parentId","verticalAlignment","formLayouter","formFieldRegistry","rows","getRows","row","alignItems","childId","childField","_createElement","Default","fullProps","_path","_extends","getLocaleDateFormat","locale","Intl","DateTimeFormat","formatToParts","UTC","part","len","repeat","getLocaleReadableDateFormat","format","getLocaleDateFlatpickrConfig","flatpickerizeDateFormat","dateFormat","useLeadingZero","InputAdorner","pre","post","rootRef","inputRef","hasErrors","onAdornmentClick","Datepicker","collapseLabelOnEmpty","onDateTimeBlur","onDateTimeFocus","disallowPassedDates","dateObject","setDate","dateInputRef","focusScopeRef","setFlatpickrInstance","isInputDirty","setIsInputDirty","forceFocusCalendar","setForceFocusCalendar","allowInput","static","clickOpens","minDate","errorHandler","instance","flatpickr","onCalendarFocusOut","close","onCalendarMouseDown","onOpen","onClose","onInputKeyDown","dispatchEvent","preventDefault","onInputFocus","onInputBlur","isFalseBlur","CalendarIcon","width","placeholder","autoComplete","onKeyDown","onMouseDown","onInput","_path2","DEFAULT_LABEL_GETTER","NOOP","DropdownList","getLabel","onValueSelected","emptyListMessage","initialFocusIndex","mouseControl","setMouseControl","focusedValueIndex","setFocusedValueIndex","smoothScrolling","setSmoothScrolling","dropdownContainer","mouseScreenPos","focusedItem","changeFocusedValueIndex","delta","min","max","individualEntries","focusedEntry","scrollIntoView","block","inline","onMouseMovedInKeyboardMode","event","valueIndex","userMovedCursor","screenX","y","screenY","tabIndex","maxHeight","scrollBehavior","onMouseMove","onMouseEnter","Timepicker","timeInterval","setTime","safeTimeInterval","allowedIntervals","timeInputRef","dropdownIsOpen","setDropdownIsOpen","useDropdown","rawValue","setRawValue","intervalAdjustedTime","propagateRawToMinute","newRawValue","localRawValue","correctedMinutes","timeOptions","minutesInDay","intervalCount","intervalIndex","cacheTime","flooredCacheTime","onDropdownValueSelected","ClockIcon","Datetime","dateLabel","timeLabel","dateTimeGroupRef","getNullDateTime","dateTime","setDateTime","dateTimeUpdateRequest","setDateTimeUpdateRequest","isValidDate","isValidTime","useDatePicker","useTimePicker","getMinutes","computeAndSetState","newDateTimeValue","refreshOnly","newDateTime","allErrors","isOnlyOneFieldSet","prev","datePickerProps","timePickerProps","set","Group","showOutline","className","role","pathed","DEFAULT_HEIGHT","IFrame","url","evaluatedUrl","safeUrl","iframeRefresh","setIframeRefresh","count","IFramePlaceholder","text","title","allowScripts","iconsByType","button","ButtonIcon","checkbox","CheckboxIcon","checklist","ChecklistIcon","ColumnsIcon","datetime","DatetimeIcon","GroupIcon","iframe","IFrameIcon","image","ImageIcon","number","NumberIcon","ExpressionFieldIcon","radio","RadioIcon","select","SelectIcon","separator","SeparatorIcon","spacer","SpacerIcon","dynamiclist","DynamicListIcon","taglist","TaglistIcon","TextIcon","HTMLIcon","textfield","TextfieldIcon","textarea","TextareaIcon","table","TableIcon","default","FormIcon","Image","alt","Icon","evaluatedImageSource","safeSource","altText","viewBox","TemplatedInputAdorner","evaluatedPre","evaluatedPost","countDecimals","num","Big","toFixed","isValidNumber","Number","willKeyProduceValidNumber","caretIndex","selectionWidth","decimalDigits","isFirstDot","isFirstMinus","keypressIsNumeric","dotIndex","overflowsDecimalSpace","keypressIsAllowedChar","isNullEquivalentValue","Numberfield","appearance","increment","incrementValue","prefixAdorner","suffixAdorner","cachedValue","setCachedValue","displayValue","setDisplayValue","debouncedOnChange","flushOnChange","previousCachedValue","setValue","stringValue","replaceAll","outerValueChanged","outerValueEqualsCache","incrementAmount","base","stepFlooredValue","minus","mod","plus","decrement","cmp","onKeyPress","selectionStart","selectionEnd","onPaste","step","AngelUpIcon","AngelDownIcon","serializeToString","Radio","onRadioBlur","onRadioFocus","SearchableSelect","setFilter","isDropdownExpanded","setIsDropdownExpanded","isFilterActive","setIsFilterActive","isEscapeClosed","setIsEscapeClose","searchbarRef","getLabelCorrelation","filteredOptions","displayState","ds","componentReady","displayCross","displayDropdown","onAngelMouseDown","searchbar","blur","onInputChange","keyDownEvent","onInputMouseDown","XMarkIcon","SimpleSelect","selectRef","valueLabel","input","findIndex","stopPropagation","Select","searchable","selectProps","Separator","Spacer","DynamicList","repeatable","allowAddRemove","defaultRepetitions","SkipLink","onSkip","href","Taglist","hasOptionsLeft","isValidFilteredOption","filterMatches","selectValue","at","deselectValue","onElementBlur","onElementFocus","onTagRemoveClick","nextTag","closest","nextSibling","onSkipToSearch","shouldDisplayDropdown","NODE_TYPE_TEXT","NODE_TYPE_ELEMENT","ALLOWED_NODES","ALLOWED_ATTRIBUTES","ALLOWED_URI_PATTERN","ATTR_WHITESPACE_PATTERN","FORM_ELEMENT","sanitizeHTML","doc","DOMParser","parseFromString","normalize","firstChild","sanitizeNode","innerHTML","nodeType","remove","lcTag","tagName","attributes","lcName","removeAttribute","isValidAttribute","setAttribute","getAttribute","childNodes","Text","textLinkTarget","disableLinks","markdownRenderer","markdown","render","sanitizeAndTransformLinks","unsafeHtml","tempDiv","links","link","dangerouslySetInnerHTML","Html","styleScope","ExpressionField","computeOn","evaluation","evaluationMemo","sendValue","Textfield","String","Textarea","textareaRef","autoSizeTextarea","useLayoutEffect","computed","heightFromLines","lineHeight","getPropertyValue","lines","calculatedHeight","minHeight","displayHeight","Table","columnsExpression","dataSource","rowCount","sortBy","setSortBy","evaluatedColumns","useEvaluatedColumns","columnKeys","evaluatedDataSource","sortedData","sortByColumn","direction","chunkedData","chunk","currentPage","setCurrentPage","currentChunk","toggleSortBy","displayLabel","getHeaderAriaLabel","ArrowUpIcon","ArrowDownIcon","colSpan","page","CaretLeftIcon","CaretRightIcon","remainingOptions","isDefined","isColumn","generateInitialDemoData","demoData","demoDataKeys","fallbackColumns","column","size","chunks","sort","Logo","xmlns","fill","Lightbox","onBackdropClick","rel","Link","PoweredBy","setOpen","toggleOpen","Fragment","createPortal","FormComponent","schema","ariaLabel","onSubmit","onReset","handleSubmit","handleReset","filteredFormData","localExpressionContext","noValidate","Provider","FormFields","_formFields","register","EXPRESSION_PROPERTIES","TEMPLATE_PROPERTIES","getSchemaVariables","inputs","outputs","getAllComponents","prop","expressionVariables","templateVariables","variable","getBindingVariables","bindingVariable","getAncestryList","formFieldId","ids","currentFormField","_parent","ConditionChecker","_formFieldRegistry","_pathRegistry","contextData","workingData","getFilterPath","leafNodeDeletionOnly","_applyConditionsWithinScope","rootField","scopeContext","startHidden","expressionIndexes","scopeData","parentScopeData","executeRecursivelyOnFields","isClosed","isRepeatable","isHidden","_checkHideCondition","preventRecursion","repeaterValuePath","repeaterValue","newScopeContext","_cleanlyClearDataAtPath","getForm","unaryTest","workingValuePath","recurse","parentObject","_isEmptyObject","_isEmptyArray","ExpressionLanguageModule","__init__","MarkdownRenderer","marked","gfm","breaks","MarkdownRendererModule","CommandStack","_handlerMap","_stack","_stackIdx","_currentExecution","actions","dirty","trigger","_injector","_uid","clear","prototype","execute","command","_pushAction","_internalExecute","_popAction","canExecute","handler","_getHandler","_fire","emit","undo","_getUndoAction","next","_internalUndo","redo","_getRedoAction","_setHandler","registerHandler","handlerCls","instantiate","canUndo","canRedo","_atomicDo","revert","_markDirty","_revertedAction","qualifier","arguments","names","createEvent","cancelBubble","_createId","execution","atomic","preExecute","_executedAction","postExecute","baseAction","elements","uniqueBy","stackIdx","splice","commandStack","UpdateFieldValidationHandler","validator","_form","_validator","oldErrors","validateField","updatedErrors","_setState","ViewerCommands","_commandStack","registerHandlers","getHandlers","ViewerCommandsModule","__depends__","commandModule","RepeatRenderManager","bind","formFieldDefinition","sharedRepeatState","repeaterField","dataPath","nonCollapsedItems","_getNonCollapsedItems","collapseEnabled","disableCollapse","hasChildren","showRemove","displayValues","onDeleteItem","updatedValues","parentExpressionContextInfo","itemValue","itemIndex","RepetitionScaffold","addButtonRef","setSharedRepeatState","showAdd","toggle","state","onAddItem","newItem","_getInitializedFieldData","AddSvg","ExpandSvg","CollapseSvg","DEFAULT_NON_COLLAPSED_ITEMS","elementProps","localExpressionContextInfo","DeleteSvg","RepeatRenderModule","FN_REF","DEFAULT_PRIORITY","EventBus","_listeners","_destroy","events","priority","that","isFunction","actualCallback","self","_addListener","once","wrappedCallback","__isTomb","apply","_removeListener","InternalEvent","firstListener","returnValue","call","originalType","_invokeListeners","defaultPrevented","handleError","listener","_invokeListener","invokeFunction","console","newListener","_getListeners","previousListener","_setListeners","nextListener","listenerCallback","EMAIL_PATTERN","PHONE_PATTERN","VALIDATE_FEEL_PROPERTIES","Validator","_expressionLanguage","_conditionChecker","bigValue","bigIncrement","nextValue","evaluatedValidation","evaluateFEELValues","pattern","RegExp","isUncheckedCheckbox","isUnsetValue","isEmptyMultiselect","minLength","maxLength","validationType","evaluatedValidate","filteredData","evaluatedValue","Importer","fieldFactory","_fieldFactory","_formLayouter","importSchema","warnings","_cleanup","importedSchema","importFormField","calculateLayout","fieldAttrs","importFormFields","FieldFactory","attrs","applyDefaults","fieldDefinition","_ids","assigned","parentPath","knownAncestorIds","canClaimPath","labelAttrs","_ensureId","_ensureKey","claimPath","claimerId","_enforceDefaultPath","claim","nextPrefixed","_getUniqueKeyPath","random","PathRegistry","_dataPaths","skipAncestryCheck","segment","_getNextSegment","isValidRepeatClaim","repeaterId","claimCount","unclaimPath","formFieldConfig","callResult","replacements","cutoffNode","localValuePath","hasReplacement","hasOwnProperty","replacement","_addIndexes","find","FormLayouter","_rows","Ids","addRow","rowsPerComponent","r","getRow","allRows","getRowForField","rowsForField","nextRowId","rowsInOrder","groupByRow","c","groupBy","formRows","flat","FormFieldRegistry","getAll","Renderer","App","setState","formContext","_id","newState","_update","submit","reset","RenderModule","renderer","CoreModule","importer","Form","_onEvent","_container","_createInjector","_state","invoke","attachTo","_emit","destroy","_detach","Promise","resolve","reject","initializedData","_getSubmitData","getErrorPath","validateFieldRecursively","valueData","_","workingErrors","filteredErrors","_applyConditions","parentNode","detach","appendChild","removeChild","setProperty","modules","_getModules","additionalModules","enrichedConfig","collectSubmitDataRecursively","submitData","workingSubmitData","toFilter","initializeFieldDataRecursively","isUndefined","initializedFieldValue","val","basePath","schemaVersion","createForm","formOptions","then"],"mappings":"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iB,CAAE;AACzCkJ,EAAAA,gBAAgB,EAAE,CAAE,MAAM,EAAEuzB,gBAAgB,CAAA;AAC9C;;ACPO,MAAMiC,gBAAgB,CAAC;AAE5B;AACF;AACA;AACA;AACA;AACA;AACA;EACE9I,MAAMA,CAACD,QAAQ,EAAE;AAEf;AACA,IAAA,OAAOgJ,MAAM,CAAC19B,KAAK,CAAC00B,QAAQ,EAAE;AAC5BiJ,MAAAA,GAAG,EAAE,IAAI;AACTC,MAAAA,MAAM,EAAE,IAAA;AACV,KAAC,CAAC,CAAA;AACJ,GAAA;AACF,CAAA;AAEAH,gBAAgB,CAAC3+B,OAAO,GAAG,EAAE;;ACnBtB,MAAM++B,sBAAsB,GAAG;EACpCL,QAAQ,EAAE,CAAE,kBAAkB,CAAE;AAChC/I,EAAAA,gBAAgB,EAAE,CAAE,MAAM,EAAEgJ,gBAAgB,CAAA;AAC9C;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,SAASK,YAAYA,CAAC7/B,QAAQ,EAAE+E,QAAQ,EAAE;AAEvD;AACF;AACA;AACA;AACA;AACE,EAAA,IAAI,CAAC+6B,WAAW,GAAG,EAAE,CAAA;;AAErB;AACF;AACA;AACA;AACA;EACE,IAAI,CAACC,MAAM,GAAG,EAAE,CAAA;;AAEhB;AACF;AACA;AACA;AACA;AACE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ACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,SAASsnC,QAAQA,GAAG;AAEjC;AACF;AACA;AACE,EAAA,IAAI,CAACC,UAAU,GAAG,EAAE,CAAA;;AAEpB;AACA;AACA,EAAA,IAAI,CAAC3oB,EAAE,CAAC,iBAAiB,EAAE,CAAC,EAAE,IAAI,CAAC4oB,QAAQ,EAAE,IAAI,CAAC,CAAA;AACpD,CAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAF,QAAQ,CAAChG,SAAS,CAAC1iB,EAAE,GAAG,UAAS6oB,MAAM,EAAEC,QAAQ,EAAE5yB,QAAQ,EAAE6yB,IAAI,EAAE;EAEjEF,MAAM,GAAGh6B,OAAO,CAACg6B,MAAM,CAAC,GAAGA,MAAM,GAAG,CAAEA,MAAM,CAAE,CAAA;AAE9C,EAAA,IAAIG,UAAU,CAACF,QAAQ,CAAC,EAAE;AACxBC,IAAAA,IAAI,GAAG7yB,QAAQ,CAAA;AACfA,IAAAA,QAAQ,GAAG4yB,QAAQ,CAAA;AACnBA,IAAAA,QAAQ,GAAGL,gBAAgB,CAAA;AAC7B,GAAA;AAEA,EAAA,IAAI,CAAC/vB,QA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","x_google_ignoreList":[114,115,125]}