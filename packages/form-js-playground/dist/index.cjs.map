{"version":3,"file":"index.cjs","sources":["../src/components/Modal.js","../src/components/EmbedModal.js","../src/components/autocompletion/VariablesFacet.js","../src/components/autocompletion/index.js","../src/components/JSONEditor.js","../src/components/Section.js","../src/components/PlaygroundRoot.js","../src/Playground.js"],"sourcesContent":["import { useEffect } from 'preact/hooks';\r\n\r\nexport function Modal(props) {\r\n\r\n  useEffect(() => {\r\n    function handleKey(event) {\r\n\r\n      if (event.key === 'Escape') {\r\n        event.stopPropagation();\r\n\r\n        props.onClose();\r\n      }\r\n    }\r\n\r\n    document.addEventListener('keydown', handleKey);\r\n\r\n    return () => {\r\n      document.removeEventListener('keydown', handleKey);\r\n    };\r\n  });\r\n\r\n  return (\r\n    <div class=\"fjs-pgl-modal\">\r\n      <div class=\"fjs-pgl-modal-backdrop\" onClick={ props.onClose }></div>\r\n      <div class=\"fjs-pgl-modal-content\">\r\n        <h1 class=\"fjs-pgl-modal-header\">{ props.name }</h1>\r\n        <div class=\"fjs-pgl-modal-body\">\r\n          { props.children }\r\n        </div>\r\n        <div class=\"fjs-pgl-modal-footer\">\r\n          <button type=\"button\" class=\"fjs-pgl-button fjs-pgl-button-default\" onClick={ props.onClose }>Close</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, useRef } from 'preact/hooks';\r\n\r\nimport { Modal } from './Modal';\r\n\r\n\r\nexport function EmbedModal(props) {\r\n\r\n  const schema = serializeValue(props.schema);\r\n  const data = serializeValue(props.data || {});\r\n\r\n  const fieldRef = useRef();\r\n\r\n  const snippet = `<!-- styles needed for rendering -->\r\n<link rel=\"stylesheet\" href=\"https://unpkg.com/@bpmn-io/form-js@0.2.4/dist/assets/form-js.css\">\r\n\r\n<!-- container to render the form into -->\r\n<div class=\"fjs-pgl-form-container\"></div>\r\n\r\n<!-- scripts needed for embedding -->\r\n<script src=\"https://unpkg.com/@bpmn-io/form-js@0.2.4/dist/form-viewer.umd.js\"></script>\r\n\r\n<!-- actual script to instantiate the form and load form schema + data -->\r\n<script>\r\n  const data = JSON.parse(${data});\r\n  const schema = JSON.parse(${schema});\r\n\r\n  const form = new FormViewer.Form({\r\n    container: document.querySelector(\".fjs-pgl-form-container\")\r\n  });\r\n\r\n  form.on(\"submit\", (event) => {\r\n    console.log(event.data, event.errors);\r\n  });\r\n\r\n  form.importSchema(schema, data).catch(err => {\r\n    console.error(\"Failed to render form\", err);\r\n  });\r\n</script>\r\n  `.trim();\r\n\r\n  useEffect(() => {\r\n    fieldRef.current.select();\r\n  });\r\n\r\n  return (\r\n    <Modal name=\"Embed form\" onClose={ props.onClose }>\r\n      <p>Use the following HTML snippet to embed your form with <a href=\"https://github.com/bpmn-io/form-js\">form-js</a>:</p>\r\n\r\n      <textarea spellCheck=\"false\" ref={ fieldRef }>{snippet}</textarea>\r\n    </Modal>\r\n  );\r\n}\r\n\r\n\r\n// helpers ///////////\r\n\r\nfunction serializeValue(obj) {\r\n  return JSON.stringify(JSON.stringify(obj)).replace(/</g, '&lt;').replace(/>/g, '&gt;');\r\n}","import { Facet } from '@codemirror/state';\r\n\r\n/**\r\n * @type {Facet<import('..').Variables>} Variables\r\n */\r\nexport const variablesFacet = Facet.define();","import { autocompletion } from '@codemirror/autocomplete';\r\nimport { variablesFacet } from './VariablesFacet';\r\n\r\nimport { syntaxTree } from '@codemirror/language';\r\n\r\nexport function autocompletionExtension() {\r\n  return [\r\n    autocompletion({\r\n      override: [\r\n        completions\r\n      ]\r\n    })\r\n  ];\r\n}\r\n\r\nfunction completions(context) {\r\n\r\n  const variables = context.state.facet(variablesFacet)[0];\r\n\r\n  const options = variables.map(v => ({\r\n    label: v,\r\n    type: 'variable'\r\n  }));\r\n\r\n  let nodeBefore = syntaxTree(context.state).resolve(context.pos, -1);\r\n\r\n  // handle inside property name as explicit call\r\n  if (nodeBefore.type.name === 'PropertyName') {\r\n    context.explicit = true;\r\n  }\r\n\r\n  let word = context.matchBefore(/\\w*/);\r\n\r\n  if (word.from == word.to && !context.explicit) {\r\n    return null;\r\n  }\r\n\r\n  return {\r\n    from: word.from,\r\n    options\r\n  };\r\n}","import mitt from 'mitt';\r\nimport { basicSetup } from 'codemirror';\r\nimport { EditorView, keymap, placeholder } from '@codemirror/view';\r\nimport { EditorState, Compartment } from '@codemirror/state';\r\nimport { lintGutter, linter } from '@codemirror/lint';\r\nimport { json, jsonParseLinter } from '@codemirror/lang-json';\r\nimport { indentWithTab } from '@codemirror/commands';\r\nimport { autocompletionExtension } from './autocompletion/index';\r\nimport { variablesFacet } from './autocompletion/VariablesFacet';\r\nimport { classes as domClasses } from 'min-dom';\r\n\r\nconst NO_LINT_CLS = 'fjs-cm-no-lint';\r\n\r\n/**\r\n * @param {object} options\r\n * @param {boolean} [options.readonly]\r\n * @param {object} [options.contentAttributes]\r\n * @param {string | HTMLElement} [options.placeholder]\r\n */\r\nexport function JSONEditor(options = {}) {\r\n  const { contentAttributes = {}, placeholder: editorPlaceholder, readonly = false } = options;\r\n  const emitter = mitt();\r\n\r\n  const languageCompartment = new Compartment().of(json());\r\n  const tabSizeCompartment = new Compartment().of(EditorState.tabSize.of(2));\r\n  const autocompletionConfCompartment = new Compartment();\r\n  const placeholderLinterExtension = createPlaceholderLinterExtension();\r\n\r\n  let container = null;\r\n\r\n  function createState(doc, variables = []) {\r\n    const extensions = [\r\n      basicSetup,\r\n      languageCompartment,\r\n      tabSizeCompartment,\r\n      lintGutter(),\r\n      linter(jsonParseLinter()),\r\n      placeholderLinterExtension,\r\n      autocompletionConfCompartment.of(variablesFacet.of(variables)),\r\n      autocompletionExtension(),\r\n      keymap.of([ indentWithTab ]),\r\n      editorPlaceholder ? placeholder(editorPlaceholder) : [],\r\n      EditorState.readOnly.of(readonly),\r\n      EditorView.updateListener.of(update => {\r\n        if (update.docChanged) {\r\n          emitter.emit('changed', { value: update.state.doc.toString() });\r\n        }\r\n      }),\r\n      EditorView.contentAttributes.of(contentAttributes)\r\n    ];\r\n\r\n    return EditorState.create({ doc, extensions });\r\n  }\r\n\r\n  const view = new EditorView({\r\n    state: createState('')\r\n  });\r\n\r\n  this.setValue = function(newValue) {\r\n    const oldValue = view.state.doc.toString();\r\n\r\n    const diff = findDiff(oldValue, newValue);\r\n\r\n    if (diff) {\r\n      view.dispatch({\r\n        changes: { from: diff.start, to: diff.end, insert: diff.text },\r\n        selection: { anchor: diff.start + diff.text.length }\r\n      });\r\n    }\r\n  };\r\n\r\n  this.getValue = function() {\r\n    return view.state.doc.toString();\r\n  };\r\n\r\n  this.setVariables = function(variables) {\r\n    view.dispatch({ effects: autocompletionConfCompartment.reconfigure(variablesFacet.of(variables)) });\r\n  };\r\n\r\n  this.getView = function() {\r\n    return view;\r\n  };\r\n\r\n  this.on = emitter.on;\r\n  this.off = emitter.off;\r\n  this.emit = emitter.emit;\r\n\r\n  this.attachTo = function(_container) {\r\n    container = _container;\r\n    container.appendChild(view.dom);\r\n    domClasses(container, document.body).add('fjs-json-editor');\r\n  };\r\n\r\n  this.destroy = function() {\r\n    if (container && view.dom) {\r\n      container.removeChild(view.dom);\r\n      domClasses(container, document.body).remove('fjs-json-editor');\r\n    }\r\n    view.destroy();\r\n  };\r\n\r\n  function createPlaceholderLinterExtension() {\r\n    return linter(view => {\r\n      const placeholders = view.dom.querySelectorAll('.cm-placeholder');\r\n      if (placeholders.length > 0) {\r\n        domClasses(container, document.body).add(NO_LINT_CLS);\r\n      } else {\r\n        domClasses(container, document.body).remove(NO_LINT_CLS);\r\n      }\r\n      return [];\r\n    });\r\n  }\r\n}\r\n\r\nfunction findDiff(oldStr, newStr) {\r\n\r\n  if (oldStr === newStr) {\r\n    return null;\r\n  }\r\n\r\n  oldStr = oldStr || '';\r\n  newStr = newStr || '';\r\n\r\n  let minLength = Math.min(oldStr.length, newStr.length);\r\n  let start = 0;\r\n\r\n  while (start < minLength && oldStr[start] === newStr[start]) {\r\n    start++;\r\n  }\r\n\r\n  if (start === minLength) {\r\n    return {\r\n      start: start,\r\n      text: newStr.slice(start),\r\n      end: oldStr.length\r\n    };\r\n  }\r\n\r\n  let endOld = oldStr.length;\r\n  let endNew = newStr.length;\r\n\r\n  while (endOld > start && endNew > start && oldStr[endOld - 1] === newStr[endNew - 1]) {\r\n    endOld--;\r\n    endNew--;\r\n  }\r\n\r\n  return {\r\n    start: start,\r\n    text: newStr.slice(start, endNew),\r\n    end: endOld\r\n  };\r\n}\r\n","export function Section(props) {\r\n\r\n  const elements =\r\n    Array.isArray(props.children)\r\n      ? props.children :\r\n      [ props.children ];\r\n\r\n  const {\r\n    headerItems,\r\n    children\r\n  } = elements.reduce((_, child) => {\r\n    const bucket =\r\n      child.type === Section.HeaderItem\r\n        ? _.headerItems\r\n        : _.children;\r\n\r\n    bucket.push(child);\r\n\r\n    return _;\r\n  }, { headerItems: [], children: [] });\r\n\r\n  return (\r\n    <div class=\"fjs-pgl-section\">\r\n      <h1 class=\"header\">{ props.name } { headerItems.length ? <span class=\"header-items\">{ headerItems }</span> : null }</h1>\r\n      <div class=\"body\">\r\n        { children }\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nSection.HeaderItem = function(props) {\r\n  return props.children;\r\n};","import { useRef, useEffect, useState, useCallback } from 'preact/hooks';\r\nimport { isFunction } from 'min-dash';\r\nimport download from 'downloadjs';\r\n\r\nimport classNames from 'classnames';\r\n\r\nimport {\r\n  Form,\r\n  getSchemaVariables\r\n} from '@bpmn-io/form-js-viewer';\r\n\r\nimport {\r\n  FormEditor\r\n} from '@bpmn-io/form-js-editor';\r\n\r\nimport { EmbedModal } from './EmbedModal';\r\nimport { JSONEditor } from './JSONEditor';\r\nimport { Section } from './Section';\r\n\r\nimport './FileDrop.css';\r\nimport './PlaygroundRoot.css';\r\n\r\nexport function PlaygroundRoot(config) {\r\n\r\n  const {\r\n    additionalModules, // goes into both editor + viewer\r\n    actions: actionsConfig,\r\n    emit,\r\n    exporter: exporterConfig,\r\n    viewerProperties,\r\n    editorProperties,\r\n    viewerAdditionalModules,\r\n    editorAdditionalModules,\r\n    propertiesPanel: propertiesPanelConfig,\r\n    apiLinkTarget,\r\n    onInit\r\n  } = config;\r\n\r\n  const {\r\n    display: displayActions = true\r\n  } = actionsConfig || {};\r\n\r\n  const editorContainerRef = useRef();\r\n  const paletteContainerRef = useRef();\r\n  const propertiesPanelContainerRef = useRef();\r\n  const viewerContainerRef = useRef();\r\n  const inputDataContainerRef = useRef();\r\n  const outputDataContainerRef = useRef();\r\n\r\n  const formEditorRef = useRef();\r\n  const formViewerRef = useRef();\r\n  const inputDataRef = useRef();\r\n  const outputDataRef = useRef();\r\n\r\n  const [ showEmbed, setShowEmbed ] = useState(false);\r\n  const [ schema, setSchema ] = useState();\r\n  const [ data, setData ] = useState();\r\n\r\n  const load = useCallback((schema, data) => {\r\n    formEditorRef.current.importSchema(schema, data);\r\n    inputDataRef.current.setValue(toString(data));\r\n    setSchema(schema);\r\n    setData(data);\r\n  }, []);\r\n\r\n  // initialize and link the editors\r\n  useEffect(() => {\r\n    const inputDataEditor = inputDataRef.current = new JSONEditor({\r\n      contentAttributes: { 'aria-label': 'Form Input', tabIndex: 0 },\r\n      placeholder: createDataEditorPlaceholder()\r\n    });\r\n\r\n    const outputDataEditor = outputDataRef.current = new JSONEditor({\r\n      readonly: true,\r\n      contentAttributes: { 'aria-label': 'Form Output', tabIndex: 0 }\r\n    });\r\n\r\n    const formViewer = formViewerRef.current = new Form({\r\n      container: viewerContainerRef.current,\r\n      additionalModules: [\r\n        ...(additionalModules || []),\r\n        ...(viewerAdditionalModules || [])\r\n      ],\r\n      properties: {\r\n        ...(viewerProperties || {}),\r\n        'ariaLabel': 'Form Preview'\r\n      }\r\n    });\r\n\r\n    const formEditor = formEditorRef.current = new FormEditor({\r\n      container: editorContainerRef.current,\r\n      renderer: {\r\n        compact: true\r\n      },\r\n      palette: {\r\n        parent: paletteContainerRef.current\r\n      },\r\n      propertiesPanel: {\r\n        parent: propertiesPanelContainerRef.current,\r\n        ...(propertiesPanelConfig || {})\r\n      },\r\n      exporter: exporterConfig,\r\n      properties: {\r\n        ...(editorProperties || {}),\r\n        'ariaLabel': 'Form Definition'\r\n      },\r\n      additionalModules: [\r\n        ...(additionalModules || []),\r\n        ...(editorAdditionalModules || [])\r\n      ]\r\n    });\r\n\r\n    formEditor.on('formField.add', ({ formField }) => {\r\n      const formFields = formEditor.get('formFields');\r\n      const { config } = formFields.get(formField.type);\r\n      const { generateInitialDemoData } = config;\r\n      const { id } = formField;\r\n\r\n      if (!isFunction(generateInitialDemoData)) {\r\n        return;\r\n      }\r\n\r\n      const initialDemoData = generateInitialDemoData(formField);\r\n\r\n      if ([ initialDemoData, id ].includes(undefined)) {\r\n        return;\r\n      }\r\n\r\n      setData((currentData) => {\r\n        const newData = {\r\n          ...currentData,\r\n          [id]: initialDemoData,\r\n        };\r\n\r\n        inputDataRef.current.setValue(\r\n          toString(newData)\r\n        );\r\n\r\n        return newData;\r\n      });\r\n    });\r\n\r\n    formEditor.on('changed', () => {\r\n      setSchema(formEditor.getSchema());\r\n    });\r\n\r\n    formEditor.on('formEditor.rendered', () => {\r\n\r\n      // notify interested parties after render\r\n      emit('formPlayground.rendered');\r\n    });\r\n\r\n    // pipe viewer changes to output data editor\r\n    formViewer.on('changed', () => {\r\n      const submitData = formViewer._getSubmitData();\r\n      outputDataEditor.setValue(toString(submitData));\r\n    });\r\n\r\n    inputDataEditor.on('changed', event => {\r\n      try {\r\n        setData(JSON.parse(event.value));\r\n      } catch (error) {\r\n\r\n        // notify interested about input data error\r\n        emit('formPlayground.inputDataError', error);\r\n      }\r\n    });\r\n\r\n    inputDataEditor.attachTo(inputDataContainerRef.current);\r\n    outputDataEditor.attachTo(outputDataContainerRef.current);\r\n\r\n    return () => {\r\n      inputDataEditor.destroy();\r\n      outputDataEditor.destroy();\r\n      formViewer.destroy();\r\n      formEditor.destroy();\r\n    };\r\n  }, [ additionalModules, editorAdditionalModules, editorProperties, emit, exporterConfig, propertiesPanelConfig, viewerAdditionalModules, viewerProperties ]);\r\n\r\n  // initialize data through props\r\n  useEffect(() => {\r\n    if (!config.initialSchema) {\r\n      return;\r\n    }\r\n\r\n    load(config.initialSchema, config.initialData || {});\r\n  }, [ config.initialSchema, config.initialData, load ]);\r\n\r\n  useEffect(() => {\r\n    schema && formViewerRef.current.importSchema(schema, data);\r\n  }, [ schema, data ]);\r\n\r\n  useEffect(() => {\r\n    if (schema && inputDataContainerRef.current) {\r\n      const variables = getSchemaVariables(schema);\r\n      inputDataRef.current.setVariables(variables);\r\n    }\r\n  }, [ schema ]);\r\n\r\n  // exposes api to parent\r\n  useEffect(() => {\r\n\r\n    if (!apiLinkTarget) {\r\n      return;\r\n    }\r\n\r\n    apiLinkTarget.api = {\r\n      attachDataContainer: (node) => inputDataRef.current.attachTo(node),\r\n      attachResultContainer: (node) => outputDataRef.current.attachTo(node),\r\n      attachFormContainer: (node) => formViewerRef.current.attachTo(node),\r\n      attachEditorContainer: (node) => formEditorRef.current.attachTo(node),\r\n      attachPaletteContainer: (node) => formEditorRef.current.get('palette').attachTo(node),\r\n      attachPropertiesPanelContainer: (node) => formEditorRef.current.get('propertiesPanel').attachTo(node),\r\n      get: (name, strict) => formEditorRef.current.get(name, strict),\r\n      getDataEditor: () => inputDataRef.current,\r\n      getEditor: () => formEditorRef.current,\r\n      getForm: () => formViewerRef.current,\r\n      getResultView: () => outputDataRef.current,\r\n      getSchema: () => formEditorRef.current.getSchema(),\r\n      saveSchema: () => formEditorRef.current.saveSchema(),\r\n      setSchema: setSchema,\r\n      setData: setData\r\n    };\r\n\r\n    onInit();\r\n\r\n  }, [ apiLinkTarget, onInit ]);\r\n\r\n  // separate effect for state to avoid re-creating the api object every time\r\n  useEffect(() => {\r\n\r\n    if (!apiLinkTarget) {\r\n      return;\r\n    }\r\n\r\n    apiLinkTarget.api.getState = () => ({ schema, data });\r\n    apiLinkTarget.api.load = load;\r\n\r\n  }, [ apiLinkTarget, schema, data, load ]);\r\n\r\n  const handleDownload = useCallback(() => {\r\n    download(JSON.stringify(schema, null, '  '), 'form.json', 'text/json');\r\n  }, [ schema ]);\r\n\r\n  const hideEmbedModal = useCallback(() => {\r\n    setShowEmbed(false);\r\n  }, []);\r\n\r\n  // const showEmbedModal = useCallback(() => {\r\n  //   setShowEmbed(true);\r\n  // }, []);\r\n\r\n  return (\r\n    <div class={ classNames(\r\n      'fjs-container',\r\n      'fjs-pgl-root'\r\n    ) }>\r\n      <div class=\"fjs-pgl-modals\">\r\n        { showEmbed ? <EmbedModal schema={ schema } data={ data } onClose={ hideEmbedModal } /> : null }\r\n      </div>\r\n      <div class=\"fjs-pgl-palette-container\" ref={ paletteContainerRef } />\r\n      <div class=\"fjs-pgl-main\">\r\n\r\n        <Section name=\"Definice formuláře\">\r\n\r\n          {\r\n            displayActions && <Section.HeaderItem>\r\n              <button\r\n                type=\"button\"\r\n                class=\"fjs-pgl-button\"\r\n                title=\"Stáhnout vstupní schéma v JSON formátu\"\r\n                onClick={ handleDownload }\r\n              >Stáhnout</button>\r\n            </Section.HeaderItem>\r\n          }\r\n\r\n          {/* {\r\n            displayActions && <Section.HeaderItem>\r\n              <button\r\n                type=\"button\"\r\n                class=\"fjs-pgl-button\"\r\n                onClick={ showEmbedModal }\r\n              >Vložit</button>\r\n            </Section.HeaderItem>\r\n          } */}\r\n\r\n          <div ref={ editorContainerRef } class=\"fjs-pgl-form-container\"></div>\r\n        </Section>\r\n        <Section name=\"Náhled formuláře\">\r\n          <div ref={ viewerContainerRef } class=\"fjs-pgl-form-container\"></div>\r\n        </Section>\r\n        <Section name=\"Vstupní schéma\">\r\n          <div ref={ inputDataContainerRef } class=\"fjs-pgl-text-container\"></div>\r\n        </Section>\r\n        <Section name=\"Výstupní schéma\">\r\n          <div ref={ outputDataContainerRef } class=\"fjs-pgl-text-container\"></div>\r\n        </Section>\r\n      </div>\r\n      <div class=\"fjs-pgl-properties-container\" ref={ propertiesPanelContainerRef } />\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n// helpers ///////////////\r\n\r\nfunction toString(obj) {\r\n  return JSON.stringify(obj, null, '  ');\r\n}\r\n\r\nfunction createDataEditorPlaceholder() {\r\n  const element = document.createElement('p');\r\n\r\n  element.innerHTML = 'Use this panel to simulate the form input, such as process variables.\\nThis helps to test the form by populating the preview.\\n\\n' +\r\n    'Follow the JSON format like this:\\n\\n' +\r\n    '{\\n  \"variable\": \"value\"\\n}';\r\n\r\n  return element;\r\n}","import { render } from 'preact';\r\n\r\nimport fileDrop from 'file-drops';\r\n\r\nimport mitt from 'mitt';\r\n\r\nimport { PlaygroundRoot } from './components/PlaygroundRoot';\r\n\r\n/**\r\n * @typedef { import('@bpmn-io/form-js-viewer/dist/types/types').FormProperties } FormProperties\r\n * @typedef { import('@bpmn-io/form-js-editor/dist/types/types').FormEditorProperties } FormEditorProperties\r\n *\r\n * @typedef { {\r\n *  actions?: { display: Boolean }\r\n *  additionalModules?: Array<any>\r\n *  container?: Element\r\n *  data: any\r\n *  editor?: { inlinePropertiesPanel: Boolean }\r\n *  editorAdditionalModules?: Array<any>\r\n *  editorProperties?: FormEditorProperties\r\n *  exporter?: { name: String, version: String }\r\n *  propertiesPanel?: { parent: Element, feelPopupContainer: Element }\r\n *  schema: any\r\n *  viewerAdditionalModules?: Array<any>\r\n *  viewerProperties?: FormProperties\r\n * } } FormPlaygroundOptions\r\n */\r\n\r\n/**\r\n * @param {FormPlaygroundOptions} options\r\n */\r\nfunction Playground(options) {\r\n\r\n  const {\r\n    container: parent,\r\n    schema: initialSchema,\r\n    data: initialData,\r\n    ...rest\r\n  } = options;\r\n\r\n  const emitter = mitt();\r\n\r\n  const container = document.createElement('div');\r\n\r\n  container.classList.add('fjs-pgl-parent');\r\n\r\n  if (parent) {\r\n    parent.appendChild(container);\r\n  }\r\n\r\n  const handleDrop = fileDrop('Drop a form file', function(files) {\r\n    const file = files[0];\r\n\r\n    if (file) {\r\n      try {\r\n        this.api.setSchema(JSON.parse(file.contents));\r\n      } catch (err) {\r\n\r\n        // TODO(nikku): indicate JSON parse error\r\n      }\r\n    }\r\n  });\r\n\r\n  const safe = function(fn) {\r\n    return function(...args) {\r\n      if (!this.api) {\r\n        throw new Error('Playground is not initialized.');\r\n      }\r\n\r\n      return fn(...args);\r\n    };\r\n  };\r\n\r\n  const onInit = function() {\r\n    emitter.emit('formPlayground.init');\r\n  };\r\n\r\n  container.addEventListener('dragover', handleDrop);\r\n\r\n  render(\r\n    <PlaygroundRoot\r\n      initialSchema={ initialSchema }\r\n      initialData={ initialData }\r\n      emit={ emitter.emit }\r\n      apiLinkTarget={ this }\r\n      onInit={ onInit }\r\n      { ...rest }\r\n    />,\r\n    container\r\n  );\r\n\r\n  this.on = emitter.on;\r\n  this.off = emitter.off;\r\n\r\n  this.emit = emitter.emit;\r\n\r\n  this.on('destroy', () => {\r\n    render(null, container);\r\n    parent.removeChild(container);\r\n  });\r\n\r\n  this.destroy = () => this.emit('destroy');\r\n\r\n  this.getState = safe(() => this.api.getState());\r\n\r\n  this.getSchema = safe(() => this.api.getSchema());\r\n\r\n  this.setSchema = safe((schema) => this.api.setSchema(schema));\r\n\r\n  this.saveSchema = safe(() => this.api.saveSchema());\r\n\r\n  this.get = safe((name, strict) => this.api.get(name, strict));\r\n\r\n  this.getDataEditor = safe(() => this.api.getDataEditor());\r\n\r\n  this.getEditor = safe(() => this.api.getEditor());\r\n\r\n  this.getForm = safe((name, strict) => this.api.getForm(name, strict));\r\n\r\n  this.getResultView = safe(() => this.api.getResultView());\r\n\r\n  this.attachEditorContainer = safe((node) => this.api.attachEditorContainer(node));\r\n\r\n  this.attachPreviewContainer = safe((node) => this.api.attachFormContainer(node));\r\n\r\n  this.attachDataContainer = safe((node) => this.api.attachDataContainer(node));\r\n\r\n  this.attachResultContainer = safe((node) => this.api.attachResultContainer(node));\r\n\r\n  this.attachPaletteContainer = safe((node) => this.api.attachPaletteContainer(node));\r\n\r\n  this.attachPropertiesPanelContainer = safe((node) => this.api.attachPropertiesPanelContainer(node));\r\n}\r\n\r\nexport { Playground };"],"names":["Modal","props","useEffect","handleKey","event","key","stopPropagation","onClose","document","addEventListener","removeEventListener","_jsxs","class","children","_jsx","onClick","name","type","EmbedModal","schema","serializeValue","data","fieldRef","useRef","snippet","trim","current","select","href","spellCheck","ref","obj","JSON","stringify","replace","variablesFacet","Facet","define","autocompletionExtension","autocompletion","override","completions","context","variables","state","facet","options","map","v","label","nodeBefore","syntaxTree","resolve","pos","explicit","word","matchBefore","from","to","NO_LINT_CLS","JSONEditor","contentAttributes","placeholder","editorPlaceholder","readonly","emitter","mitt","languageCompartment","Compartment","of","json","tabSizeCompartment","EditorState","tabSize","autocompletionConfCompartment","placeholderLinterExtension","createPlaceholderLinterExtension","container","createState","doc","extensions","basicSetup","lintGutter","linter","jsonParseLinter","keymap","indentWithTab","readOnly","EditorView","updateListener","update","docChanged","emit","value","toString","create","view","setValue","newValue","oldValue","diff","findDiff","dispatch","changes","start","end","insert","text","selection","anchor","length","getValue","setVariables","effects","reconfigure","getView","on","off","attachTo","_container","appendChild","dom","domClasses","body","add","destroy","removeChild","remove","placeholders","querySelectorAll","oldStr","newStr","minLength","Math","min","slice","endOld","endNew","Section","elements","Array","isArray","headerItems","reduce","_","child","bucket","HeaderItem","push","PlaygroundRoot","config","additionalModules","actions","actionsConfig","exporter","exporterConfig","viewerProperties","editorProperties","viewerAdditionalModules","editorAdditionalModules","propertiesPanel","propertiesPanelConfig","apiLinkTarget","onInit","display","displayActions","editorContainerRef","paletteContainerRef","propertiesPanelContainerRef","viewerContainerRef","inputDataContainerRef","outputDataContainerRef","formEditorRef","formViewerRef","inputDataRef","outputDataRef","showEmbed","setShowEmbed","useState","setSchema","setData","load","useCallback","importSchema","inputDataEditor","tabIndex","createDataEditorPlaceholder","outputDataEditor","formViewer","Form","properties","formEditor","FormEditor","renderer","compact","palette","parent","formField","formFields","get","generateInitialDemoData","id","isFunction","initialDemoData","includes","undefined","currentData","newData","getSchema","submitData","_getSubmitData","parse","error","initialSchema","initialData","getSchemaVariables","api","attachDataContainer","node","attachResultContainer","attachFormContainer","attachEditorContainer","attachPaletteContainer","attachPropertiesPanelContainer","strict","getDataEditor","getEditor","getForm","getResultView","saveSchema","getState","handleDownload","download","hideEmbedModal","classNames","title","element","createElement","innerHTML","Playground","rest","classList","handleDrop","fileDrop","files","file","contents","err","safe","fn","args","Error","render","attachPreviewContainer"],"mappings":"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"}